{"version":3,"sources":["components/dialog/edit-filetag-dialog.js","components/context-menu/globalEventListener.js","components/context-menu/context-menu.js","../node_modules/babel-preset-react-app/node_modules/regenerator-runtime/runtime.js","components/dialog/create-folder-dialog.js","components/dialog/zip-download-dialog.js","components/dropdown-menu/item-dropdown-menu.js","../node_modules/parseqs/index.js","../node_modules/component-inherit/index.js","components/system-notification.js","models/group.js","components/main-side-nav.js","components/dialog/about-dialog.js","components/side-nav-footer.js","components/side-panel.js","components/main-panel.js","pages/drafts/drafts-view.js","components/draft-list-view/draft-list-item.js","components/draft-list-view/draft-list-view.js","pages/drafts/draft-content.js","models/activity.js","components/dialog/list-created-files-dialog.js","pages/dashboard/files-activities.js","pages/starred/starred.js","components/dialog/confirm-unlink-device.js","pages/linked-devices/linked-devices.js","models/shared-repo-info.js","components/dialog/perm-select.js","pages/share-admin/libraries.js","models/shared-folder-info.js","pages/share-admin/folders.js","components/dialog/share-link-permission-select.js","pages/share-admin/share-links.js","pages/share-admin/upload-links.js","models/repo.js","components/libs-mobile-thead.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","components/dialog/sort-options.js","pages/shared-libs/shared-libs.js","pages/share-with-ocm/shared-with-ocm.js","pages/share-with-ocm/remote-dir-topbar.js","pages/share-with-ocm/remote-dir-path.js","pages/share-with-ocm/remote-dir-content.js","pages/share-with-ocm/remote-dir-view.js","components/dialog/create-repo-dialog.js","components/toolbar/repo-view-toobar.js","components/dirent-detail/lib-details.js","components/dialog/lib-history-setting-dialog.js","components/dialog/change-repo-password-dialog.js","components/dialog/reset-encrypted-repo-password-dialog.js","components/dialog/label-repo-state-dialog.js","components/dialog/lib-sub-folder-set-user-permission-dialog.js","components/dialog/lib-sub-folder-set-group-permission-dialog.js","components/dialog/lib-sub-folder-permission-dialog.js","components/rename.js","pages/my-libs/mylib-repo-menu.js","components/select-editor/repo-api-token-permission-editor.js","components/dialog/repo-api-token-dialog.js","components/dialog/repo-share-upload-links-dialog.js","components/dialog/lib-old-files-auto-del-dialog.js","pages/my-libs/mylib-repo-list-item.js","pages/my-libs/mylib-repo-list-view.js","components/dialog/guide-for-new-dialog.js","pages/my-libs/my-libs.js","pages/my-libs/my-libs-deleted.js","components/dialog/share-repo-dialog.js","components/shared-repo-list-view/shared-repo-list-item.js","components/shared-repo-list-view/shared-repo-list-view.js","pages/shared-with-all/public-shared-view.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","utils/collab-server.js","components/dialog/lib-decrypt-dialog.js","components/toolbar/view-mode-toolbar.js","components/dialog/create-file-dialog.js","components/toolbar/dir-operation-toolbar.js","components/dialog/move-dirent-dialog.js","components/dialog/copy-dirent-dialog.js","components/dialog/rename-dirent.js","components/toolbar/multiple-dir-operation-toolbar.js","components/toolbar/view-file-toolbar.js","pages/lib-content-view/lib-content-toolbar.js","components/cur-dir-path/dir-path.js","components/dialog/list-tag-dialog.js","components/dialog/update-tag-dialog.js","components/dialog/list-taggedfiles-dialog.js","components/cur-dir-path/dir-tool.js","components/cur-dir-path/index.js","components/dirent-detail/detail-comments-list.js","components/dirent-detail/detail-list-view.js","components/dirent-detail/dirent-details.js","components/dirent-list-view/dirent-none-view.js","models/draft.js","components/dialog/list-repo-drafts-dialog.js","components/dialog/readme-dialog.js","components/repo-info-bar.js","components/dirent-list-view/dirent-list-item.js","components/draggable/dirents-dragged-preview.js","components/dirent-list-view/dirent-list-view.js","components/dir-view-mode/dir-list-view.js","components/dirent-grid-view/dirent-grid-item.js","components/dirent-grid-view/dirent-grid-view.js","components/dir-view-mode/dir-grid-view.js","components/dialog/rename-dialog.js","components/dir-view-mode/dir-column-nav.js","components/dir-view-mode/dir-column-file.js","components/dir-view-mode/dir-column-view.js","pages/lib-content-view/lib-content-container.js","components/file-uploader/upload-list-item.js","components/file-uploader/forbid-upload-list-item.js","components/file-uploader/upload-progress-dialog.js","components/dialog/upload-remind-dialog.js","components/file-uploader/file-uploader.js","components/dialog/copy-move-dirent-progress-dialog.js","pages/lib-content-view/lib-content-view.js","components/dialog/dismiss-group-dialog.js","components/dialog/create-department-repo-dialog.js","components/dialog/rename-group-dialog.js","components/dialog/transfer-group-dialog.js","components/dialog/import-members-dialog.js","components/dialog/manage-members-dialog.js","components/dialog/leave-group-dialog.js","pages/groups/group-view.js","components/toolbar/groups-toolbar.js","components/dialog/create-group-dialog.js","pages/groups/groups-view.js","components/toolbar/invitations-toolbar.js","components/dialog/invite-people-dialog.js","components/dialog/invitation-revoke-dialog.js","pages/invitations/invitations-view.js","components/dialog/new-wiki-dialog.js","components/dialog/wiki-select-dialog.js","components/dialog/wiki-delete-dialog.js","components/wiki-list-view/wiki-list-item.js","components/wiki-list-view/wiki-list-view.js","pages/wikis/wikis.js","components/toolbar/general-toolbar.js","components/main-content-wrapper.js","app.js","models/repo-tag.js","components/dialog/image-dialog.js","components/dialog/add-related-file-dialog.js","components/dialog/list-related-file-dialog.js","components/dialog/related-file-dialogs.js","../node_modules/socket.io-parser/index.js","../node_modules/engine.io-client/lib/xmlhttprequest.js","../node_modules/engine.io-client/lib/globalThis.browser.js","../node_modules/engine.io-client/lib/transport.js","../node_modules/react-modal/lib/helpers/safeHTMLElement.js","components/dialog/create-tag-dialog.js","components/dialog/share-admin-link.js","../node_modules/parseuri/index.js","../node_modules/socket.io-parser/node_modules/isarray/index.js","../node_modules/socket.io-parser/is-buffer.js","../node_modules/socket.io-client/lib/manager.js","../node_modules/engine.io-client/lib/transports/index.js","../node_modules/engine.io-client/lib/transports/polling.js","../node_modules/has-binary2/index.js","../node_modules/yeast/index.js","../node_modules/indexof/index.js","../node_modules/socket.io-client/lib/socket.js","../node_modules/socket.io-client/lib/on.js","../node_modules/component-bind/index.js","../node_modules/react-modal/lib/helpers/tabbable.js","../node_modules/react-modal/lib/helpers/ariaAppHider.js","../node_modules/react-modal/lib/helpers/portalOpenInstances.js","../node_modules/socket.io-client/lib/index.js","components/wiki-markdown-viewer.js","../node_modules/@seafile/react-image-lightbox/dist/index.es.js","../node_modules/react-modal/lib/index.js","components/tree-view/tree-node-view.js","components/tree-view/tree-view.js","components/empty-tip.js","../node_modules/socket.io-client/lib/url.js","../node_modules/debug/src/debug.js","../node_modules/ms/index.js","../node_modules/socket.io-parser/binary.js","../node_modules/engine.io-client/lib/index.js","../node_modules/engine.io-client/lib/socket.js","../node_modules/has-cors/index.js","../node_modules/engine.io-client/lib/transports/polling-xhr.js","../node_modules/engine.io-parser/lib/keys.js","../node_modules/has-binary2/node_modules/isarray/index.js","../node_modules/arraybuffer.slice/index.js","../node_modules/after/index.js","../node_modules/engine.io-parser/lib/utf8.js","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../node_modules/blob/index.js","../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../node_modules/engine.io-client/lib/transports/websocket.js","../node_modules/to-array/index.js","../node_modules/backo2/index.js","../node_modules/react-modal/lib/components/Modal.js","../node_modules/react-modal/lib/components/ModalPortal.js","../node_modules/react-modal/lib/helpers/focusManager.js","../node_modules/react-modal/lib/helpers/scopeTab.js","../node_modules/warning/warning.js","../node_modules/exenv/index.js","../node_modules/react-modal/lib/helpers/classList.js","../node_modules/react-modal/lib/helpers/bodyTrap.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","components/context-menu/actions.js","components/context-menu/helpers.js","../node_modules/debug/src/browser.js","../node_modules/component-emitter/index.js","../node_modules/engine.io-parser/lib/browser.js"],"names":["require","TagItem","props","onMouseEnter","setState","showSelectedTag","onMouseLeave","getRepoTagIdList","repoTagIdList","fileTagList","map","fileTag","push","repo_tag_id","onEditFileTag","repoID","repoTag","filePath","indexOf","id","seafileAPI","addFileTag","then","onFileTagChanged","catch","error","errMessage","Utils","getErrorMsg","toaster","danger","i","length","deleteFileTag","state","this","drakColor","getDarkColor","color","className","onClick","style","backgroundColor","name","React","Component","TagList","getRepoTagList","listRepoTags","res","repotagList","data","repo_tags","forEach","item","RepoTag","toggle","toggleCancel","gettext","href","createNewTag","EditFileTagDialog","isCreateRepoTagShow","isListRepoTagShow","onRepoTagCreated","repoTagID","isOpen","onClose","handleShowEvent","event","callbacks","hasOwnProp","show","handleHideEvent","hide","register","showCallback","hideCallback","uniqueId","unregister","canUseDOM","window","addEventListener","MENU_SHOW","MENU_HIDE","ContextMenu","registerHandlers","document","handleOutsideClick","handleHide","handleKeyNavigation","unregisterHandlers","removeEventListener","handleShow","e","detail","isVisible","position","x","y","currentObject","menuList","callIfExists","onShowMenu","onHideMenu","menu","contains","target","hideMenu","handleMouseLeave","preventDefault","hideOnLeave","handleContextMenu","keyCode","getMenuPosition","menuStyles","top","left","innerWidth","innerHeight","rect","getBoundingClientRect","height","width","getRTLMenuPosition","onMenuItemClick","stopPropagation","operation","getEventData","onContextMenu","listenId","listener","wrapper","requestAnimationFrame","setTimeout","rtl","opacity","pointerEvents","role","display","ref","menuItem","index","data-operation","key","value","runtime","exports","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","CreateForder","handleChange","trim","isSubmitBtnActive","childName","handleSubmit","newName","checkDuplicatedName","replace","HTMLescape","path","parentPath","onAddFolder","handleKeyPress","addFolderCancel","newInput","createRef","focus","setSelectionRange","for","innerRef","input","onKeyPress","onChange","disabled","interval","ZipDownloadDialog","queryZipProgress","zipToken","zipProgress","total","zipped","toFixed","clearInterval","toggleDialog","location","fileServerRoot","errorMsg","isLoading","cancelZipTask","token","getShareLinkDirentsZipTask","getShareLinkZipTask","zipDownload","setInterval","Content","ItemDropdownMenu","isItemMenuShow","unfreezeItem","onDropdownToggleClick","toggleOperationMenu","freezeItem","isHandleContextMenuEvent","listenerId","getMenuList","nextProps","toggleClass","tagName","title","data-toggle","aria-expanded","divider","tag","defaultProps","encode","str","encodeURIComponent","decode","qs","qry","pairs","split","l","pair","decodeURIComponent","a","b","SystemNotification","close","isClosed","navigator","cookieEnabled","date","Date","cookies","cookie","infoIDExist","newInfoID","curNoteID","setTime","getTime","toGMTString","siteRoot","len","curNoteMsg","Group","owner","admins","avatar_url","created_at","parent_group_id","wiki_enabled","repos","group_quota","group_quota_usage","MainSideNav","grpsExtend","groupsExtended","loadGroups","shExtend","sharedExtended","_this","listGroups","groupList","groupsHeight","listHeight","groupItems","sort","toLowerCase","tabItemClick","param","uploader","isUploadProgressDialogShow","totalProgress","confirm","onDTableClick","url","dtableWebServer","open","getActiveClass","tab","currentTab","closeSideBar","adminHeight","to","aria-hidden","linksNavItem","canGenerateShareLink","canGenerateUploadLink","canAddRepo","customNavItems","idx","link","desc","icon","showActivity","isDocs","isPro","canViewOrg","renderSharedGroups","enableOCM","canPublishRepo","draftCounts","pill","canInvitePeople","renderSharedAdmin","renderCustomNavItems","AboutDialog","onCloseAboutDialog","renderExternalAboutLinks","additionalAboutDialogLinks","lang","aboutDialogCustomHtml","dangerouslySetInnerHTML","__html","src","mediaUrl","logoPath","logoHeight","logoWidth","siteTitle","alt","seafileVersion","getFullYear","SideNavFooter","onAboutDialogToggle","isAboutDialogShow","renderExternalAppLinks","additionalAppBottomLinks","sideNavFooterCustomHtml","rel","enableTC","SidePanel","isSidePanelClosed","onCloseSidePanel","MainPanel","children","DraftsView","moment","locale","DraftListItem","isItemFreezed","isMenuIconShow","highlight","onFreezedItem","onUnfreezedItem","onDeleteHandler","draft","onPublishHandler","origin_repo_id","draft_file_path","fileName","getFileName","draftUrl","libraryUrl","repo_name","localTime","utc","updated_at","toDate","fromNow","iconUrl","getFileIconUrl","status","DraftListView","drafts","draftList","DraftContent","draft_name","editUtilities","deleteDraft","updateDraftsList","msg_s","success","publishDraft","getDrafts","isLoadingDraft","Acticity","json","repo_id","obj_type","commit_id","author_email","author_name","author_contact_email","time","op_type","createdFilesCount","createdFilesList","days","old_repo_name","includes","old_path","old_name","endsWith","draft_id","ListCreatedFileDialog","activity","fileURL","encodePath","serviceURL","fileLink","bind","app","config","FileActivitiesContent","isDesktop","items","isLoadingMore","desktopThead","mobileThead","ActivityItem","onListCreatedFilesToggle","isListCreatedFiles","op","details","moreDetails","userProfileURL","libURL","libLink","smallLibLink","fileCount","firstLine","isDraft","filePathLink","dirURL","dirLink","dirPathLink","isShowDate","lastEventTime","isSame","colSpan","format","datetime","is","FilesActivities","mergePublishEvents","events","curPathList","oldPathList","actuallyEvents","splice","mergeFileCreateEvents","multiFilesActivity","isFulfilCondition","Activity","handleScroll","hasMore","clientHeight","scrollHeight","scrollTop","getMore","isFirstLoading","currentPage","avatarSize","listActivities","onScroll","loading","emptyTip","TableBody","getThumbnails","filter","imageCheck","obj_name","repo_encrypted","getThumbnail","curItem","createThumbnail","encoded_thumbnail_src","listItems","item_icon_url","getDefaultLibIconUrl","is_dir","getFolderIconUrl","encoded_path","thumbnail_url","dirent_view_url","mtime_relative","mtime","Item","toggleOpMenu","isOpMenuOpen","handleMouseOver","showOpIcon","handleMouseOut","unstar","unstarItem","unstarred","visitItem","navigate","opClasses","desktopItem","onMouseOver","onMouseOut","aria-label","mobileItem","Starred","listStarredItems","starred_item_list","ConfirmUnlinkDevice","executeOperation","isChecked","onInputChange","checked","check","isOpIconShown","isConfirmUnlinkDialogOpen","handleClick","is_desktop_client","unlinkDevice","wipeDevice","platform","device_id","unlinked","msg","device_name","last_login_ip","last_accessed","Fragment","LinkedDevices","listLinkedDevices","SharedRepoInfo","share_type","share_permission","modifier_name","modifier_email","modifier_contact_email","encrypted","is_admin","user_name","user_email","contact_email","group_id","group_name","PermSelect","switchOption","currentOption","changePerm","currentPerm","options","permissions","htmlFor","sharePerms","sharePermsExplanation","sortByName","sortOrder","sortItems","sortBy","sortIcon","table","togglePermSelectDialog","isPermSelectDialogOpen","permission","user","updateRepoSharePerm","unshare","unshareRepo","unshared","message","showAdmin","assign","shareTo","getLibIconUrl","iconTitle","getLibIconTitle","repoUrl","shareType","isTextMode","isEditIconShow","currentPermission","onPermissionChanged","ShareAdminLibraries","sortRepos","listSharedRepos","SharedFolderInfo","folder_name","unshareFolder","postData","updateFolderSharePerm","is_readonly","getFolderIconTitle","folderUrl","ShareAdminFolders","_sortItems","comparator","compareTwoWord","listSharedFolders","ShareLinkPermissionSelect","getShareLinkPermissionObject","text","sortByTime","columnWidths","onRemoveLink","updatePermissionOptions","itemType","repo_folder_permission","permissionOptions","getShareLinkPermissionList","can_edit","getShareLinkPermissionStr","toggleLinkDialog","isLinkDialogOpen","viewLink","removeLink","renderExpiration","expire_date","expire_time","is_expired","permissionDetails","updateShareLink","JSON","stringify","objUrl","view_cnt","ShareAdminShareLinks","deleteShareLink","uploadItem","listUserShareLinks","ShareLink","ShareAdminUploadLinks","deleteUploadLink","listUserUploadLinks","UploadLink","Repo","size_original","size","bytesToSize","owner_name","owner_email","owner_contact_email","last_modified","starred","storage_name","LibsMobileThead","_slicedToArray","arr","Array","isArray","_arr","_n","_d","_e","_s","_i","unsupportedIterableToArray","SortOptions","sortOptions","sortBySize","share","isShowSharedDialog","leaveShare","request","leaveShareRepo","leaveShareGroupOwnedRepo","toggleShareDialog","onStarRepo","repoName","isStarred","starItem","visitRepo","repoURL","icon_url","icon_title","iconVisibility","shareIconClassName","leaveShareIconClassName","shareRepoUrl","itemName","itemPath","repoEncrypted","enableDirPrivateShare","userPerm","isAdmin","SharedLibraries","save","toggleSortOptionsDialog","isSortOptionsDialogOpen","load","listRepos","repoList","provider_id","from_user","from_server_url","ctime","SharedWithOCM","deleteOCMShareReceived","listOCMSharesReceived","ocm_share_received_list","MainPanelTopbar","isAdminPanel","DirPath","onPathClick","turnPathToLink","pathList","nodePath","data-path","currentPath","pathElem","onTabNavClick","DirentItem","openFolder","dirent","downloadDirent","getDirentIcon","is_file","DirContent","direntList","deleteDirent","fromSystemRepo","Dirent","DirView","loadDirentList","direntPath","joinPath","providerID","listOCMRepoDir","dirent_list","user_perm","history","replaceState","getOCMRepoDownloadURL","openFileInput","fileInput","current","click","onFileInputChange","files","file","getOCMRepoUploadURL","formData","FormData","append","post","fileObj","newDirent","dirs","isNewFolderDialogOpen","CreateRepoDialog","handleRepoNameChange","handlePassword1Change","password1","handlePassword2Change","password2","validateInputParams","repoData","prepareRepoData","libraryType","onCreateRepo","onCreateToggle","onPermissionChange","handleStorageInputChange","selectedItem","storage_id","handlelibraryTemplatesInputChange","library_template","onEncrypted","encrypt","password","repo","passwd","storages","libraryTemplates","repoPasswordMinLength","defaultValue","label","enableEncryptedLibrary","autoComplete","RepoViewToolbar","isCreateRepoDialogShow","toggleMore","onShowSidePanel","LibDetail","getFileCounts","getRepoInfo","file_count","currentRepo","smallIconUrl","bigIconUrl","closeDetails","LibHistorySetting","submit","keepDays","autoHistory","expireDays","test","setRepoHistoryLimit","keep_days","errorInfo","num","setLimitDays","allHistory","noHistory","getRepoHistoryLimit","enableRepoHistorySetting","onKeyDown","ChangeRepoPasswordDialog","handleOldPasswordInputChange","oldPassword","handleNewPasswordInputChange","newPassword","handleNewPasswordAgainInputChange","newPasswordAgain","formSubmit","submitBtnDisabled","changeEncryptedRepoPassword","centered","generateDialogTitle","action","ResetEncryptedRepoPasswordDialog","showLoading","showSuccess","showError","resetAndSendEncryptedRepoPassword","response","error_msg","contactEmail","LabelRepoStateDialog","handleInputChange","inputValue","labels","join","addNewRepoLabels","formErrorMsg","existingLabels","getAllRepoSnapshotLabels","isMulti","placeholder","UserItem","isOperationShow","deleteUserFolderPermission","onChangeUserFolderPerm","folder_path","showPath","LibSubFolderSetUserPermissionDialog","handleUserSelectChange","option","selectedUsers","setPermission","addUserFolderPerm","folderPath","users","email","isDepartmentRepo","addDepartmentRepoUserFolderPerm","failed","userFolderPermItems","concat","refs","userSelect","clearSelect","deleteUserFolderPermItem","deleteDepartmentRepoUserFolderPerm","deleteUserFolderPerm","deletedItem","userEmail","updateDepartmentRepoUserFolderPerm","updateUserFolderPerm","onSetSubFolder","toggleFileChooser","showFileChooser","toggleSubFolder","handleFileChooserSubmit","onRepoItemClick","listDepartmentRepoUserFolderPerm","listUserFolderPerm","mode","onDirentItemClick","thead","onSelectChange","addonType","GroupItem","deleteGroupPermissionItem","onChangeGroupPermission","NoOptionsMessage","innerProps","margin","textAlign","LibSubFolderSerGroupPermissionDialog","handleSelectChange","selectedOption","loadOptions","shareableGroups","listGroupPermissionItems","listDepartmentRepoGroupFolderPerm","listGroupFolderPerm","groupPermissionItems","addGroupFolderPerm","addDepartmentRepoGroupFolderPerm","deleteDepartmentRepoGroupFolderPerm","deleteGroupFolderPerm","updateDepartmentRepoGroupFolderPerm","updateGroupFolderPerm","updateGroupPermission","groupID","sharedItem","sharedItemGroupID","maxMenuHeight","inputId","components","LibSubFolderPermissionDialog","activeTab","renderContent","pills","tabId","folderName","maxWidth","Rename","nativeEvent","stopImmediatePropagation","onRenameConfirm","validateInput","isValid","onRenameCancel","renameInput","hasSuffix","endIndex","lastIndexOf","MylibRepoMenu","dataset","generatorOperations","showResetPasswordMenuItem","enableResetEncryptedRepoPassword","isEmailConfigured","operations","folderPermEnabled","isPC","enableRepoSnapshotLabel","translateOperations","translateResult","unshift","RepoAPITokenPermissionEditor","onHideSelect","isEditing","onEditPermission","onSelectHandler","optionTranslation","captureMenuScroll","APITokenItem","onDeleteAPIToken","deleteAPIToken","app_name","onUpdateAPIToken","updateAPIToken","onCopyAPIToken","api_token","copy","RepoAPITokenDialog","listAPITokens","listRepoAPITokens","apiTokenList","repo_api_tokens","handleError","appName","addAPIToken","addRepoAPIToken","deleteRepoAPIToken","updateRepoAPIToken","duration","renderAPITokenList","minHeight","maxHeight","onRepoAPITokenToggle","RepoShareUploadLinkItem","onDeleteLink","deleteItem","creator_name","RepoShareUploadLinksDialog","getItems","listRepoShareLinks","listRepoUploadLinks","repoShareUploadLinkList","deleteRepoShareLink","deleteRepoUploadLink","forDialog","LibOldFilesAutoDelDialog","daysNeedTobeSet","autoDelDays","isAutoDel","setRepoOldFilesAutoDelDays","updateRadioCheck","getRepoOldFilesAutoDelDays","auto_delete_days","MylibRepoListItem","isOpIconShow","onShareToggle","onDeleteToggle","onRenameToggle","onTransferToggle","onHistorySettingToggle","onChangePasswordToggle","onResetPasswordToggle","onFolderPermissionToggle","onLabelToggle","onAPITokenToggle","toggleRepoShareUploadLinksDialog","toggleOldFilesAutoDelDialog","isRenaming","onRepoClick","isShareDialogShow","isDeleteDialogShow","isTransferDialogShow","isHistorySettingDialogShow","isChangePasswordDialogShow","isResetPasswordDialogShow","isLabelRepoStateDialogOpen","isFolderPermissionDialogShow","isAPITokenDialogShow","isRepoShareUploadLinksDialogOpen","isOldFilesAutoDelDialogOpen","renameRepo","onRenameRepo","onTransferRepo","transferRepo","onDeleteRepo","deleteRepo","isRepoDeleted","renderPCUI","renderMobileUI","query","MylibRepoListView","sortRepoList","renderRepoListView","showStorageBackend","GuideForNewDialog","siteName","MyLibraries","createMineRepo","newRepo","repo_size","isShowDetails","onRepoDetails","toggleGuideForNewDialog","pageOptions","guideEnabled","isGuideForNewDialogOpen","onSearchedClick","MyLibsDeleted","refreshDeletedRepoList","deletedRepoList","listDeletedRepo","trashReposExpireDays","DeletedRepoTable","deletedRepos","DeletedRepoItem","hideRestoreMenu","restoreDeletedRepo","del_time","ShareRepoListItem","onRepoSelect","padding","sharePermission","ShareRepoDialog","selectedRepoList","onRepoSelectedHandler","onCloseDialog","onShareRepoDialogClose","SharedRepoListItem","clickOperationMenuToggle","getRepoComputeParams","libPath","onItemRenameToggle","onItemFolderPermissionToggle","onItemDetails","onItemShare","onItemUnshare","onItemRename","isFolderPermissionDialogOpen","onItemDeleteToggle","onItemDelete","currentGroup","deleteGroupOwnedLibrary","translateMenuItem","isStaff","username","isRepoOwner","isDeparementOnwerGroupMember","generatorMobileMenu","isSystemStaff","generatorPCMenu","shareOperation","unshareOperation","deleteOperation","isGroupOwnedRepo","SharedRepoListView","getSortMetaData","some","isShowTableThread","hasNextPage","PublicSharedView","createPublicRepo","addRepoItem","onCreateRepoToggle","selectOwnedRepoToPublic","isExist","repoIndex","newRepoList","onAddRepoToggle","isCreateMenuShow","onSelectRepoToggle","isSelectRepoDialpgShow","canAddPublicRepo","asyncGeneratorStep","gen","_next","_throw","socket","seafileCollabServer","io","collabServer","emit","on","off","LibDecryptDialog","setRepoDecryptPassword","onLibDecryptDialog","ViewModeToolbar","switchViewMode","currentMode","baseClass","CreateFile","isDuplicated","onAddFile","handleCheck","pos","p","substring","fileType","isdraft","addFileCancel","DirOperationToolbar","toggleMobileOpMenu","isMobileOpMenuOpen","hideOperationMenu","isUploadMenuShow","targetRect","bottom","operationMenuStyle","onUploadClick","onUploadFile","onUploadFolder","onCreateClick","onShareClick","onCreateFolderToggle","isCreateFolderDialogShow","onCreateFileToggle","isCreateFileDialogShow","onCreateMarkdownToggle","onCreateExcelToggle","onCreatePPTToggle","onCreateWordToggle","dirPath","getFolderName","content","showShareBtn","isSupportUploadFolder","MoveDirent","isMutipleOperation","moveItems","moveItem","selectedPath","selectedDirentList","direntPaths","moveDirentPath","flag","onItemsMove","onItemMove","onCancelMove","nextState","CopyDirent","copyItems","copyItem","copyDirentPath","onItemsCopy","onItemCopy","onCancelCopy","onRename","changeState","MultipleDirOperationToolbar","onMoveToggle","isMoveDialogShow","onCopyToggle","isCopyDialogShow","onItemsDelete","onItemsDownload","isDir","URLDecorator","getUrl","useGoFileserver","isZipDialogOpen","closeZipDialog","checkDuplicatedNameInList","onPermissionItem","showLibContentViewDialogs","isPermissionDialogOpen","onCommentItem","showDirentDetail","getDirentMenuList","currentRepoInfo","opList","getDirentOperationList","list","showShareDialog","isRenameDialogOpen","listFileTags","lockFile","unlockFile","openRelatedFilesDialog","onHistory","onAccessLog","onOpenViaClient","getDirentPath","lockfile","is_locked","updateDirent","unSelectDirent","unlockfile","listRelatedFiles","relatedFiles","related_files","showRelatedFileDialog","viewMode","showEditFileTagDialog","file_tags","file_tag_id","onMenuFileTagChanged","onFilesTagChanged","onRelatedFileChange","multiFileTagList","ViewFileToolbar","onEditClick","onNewDraft","createDraft","onDraftHover","isDraftMessageShow","isMoreMenuShow","onEditFileTagToggle","isEditTagDialogShow","onListRelatedFileToggle","isRelatedFileDialogShow","onHistoryClick","historyUrl","filePermission","hasDraft","placement","fileTags","LibContentToolbar","isViewFile","onSideNavMenuClick","isLibView","searchPlaceholder","isDirentSelected","tabName","tagTitle","pathPrefix","showName","zIndex","TagListItem","onTagUpdate","onListTaggedFiles","fileTranslation","ListTagDialog","onListTagCancel","onCreateRepoTag","repo_tag","onUpdateRepoTag","UpdateTagDialog","inputNewName","selectNewcolor","newColor","updateTag","tag_id","currentTag","updateRepoTag","updateUsedRepoTags","deleteTagClick","deleteRepoTag","onDeleteTag","onDeleteRepoTag","colorList","defaultChecked","ListTaggedFilesDialog","TaggedFile","parent_path","filename","onDeleteTaggedFile","taggedFile","fileTagID","getTaggedFiles","file_deleted","listTaggedFiles","taggedFileList","tagged_files","active","unix","DirTool","onShowListRepoTag","isRepoTagDialogShow","isUpdateRepoTagShow","isListTaggedFileShow","onCloseRepoTagDialog","onCreateRepoTagToggle","onUpdateRepoTagToggle","onListTaggedFileToggle","isFile","isMarkdownFile","trashUrl","CurDirPath","DetailCommentList","handleCommentChange","comment","listComments","commentsList","comments","addComment","postComment","onSubmit","addParticipant","toBeAddedParticipant","addFileParticipants","onParticipantsChange","resolveComment","updateComment","deleteComment","editComment","commentID","newComment","listRepoRelatedUsers","user_list","relatedUsers","checkParticipant","fileParticipantList","participant","renderUserSuggestion","search","highlightedDisplay","focused","oldTime","participants","showIconTip","defaultStyle","trigger","displayTransform","renderSuggestion","defaultMentionStyle","onAdd","appendSpaceOnAdd","CommentItem","convertComment","mdFile","processor","process","html","String","toggleDropDownMenu","dropdownOpen","toggleEditComment","editable","onCommentClick","nodeName","preNode","previousSibling","nodeType","nodeValue","renderInfo","clos","rows","warp","resolved","DetailListView","getDirentPostion","repoInfo","isEditFileTagShow","direntType","direntDetail","relatedFile","DirentDetail","loadDirentInfo","updateDetailView","getDirName","listDir","folderDirent","parent_dir","getFileInfo","file_tag","FileTag","listParticipants","getDirInfo","listFileParticipants","participant_list","renderNavItem","showTab","classnames","renderHeader","direntName","onItemDetailsClose","renderDetailBody","direntDetailPanelTab","tabs","DirentNodeView","onCreateNewFile","isDirentListLoading","Draft","created","createdStr","ownerNickname","owner_nickname","originRepoID","draftFilePath","ListRepoDraftsDialog","onDeleteDraftItem","editorUtilities","listRepoDrafts","draftItem","DraftItem","ReadmeDialog","readmeContent","getFileDownloadLink","getFileContent","markdownContent","showTOC","scriptSource","RepoInfoBar","toggleDrafts","showRepoDrafts","toggleReadme","showReadmeDialog","usedRepoTags","readmeMarkdown","usedRepoTag","parseInt","DirentListItem","isDragTipShow","onItemSelected","onItemStarred","onDirentClick","onItemClick","isRenameing","showImagePopup","closeSharedDialog","onMobileMenuItemClick","getAttribute","onItemDownload","onItemMoveToggle","onItemCopyToggle","onUnlockItem","onLockItem","lockName","onTagTooltipToggle","isShowTagTooltip","destRepo","onItemDragStart","isIEBrower","dataTransfer","effectAllowed","onShowDirentsDraggablePreview","setDragImage","empty_content","selectedList","nodeRootPath","nodeDirent","nodeParentPath","setData","drag_icon","dragStartItemData","onItemDragEnter","isDropTipshow","onItemDragOver","dropEffect","onItemDragLeave","onItemDragDrop","getData","parse","draggedItem","dropItemData","onItemMouseDown","onItemContextMenu","renderItemOperation","isHasPermissionToShare","isSelected","getDirentItemMenuList","activeDirent","dirHref","fileHref","toolTipID","MD5","trClass","lockedInfo","lock_owner_name","draggable","onDragStart","onDragEnter","onDragOver","onDragLeave","onDrop","onMouseDown","data-op","DirentsDraggedPreview","handleDragEnd","element","onHideDirentsDraggablePreview","handleDragOver","clientY","clientX","handleDrop","inlineStyle","documentElement","overflow","DirentListView","prepareImageItem","useThumbnail","isGIF","substr","thumbnailSizeForOriginal","imageItems","isImagePopupOpen","imageIndex","moveToPrevImage","imageItemsLength","prevState","moveToNextImage","closeImagePopup","selectedDirentNames","isProgressDialogShow","downloadItems","onCloseZipDownloadDialog","button","handleContextClick","touches","pageX","pageY","posX","posY","showMenuConfig","showMenu","onContainerClick","onContainerMouseDown","onContainerContextMenu","TextTranslation","NEW_FOLDER","NEW_FILE","persist","MOVE","COPY","DOWNLOAD","DELETE","onContainerMenuItemClick","onDirentsMenuItemClick","onThreadMouseDown","onThreadContextMenu","setDirentItemRef","direntItems","getDirentIndex","isContextmenu","onTableDragEnter","enteredCounter","isListDropTipShow","onTableDragOver","onTableDragLeave","tableDrop","isShowDirentsDraggablePreview","clickedDirent","currentItemRef","onAllItemSelected","isAllItemSelected","dragStartPosition","DirListView","isRepoInfoBarShow","DirentGridItem","isGridSelected","onGridItemClick","onItemLinkClick","onGridItemDragStart","onGridItemDragEnter","isGridDropTipShow","onGridItemDragOver","onGridItemDragLeave","onGridItemDragDrop","onGridItemMouseDown","getFileUrl","fileUrlArr","onGridItemContextMenu","fileUrl","gridClass","gridIcon","DirentGridView","isRenameDialogShow","onGridContainerMouseDown","gridContainerClick","isDirentDetailShow","onGridContainerContextMenu","isGridItemFreezed","DirGridView","onRenameNode","currentNode","DirColumnNav","onNodeClick","node","opNode","showNodeImagePopup","onAddFolderToggle","onAddFileToggle","onDeleteNode","onOpenFile","root","treeData","isAddFileDialogShow","isAddFolderDialogShow","onAddFolderNode","onAddFileNode","newUrl","parentNode","imageNames","isNodeImagePopupOpen","imageNodeItems","prepareImageItems","prepareItem","closeNodeImagePopup","stopTreeScrollPropagation","isNodeMenuShow","flex","navRate","select","inResizing","isTreeDataLoading","repoPermission","onNodeExpanded","onNodeCollapse","onUnFreezedItem","DirColumnFile","goDraftPage","hash","isFileLoadedErr","isTOCShow","isFileLoading","lastModified","latestContributor","onLinkClick","DirColumnView","onResizeMouseUp","setCookie","onResizeMouseDown","containerWidth","viewModeContainer","clientWidth","onResizeMouseMove","sizeNavWidth","rate","getCookie","cookiename","c","onResizeMove","mainFlex","onMouseMove","onMouseUp","LibContentContainer","onMainNavBarClick","closeDirentDetail","currentDirent","checkCurrentDirent","deletedDirent","onItemsScroll","onListContainerScroll","updateDetail","pathExist","isAllDirentSelected","onAllDirentSelected","UPLOAD_UPLOADING","UPLOAD_ERROR","UPLOAD_ISSAVING","UPLOAD_UPLOADED","UploadListItem","onUploadCancel","resumableFile","onUploadRetry","formatFileSize","uploadState","remainingTime","isSaved","progress","Math","round","newFileName","isUploading","aria-valuenow","aria-valuemin","aria-valuemax","formatTime","ForbidUploadListItem","maxUploadFileSize","UploadProgressDialog","onCancelAllUploading","onMinimizeUpload","isMinimized","onCloseUpload","onCloseUploadDialog","uploadBitrate","formatBitRate","uploadedMessage","uploadingMessage","uploadingOptions","uploadedOptions","allFilesUploaded","retryFileList","onUploadRetryAll","forbidUploadFileList","uploadFileList","UploadRemindDialog","cancelFileUpload","replaceRepetitionFile","uploadFile","currentResumableFile","FileUploader","componentWillUnmount","onbeforeunload","dragAndDrop","resumable","disableDropOnDocument","bindCallbackHandler","minFileSizeErrorCallback","fileTypeErrorCallback","maxFilesErrorCallback","opts","maxFileSizeErrorCallback","bindEventHandler","onChunkingComplete","onFileAdded","filesAddedComplete","onFileProgress","onFileUploadSuccess","onProgress","onComplete","onPause","onFileRetry","onFileError","onError","onBeforeCancel","onCancel","errorCount","maxFiles","maxNumberOfFilesForFileupload","relativePath","relative_path","hasRepetition","isUploadRemindDialogShow","setUploadFileList","getFileServerUploadLink","resumableUpload","isUploadLinkLoaded","upload","getFileUploadedBytes","uploadedBytes","blockSize","resumableUploadFileBlockSize","offset","floor","markChunksCompleted","registerGlobalVariable","getBitrate","uniqueIdentifier","lastSize","loaded","now","timestamp","timeDiff","bitrateInterval","currentTime","dir_name","notifiedFolders","getFileServerErrorMessage","errorMessage","setHeaders","chunkSize","getOpt","fileSize","startByte","endByte","min","encodeURI","setQuery","generateUniqueIdentifier","webkitRelativePath","onFileUpload","uploadInput","removeAttribute","onFolderUpload","setAttribute","uploadingItem","cancel","retryUploadFile","bootstrap","firedRetry","resumableObj","getUpdateLink","Resumablejs","filetypes","maxFileSize","testMethod","testChunks","headers","withCredentials","simultaneousUploads","fileParameterName","forceChunkSize","maxChunkRetries","minFileSize","assignBrowse","enableDropOnDocument","CopyMoveDirentProgressDialog","asyncOperationProgress","asyncOperatedFilesLength","progressStyle","lineHeight","LibContentView","toggleDirentDetail","onpopstate","showFile","onRepoUpdateEvent","parseFloat","lastModifyTime","dirID","updataColumnMarkdownData","dirMetaData","updateReadmeMarkdown","last_modifier_name","is_draft","has_draft","draftID","loadDirData","watchRepo","getRepoDraftCounts","draft_counts","loadSidePanel","showDir","tree","addResponseListToNode","loadNodeAndParentsByPath","isSessionExpired","resetShowLength","isNeedUpdateHistoryState","pushState","errMsg","markdownItem","sortDirents","dir_id","itemsShowLength","curItemPath","updateMoveCopyTreeNode","nodeChildrenNames","clone","getNodeByPath","addNodeToTree","cancelCopyMoveDirent","taskId","asyncCopyMoveTaskId","cancelCopyMoveOperation","currentMoveItemName","currentMoveItemPath","onMoveProgressDialogToggle","isCopyMoveProgressDialogShow","onMoveItems","destDirentPath","asyncOperationType","dirNames","getSelectedDirentNames","getSelectedDirentPaths","moveDir","task_id","getAsyncCopyMoveProgress","deleteTreeNodes","moveDirents","getMoveSuccessMessage","getMoveFailedMessage","onCopyItems","copyDir","getCopySuccessfulMessage","getCopyFailedMessage","onDeleteItems","deleteMutipleDirents","deleteDirents","createDir","addDirent","createFile","paths","getPaths","isWeChat","resetSelected","expandNode","isInternalMarkdownLink","getPathFromInternalMarkdownLink","isInternalDirLink","getPathFromInternalDirLink","onMainPanelItemRename","renameItem","onMainPanelItemDelete","onRenameTreeNode","onDeleteTreeNode","renameDir","renameItemAjaxCallback","renameFile","onMoveItem","moveToDirentPath","dirName","deleteTreeNode","moveDirent","onCopyItem","copyToDirentPath","loadTreeNodeByPath","showColumnMarkdownFile","onDirentSelected","direntObject","createDirent","renameDirent","newDirentPath","isChildPath","oldName","isAncestorPath","newPath","renameAncestorPath","direntNames","recaculateSelectedStateAfterDirentDeleted","paramKey","paramValue","newDirentList","isLoaded","isExpanded","with_parents","results","parentDir","isLoadFailed","onTreeNodeClick","collapseNode","treeHelper","w","onTreeNodeCollapse","onTreeNodeExpanded","createTreeNode","addNodeToParentByPath","renameTreeNode","renameNodeByPath","deleteNodeByPath","deleteNodeListByPaths","moveTreeNode","moveToPath","moveToRepo","moveNodeByPath","copyTreeNode","copyToPath","copyNodeByPath","nodeList","TreeNode","addChildren","selectedDirent","names","libNeedDecrypt","onToolbarFileTagChanged","onToolbarRelatedFileChange","deletedTagID","buildTree","oldonpopstate","RepoInfo","lib_need_decrypt","unwatchRepo","queryAsyncOperationProgress","successful","args","arguments","apply","deleteDir","deleteItemAjaxCallback","deleteFile","isVirtual","is_virtual","direntItemsList","onMenuClick","DismissGroupDialog","dismissGroup","that","deleteGroup","onGroupChanged","showDismissGroupDialog","toggleDismissGroupDialog","RenameGroupDialog","handleGroupNameChange","newGroupName","renameGroup","loadGroup","toggleRenameGroupDialog","handleKeyDown","currentGroupName","showRenameGroupDialog","TransferGroupDialog","transferGroup","toggleTransferGroupDialog","ImportMembersDialog","toggleImportMembersDialog","fileInputRef","importMembersInBatch","groupImportMembersExtraMsg","ManageMembersDialog","listGroupMembers","page","perPage","groupMembers","members","addGroupMember","emails","addGroupMembers","newMembers","toggleItemFreezed","isFreezed","toggleManageMembersDialog","changeMember","targetMember","deleteMember","isOwner","Member","onChangeUserRole","setGroupAdmin","deleteGroupMember","translateRole","roles","deleteAuthority","scope","currentRole","onRoleChanged","PureComponent","LeaveGroupDialog","leaveGroup","quitGroup","toggleLeaveGroupDialog","GroupView","getGroup","getEmptyTip","isDepartmentGroup","loadRepos","listGroupRepos","groupOwnerType","groupId","createGroupOwnedLibrary","createGroupRepo","group","unshareRepoToGroup","renameGroupOwnedLibrary","toggleGroupDropdown","showGroupDropdown","showTransferGroupDialog","showImportMembersDialog","notify","importGroupMembersViaFile","showManageMembersDialog","isLeaveGroupDialogOpen","toggleGroupMembersPopover","showGroupMembersPopover","isShowSettingIcon","useRate","hideArrow","GroupsToolbar","canAddGroup","toggleAddGroupModal","CreateGroupDialog","handleGroupChange","groupName","handleSubmitGroup","createGroup","onCreateGroup","showAddGroupModal","RepoListViewPanel","isShowRepoOwner","GroupsView","InvitationsToolbar","toggleInvitePeopleDialog","InvitePeopleDialog","handleSubmitInvite","emailsArray","isSubmitting","invitePeople","successMsg","accepter","onInvitePeople","failedMsg","InvitationRevokeDialog","onRevokeInvitation","revokeInvitation","invitation","deleteInvitation","deleted","revokeItem","toggleRevokeDialog","isRevokeDialogOpen","invite_time","accept_time","invitationsList","InvitationsView","invitationsArray","isInvitePeopleDialogOpen","listInvitations","NewWikiDialog","addWiki","WikiSelectDialog","WikiDeleteDialog","WikiListItem","isShowDeleteDialog","onDeleteCancel","deleteWiki","wiki","fileIconUrl","deleteIcon","WikiListView","wikis","renameWiki","Wikis","getWikis","listWikis","clickMenuToggle","onMenuToggle","isShowAddWikiMenu","onSelectToggle","isShowSelectDialog","isShowCreateDialog","slug","GeneralToolbar","MainContentWrapper","WrapperedComponent","FilesActivitiesWrapper","DraftsViewWrapper","StarredWrapper","LinkedDevicesWrapper","SharedLibrariesWrapper","SharedWithOCMWrapper","ShareWithOCM","ShareAdminLibrariesWrapper","ShareAdminFoldersWrapper","ShareAdminShareLinksWrapper","ShareAdminUploadLinksWrapper","App","navigateClientUrlToLib","splitUrlArray","repalce","listDrafts","dirViewPanels","generatorPrefix","navTab1","navTab2","navTab","getTabShowName","toggleSidePanel","home","contentClassName","ReactDOM","render","getElementById","files_count","tag_name","tag_color","ImageDialog","imageCaption","mainSrc","imageTitle","nextSrc","prevSrc","onCloseRequest","onMovePrevRequest","onMoveNextRequest","imagePadding","imageLoadErrorMessage","prevLabel","nextLabel","closeLabel","zoomInLabel","zoomOutLabel","AddRelatedFileDialog","onAddRelatedFile","oRepoID","rRepoID","oFilePath","rFilePath","addRelatedFile","isShowFile","subtitle","ListRelatedFileDialog","onDeleteRelatedFile","relatedID","related_id","deleteRelatedFile","getDirentList","hover","addRelatedFileToggle","RelatedFile","RelatedFileDialogs","onAddRelatedFileToggle","showListRelatedFileDialog","onCloseAddRelatedFileDialog","debug","Emitter","binary","isBuf","Encoder","protocol","types","CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK","Decoder","ERROR_PACKET","encodeAsString","attachments","nsp","payload","tryStringify","reconstructor","BinaryReconstructor","packet","reconPack","buffers","callback","writeEncoding","bloblessData","deconstruction","deconstructPacket","pack","removeBlobs","encodeAsBinary","add","Number","start","buf","tryParse","decodeString","base64","takeBinaryData","destroy","finishedReconstruction","binData","reconstructPacket","hasCORS","globalThis","xdomain","xscheme","enablesXDR","XMLHttpRequest","XDomainRequest","parser","Transport","hostname","port","secure","timestampParam","timestampRequests","readyState","agent","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","description","doOpen","doClose","send","packets","write","onOpen","onData","decodePacket","binaryType","onPacket","_exenv","EE","__esModule","default","SafeHTMLElement","HTMLElement","CreateTagDialog","selectTagcolor","tagColor","createTag","createRepoTag","newTag","canSave","ShareAdminLink","copyToClipboard","re","parts","m","exec","uri","source","host","authority","ipv6uri","pathNames","regx","queryKey","$0","$1","$2","withNativeBuffer","Buffer","isBuffer","withNativeArrayBuffer","ArrayBuffer","isView","buffer","eio","Socket","Backoff","has","Manager","nsps","subs","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","max","jitter","timeout","connecting","lastPing","encoding","packetBuffer","_parser","encoder","decoder","autoConnect","emitAll","updateSocketIds","generateId","engine","v","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","connect","skipReconnect","openSub","onopen","errorSub","cleanup","timer","clearTimeout","onping","onpong","ondata","ondecoded","onerror","onConnecting","encodedPackets","processPacketQueue","shift","subsLength","disconnect","onclose","reason","delay","onreconnect","attempt","XHR","JSONP","websocket","polling","xd","xs","jsonp","isSSL","forceJSONP","parseqs","inherit","yeast","Polling","hasXHR2","responseType","forceBase64","supportsBinary","poll","pause","once","doPoll","decodePayload","callbackfn","encodePayload","doWrite","schema","sid","b64","withNativeBlob","Blob","withNativeFile","File","hasBinary","toJSON","alphabet","seed","encoded","decoded","toArray","hasBin","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","ping","pong","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","subEvents","ev","compress","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","onack","ondisconnect","ack","emitBuffered","removeListener","querySelectorAll","tabbable","tabbableNode","hidesContents","zeroSize","offsetWidth","offsetHeight","innerHTML","getComputedStyle","getPropertyValue","scrollWidth","focusable","isTabIndexNotNaN","parentElement","body","visible","tabIndex","isTabIndexNaN","assertNodeList","setElement","useElement","_safeHTMLElement","el","globalElement","validateElement","appElement","documentNotReadyOrSSRTesting","resetForTesting","_warning","_warning2","selector","portalOpenInstances","PortalOpenInstances","instance","Constructor","_classCallCheck","openInstance","openInstances","deregister","subscribe","subscribers","eventType","subscriber","lookup","cache","managers","parsed","forceNew","multiplex","contentClass","WikiMarkdownViewer","onContentRendered","markdownViewer","titlesInfo","onScrollHandler","activeTitleIndex","contentScrollTop","markdownContainer","titlesLength","changeInlineNode","imagePath","isPublicWiki","RegExp","index2","originalPath","pathNormalize","isInternalFileLink","match","p1","p2","p3","sharedToken","modifyValueBeforeRender","changeMarkdownNodes","renderMarkdown","isWiki","renderRelatedFiles","links","MarkdownViewer","_defineProperties","descriptor","_createClass","protoProps","staticProps","_defineProperty","_extends","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","_objectSpread2","getOwnPropertyDescriptors","defineProperties","_getPrototypeOf","o","_setPrototypeOf","_assertThisInitialized","ReferenceError","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_toConsumableArray","arr2","_arrayWithoutHoles","from","_iterableToArray","_nonIterableSpread","translate","replaceStrings","translated","getWindowWidth","global","getHighestSafeWindowContext","referrer","getOrigin","parent","MAX_ZOOM_LEVEL","KEYS","ReactImageLightbox","_Component","_possibleConstructorReturn","isClosing","animationDisabled","shouldAnimate","zoomLevel","offsetX","offsetY","loadErrorStatus","outerEl","zoomInBtn","zoomOutBtn","caption","closeIfClickInner","handleImageDoubleClick","handleImageMouseWheel","handleKeyInput","handleMouseUp","handleMouseDown","handleMouseMove","handleOuterMousewheel","handleTouchStart","handleTouchMove","handleTouchEnd","handlePointerEvent","handleCaptionMousewheel","handleWindowResize","handleZoomInButtonClick","handleZoomOutButtonClick","requestClose","requestMoveNext","requestMovePrev","subClass","superClass","_inherits","mouseEvent","touchPointer","identifier","pointerEvent","pointerId","_ref","_ref$x","_ref$y","_ref$zoom","zoom","targetWidth","nextX","windowWidth","scaleFactor","transform","timeouts","currentAction","eventsSource","pointerList","preventInnerClose","preventInnerCloseTimeout","keyPressed","imageCache","lastKeyDownTime","resizeTimeout","wheelActionTimeout","resetScrollTimeout","scrollX","scrollY","moveStartX","moveStartY","moveStartOffsetX","moveStartOffsetY","swipeStartX","swipeStartY","swipeEndX","swipeEndY","pinchTouchList","pinchDistance","keyCounter","moveRequested","_this2","windowContext","listeners","resize","mouseup","touchend","touchcancel","pointerdown","pointermove","pointerup","pointercancel","handleWheel","passive","loadAllImages","_this3","sourcesChanged","prevSrcDict","nextSrcDict","getSrcTypes","srcType","_this4","didUnmount","tid","_setTimeout","_x","_x2","func","_this5","_this6","imageSrc","fitSizes","isImageLoaded","getFitSizes","targetHeight","stretch","boxSize","getLightboxRect","currentImageInfo","getBestImageForType","maxX","minX","maxY","minY","zoomMultiplier","getZoomMultiplier","keyEnding","pow","right","_clearTimeout","_x3","enableZoom","nextZoomLevel","imageBaseSize","currentZoomMultiplier","nextZoomMultiplier","boxRect","pointerX","pointerY","currentImageOffsetX","currentImageOffsetY","nextImageRealOffsetX","nextImageRealOffsetY","nextOffsetX","nextOffsetY","maxOffsets","getMaxOffsets","isAnimating","which","keyRepeatLimit","keyRepeatKeyupBonus","_this7","deltaY","abs","deltaX","changeZoom","newOffsetY","newOffsetX","filterPointersBySource","pointer","_ref2","_this8","_ref3","shouldHandleEvent","isTargetMatchImage","addPointer","parseMouseEvent","multiPointerStart","multiPointerMove","removePointer","multiPointerEnd","parsePointerEvent","_this9","changedTouches","eventTouch","parseTouchPointer","_this10","touch","handleSwipeStart","handleMoveStart","handleEnd","decideMoveOrSwipe","handlePinchStart","handleMove","handleSwipe","handlePinch","setPreventInnerClose","handleMoveEnd","handleSwipeEnd","handlePinchEnd","_ref4","_ref5","_this11","animationDuration","_ref6","_ref7","xDiff","xDiffAbs","yDiffAbs","_ref8","_ref9","sqrt","_ref10","_ref11","_ref12","calculatePinchDistance","oldPointer","newDistance","_this$calculatePinchC","calculatePinchCenter","forceUpdate","_this$caption$current2","_this12","inMemoryImage","Image","imageCrossOrigin","crossOrigin","errorEvent","onImageLoadError","onload","onImageLoad","_this13","generateLoadDoneCallback","loadImage","_this14","closeLightbox","animationOnKeyInput","direction","_this15","requestMove","_this16","_this$props","clickOutsideToClose","discourageDownloads","toolbarButtons","reactModalStyle","_onAfterOpen","onAfterOpen","reactModalProps","_this$state","transitionStyle","transition","keyEndings","_ref13","images","addImage","imageClass","transforms","bestImageInfo","imageStyle","getTransform","cursor","createElement","backgroundImage","onDoubleClick","onWheel","loadingIcon","_","modalStyle","overlay","border","borderRadius","Modal","onRequestClose","contentLabel","wrapperClassName","animationDirection","onTouchStart","onTouchMove","onKeyUp","propTypes","PropTypes","string","isRequired","mainSrcThumbnail","prevSrcThumbnail","nextSrcThumbnail","bool","number","arrayOf","shape","_Modal","_Modal2","TreeNodeView","isShowOperationMenu","isHighlight","onLoadToggle","onNodeDragStart","onNodeDragEnter","isNodeDropShow","onNodeDragMove","onNodeDragLeave","onNodeDrop","getNodeTypeAndIcon","suffix","renderChildren","paddingLeft","hasChildren","RENAME","OPEN_VIA_CLIENT","hlClass","caculateMenuList","TreeView","dragStartNodeData","isTreeViewDropTipShow","dropNodeData","EmptyTip","parseuri","createDebug","namespace","prevTime","enabled","curr","ms","diff","coerce","formatter","formatters","val","formatArgs","logFn","log","console","useColors","charCodeAt","colors","selectColor","init","instances","stack","disable","enable","namespaces","skips","humanize","s","h","d","plural","n","ceil","long","fmtShort","_deconstructPacket","_placeholder","newData","_reconstructPacket","packetData","pendingBlobs","_removeBlobs","curKey","containingObject","fileReader","FileReader","readAsArrayBuffer","transports","upgrade","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","perMessageDeflate","threshold","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","EIO","transport","requestTimeout","protocols","setTransport","removeAllListeners","onDrain","probe","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","onHandshake","setPing","code","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","filteredUpgrades","j","empty","Request","isBinary","req","sendXhr","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","hasXDR","onLoad","responseText","onreadystatechange","contentType","getResponseHeader","requestsCount","requests","onSuccess","fromError","abort","attachEvent","unloadHandler","arraybuffer","end","bytes","byteLength","abv","Uint8Array","ii","noop","count","err_cb","bail","proxy","byteArray","byteCount","byteIndex","stringFromCharCode","fromCharCode","ucs2decode","extra","output","counter","checkScalarValue","codePoint","strict","toUpperCase","createByte","encodeCodePoint","symbol","readContinuationByte","continuationByte","decodeSymbol","byte1","version","codePoints","byteString","tmp","array","ucs2encode","chars","encoded1","encoded2","encoded3","encoded4","bufferLength","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","getBlob","mapArrayBufferViews","ary","chunk","set","byteOffset","BlobBuilderConstructor","bb","part","BlobConstructor","JSONPPolling","rNewline","rEscapedNewline","___eio","script","removeChild","form","iframe","insertAt","getElementsByTagName","insertBefore","head","appendChild","userAgent","area","iframeId","initIframe","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","usingBrowserWebSocket","ws","supports","addEventListeners","onmessage","encodePacket","factor","rand","random","deviation","bodyOpenClassName","portalClassName","_react","_react2","_interopRequireDefault","_reactDom2","_propTypes2","_ModalPortal2","ariaAppHider","newObj","_interopRequireWildcard","_safeHTMLElement2","_reactLifecyclesCompat","isReact16","createPortal","getCreatePortal","unstable_renderSubtreeIntoContainer","getParentElement","parentSelector","_temp","_len","_key","removePortal","unmountComponentAtNode","warn","portalRef","portal","renderPortal","defaultStyles","prevProps","prevParent","nextParent","snapshot","_props","closesAt","closeTimeoutMS","beforeClose","closeWithTimeout","htmlOpenClassName","oneOfType","base","afterOpen","overlayClassName","instanceOf","ariaHideApp","shouldFocusAfterRender","shouldCloseOnOverlayClick","shouldReturnFocusAfterClose","preventScroll","aria","shouldCloseOnEsc","overlayRef","contentRef","overlayElement","contentElement","contentEl","background","WebkitOverflowScrolling","outline","polyfill","_typeof","focusManager","_scopeTab2","classList","_portalOpenInstances2","CLASS_NAMES","ariaHiddenInstances","ModalPortal","setOverlayRef","setContentRef","afterClose","remove","returnFocus","teardownScopedFocus","popWithoutFocus","onAfterClose","beforeOpen","closeTimer","setupScopedFocus","markForFocusLater","overlayEl","closeWithoutTimeout","focusContent","contentHasFocus","handleOverlayOnClick","shouldClose","ownerHandlesClose","handleContentOnMouseUp","handleOverlayOnMouseDown","handleContentOnClick","handleContentOnMouseDown","shouldBeClosed","activeElement","buildClassName","additional","classNames","attributesFromObject","prefix","reduce","acc","moveFromContentToOverlay","_props2","contentStyles","overlayStyles","overlayProps","contentProps","modal","testId","handleBlur","handleFocus","focusLaterElements","toFocus","modalElement","detachEvent","_tabbable","_tabbable2","needToFocus","shiftKey","tail","checkSafari","warning","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","canUseViewport","screen","dumpClassLists","htmlClassList","docBodyClassList","classString","classListRef","incrementReference","decrementReference","_portalOpenInstances","before","after","cloneNode","firstChild","lastChild","dispatchGlobalEvent","eventName","CustomEvent","createEvent","initCustomEvent","dispatchEvent","store","prop","Boolean","r","storage","DEBUG","lastC","removeItem","WebkitAppearance","firebug","chrome","local","localStorage","localstorage","mixin","_callbacks","cb","hasListeners","base64encoder","sliceBuffer","utf8","isAndroid","isPhantomJS","dontSendBlobs","packetslist","each","eachWithIndex","utf8encode","encodeBase64Packet","contentArray","resultBuffer","encodeArrayBuffer","fr","encodeBlobAsArrayBuffer","blob","encodeBlob","encodeBase64Object","b64data","readAsDataURL","typed","basic","btoa","utf8decode","decodeBase64Packet","tryDecode","rest","encodePayloadAsBlob","encodePayloadAsArrayBuffer","doneCallback","setLengthHeader","decodePayloadAsBinary","chr","totalLength","resultArray","bufferIndex","isString","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","tailArray","msgLength"],"mappings":"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","file":"static/js/app.chunk.js","sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport RepoTag from '../../models/repo-tag';\nimport CreateTagDialog from './create-tag-dialog';\nimport toaster from '../toast';\nrequire('../../css/repo-tag.css');\n\nconst TagItemPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoTag: PropTypes.object.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass TagItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showSelectedTag: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      showSelectedTag: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      showSelectedTag: false\n    });\n  }\n\n  getRepoTagIdList = () => {\n    let repoTagIdList = [];\n    let fileTagList = this.props.fileTagList;\n    fileTagList.map((fileTag) => {\n      repoTagIdList.push(fileTag.repo_tag_id);\n    });\n    return repoTagIdList;\n  }\n\n  onEditFileTag = () => {\n    let { repoID, repoTag, filePath } = this.props;\n    let repoTagIdList = this.getRepoTagIdList();\n    if (repoTagIdList.indexOf(repoTag.id) === -1) {\n      let id = repoTag.id;\n      seafileAPI.addFileTag(repoID, filePath, id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let fileTag = null;\n      let fileTagList = this.props.fileTagList;\n      for(let i = 0; i < fileTagList.length; i++) {\n        if (fileTagList[i].repo_tag_id === repoTag.id) {\n          fileTag = fileTagList[i];\n          break;\n        }\n      }\n      seafileAPI.deleteFileTag(repoID, fileTag.id).then(() => {\n        repoTagIdList = this.getRepoTagIdList();\n        this.props.onFileTagChanged();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  render() {\n    let repoTag = this.props.repoTag;\n    let repoTagIdList = this.getRepoTagIdList();\n    let drakColor = Utils.getDarkColor(repoTag.color);\n    return (\n      <li key={repoTag.id} className=\"tag-list-item\" onClick={this.onEditFileTag} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <div className=\"tag-demo\" style={{backgroundColor:repoTag.color}}>\n          <span className={`${this.state.showSelectedTag ? 'show-tag-selected': ''}`} style={{backgroundColor: drakColor}}></span>\n          <span className=\"tag-name\">{repoTag.name}</span>\n          {repoTagIdList.indexOf(repoTag.id) > -1 &&\n            <i className=\"fas fa-check tag-operation\"></i>\n          }\n        </div>\n      </li>\n    );\n  }\n\n}\n\nTagItem.propTypes = TagItemPropTypes;\n\nconst TagListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  createNewTag: PropTypes.func.isRequired,\n};\n\nclass TagList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRepoTagList();\n  }\n\n  getRepoTagList = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repoTag = new RepoTag(item);\n        repotagList.push(repoTag);\n      });\n      this.setState({repotagList: repotagList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.toggleCancel}>{gettext('Select Tags')}</ModalHeader>\n        <ModalBody>\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag) => {\n              return (\n                <TagItem\n                  key={repoTag.id}\n                  repoTag={repoTag}\n                  repoID={this.props.repoID}\n                  filePath={this.props.filePath}\n                  fileTagList={this.props.fileTagList}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                />\n              );\n            })}\n          </ul>\n          <a href=\"#\" className=\"add-tag-link\" onClick={this.props.createNewTag}>{gettext('Create a new tag')}</a>\n        </ModalBody>\n        <ModalFooter>\n          <Button onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nTagList.propTypes = TagListPropTypes;\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass EditFileTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoTagShow: false,\n      isListRepoTagShow: true,\n    };\n  }\n\n  createNewTag = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onRepoTagCreated = (repoTagID) => {\n    let {repoID, filePath} = this.props;\n    seafileAPI.addFileTag(repoID, filePath, repoTagID).then(() => {\n      this.props.onFileTagChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel}>\n        {this.state.isListRepoTagShow &&\n          <TagList\n            repoID={this.props.repoID}\n            filePath={this.props.filePath}\n            fileTagList={this.props.fileTagList}\n            onFileTagChanged={this.props.onFileTagChanged}\n            toggleCancel={this.props.toggleCancel}\n            createNewTag={this.createNewTag}\n          />\n        }\n        {this.state.isCreateRepoTagShow &&\n          <CreateTagDialog\n            repoID={this.props.repoID}\n            onClose={this.props.toggleCancel}\n            toggleCancel={this.createNewTag}\n            onRepoTagCreated={this.onRepoTagCreated}\n          />\n        }\n      </Modal>\n    );\n  }\n}\n\nEditFileTagDialog.propTypes = propTypes;\n\nexport default EditFileTagDialog;","import { MENU_SHOW, MENU_HIDE } from './actions';\nimport { uniqueId, hasOwnProp, canUseDOM } from './helpers';\n\nclass GlobalEventListener {\n\n  constructor() {\n    this.callbacks = {};\n\n    if (canUseDOM) {\n      window.addEventListener(MENU_SHOW, this.handleShowEvent);\n      window.addEventListener(MENU_HIDE, this.handleHideEvent);\n    }\n  }\n\n  handleShowEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].show(event);\n    }\n  }\n\n  handleHideEvent = (event) => {\n    for (const id in this.callbacks) {\n      if (hasOwnProp(this.callbacks, id)) this.callbacks[id].hide(event);\n    }\n  }\n\n  register = (showCallback, hideCallback) => {\n    const id = uniqueId();\n\n    this.callbacks[id] = {\n      show: showCallback,\n      hide: hideCallback\n    };\n\n    return id;\n  }\n\n  unregister = (id) => {\n    if (id && this.callbacks[id]) {\n      delete this.callbacks[id];\n    }\n  }\n}\n\nexport default new GlobalEventListener();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from './globalEventListener';\nimport { hideMenu } from './actions';\nimport { callIfExists } from './helpers';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  id: PropTypes.string.isRequired,\n  rtl: PropTypes.bool,\n  onMenuItemClick: PropTypes.func.isRequired,\n  onShowMenu: PropTypes.func,\n  onHideMenu: PropTypes.func,\n};\n\nclass ContextMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isVisible: false,\n      currentObject: null,\n      menuList: [],\n    };\n  }\n\n  componentDidMount() {\n    this.listenId = listener.register(this.handleShow, this.handleHide);\n  }\n\n  componentDidUpdate () {\n    if (this.state.isVisible) {\n      const wrapper = window.requestAnimationFrame || setTimeout;\n\n      wrapper(() => {\n        const { x, y } = this.state;\n        const { top, left } = this.props.rtl ? this.getRTLMenuPosition(x, y) : this.getMenuPosition(x, y);\n\n        wrapper(() => {\n          if (!this.menu) return;\n          this.menu.style.top = `${top}px`;\n          this.menu.style.left = `${left}px`;\n          this.menu.style.opacity = 1;\n          this.menu.style.pointerEvents = 'auto';\n        });\n      });\n    } else {\n      if (!this.menu) return;\n      this.menu.style.opacity = 0;\n      this.menu.style.pointerEvents = 'none';\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.listenId) {\n      listener.unregister(this.listenId);\n    }\n\n    this.unregisterHandlers();\n  }\n\n  registerHandlers = () => {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    document.addEventListener('touchstart', this.handleOutsideClick);\n    document.addEventListener('scroll', this.handleHide);\n    document.addEventListener('contextmenu', this.handleHide);\n    document.addEventListener('keydown', this.handleKeyNavigation);\n    window.addEventListener('resize', this.handleHide);\n  }\n\n  unregisterHandlers = () => {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    document.removeEventListener('touchstart', this.handleOutsideClick);\n    document.removeEventListener('scroll', this.handleHide);\n    document.removeEventListener('contextmenu', this.handleHide);\n    document.removeEventListener('keydown', this.handleKeyNavigation);\n    window.removeEventListener('resize', this.handleHide);\n  }\n\n  handleShow = (e) => {\n    if (e.detail.id !== this.props.id || this.state.isVisible) return;\n\n    const { x, y } = e.detail.position;\n    const { currentObject, menuList} = e.detail;\n\n    this.setState({ isVisible: true, x, y, currentObject, menuList });\n    this.registerHandlers();\n    callIfExists(this.props.onShowMenu, e);\n  }\n\n  handleHide = (e) => {\n    if (this.state.isVisible && (!e.detail || !e.detail.id || e.detail.id === this.props.id)) {\n      this.unregisterHandlers();\n      this.setState({ isVisible: false});\n      callIfExists(this.props.onHideMenu, e);\n    }\n  }\n\n  handleOutsideClick = (e) => {\n    if (!this.menu.contains(e.target)) hideMenu();\n  }\n\n  handleMouseLeave = (event) => {\n    event.preventDefault();\n\n    if (this.props.hideOnLeave) hideMenu();\n  }\n\n  handleContextMenu = (e) => {\n    this.handleHide(e);\n  }\n\n  handleKeyNavigation = (e) => {\n    if (this.state.isVisible === false) {\n      return;\n    }\n    e.preventDefault();\n    this.hideMenu(e);\n  }\n\n  hideMenu = (e) => {\n    if (e.keyCode === 27 || e.keyCode === 13) { // ECS or enter\n      hideMenu();\n    }\n  }\n\n  getMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth) {\n      menuStyles.left -= rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n  getRTLMenuPosition = (x = 0, y = 0) => {\n    let menuStyles = {\n      top: y,\n      left: x\n    };\n\n    if (!this.menu) return menuStyles;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menu.getBoundingClientRect();\n\n    // Try to position the menu on the left side of the cursor\n    menuStyles.left = x - rect.width;\n\n    if (y + rect.height > innerHeight) {\n      menuStyles.top -= rect.height;\n    }\n\n    if (menuStyles.left < 0) {\n      menuStyles.left += rect.width;\n    }\n\n    if (menuStyles.top < 0) {\n      menuStyles.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyles.left + rect.width > innerWidth) {\n      menuStyles.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    return menuStyles;\n  }\n\n\n  onMenuItemClick = (event) => {\n    event.stopPropagation();\n    let operation = Utils.getEventData(event, 'operation');\n    let currentObject = this.state.currentObject;\n    this.props.onMenuItemClick(operation, currentObject, event);\n  }\n\n  onContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  render() {\n    const inlineStyle = { position: 'fixed', opacity: 0, pointerEvents: 'none', display: 'block' };\n    return (\n      <div role=\"menu\" className=\"seafile-contextmenu dropdown-menu\" style={inlineStyle} ref={menu => { this.menu = menu; }}>\n        {this.state.menuList.map((menuItem, index) => {\n          if (menuItem === 'Divider') {\n            return <div key={index} className=\"seafile-divider dropdown-divider\"></div>;\n          } else {\n            return (\n              <button\n                key={index}\n                className=\"seafile-contextmenu-item dropdown-item\"\n                data-operation={menuItem.key}\n                onClick={this.onMenuItemClick}\n                onContextMenu={this.onContextMenu}\n              >\n                {menuItem.value}\n              </button>\n            );\n          }\n        })}\n      </div>\n    );\n  }\n}\n\nContextMenu.propTypes = propTypes;\n\nexport default ContextMenu;\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFolderCancel: PropTypes.func.isRequired,\n};\n\nclass CreateForder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({childName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let newName = this.state.childName;\n    let isDuplicated = this.checkDuplicatedName();\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      this.props.onAddFolder(path);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.addFolderCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Folder')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"folderName\">{gettext('Name')}</Label>\n              <Input\n                id=\"folderName\"\n                value={this.state.childName}\n                innerRef={input => {this.newInput = input;}}\n                onKeyPress={this.handleKeyPress}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateForder.propTypes = propTypes;\n\nexport default CreateForder;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext, fileServerRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\n\nconst propTypes = {\n  token: PropTypes.string,\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string,\n  target: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.array\n  ]),\n  toggleDialog: PropTypes.func.isRequired\n};\n\nlet interval;\n\nclass ZipDownloadDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      zipProgress: null\n    };\n  }\n\n  componentDidMount() {\n    const { token, path, repoID, target } = this.props;\n    let getZipTask;\n    if (token) {\n      getZipTask = target.length ?\n        seafileAPI.getShareLinkDirentsZipTask(token, path, target) :\n        seafileAPI.getShareLinkZipTask(token, path);\n    } else {\n      getZipTask = seafileAPI.zipDownload(repoID, path, target);\n    }\n    getZipTask.then((res) => {\n      const zipToken = res.data['zip_token'];\n      this.setState({\n        isLoading: false,\n        errorMsg: '',\n        zipToken: zipToken\n      });\n      this.queryZipProgress();\n      interval = setInterval(this.queryZipProgress, 1000);\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  queryZipProgress = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.queryZipProgress(zipToken).then((res) => {\n      const data = res.data;\n      this.setState({\n        zipProgress: data.total == 0 ? '100%' : (data.zipped/data.total*100).toFixed(2) + '%'\n      });\n      if (data['total'] == data['zipped']) {\n        clearInterval(interval);\n        this.props.toggleDialog();\n        location.href = `${fileServerRoot}zip/${zipToken}`;\n      }\n    }).catch((error) => {\n      clearInterval(interval);\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  cancelZipTask = () => {\n    const zipToken = this.state.zipToken;\n    seafileAPI.cancelZipTask(zipToken).then((res) => {\n    // do nothing\n    }).catch((error) => {\n    // do nothing\n    });\n  }\n\n  toggleDialog = () => {\n    const zipProgress = this.state.zipProgress;\n    if (zipProgress && zipProgress != '100%') {\n      clearInterval(interval);\n      this.cancelZipTask();\n    }\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggleDialog}>\n        <ModalHeader toggle={this.toggleDialog}>{gettext('Download')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} />\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const {isLoading, errorMsg, zipProgress} = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return <p className=\"mt-4 text-center\">{`${gettext('Packaging...')} ${zipProgress}`}</p>;\n  }\n}\n\nZipDownloadDialog.propTypes = propTypes;\n\nexport default ZipDownloadDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport listener from '../context-menu/globalEventListener';\nimport { Dropdown, ButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  tagName: PropTypes.string,\n  item: PropTypes.object.isRequired,\n  toggleClass: PropTypes.string,\n  isHandleContextMenuEvent: PropTypes.bool,\n  getMenuList: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func,\n  unfreezeItem: PropTypes.func,\n};\n\nclass ItemDropdownMenu extends React.Component {\n\n  static defaultProps = {\n    isHandleContextMenuEvent: true,\n    toggleClass: 'sf2-icon-caret-down'\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuList: [],\n      isItemMenuShow: false,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.isHandleContextMenuEvent) {\n      this.listenerId = listener.register(this.onShowMenu, this.onHideMenu);\n    }\n    let { item } = this.props;\n    let menuList = this.props.getMenuList(item);\n    this.setState({menuList: menuList});\n  }\n\n  componentWillReceiveProps(nextProps) {  // for toolbar item operation\n    let { item } = nextProps;\n    if (item.name !== this.props.item.name) {\n      let menuList = this.props.getMenuList(item);\n      this.setState({menuList: menuList});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.isHandleContextMenuEvent && this.listenerId) {\n      listener.unregister(this.listenerId);\n    }\n  }\n\n  onShowMenu = () => {\n    // nothing todo\n  }\n\n  onHideMenu = () => {\n    if (this.state.isItemMenuShow) {\n      this.setState({isItemMenuShow: false});\n      if (typeof(this.props.unfreezeItem) === 'function') {\n        this.props.unfreezeItem();\n      }\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    this.toggleOperationMenu();\n  }\n\n  toggleOperationMenu = () => {\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow && typeof(this.props.freezeItem) === 'function') {\n          this.props.freezeItem();\n        } else if (!this.state.isItemMenuShow && typeof(this.props.unfreezeItem) === 'function') {\n          this.props.unfreezeItem();\n        }\n      }\n    );\n  }\n\n  onMenuItemClick = (event) => {\n    let operation = Utils.getEventData(event, 'toggle');\n    let item = this.props.item;\n    this.props.onMenuItemClick(operation, event, item);\n  }\n\n  render() {\n    let menuList = this.state.menuList;\n    let { toggleClass, tagName } = this.props;\n    toggleClass = 'sf-dropdown-toggle ' + toggleClass;\n\n    if (!menuList.length) {\n      return '';\n    }\n\n    if (tagName && tagName === 'button') {\n      return (\n        <ButtonDropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick} title={gettext('More Operations')}>\n          <DropdownToggle\n            className={toggleClass}\n            data-toggle=\"dropdown\"\n            title={gettext('More Operations')}\n            aria-expanded={this.state.isItemMenuShow}\n            // onClick={this.onDropdownToggleClick}\n          >\n          </DropdownToggle>\n          <DropdownMenu>\n            {menuList.map((menuItem, index) => {\n              if (menuItem === 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (\n                  <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick}>{menuItem.value}</DropdownItem>\n                );\n              }\n            })}\n          </DropdownMenu>\n        </ButtonDropdown>\n      );\n    }\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.onDropdownToggleClick}>\n        <DropdownToggle\n          tag={tagName || 'i'}\n          className={toggleClass}\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          // onClick={this.onDropdownToggleClick}\n        />\n        <DropdownMenu>\n          {menuList.map((menuItem, index) => {\n            if (menuItem === 'Divider') {\n              return <DropdownItem key={index} divider />;\n            } else {\n              return (\n                <DropdownItem key={index} data-toggle={menuItem.key} onClick={this.onMenuItemClick}>{menuItem.value}</DropdownItem>\n              );\n            }\n          })}\n        </DropdownMenu>\n      </Dropdown>\n    );\n  }\n}\n\nItemDropdownMenu.propTypes = propTypes;\n\nexport default ItemDropdownMenu;\n","/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\n\nexports.encode = function (obj) {\n  var str = '';\n\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (str.length) str += '&';\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n    }\n  }\n\n  return str;\n};\n\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\n\nexports.decode = function(qs){\n  var qry = {};\n  var pairs = qs.split('&');\n  for (var i = 0, l = pairs.length; i < l; i++) {\n    var pair = pairs[i].split('=');\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n  }\n  return qry;\n};\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","import React from 'react';\nimport { curNoteMsg, curNoteID, siteRoot, gettext } from '../utils/constants';\n\nimport '../css/system-notification.css';\n\nclass SystemNotification extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isClosed: false\n    };\n  }\n\n  close = () => {\n    this.setState({isClosed: true});\n\n    if (navigator.cookieEnabled) {\n      let date = new Date(),\n        cookies = document.cookie.split('; '),\n        infoIDExist = false,\n        newInfoID = curNoteID + '_';\n      date.setTime(date.getTime() + 14*24*60*60*1000);\n      newInfoID += '; expires=' + date.toGMTString() + '; path=' + siteRoot;\n      for (var i = 0, len = cookies.length; i < len; i++) {\n        if (cookies[i].split('=')[0] == 'info_id') {\n          infoIDExist = true;\n          document.cookie = 'info_id=' + cookies[i].split('=')[1] + newInfoID;\n          break;\n        }\n      }\n      if (!infoIDExist) {\n        document.cookie = 'info_id=' + newInfoID;\n      }\n    }\n  }\n\n  render() {\n    if (!curNoteMsg || this.state.isClosed) {\n      return null;\n    }\n\n    return (\n      <div id=\"info-bar\">\n        <p id=\"info-bar-info\">{curNoteMsg}</p>\n        <span className=\"close sf2-icon-x1\" title={gettext('Close')} onClick={this.close}></span>\n      </div>\n    );\n  }\n}\n\nexport default SystemNotification;\n","class Group {\n  constructor(object) {\n    this.id= object.id;\n    this.name = object.name;\n    this.owner = object.owner;\n    this.admins = object.admins || [];\n    this.avatar_url = object.avatar_url;\n    this.created_at = object.created_at;\n    this.parent_group_id = object.parent_group_id;\n    this.wiki_enabled = object.wiki_enabled;\n    this.repos = object.repos || [];\n    this.group_quota = object.group_quota;\n    this.group_quota_usage = object.group_quota_usage;\n  }\n}\n\nexport default Group;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { Badge } from 'reactstrap';\nimport { gettext, siteRoot, canPublishRepo, canAddRepo, canGenerateShareLink, canGenerateUploadLink, canInvitePeople, dtableWebServer, enableOCM } from '../utils/constants';\nimport { seafileAPI } from '../utils/seafile-api';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\nimport Group from '../models/group';\n\nimport { canViewOrg, isDocs, isPro, customNavItems } from '../utils/constants';\n\nconst propTypes = {\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass MainSideNav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupsExtended: false,\n      sharedExtended: false,\n      closeSideBar:false,\n      groupItems: [],\n    };\n\n    this.listHeight = 24; //for caculate tabheight\n    this.groupsHeight = 0;\n    this.adminHeight = 0;\n  }\n\n  grpsExtend = () => {\n    this.setState({\n      groupsExtended: !this.state.groupsExtended,\n    });\n    this.loadGroups();\n  }\n\n  shExtend = () => {\n    this.setState({\n      sharedExtended: !this.state.sharedExtended,\n    });\n  }\n\n  loadGroups = () => {\n    let _this = this;\n    seafileAPI.listGroups().then(res =>{\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n\n      this.groupsHeight = (groupList.length + 1) * _this.listHeight;\n      _this.setState({\n        groupItems: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  tabItemClick = (e, param, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.tabItemClick(param, id);\n  }\n\n  onDTableClick = () => {\n    let url = dtableWebServer;\n    window.open(url);\n  }\n\n  getActiveClass = (tab) => {\n    return this.props.currentTab === tab ? 'active' : '';\n  }\n\n  renderSharedGroups() {\n    let style = {height: 0};\n    if (this.state.groupsExtended) {\n      style = {height: this.groupsHeight};\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column grp-list ${this.state.groupsExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style}>\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'groups/'}  className={`nav-link ellipsis ${this.getActiveClass('groups')}`} onClick={(e) => this.tabItemClick(e, 'groups')}>\n            <span className=\"sharp\" aria-hidden=\"true\">#</span>\n            <span className=\"nav-text\">{gettext('All Groups')}</span>\n          </Link>\n        </li>\n        {this.state.groupItems.map(item => {\n          return (\n            <li key={item.id} className=\"nav-item\">\n              <Link to={siteRoot + 'group/' + item.id + '/'} className={`nav-link ellipsis ${this.getActiveClass(item.name)}`} onClick={(e) => this.tabItemClick(e, item.name, item.id)}>\n                <span className=\"sharp\" aria-hidden=\"true\">#</span>\n                <span className=\"nav-text\">{item.name}</span>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    );\n  }\n\n  renderSharedAdmin() {\n    let height = 0;\n    if (this.state.sharedExtended) {\n      if (!this.adminHeight) {\n        this.adminHeight = 3 * this.listHeight;\n      }\n      height = this.adminHeight;\n    }\n    let style = {height: height};\n\n    let linksNavItem = null;\n    if (canGenerateShareLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-share-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-share-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-share-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    } else if (canGenerateUploadLink) {\n      linksNavItem = (\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-upload-links/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-upload-links')}`} title={gettext('Links')} onClick={(e) => this.tabItemClick(e, 'share-admin-upload-links')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Links')}</span>\n          </Link>\n        </li>\n      );\n    }\n    return (\n      <ul className={`nav sub-nav nav-pills flex-column ${this.state.sharedExtended ? 'side-panel-slide' : 'side-panel-slide-up'}`} style={style} >\n        {canAddRepo && (\n          <li className=\"nav-item\">\n            <Link to={siteRoot + 'share-admin-libs/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-libs')}`} title={gettext('Libraries')} onClick={(e) => this.tabItemClick(e, 'share-admin-libs')}>\n              <span aria-hidden=\"true\" className=\"sharp\">#</span>\n              <span className=\"nav-text\">{gettext('Libraries')}</span>\n            </Link>\n          </li>\n        )}\n        <li className=\"nav-item\">\n          <Link to={siteRoot + 'share-admin-folders/'} className={`nav-link ellipsis ${this.getActiveClass('share-admin-folders')}`} title={gettext('Folders')} onClick={(e) => this.tabItemClick(e, 'share-admin-folders')}>\n            <span aria-hidden=\"true\" className=\"sharp\">#</span>\n            <span className=\"nav-text\">{gettext('Folders')}</span>\n          </Link>\n        </li>\n        {linksNavItem}\n      </ul>\n    );\n  }\n\n  renderCustomNavItems() {\n    return (\n      customNavItems.map((item, idx) => {\n        return (\n          <li key={idx} className=\"nav-item\">\n            <a href={item.link} className=\"nav-link ellipsis\" title={item.desc}>\n              <span className={item.icon} aria-hidden=\"true\"></span>\n              <span className=\"nav-text\">{item.desc}</span>\n            </a>\n          </li>\n        );\n      })\n    );\n  }\n\n  render() {\n    let showActivity = isDocs || isPro;\n    return (\n      <div className=\"side-nav\">\n        <div className=\"side-nav-con\">\n          <h3 className=\"sf-heading\">{gettext('Files')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            {canAddRepo && (\n              <li className=\"nav-item\">\n                <Link to={ siteRoot + 'my-libs/' } className={`nav-link ellipsis ${this.getActiveClass('my-libs') || this.getActiveClass('deleted') }`} title={gettext('My Libraries')} onClick={(e) => this.tabItemClick(e, 'my-libs')}>\n                  <span className=\"sf2-icon-user\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('My Libraries')}</span>\n                </Link>\n              </li>\n            )}\n            <li className=\"nav-item\">\n              <Link to={siteRoot + 'shared-libs/'} className={`nav-link ellipsis ${this.getActiveClass('shared-libs')}`} title={gettext('Shared with me')} onClick={(e) => this.tabItemClick(e, 'shared-libs')}>\n                <span className=\"sf2-icon-share\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with me')}</span>\n              </Link>\n            </li>\n            { canViewOrg &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'org')}>\n                <Link to={ siteRoot + 'org/' } className={`nav-link ellipsis ${this.getActiveClass('org')}`} title={gettext('Shared with all')}>\n                  <span className=\"sf2-icon-organization\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared with all')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"group-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Shared with groups')} onClick={this.grpsExtend}>\n                <span className={`toggle-icon float-right fas ${this.state.groupsExtended ?'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n                <span className=\"sf2-icon-group\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Shared with groups')}</span>\n              </a>\n              {this.renderSharedGroups()}\n            </li>\n            {enableOCM &&\n              <li className=\"nav-item\">\n                <Link to={siteRoot + 'shared-with-ocm/'} className={`nav-link ellipsis ${this.getActiveClass('shared-with-ocm')}`} title={gettext('Shared from other servers')} onClick={(e) => this.tabItemClick(e, 'shared-with-ocm')}>\n                  <span className=\"sf3-font-share-from-other-servers sf3-font\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Shared from other servers')}</span>\n                </Link>\n              </li>\n            }\n          </ul>\n\n\n          <h3 className=\"sf-heading\">{gettext('Tools')}</h3>\n          <ul className=\"nav nav-pills flex-column nav-container\">\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('starred')}`} to={siteRoot + 'starred/'} title={gettext('Favorites')} onClick={(e) => this.tabItemClick(e, 'starred')}>\n                <span className=\"sf2-icon-star\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Favorites')}</span>\n              </Link>\n            </li>\n            {showActivity &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('dashboard')}`} to={siteRoot + 'dashboard/'} title={gettext('Activities')} onClick={(e) => this.tabItemClick(e, 'dashboard')}>\n                  <span className=\"sf2-icon-clock\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Activities')}</span>\n                </Link>\n              </li>\n            }\n            {canPublishRepo &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('published')}`} to={siteRoot + 'published/'} title={gettext('Published Libraries')} onClick={(e) => this.tabItemClick(e, 'published')}>\n                  <span className=\"sf2-icon-wiki-view\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Published Libraries')}</span>\n                </Link>\n              </li>\n            }\n            {isDocs &&\n              <li className=\"nav-item\" onClick={(e) => this.tabItemClick(e, 'drafts')}>\n                <Link className={`nav-link ellipsis ${this.getActiveClass('drafts')}`} to={siteRoot + 'drafts/'} title={gettext('Drafts')}>\n                  <span className=\"sf2-icon-edit\" aria-hidden=\"true\"></span>\n                  <span className=\"draft-info nav-text\">\n                    {gettext('Drafts')}\n                    {this.props.draftCounts === 0 ? '' : <Badge color=\"info\" pill>{this.props.draftCounts}</Badge>}\n                  </span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item\">\n              <Link className={`nav-link ellipsis ${this.getActiveClass('linked-devices')}`} to={siteRoot + 'linked-devices/'} title={gettext('Linked Devices')} onClick={(e) => this.tabItemClick(e, 'linked-devices')}>\n                <span className=\"sf2-icon-monitor\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Linked Devices')}</span>\n              </Link>\n            </li>\n            {canInvitePeople &&\n              <li className=\"nav-item\">\n                <Link className={`nav-link ellipsis ${this.getActiveClass('invitations')}`} to={siteRoot + 'invitations/'} title={gettext('Invite Guest')} onClick={(e) => this.tabItemClick(e, 'invitations')}>\n                  <span className=\"sf2-icon-invite\" aria-hidden=\"true\"></span>\n                  <span className=\"nav-text\">{gettext('Invite Guest')}</span>\n                </Link>\n              </li>\n            }\n            <li className=\"nav-item flex-column\" id=\"share-admin-nav\">\n              <a className=\"nav-link ellipsis\" title={gettext('Share Admin')} onClick={this.shExtend}>\n                <span className={`toggle-icon float-right fas ${this.state.sharedExtended ? 'fa-caret-down':'fa-caret-left'}`} aria-hidden=\"true\"></span>\n                <span className=\"sf2-icon-wrench\" aria-hidden=\"true\"></span>\n                <span className=\"nav-text\">{gettext('Share Admin')}</span>\n              </a>\n              {this.renderSharedAdmin()}\n            </li>\n            {customNavItems && this.renderCustomNavItems()}\n          </ul>\n        </div>\n\n        {dtableWebServer &&\n          <div className=\"side-nav-link\" onClick={this.onDTableClick}>\n            <span className=\"link-icon icon-left sf3-font sf3-font-dtable-logo\" aria-hidden=\"true\"></span>\n            <span className=\"link-text\">SeaTable</span>\n            <span className=\"link-icon icon-right sf3-font sf3-font-arrow\"></span>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nMainSideNav.propTypes = propTypes;\n\nexport default MainSideNav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, lang, mediaUrl, logoPath, logoWidth, logoHeight, siteTitle, seafileVersion, additionalAboutDialogLinks, aboutDialogCustomHtml } from '../../utils/constants';\n\nconst propTypes = {\n  onCloseAboutDialog: PropTypes.func.isRequired,\n};\n\nclass AboutDialog extends React.Component {\n\n  toggle = () => {\n    this.props.onCloseAboutDialog();\n  }\n\n  renderExternalAboutLinks = () => {\n    if (additionalAboutDialogLinks && (typeof additionalAboutDialogLinks) === 'object') {\n      let keys = Object.keys(additionalAboutDialogLinks);\n      return keys.map((key, index) => {\n        return <a key={index} className=\"d-block\" href={additionalAboutDialogLinks[key]}>{key}</a>;\n      });\n    }\n    return null;\n  }\n\n  render() {\n\n    let href = lang === lang == 'zh-cn' ? 'http://seafile.com/about/' : 'http://seafile.com/en/about/';\n\n    if (aboutDialogCustomHtml) {\n      return (\n        <Modal isOpen={true} toggle={this.toggle}>\n          <ModalBody>\n            <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n            <div className=\"about-content\" dangerouslySetInnerHTML={{__html: aboutDialogCustomHtml}}></div>\n          </ModalBody>\n        </Modal>\n      );\n    } else {\n      return (\n        <Modal isOpen={true} toggle={this.toggle}>\n          <ModalBody>\n            <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n            <div className=\"about-content\">\n              <p><img src={mediaUrl + logoPath} height={logoHeight} width={logoWidth} title={siteTitle} alt=\"logo\" /></p>\n              <p>{gettext('Server Version: ')}{seafileVersion}<br /> {(new Date()).getFullYear()} {gettext('Seafile')}</p>\n              <p>{this.renderExternalAboutLinks()}</p>\n              <p><a href={href} target=\"_blank\">{gettext('About Us')}</a></p>\n            </div>\n          </ModalBody>\n        </Modal>\n      );\n    }\n  }\n}\n\nAboutDialog.propTypes = propTypes;\n\nexport default AboutDialog;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot, enableTC, sideNavFooterCustomHtml, additionalAppBottomLinks } from '../utils/constants';\nimport ModalPortal from './modal-portal';\nimport AboutDialog from './dialog/about-dialog';\n\nclass SideNavFooter extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAboutDialogShow: false,\n    };\n  }\n\n  onAboutDialogToggle = () => {\n    this.setState({isAboutDialogShow: !this.state.isAboutDialogShow});\n  }\n\n  renderExternalAppLinks = () => {\n    if (additionalAppBottomLinks && (typeof additionalAppBottomLinks) === 'object') {\n      let keys = Object.keys(additionalAppBottomLinks);\n      return keys.map((key, index) => {\n        return <a key={index} className=\"item\" href={additionalAppBottomLinks[key]}>{key}</a>;\n      });\n    }\n    return null;\n  }\n\n  render() {\n\n    if (sideNavFooterCustomHtml) {\n      return (<div className='side-nav-footer' dangerouslySetInnerHTML={{__html: sideNavFooterCustomHtml}}></div>);\n    }\n    return (\n      <Fragment>\n        <div className=\"side-nav-footer flex-wrap\">\n          <a href={siteRoot + 'help/'} target=\"_blank\" rel=\"noopener noreferrer\" className=\"item\">{gettext('Help')}</a>\n          <a className=\"item cursor-pointer\" onClick={this.onAboutDialogToggle}>{gettext('About')}</a>\n          {enableTC && <a href={`${siteRoot}terms/`} className=\"item\">{gettext('Terms')}</a>}\n          {this.renderExternalAppLinks()}\n          <a href={siteRoot + 'download_client_program/'} className={`item ${additionalAppBottomLinks ? '' : 'last-item'}`}>\n            <span aria-hidden=\"true\" className=\"sf2-icon-monitor vam\"></span>{' '}\n            <span className=\"vam\">{gettext('Clients')}</span>\n          </a>\n        </div>\n        {this.state.isAboutDialogShow && (\n          <ModalPortal>\n            <AboutDialog onCloseAboutDialog={this.onAboutDialogToggle} />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nexport default SideNavFooter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Logo from './logo';\nimport MainSideNav from './main-side-nav';\nimport SideNavFooter from './side-nav-footer';\n\nconst propTypes = {\n  isSidePanelClosed: PropTypes.bool.isRequired,\n  currentTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  onCloseSidePanel: PropTypes.func.isRequired,\n  tabItemClick: PropTypes.func.isRequired,\n  draftCounts: PropTypes.number,\n};\n\nclass SidePanel extends React.Component {\n\n  render() {\n    return (\n      <div className={`side-panel ${this.props.isSidePanelClosed ? '' : 'left-zero'}`}>\n        <div className=\"side-panel-north\">\n          <Logo onCloseSidePanel={this.props.onCloseSidePanel}/>\n        </div>\n        <div className=\"side-panel-center\">\n          <MainSideNav tabItemClick={this.props.tabItemClick} currentTab={this.props.currentTab} draftCounts={this.props.draftCounts}/>\n        </div>\n        <div className=\"side-panel-footer\">\n          <SideNavFooter />\n        </div>\n      </div>\n    );\n  }\n}\n\nSidePanel.propTypes = propTypes;\n\nexport default SidePanel;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst propTypes = {\n  children: PropTypes.object.isRequired,\n};\n\nclass MainPanel extends Component {\n\n  render() {\n    return (\n      <div className=\"main-panel o-hidden\">\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nMainPanel.propTypes = propTypes;\n\nexport default MainPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object\n  ]).isRequired,\n};\n\nclass DraftsView extends React.Component {\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path\">\n            <div className=\"path-container\">\n              <h3 className=\"sf-heading\">{gettext('Drafts')}</h3>\n            </div>\n          </div>\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n\nDraftsView.propTypes = propTypes;\n\nexport default DraftsView;\n","import React from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, lang } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nmoment.locale(lang);\nconst propTypes = {\n  draft: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMenuIconShow: false,\n      isItemMenuShow: false,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isMenuIconShow: false,\n        highlight: false,\n      });\n    }\n  }\n\n  onDropdownToggleClick = (e) => {\n    e.preventDefault();\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    e.stopPropagation();\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow }, () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.setState({\n            highlight: false,\n            isMenuIconShow: false,\n          });\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  onDeleteHandler = () => {\n    this.props.onDeleteHandler(this.props.draft);\n  }\n\n  onPublishHandler = () => {\n    this.props.onPublishHandler(this.props.draft);\n  }\n\n  render() {\n    let draft = this.props.draft;\n    let repoID = draft.origin_repo_id;\n    let filePath = draft.draft_file_path;\n    let fileName = Utils.getFileName(filePath);\n    let draftUrl = siteRoot + 'drafts/' + draft.id + '/';\n    let libraryUrl = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(draft.repo_name) + '/' ;\n    let localTime = moment.utc(draft.updated_at).toDate();\n    localTime = moment(localTime).fromNow();\n\n    let iconUrl = Utils.getFileIconUrl(fileName);\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n        <td className=\"name\" >\n          <a href={draftUrl} target=\"_blank\">{fileName}</a>\n        </td>\n        <td className=\"library\">\n          <a href={libraryUrl} target=\"_blank\">{draft.repo_name}</a>\n        </td>\n        <td className=\"update\">{localTime}</td>\n        <td className=\"text-center\">\n          {this.state.isMenuIconShow && (\n            <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"fas fa-ellipsis-v attr-action-icon\"\n                title={gettext('More Operations')}\n                onClick={this.onDropdownToggleClick}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isItemMenuShow}\n              />\n              <DropdownMenu>\n                <DropdownItem onClick={this.onDeleteHandler}>{gettext('Delete')}</DropdownItem>\n                {draft.status == 'open' &&\n                  <DropdownItem onClick={this.onPublishHandler}>{gettext('Publish')}</DropdownItem>\n                }\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftListItem.propTypes = propTypes;\n\nexport default DraftListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport DraftListItem from './draft-list-item';\n\nconst propTypes = {\n  draftList: PropTypes.array.isRequired,\n  onDeleteHandler: PropTypes.func.isRequired,\n  onPublishHandler: PropTypes.func.isRequired,\n};\n\nclass DraftListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let drafts = this.props.draftList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '46%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Library')}</th>\n            <th style={{width: '10%'}}>{gettext('Last Update')}</th>\n            <th style={{width: '10%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { drafts && drafts.map((draft) => {\n            return (\n              <DraftListItem\n                key={draft.id}\n                draft={draft}\n                isItemFreezed={this.state.isItemFreezed}\n                onFreezedItem={this.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n                onDeleteHandler={this.props.onDeleteHandler}\n                onPublishHandler={this.props.onPublishHandler}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nDraftListView.propTypes = propTypes;\n\nexport default DraftListView;\n","import React, { Fragment } from 'react';\nimport { gettext } from '../../utils/constants';\nimport editUtilities from '../../utils/editor-utilities';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport DraftListView from '../../components/draft-list-view/draft-list-view';\n\nconst propTypes = {\n  isLoadingDraft: PropTypes.bool.isRequired,\n  updateDraftsList: PropTypes.func.isRequired,\n  draftList: PropTypes.array.isRequired,\n  getDrafts: PropTypes.func.isRequired,\n};\n\nclass DraftContent extends React.Component {\n\n  componentDidMount() {\n    this.props.getDrafts();\n  }\n\n  onDeleteHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.deleteDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully deleted draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to delete draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  onPublishHandler = (draft) => {\n    // let draft = this.state.currentDraft;\n    let draft_name = Utils.getFileName(draft.draft_file_path);\n    editUtilities.publishDraft(draft.id).then(res => {\n      this.props.updateDraftsList(draft.id);\n      let msg_s = gettext('Successfully published draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.success(msg_s);\n    }).catch(() => {\n      let msg_s = gettext('Failed to publish draft %(draft)s.');\n      msg_s = msg_s.replace('%(draft)s', draft_name);\n      toaster.danger(msg_s);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"cur-view-content\">\n        {this.props.isLoadingDraft && <Loading />}\n        {!this.props.isLoadingDraft && (\n          <Fragment>\n            {this.props.draftList.length === 0 && (\n              <EmptyTip>\n                <h2>{gettext('No draft yet')}</h2>\n                <p>{gettext('Draft is a way to let you collaborate with others on files. You can create a draft from a file, edit the draft and then ask for a review. The original file will be updated only after the draft has been reviewed.')}</p>\n              </EmptyTip>\n            )}\n            {this.props.draftList.length !==0 && (\n              <DraftListView\n                draftList={this.props.draftList}\n                onDeleteHandler={this.onDeleteHandler}\n                onPublishHandler={this.onPublishHandler}\n              />\n            )}\n          </Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nDraftContent.propTypes = propTypes;\n\nexport default DraftContent;\n","class Acticity {\n  constructor(json) {\n    this.repo_id = json.repo_id;\n    this.repo_name = json.repo_name;\n    this.obj_type = json.obj_type;\n    this.commit_id = json.commit_id;\n    this.path = json.path;\n    this.name = json.name;\n    this.author_email = json.author_email;\n    this.author_name = json.author_name;\n    this.author_contact_email = json.author_contact_email;\n    this.avatar_url = json.avatar_url;\n    this.time = json.time;\n    this.op_type = json.op_type;\n    this.createdFilesCount = 0;\n    this.createdFilesList = [];\n    if (json.op_type === 'clean-up-trash') {\n      this.days = json.days;\n    } else if (json.op_type === 'rename' && json.obj_type === 'repo') {\n      this.old_repo_name = json.old_repo_name;\n    } else if (json.op_type === 'move' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n    } else if (json.op_type === 'rename' && ['dir', 'file'].includes(json.obj_type)) {\n      this.old_path = json.old_path;\n      this.old_name = json.old_name;\n    } else if (json.op_type === 'publish') {\n      this.old_path = json.old_path;\n    } else if (json.name.endsWith('(draft).md')) {\n      this.draft_id = json.draft_id;\n    }\n  }\n}\n\nexport default Acticity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  activity: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ListCreatedFileDialog extends React.Component {\n\n  toggle = (activity) => {\n    this.props.toggleCancel(activity);\n  }\n\n  render() {\n    let activity = this.props.activity;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Created Files')}</ModalHeader>\n        <ModalBody>\n          <Table>\n            <thead>\n              <tr>\n                <th width='75%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Time')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                activity.createdFilesList.map((item, index) => {\n                  let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n                  if (item.name.endsWith('(draft).md')) {\n                    fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n                  }\n                  let fileLink = <a href={fileURL} target='_blank'>{item.name}</a>;\n                  if (item.name.endsWith('(draft).md') && !item.draft_id) {\n                    fileLink = item.name;\n                  }\n                  return (\n                    <tr key={index}>\n                      <td>{fileLink}</td>\n                      <td>{moment(item.time).fromNow()}</td>\n                    </tr>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle.bind(this, activity)}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListCreatedFileDialog.propTypes = propTypes;\n\nexport default ListCreatedFileDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, serviceURL } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Activity from '../../models/activity';\nimport ListCreatedFileDialog from '../../components/dialog/list-created-files-dialog';\nimport ModalPortal from '../../components/modal-portal';\n\nimport '../../css/files-activities.css';\n\nmoment.locale(window.app.config.lang);\n\nconst contentPropTypes = {\n  isLoadingMore: PropTypes.bool.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass FileActivitiesContent extends Component {\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    let { items, isLoadingMore } = this.props;\n\n    const desktopThead = (\n      <thead>\n        <tr>\n          <th width=\"8%\">{/* avatar */}</th>\n          <th width=\"15%\">{gettext('User')}</th>\n          <th width=\"20%\">{gettext('Operation')}</th>\n          <th width=\"37%\">{gettext('File')} / {gettext('Library')}</th>\n          <th width=\"20%\">{gettext('Time')}</th>\n        </tr>\n      </thead>\n    );\n\n    const mobileThead = (\n      <thead>\n        <tr>\n          <th width=\"15%\"></th>\n          <th width=\"53%\"></th>\n          <th width=\"32%\"></th>\n        </tr>\n      </thead>\n    );\n\n    return (\n      <Fragment>\n        <table className=\"table-hover table-thead-hidden\">\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return (\n                <ActivityItem\n                  key={index}\n                  isDesktop={isDesktop}\n                  item={item}\n                  index={index}\n                  items={items}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        {isLoadingMore ? <span className=\"loading-icon loading-tip\"></span> : ''}\n      </Fragment>\n    );\n  }\n}\n\nFileActivitiesContent.propTypes = contentPropTypes;\n\nconst activityPropTypes = {\n  item: PropTypes.object.isRequired,\n  index: PropTypes.number.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass ActivityItem extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isListCreatedFiles: false,\n    };\n  }\n\n  onListCreatedFilesToggle = () => {\n    this.setState({\n      isListCreatedFiles: !this.state.isListCreatedFiles,\n    });\n  }\n\n  render() {\n    const isDesktop = this.props.isDesktop;\n    let {item, index, items} = this.props;\n    let op, details, moreDetails = false;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(item.author_email)}/`;\n\n    let libURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + '/';\n    let libLink = <a href={libURL}>{item.repo_name}</a>;\n    let smallLibLink = <a className=\"small text-secondary\" href={libURL}>{item.repo_name}</a>;\n\n    if (item.obj_type == 'repo') {\n      switch(item.op_type) {\n        case 'create':\n          op = gettext('Created library');\n          details = libLink;\n          break;\n        case 'rename':\n          op = gettext('Renamed library');\n          details = <span>{item.old_repo_name} => {libLink}</span>;\n          break;\n        case 'delete':\n          op = gettext('Deleted library');\n          details = item.repo_name;\n          break;\n        case 'recover':\n          op = gettext('Restored library');\n          details = libLink;\n          break;\n        case 'clean-up-trash':\n          op = gettext('Cleaned trash');\n          if (item.days == 0) {\n            details = gettext('Removed all items from trash.');\n          } else {\n            details = gettext('Removed items older than {n} days from trash.').replace('{n}', item.days);\n          }\n          moreDetails = true;\n          break;\n      }\n    } else if (item.obj_type == 'draft') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      op = gettext('Publish draft');\n      details = fileLink;\n      moreDetails = true;\n    } else if (item.obj_type == 'files') {\n      let fileURL = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      if (item.name.endsWith('(draft).md')) {\n        fileURL = serviceURL + '/drafts/' + item.draft_id + '/';\n      }\n      let fileLink = `<a href=${fileURL} target=\"_blank\">${item.name}</a>`;\n      if (item.name.endsWith('(draft).md') && !item.draft_id) {\n        fileLink = item.name;\n      }\n      let fileCount = item.createdFilesCount - 1;\n      let firstLine = gettext('{file} and {n} other files')\n        .replace('{file}', fileLink)\n        .replace('{n}', fileCount);\n      op = gettext('Created {n} files').replace('{n}', item.createdFilesCount);\n      details = (\n        <Fragment>\n          <p className=\"m-0 d-inline\" dangerouslySetInnerHTML={{__html: firstLine}}></p>\n          {isDesktop && <span onClick={this.onListCreatedFilesToggle} className=\"activity-details text-secondary ml-2\">{gettext('details')}</span>}\n        </Fragment>\n      );\n      moreDetails = true;\n    } else if (item.obj_type == 'file') {\n      const isDraft = item.name.endsWith('(draft).md');\n      const fileURL = isDraft ? serviceURL + '/drafts/' + item.draft_id + '/' :\n        `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      let fileLink = <a href={fileURL} target=\"_blank\">{item.name}</a>;\n      if (isDraft && !item.draft_id) {\n        fileLink = item.name;\n      }\n      switch (item.op_type) {\n        case 'create':\n          op = isDraft ? gettext('Created draft') : gettext('Created file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = isDraft ? gettext('Deleted draft') : gettext('Deleted file');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed file');\n          details = <span>{item.old_name} => {fileLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const filePathLink = <a href={fileURL}>{item.path}</a>;\n          op = gettext('Moved file');\n          details = <span>{item.old_path} => {filePathLink}</span>;\n          moreDetails = true;\n          break;\n        case 'edit': // update\n          op = isDraft ? gettext('Updated draft') : gettext('Updated file');\n          details = fileLink;\n          moreDetails = true;\n          break;\n      }\n    } else { // dir\n      let dirURL = siteRoot + 'library/' + item.repo_id + '/' + encodeURIComponent(item.repo_name) + Utils.encodePath(item.path);\n      let dirLink = <a href={dirURL} target=\"_blank\">{item.name}</a>;\n      switch (item.op_type) {\n        case 'create':\n          op = gettext('Created folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'delete':\n          op = gettext('Deleted folder');\n          details = item.name;\n          moreDetails = true;\n          break;\n        case 'recover':\n          op = gettext('Restored folder');\n          details = dirLink;\n          moreDetails = true;\n          break;\n        case 'rename':\n          op = gettext('Renamed folder');\n          details = <span>{item.old_name} => {dirLink}</span>;\n          moreDetails = true;\n          break;\n        case 'move':\n          const dirPathLink = <a href={dirURL}>{item.path}</a>;\n          op = gettext('Moved folder');\n          details = <span>{item.old_path} => {dirPathLink}</span>;\n          moreDetails = true;\n          break;\n      }\n    }\n\n    let isShowDate = true;\n    if (index > 0) {\n      let lastEventTime = items[index - 1].time;\n      isShowDate = moment(item.time).isSame(lastEventTime, 'day') ? false : true;\n    }\n\n    return (\n      <Fragment>\n        {isShowDate &&\n          <tr>\n            <td colSpan={isDesktop ? 5 : 3} className=\"border-top-0\">{moment(item.time).format('YYYY-MM-DD')}</td>\n          </tr>\n        }\n        {isDesktop ? (\n          <tr>\n            <td className=\"text-center\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n            </td>\n            <td>{op}</td>\n            <td>\n              {details}\n              {moreDetails && <br /> }\n              {moreDetails && smallLibLink}\n            </td>\n            <td className=\"text-secondary\">\n              <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n            </td>\n          </tr>\n        ) : (\n          <tr>\n            <td className=\"text-center align-top\">\n              <img src={item.avatar_url} alt=\"\" width=\"32\" height=\"32\" className=\"avatar\" />\n            </td>\n            <td>\n              <a href={userProfileURL}>{item.author_name}</a>\n              <p className=\"m-0 text-secondary\">{op}</p>\n              {details}\n            </td>\n            <td className=\"text-right align-top\">\n              <span className=\"text-secondary mobile-activity-time\">\n                <time datetime={item.time} is=\"relative-time\" title={moment(item.time).format('llll')}>{moment(item.time).fromNow()}</time>\n              </span>\n              {moreDetails && <br /> }\n              {moreDetails && libLink}\n            </td>\n          </tr>\n        )}\n        {this.state.isListCreatedFiles &&\n          <ModalPortal>\n            <ListCreatedFileDialog\n              activity={item}\n              toggleCancel={this.onListCreatedFilesToggle}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nActivityItem.propTypes = activityPropTypes;\n\nclass FilesActivities extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isFirstLoading: true,\n      isLoadingMore: false,\n      currentPage: 1,\n      hasMore: true,\n      items: [],\n    };\n    this.avatarSize = 72;\n    this.curPathList = [];\n    this.oldPathList = [];\n  }\n\n  componentDidMount() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        items: events,\n        currentPage: currentPage + 1,\n        isFirstLoading: false,\n        hasMore: true,\n      });\n      if (this.state.items.length < 25) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isFirstLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  mergePublishEvents = (events) => {\n    events.map((item) => {\n      if (item.op_type === 'publish') {\n        this.curPathList.push(item.path);\n        this.oldPathList.push(item.old_path);\n      }\n    });\n    let actuallyEvents = [];\n    for (var i = 0; i < events.length; i++) {\n      if (events[i].obj_type === 'file') {\n        if (events[i].op_type === 'delete' && this.oldPathList.includes(events[i].path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'edit' && this.curPathList.includes(events[i].path)) {\n          this.curPathList.splice(this.curPathList.indexOf(events[i].path), 1);\n        } else if (events[i].op_type === 'rename' && this.oldPathList.includes(events[i].old_path)) {\n          this.oldPathList.splice(this.oldPathList.indexOf(events[i].old_path), 1);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      } else {\n        actuallyEvents.push(events[i]);\n      }\n    }\n    return actuallyEvents;\n  }\n\n  mergeFileCreateEvents = (events) => {\n    let actuallyEvents = [];\n    let multiFilesActivity = null;\n    for (var i = 0; i < events.length; i++) {\n      let isFulfilCondition = events[i].obj_type === 'file' &&\n                              events[i].op_type === 'create' &&\n                              events[i + 1] &&\n                              events[i + 1].obj_type === 'file' &&\n                              events[i + 1].op_type === 'create' &&\n                              events[i + 1].repo_name === events[i].repo_name &&\n                              events[i + 1].author_email === events[i].author_email;\n      if (multiFilesActivity != null) {\n        multiFilesActivity.createdFilesCount++;\n        multiFilesActivity.createdFilesList.push(events[i]);\n        if (isFulfilCondition) {\n          continue;\n        } else {\n          actuallyEvents.push(multiFilesActivity);\n          multiFilesActivity = null;\n        }\n      } else {\n        if (isFulfilCondition) {\n          multiFilesActivity = new Activity(events[i]);\n          multiFilesActivity.obj_type = 'files';\n          multiFilesActivity.createdFilesCount++;\n          multiFilesActivity.createdFilesList.push(events[i]);\n        } else {\n          actuallyEvents.push(events[i]);\n        }\n      }\n    }\n    return actuallyEvents;\n  }\n\n  getMore() {\n    let currentPage = this.state.currentPage;\n    seafileAPI.listActivities(currentPage, this.avatarSize).then(res => {\n      // {\"events\":[...]}\n      let events = this.mergePublishEvents(res.data.events);\n      events = this.mergeFileCreateEvents(events);\n      this.setState({\n        isLoadingMore: false,\n        items: [...this.state.items, ...events],\n        currentPage: currentPage + 1,\n        hasMore: res.data.events.length === 0 ? false : true\n      });\n      if (this.state.items.length < 25 && this.state.hasMore) {\n        this.getMore();\n      }\n    }).catch(error => {\n      this.setState({\n        isLoadingMore: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  handleScroll = (event) => {\n    if (!this.state.isLoadingMore && this.state.hasMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.getMore();\n        });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"activities\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Activities')}</h3>\n          </div>\n          <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n            {this.state.isFirstLoading && <Loading />}\n            {(!this.state.isFirstLoading && this.state.errorMsg) &&\n              <p className=\"error text-center\">{this.state.errorMsg}</p>\n            }\n            {!this.state.isFirstLoading &&\n              <FileActivitiesContent items={this.state.items} isLoadingMore={this.state.isLoadingMore}/>\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FilesActivities;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@reach/router';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport EmptyTip from '../../components/empty-tip';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No favorites')}</h2>\n          <p>{gettext('You have not added any libraries, folders or files to your favorites yet. A favorite gives you quick access to your most frequently used objects. You can add a library, folder or file to your favorites by clicking the star to the left of its name.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"40%\">{gettext('Name')}</th>\n            <th width=\"32%\">{gettext('Library')}</th>\n            <th width=\"18%\">{gettext('Last Update')}</th>\n            <th width=\"6%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"12%\"></th>\n            <th width=\"80%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <TableBody items={items} />\n        </table>\n      ) : emptyTip;\n    }\n  }\n}\n\nclass TableBody extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      items: this.props.items\n    };\n  }\n\n  componentDidMount() {\n    this.getThumbnails();\n  }\n\n  getThumbnails() {\n    let items = this.state.items.filter((item) => {\n      return Utils.imageCheck(item.obj_name) && !item.repo_encrypted;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const len = items.length;\n    const thumbnailSize = 48;\n    const _this = this;\n    let getThumbnail = function(i) {\n      const curItem = items[i];\n      seafileAPI.createThumbnail(curItem.repo_id, curItem.path, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          // when done, `setState()`\n          _this.setState({\n            items: _this.state.items\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  render() {\n\n    let listItems = this.state.items.map(function(item, index) {\n\n      if (item.path === '/') {\n        item.item_icon_url = Utils.getDefaultLibIconUrl(false);\n      } else {\n        item.item_icon_url = item.is_dir ? Utils.getFolderIconUrl(false) : Utils.getFileIconUrl(item.obj_name);\n      }\n\n      item.encoded_path = Utils.encodePath(item.path);\n\n      item.thumbnail_url = item.encoded_thumbnail_src ? `${siteRoot}${item.encoded_thumbnail_src}` : '';\n      item.dirent_view_url = item.is_dir ? `${siteRoot}library/${item.repo_id}/${item.repo_name}${item.encoded_path}` : `${siteRoot}lib/${item.repo_id}/file${item.encoded_path}`;\n\n      item.mtime_relative = moment(item.mtime).fromNow();\n\n\n      return <Item key={index} data={item} />;\n    }, this);\n\n    return (\n      <tbody>{listItems}</tbody>\n    );\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unstarred: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  unstar = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    seafileAPI.unstarItem(data.repo_id, data.path).then((res) => {\n      this.setState({unstarred: true});\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  visitItem = () => {\n    const data = this.props.data;\n    if (data.is_dir) {\n      navigate(data.dirent_view_url);\n    } else {\n      window.open(data.dirent_view_url);\n    }\n  }\n\n  render() {\n\n    if (this.state.unstarred) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-x3 unstar action-icon';\n    opClasses += this.state.showOpIcon ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td className=\"text-center\">\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td>\n          { data.is_dir ?\n            <Link to={data.dirent_view_url}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n        </td>\n        <td>{data.repo_name}</td>\n        <td dangerouslySetInnerHTML={{__html:data.mtime_relative}}></td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unstar')} aria-label={gettext('Unstar')} onClick={this.unstar}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td className=\"text-center\" onClick={this.visitItem}>\n          {\n            data.thumbnail_url ?\n              <img className=\"thumbnail\" src={data.thumbnail_url} alt=\"\" /> :\n              <img src={data.item_icon_url} alt={gettext('icon')} width=\"24\" />\n          }\n        </td>\n        <td onClick={this.visitItem}>\n          { data.is_dir ?\n            <Link to={data.dirent_view_url}>{data.obj_name}</Link> :\n            <a className=\"normal\" href={data.dirent_view_url} target=\"_blank\">{data.obj_name}</a>\n          }\n          <br />\n          <span className=\"item-meta-info\">{data.repo_name}</span>\n          <span className=\"item-meta-info\" dangerouslySetInnerHTML={{__html:data.mtime_relative}}></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.unstar}>{gettext('Unstar')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return Utils.isDesktop() ? desktopItem : mobileItem;\n  }\n}\n\nclass Starred extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listStarredItems().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.starred_item_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"starred\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Favorites')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Starred;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, FormGroup, Label, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  executeOperation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ConfirmUnlinkDevice extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isChecked: false\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  executeOperation = () => {\n    this.toggle();\n    this.props.executeOperation(this.state.isChecked);\n  }\n\n  onInputChange = (e) => {\n    this.setState({\n      isChecked: e.target.checked\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unlink device')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unlink this device?')}</p>\n          <FormGroup check>\n            <Label check>\n              <Input type=\"checkbox\" checked={this.state.isChecked} onChange={this.onInputChange} />\n              <span>{gettext('Delete files from this device the next time it comes online.')}</span>\n            </Label>\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.executeOperation}>{gettext('Unlink')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nConfirmUnlinkDevice.propTypes = propTypes;\n\nexport default ConfirmUnlinkDevice;\n","import React, { Component } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport moment from 'moment';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ConfirmUnlinkDeviceDialog from '../../components/dialog/confirm-unlink-device';\nimport { Utils } from '../../utils/utils';\n\nclass Content extends Component {\n\n  render() {\n    const {loading, errorMsg, items} = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No linked devices')}</h2>\n          <p>{gettext('You have not accessed your files with any client (desktop or mobile) yet. Configure clients on your devices to access your data more comfortably.')}</p>\n        </EmptyTip>\n      );\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"13%\">{gettext('Platform')}</th>\n            <th width=\"30%\">{gettext('Device Name')}</th>\n            <th width=\"30%\">{gettext('IP')}</th>\n            <th width=\"17%\">{gettext('Last Access')}</th>\n            <th width=\"10%\"></th>\n          </tr>\n        </thead>\n      );\n      const mobileThead = (\n        <thead>\n          <tr>\n            <th width=\"92%\"></th>\n            <th width=\"8%\"></th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      return items.length ? (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? desktopThead : mobileThead}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      ): emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isOpIconShown: false,\n      unlinked: false,\n      isConfirmUnlinkDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  toggleDialog = () => {\n    this.setState({\n      isConfirmUnlinkDialogOpen: !this.state.isConfirmUnlinkDialogOpen\n    });\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n    if (data.is_desktop_client) {\n      this.toggleDialog();\n    } else {\n      const wipeDevice = true;\n      this.unlinkDevice(wipeDevice);\n    }\n  }\n\n  unlinkDevice = (wipeDevice) => {\n    const data = this.props.data;\n    seafileAPI.unlinkDevice(data.platform, data.device_id, wipeDevice).then((res) => {\n      this.setState({\n        unlinked: true\n      });\n      let msg = gettext('Successfully unlinked %(name)s.');\n      msg = msg.replace('%(name)s', data.device_name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unlinked) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    let opClasses = 'sf2-icon-delete unlink-device action-icon';\n    opClasses += this.state.isOpIconShown ? '' : ' invisible';\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td>{data.platform}</td>\n        <td>{data.device_name}</td>\n        <td>{data.last_login_ip}</td>\n        <td>{moment(data.last_accessed).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={opClasses} title={gettext('Unlink')} aria-label={gettext('Unlink')} onClick={this.handleClick}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {data.device_name}<br />\n          <span className=\"item-meta-info\">{data.last_login_ip}</span>\n          <span className=\"item-meta-info\">{moment(data.last_accessed).fromNow()}</span>\n          <span className=\"item-meta-info\">{data.platform}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.handleClick}>{gettext('Unlink')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <React.Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {this.state.isConfirmUnlinkDialogOpen &&\n        <ConfirmUnlinkDeviceDialog\n          executeOperation={this.unlinkDevice}\n          toggleDialog={this.toggleDialog}\n        />\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nclass LinkedDevices extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listLinkedDevices().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"linked-devices\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Linked Devices')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content data={this.state} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LinkedDevices;\n","class SharedRepoInfo {\n\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    this.modifier_name = object.modifier_name;\n    this.modifier_email = object.modifier_email;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.encrypted = object.encrypted;\n    if (this.share_type === 'personal') {\n      this.is_admin = object.is_admin;\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    } else if (this.share_type === 'group') {\n      this.is_admin = object.is_admin;\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    }\n  }\n\n}\n\nexport default SharedRepoInfo;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass PermSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.sharePerms(item)}\n                  <p className=\"text-secondary small m-0\">\n                    {Utils.sharePermsExplanation(item)}\n                  </p>\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nPermSelect.propTypes = propTypes;\n\nexport default PermSelect;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@reach/router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedRepoInfo from '../../models/shared-repo-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No libraries shared')}</h2>\n          <p>{gettext('You have not shared any libraries with other users yet. You can share a library with other users by clicking the share icon to the right of a library\\'s name in \"My Libraries\".')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item\n                key={index}\n                isDesktop={isDesktop}\n                item={item}\n              />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    let item = this.props.item;\n    this.state = {\n      share_permission: item.share_permission,\n      is_admin: item.is_admin,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false\n    };\n    let permissions = ['rw', 'r'];\n    this.permissions = permissions;\n    this.showAdmin = isPro && (item.share_type !== 'public');\n    if (this.showAdmin) {\n      permissions.push('admin');\n    }\n    if (isPro) {\n      permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type,\n      'permission': permission\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.updateRepoSharePerm(item.repo_id, options).then(() => {\n      this.setState({\n        share_permission: permission == 'admin' ? 'rw' : permission,\n        is_admin: permission == 'admin',\n      });\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    const share_type = item.share_type;\n    let options = {\n      'share_type': share_type\n    };\n    if (share_type == 'personal') {\n      options.user = item.user_email;\n    } else if (share_type == 'group') {\n      options.group_id = item.group_id;\n    }\n\n    seafileAPI.unshareRepo(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    let { share_permission, is_admin, isOpIconShown, isPermSelectDialogOpen } = this.state;\n    let item = this.props.item;\n    Object.assign(item, {\n      share_permission: share_permission,\n      is_admin: is_admin\n    });\n\n    let iconUrl = Utils.getLibIconUrl(item);\n    let iconTitle = Utils.getLibIconTitle(item);\n    let repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`;\n\n\n    let shareTo;\n    const shareType = item.share_type;\n    if (shareType == 'personal') {\n      shareTo = item.user_name;\n    } else if (shareType == 'group') {\n      shareTo = item.group_name;\n    } else if (shareType == 'public') {\n      shareTo = gettext('all members');\n    }\n\n    if (this.showAdmin && is_admin) {\n      share_permission = 'admin';\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ? <span title={item.contact_email}>{shareTo}</span> : shareTo}\n        </td>\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOpIconShown}\n            currentPermission={share_permission}\n            permissions={this.permissions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        <td><a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={repoUrl}>{item.repo_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${shareTo}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <PermSelect\n          currentPerm={share_permission}\n          permissions={this.permissions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminLibraries extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedRepos().then((res) => {\n      // res: {data: Array(2), status: 200, statusText: \"OK\", headers: {}, config: {},}\n      let items = res.data.map(item => {\n        return new SharedRepoInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Libraries')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminLibraries;\n","class SharedFolderInfo {\n\n  constructor(object) {\n    this.path = object.path;\n    this.folder_name = object.folder_name;\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.share_type = object.share_type;\n    this.share_permission = object.share_permission;\n    if (object.share_type === 'group') {\n      this.group_id = object.group_id;\n      this.group_name = object.group_name;\n    } else {\n      this.user_name = object.user_name;\n      this.user_email = object.user_email;\n      this.contact_email = object.contact_email;\n    }\n  }\n\n}\n\nexport default SharedFolderInfo;\n","import React, { Fragment, Component } from 'react';\nimport { Link } from '@reach/router';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport toaster from '../../components/toast';\nimport SharePermissionEditor from '../../components/select-editor/share-permission-editor';\nimport SharedFolderInfo from '../../models/shared-folder-info';\nimport PermSelect from '../../components/dialog/perm-select';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No folders shared')}</h2>\n          <p>{gettext('You have not shared any folders with other users yet. You can share a folder with other users by clicking the share icon to the right of a folder\\'s name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"30%\">{gettext('Share To')}</th>\n                <th width=\"24%\">{gettext('Permission')}</th>\n                <th width=\"8%\"></th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      share_permission: this.props.item.share_permission,\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      unshared: false\n    };\n\n    this.permissions = ['rw', 'r'];\n    if (isPro) {\n      this.permissions.push('cloud-edit', 'preview');\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  unshare = (e) => {\n    e.preventDefault();\n\n    const item = this.props.item;\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.unshareFolder(item.repo_id, options).then((res) => {\n      this.setState({\n        unshared: true\n      });\n      let message = gettext('Successfully unshared {name}').replace('{name}', item.folder_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster(errMessage);\n    });\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const postData = {\n      'permission': permission\n    };\n    let options = {\n      'p': item.path\n    };\n    if (item.share_type == 'personal') {\n      Object.assign(options, {\n        'share_type': 'user',\n        'username': item.user_email\n      });\n    } else {\n      Object.assign(options, {\n        'share_type': item.share_type, // 'group'\n        'group_id': item.group_id\n      });\n    }\n\n    seafileAPI.updateFolderSharePerm(item.repo_id, postData, options).then((res) => {\n      this.setState({share_permission: permission});\n      toaster.success(gettext('Successfully modified permission.'));\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const item = this.props.item;\n    let { share_permission, isOpIconShown, isPermSelectDialogOpen } = this.state;\n\n    let is_readonly = false;\n    if (share_permission == 'r' || share_permission == 'preview') {\n      is_readonly = true;\n    }\n    let iconUrl = Utils.getFolderIconUrl(is_readonly);\n    let iconTitle = Utils.getFolderIconTitle({\n      'permission': share_permission\n    });\n    let folderUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(item.path)}`;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td><Link to={folderUrl}>{item.folder_name}</Link></td>\n        <td>\n          {item.share_type == 'personal' ?\n            <span title={item.contact_email}>{item.user_name}</span> : item.group_name}\n        </td>\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown}\n            currentPermission={share_permission}\n            permissions={this.permissions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        <td><a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '': 'invisible'}`} title={gettext('Unshare')} onClick={this.unshare}></a></td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            <Link to={folderUrl}>{item.folder_name}</Link>\n            <span className=\"item-meta-info-highlighted\">{Utils.sharePerms(share_permission)}</span>\n            <br />\n            <span className=\"item-meta-info\">{`${gettext('Share To:')} ${item.share_type == 'personal' ? item.user_name : item.group_name}`}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.unshare}>{gettext('Unshare')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <PermSelect\n          currentPerm={share_permission}\n          permissions={this.permissions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nclass ShareAdminFolders extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name',\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.folder_name, b.folder_name);\n          return -result;\n        };\n        break;\n    }\n\n    items.sort(comparator);\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listSharedFolders().then((res) => {\n      let items = res.data.map(item => {\n        return new SharedFolderInfo(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\" id=\"share-admin-libs\">\n          <div className=\"cur-view-path\">\n            <h3 className=\"sf-heading\">{gettext('Folders')}</h3>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              errorMsg={this.state.errorMsg}\n              loading={this.state.loading}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminFolders;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPerm: PropTypes.string.isRequired,\n  permissions: PropTypes.array.isRequired,\n  changePerm: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareLinkPermissionSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentOption: this.props.currentPerm\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    const currentOption = e.target.value;\n    this.setState({\n      currentOption: currentOption\n    });\n\n    this.props.changePerm(currentOption);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    const options = this.props.permissions;\n    const { currentOption } = this.state;\n\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {options.map((item, index) => {\n            return (\n              <div className=\"d-flex\" key={index}>\n                <input id={`option-${index}`} className=\"mt-1\" type=\"radio\" name=\"permission\" value={item} checked={currentOption == item} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"ml-2\">\n                  {Utils.getShareLinkPermissionObject(item).text}\n                </label>\n              </div>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nShareLinkPermissionSelect.propTypes = propTypes;\n\nexport default ShareLinkPermissionSelect;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { isPro, gettext, siteRoot, canGenerateUploadLink } from '../../utils/constants';\nimport ShareLink from '../../models/share-link';\nimport ShareLinkPermissionEditor from '../../components/select-editor/share-link-permission-editor';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\nimport ShareLinkPermissionSelect from '../../components/dialog/share-link-permission-select';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const emptyTip = (\n        <EmptyTip>\n          <h2>{gettext('No share links')}</h2>\n          <p>{gettext('You have not created any share links yet. A share link can be used to share files and folders with anyone. You can create a share link for a file or folder by clicking the share icon to the right of its name.')}</p>\n        </EmptyTip>\n      );\n\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const isDesktop = Utils.isDesktop();\n      // only for some columns\n      const columnWidths = isPro ? ['14%', '7%', '14%'] : ['21%', '14%', '20%'];\n      const table = (\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          <thead>\n            {isDesktop ? (\n              <tr>\n                <th width=\"4%\">{/*icon*/}</th>\n                <th width=\"31%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width={columnWidths[0]}>{gettext('Library')}</th>\n                {isPro && <th width=\"20%\">{gettext('Permission')}</th>}\n                <th width={columnWidths[1]}>{gettext('Visits')}</th>\n                <th width={columnWidths[2]}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Expiration')} {sortByTime && sortIcon}</a></th>\n                <th width=\"10%\">{/*Operations*/}</th>\n              </tr>\n            ) : (\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            )}\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink} />);\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isPermSelectDialogOpen: false, // for mobile\n      isLinkDialogOpen: false,\n      permissionOptions: [],\n      currentPermission: '',\n    };\n  }\n\n  componentDidMount() {\n    if (isPro) {\n      this.updatePermissionOptions();\n    }\n  }\n\n  updatePermissionOptions = () => {\n    const item = this.props.item;\n    let itemType = item.is_dir ? (item.path === '/' ? 'library' : 'dir') : 'file';\n    let permission = item.repo_folder_permission;\n    let permissionOptions = Utils.getShareLinkPermissionList(itemType, permission, item.path, item.can_edit);\n    let currentPermission = Utils.getShareLinkPermissionStr(this.props.item.permissions);\n    this.setState({\n      permissionOptions: permissionOptions,\n      currentPermission: currentPermission\n    });\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  togglePermSelectDialog = () => {\n    this.setState({\n      isPermSelectDialogOpen: !this.state.isPermSelectDialogOpen\n    });\n  }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  changePerm = (permission) => {\n    const item = this.props.item;\n    const permissionDetails = Utils.getShareLinkPermissionObject(permission).permissionDetails;\n    seafileAPI.updateShareLink(item.token, JSON.stringify(permissionDetails)).then(() => {\n      this.setState({\n        currentPermission: permission\n      });\n      let message = gettext('Successfully modified permission.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const item = this.props.item;\n    const { currentPermission, permissionOptions , isOpIconShown, isPermSelectDialogOpen, isLinkDialogOpen } = this.state;\n\n    let iconUrl, objUrl;\n    if (item.is_dir) {\n      let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n      iconUrl = Utils.getFolderIconUrl(false);\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    } else {\n      iconUrl = Utils.getFileIconUrl(item.obj_name);\n      objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n    }\n\n    const desktopItem = (\n      <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n        <td><img src={iconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          {item.is_dir ?\n            <Link to={objUrl}>{item.obj_name}</Link> :\n            <a href={objUrl} target=\"_blank\">{item.obj_name}</a>\n          }\n        </td>\n        <td><Link to={`${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}/`}>{item.repo_name}</Link></td>\n        {isPro &&\n        <td>\n          <ShareLinkPermissionEditor\n            isTextMode={true}\n            isEditIconShow={isOpIconShown && !item.is_expired}\n            currentPermission={currentPermission}\n            permissionOptions={permissionOptions}\n            onPermissionChanged={this.changePerm}\n          />\n        </td>\n        }\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('View')} onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '': 'invisible'}`} title={gettext('Remove')} onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr>\n          <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n          <td>\n            {item.is_dir ?\n              <Link to={objUrl}>{item.obj_name}</Link> :\n              <a href={objUrl} target=\"_blank\">{item.obj_name}</a>\n            }\n            {isPro && <span className=\"item-meta-info-highlighted\">{Utils.getShareLinkPermissionObject(currentPermission).text}</span>}\n            <br />\n            <span>{item.repo_name}</span><br />\n            <span className=\"item-meta-info\">{item.view_cnt}<span className=\"small text-secondary\">({gettext('Visits')})</span></span>\n            <span className=\"item-meta-info\">{this.renderExpiration()}<span className=\"small text-secondary\">({gettext('Expiration')})</span></span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  {(isPro && !item.is_expired) && <DropdownItem className=\"mobile-menu-item\" onClick={this.togglePermSelectDialog}>{gettext('Permission')}</DropdownItem>}\n                  {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {isPermSelectDialogOpen &&\n        <ShareLinkPermissionSelect\n          currentPerm={currentPermission}\n          permissions={permissionOptions}\n          changePerm={this.changePerm}\n          toggleDialog={this.togglePermSelectDialog}\n        />\n        }\n      </Fragment>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass ShareAdminShareLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: 'name', // 'name' or 'time'\n      sortOrder: 'asc' // 'asc' or 'desc'\n    };\n  }\n\n  _sortItems = (items, sortBy, sortOrder) => {\n    let comparator;\n\n    switch (`${sortBy}-${sortOrder}`) {\n      case 'name-asc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return result;\n        };\n        break;\n      case 'name-desc':\n        comparator = function(a, b) {\n          var result = Utils.compareTwoWord(a.obj_name, b.obj_name);\n          return -result;\n        };\n        break;\n      case 'time-asc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? -1 : 1;\n        };\n        break;\n      case 'time-desc':\n        comparator = function(a, b) {\n          return a.expire_date < b.expire_date ? 1 : -1;\n        };\n        break;\n    }\n\n    items.sort((a, b) => {\n      if (a.is_dir && !b.is_dir) {\n        return -1;\n      } else if (!a.is_dir && b.is_dir) {\n        return 1;\n      } else {\n        return comparator(a, b);\n      }\n    });\n    return items;\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: this._sortItems(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  componentDidMount() {\n    seafileAPI.listUserShareLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new ShareLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: this._sortItems(items, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteShareLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      let message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path share-upload-nav\">\n            <ul className=\"nav\">\n              <li className=\"nav-item\">\n                <Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link active\">{gettext('Share Links')}</Link>\n              </li>\n              {canGenerateUploadLink && (\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link\">{gettext('Upload Links')}</Link></li>\n              )}\n            </ul>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              loading={this.state.loading}\n              errorMsg={this.state.errorMsg}\n              items={this.state.items}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n              onRemoveLink={this.onRemoveLink}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminShareLinks;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport UploadLink from '../../models/upload-link';\nimport ShareAdminLink from '../../components/dialog/share-admin-link';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n    if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    }\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No upload links')}</h2>\n        <p>{gettext('You have not created any upload links yet. An upload link allows anyone to upload files to a folder or library. You can create an upload link for a folder or library by clicking the share icon to the right of its name.')}</p>\n      </EmptyTip>\n    );\n\n    const isDesktop = Utils.isDesktop();\n    const table = (\n      <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ? (\n            <tr>\n              <th width=\"4%\">{/*icon*/}</th>\n              <th width=\"30%\">{gettext('Name')}</th>\n              <th width=\"24%\">{gettext('Library')}</th>\n              <th width=\"16%\">{gettext('Visits')}</th>\n              <th width=\"16%\">{gettext('Expiration')}</th>\n              <th width=\"10%\">{/*Operations*/}</th>\n            </tr>\n          ) : (\n            <tr>\n              <th width=\"12%\"></th>\n              <th width=\"80%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          )}\n        </thead>\n        <tbody>\n          {items.map((item, index) => {\n            return (<Item key={index} isDesktop={isDesktop} item={item} onRemoveLink={this.props.onRemoveLink}/>);\n          })}\n        </tbody>\n      </table>\n    );\n\n    return items.length ? table : emptyTip;\n  }\n}\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isLinkDialogOpen: false\n    };\n  }\n\n toggleOpMenu = () => {\n   this.setState({\n     isOpMenuOpen: !this.state.isOpMenuOpen\n   });\n }\n\n  toggleLinkDialog = () => {\n    this.setState({\n      isLinkDialogOpen: !this.state.isLinkDialogOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({isOpIconShown: true});\n  }\n\n  handleMouseOut = () => {\n    this.setState({isOpIconShown: false});\n  }\n\n  viewLink = (e) => {\n    e.preventDefault();\n    this.toggleLinkDialog();\n  }\n\n  removeLink = (e) => {\n    e.preventDefault();\n    this.props.onRemoveLink(this.props.item);\n  }\n\n  renderExpiration = () => {\n    const item = this.props.item;\n    if (!item.expire_date) {\n      return '--';\n    }\n    const expire_date = moment(item.expire_date).format('YYYY-MM-DD');\n    const expire_time = moment(item.expire_date).format('YYYY-MM-DD HH:mm:ss');\n    return (<span className={item.is_expired ? 'error' : ''} title={expire_time}>{expire_date}</span>);\n  }\n\n  render() {\n    let item = this.props.item;\n    const { isOpIconShown, isLinkDialogOpen } = this.state;\n\n    const iconUrl = Utils.getFolderIconUrl(false);\n    const repoUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}`;\n    const objUrl = `${repoUrl}${Utils.encodePath(item.path)}`;\n\n    const desktopItem = (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td><Link to={objUrl}>{item.obj_name}</Link></td>\n        <td><Link to={repoUrl}>{item.repo_name}</Link></td>\n        <td>{item.view_cnt}</td>\n        <td>{this.renderExpiration()}</td>\n        <td>\n          {!item.is_expired && <a href=\"#\" className={`sf2-icon-link action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('View')} onClick={this.viewLink}></a>}\n          <a href=\"#\" className={`sf2-icon-delete action-icon ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Remove')} onClick={this.removeLink}></a>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td><img src={iconUrl} alt=\"\" width=\"24\" /></td>\n        <td>\n          <Link to={objUrl}>{item.obj_name}</Link>\n          <br />\n          <span>{item.repo_name}</span><br />\n          <span className=\"item-meta-info\">{item.view_cnt}<span className=\"small text-secondary\">({gettext('Visits')})</span></span>\n          <span className=\"item-meta-info\">{this.renderExpiration()}<span className=\"small text-secondary\">({gettext('Expiration')})</span></span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {!item.is_expired && <DropdownItem className=\"mobile-menu-item\" onClick={this.viewLink}>{gettext('View')}</DropdownItem>}\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.removeLink}>{gettext('Remove')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isLinkDialogOpen &&\n        <ShareAdminLink\n          link={item.link}\n          toggleDialog={this.toggleLinkDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nclass ShareAdminUploadLinks extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listUserUploadLinks().then((res) => {\n      let items = res.data.map(item => {\n        return new UploadLink(item);\n      });\n      this.setState({\n        loading: false,\n        items: items\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onRemoveLink = (item) => {\n    seafileAPI.deleteUploadLink(item.token).then(() => {\n      let items = this.state.items.filter(uploadItem => {\n        return uploadItem.token !== item.token;\n      });\n      this.setState({items: items});\n      const message = gettext('Successfully deleted 1 item.');\n      toaster.success(message);\n    }).catch((error) => {\n      const errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"main-panel-center\">\n        <div className=\"cur-view-container\">\n          <div className=\"cur-view-path share-upload-nav\">\n            <ul className=\"nav\">\n              {canGenerateShareLink && (\n                <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-share-links/`} className=\"nav-link\">{gettext('Share Links')}</Link></li>\n              )}\n              <li className=\"nav-item\"><Link to={`${siteRoot}share-admin-upload-links/`} className=\"nav-link active\">{gettext('Upload Links')}</Link></li>\n            </ul>\n          </div>\n          <div className=\"cur-view-content\">\n            <Content\n              loading={this.state.loading}\n              errorMsg={this.state.errorMsg}\n              items={this.state.items}\n              onRemoveLink={this.onRemoveLink}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShareAdminUploadLinks;\n","import { Utils } from '../utils/utils';\n\nclass Repo {\n  constructor(object) {\n    this.repo_id = object.repo_id;\n    this.repo_name = object.repo_name;\n    this.permission = object.permission;\n    this.size_original = object.size;\n    this.size = Utils.bytesToSize(object.size);\n    this.owner_name = object.owner_name;\n    this.owner_email = object.owner_email;\n    this.owner_contact_email = object.owner_contact_email;\n    this.encrypted = object.encrypted;\n    this.last_modified = object.last_modified;\n    this.modifier_contact_email = object.modifier_contact_email;\n    this.modifier_email = object.modifier_email;\n    this.modifier_name = object.modifier_name;\n    this.type = object.type;\n    this.starred = object.starred;\n    this.status = object.status;\n    this.storage_name = object.storage_name;\n    if (object.is_admin != undefined) {\n      this.is_admin = object.is_admin;\n    }\n  }\n}\n\nexport default Repo;\n","import React from 'react';\nimport { gettext } from '../utils/constants';\n\nfunction LibsMobileThead() {\n  return (\n    <thead>\n      <tr>\n        <th width=\"12%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n        <th width=\"80%\"></th>\n        <th width=\"8%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n      </tr>\n    </thead>\n  );\n}\n\nexport default LibsMobileThead;\n","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass SortOptions extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.sortOptions = [\n      {value: 'name-asc', text: gettext('By name ascending')},\n      {value: 'name-desc', text: gettext('By name descending')},\n      {value: 'size-asc', text: gettext('By size ascending')},\n      {value: 'size-desc', text: gettext('By size descending')},\n      {value: 'time-asc', text: gettext('By time ascending')},\n      {value: 'time-desc', text: gettext('By time descending')}\n    ];\n    const { sortBy, sortOrder } = this.props;\n    this.state = {\n      currentOption: `${sortBy}-${sortOrder}`\n    };\n  }\n\n  switchOption = (e) => {\n    if (!e.target.checked) {\n      return;\n    }\n\n    this.setState({\n      currentOption: e.target.value\n    });\n\n    const [sortBy, sortOrder] = e.target.value.split('-');\n    this.props.sortItems(sortBy, sortOrder);\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalBody>\n          {this.sortOptions.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <input id={`option-${index}`} className=\"align-middle\" type=\"radio\" name=\"sort-option\" value={item.value} checked={this.state.currentOption == item.value} onChange={this.switchOption} />\n                <label htmlFor={`option-${index}`} className=\"align-middle m-2\">{item.text}</label><br />\n              </Fragment>\n            );\n          })}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nSortOptions.propTypes = propTypes;\n\nexport default SortOptions;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport cookie from 'react-cookies';\nimport { Link, navigate } from '@reach/router';\nimport { gettext, siteRoot, isPro } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\nimport ModalPotal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nclass Content extends Component {\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  render() {\n    const { loading, errorMsg, items, sortBy, sortOrder } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No shared libraries')}</h2>\n        <p>{gettext('No libraries have been shared directly with you. A shared library can be shared with full or restricted permission. If you need access to a library owned by another user, ask the user to share the library with you.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      // sort\n      const sortByName = sortBy == 'name';\n      const sortByTime = sortBy == 'time';\n      const sortBySize = sortBy == 'size';\n      const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"34%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"10%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width=\"14%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width=\"18%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n      );\n\n      const isDesktop = Utils.isDesktop();\n      const table = (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {items.map((item, index) => {\n              return <Item key={index} data={item} isDesktop={isDesktop} />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showOpIcon: false,\n      unshared: false,\n      isShowSharedDialog: false,\n      isStarred: this.props.data.starred,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      showOpIcon: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      showOpIcon: false\n    });\n  }\n\n  share = (e) => {\n    e.preventDefault();\n    this.setState({isShowSharedDialog: true});\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n\n    const data = this.props.data;\n\n    let request;\n    if (data.owner_email.indexOf('@seafile_group') == -1) {\n      let options = {\n        'share_type': 'personal',\n        'from': data.owner_email\n      };\n      request = seafileAPI.leaveShareRepo(data.repo_id, options);\n    } else {\n      request = seafileAPI.leaveShareGroupOwnedRepo(data.repo_id);\n    }\n\n    request.then((res) => {\n      this.setState({unshared: true});\n      let message = gettext('Successfully unshared {name}').replace('{name}', data.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', data.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  onStarRepo = () => {\n    const repoName = this.props.data.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.data.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  visitRepo = () => {\n    navigate(this.repoURL);\n  }\n\n  render() {\n    if (this.state.unshared) {\n      return null;\n    }\n\n    const data = this.props.data;\n\n    data.icon_url = Utils.getLibIconUrl(data);\n    data.icon_title = Utils.getLibIconTitle(data);\n\n    let iconVisibility = this.state.showOpIcon ? '' : ' invisible';\n    let shareIconClassName = 'op-icon sf2-icon-share repo-share-btn' + iconVisibility;\n    let leaveShareIconClassName = 'op-icon sf2-icon-x3' + iconVisibility;\n    let shareRepoUrl = this.repoURL = `${siteRoot}library/${data.repo_id}/${Utils.encodePath(data.repo_name)}/`;\n    const desktopItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td className=\"text-center\">\n            {!this.state.isStarred && <i className=\"far fa-star star-empty cursor-pointer\" onClick={this.onStarRepo}></i>}\n            {this.state.isStarred && <i className=\"fas fa-star cursor-pointer\" onClick={this.onStarRepo}></i>}\n          </td>\n          <td><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td><Link to={shareRepoUrl}>{data.repo_name}</Link></td>\n          <td>\n            {(isPro && data.is_admin) &&\n              <a href=\"#\" className={shareIconClassName} title={gettext('Share')} onClick={this.share}></a>\n            }\n            <a href=\"#\" className={leaveShareIconClassName} title={gettext('Leave Share')} onClick={this.leaveShare}></a>\n          </td>\n          <td>{data.size}</td>\n          <td title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</td>\n          <td title={data.owner_contact_email}>{data.owner_name}</td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    const mobileItem = (\n      <Fragment>\n        <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n          <td onClick={this.visitRepo}><img src={data.icon_url} title={data.icon_title} alt={data.icon_title} width=\"24\" /></td>\n          <td onClick={this.visitRepo}>\n            <Link to={shareRepoUrl}>{data.repo_name}</Link><br />\n            <span className=\"item-meta-info\" title={data.owner_contact_email}>{data.owner_name}</span>\n            <span className=\"item-meta-info\">{data.size}</span>\n            <span className=\"item-meta-info\" title={moment(data.last_modified).format('llll')}>{moment(data.last_modified).fromNow()}</span>\n          </td>\n          <td>\n            <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n              <DropdownToggle\n                tag=\"i\"\n                className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n                title={gettext('More Operations')}\n                data-toggle=\"dropdown\"\n                aria-expanded={this.state.isOpMenuOpen}\n              />\n              <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n                <div className=\"mobile-operation-menu-bg-layer\"></div>\n                <div className=\"mobile-operation-menu\">\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.onStarRepo}>{this.state.isStarred ? gettext('Unstar') : gettext('Star')}</DropdownItem>\n                  {(isPro && data.is_admin) &&\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.share}>{gettext('Share')}</DropdownItem>\n                  }\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.leaveShare}>{gettext('Leave Share')}</DropdownItem>\n                </div>\n              </div>\n            </Dropdown>\n          </td>\n        </tr>\n        {this.state.isShowSharedDialog && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={data.repo_name}\n              itemPath={'/'}\n              repoID={data.repo_id}\n              repoEncrypted={data.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={data.permission}\n              isAdmin={true}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPotal>\n        )}\n      </Fragment>\n    );\n\n    return this.props.isDesktop ? desktopItem : mobileItem;\n  }\n}\n\nItem.propTypes = {\n  isDesktop: PropTypes.bool.isRequired,\n  data: PropTypes.object.isRequired\n};\n\nclass SharedLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type:'shared'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        loading: false,\n        items: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortRepos(this.state.items, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with me')}</h3>\n              {(!Utils.isDesktop() && this.state.items.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                sortBy={this.state.sortBy}\n                sortOrder={this.state.sortOrder}\n                sortItems={this.sortItems}\n              />\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedLibraries;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Link } from '@reach/router';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\n\nclass Content extends Component {\n\n  render() {\n    const { loading, errorMsg, items } = this.props;\n\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries have been shared with you')}</h2>\n        <p>{gettext('No libraries have been shared with you from other servers.')}</p>\n      </EmptyTip>\n    );\n\n    if (loading) {\n      return <Loading />;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const table = (\n        <table>\n          <thead>\n            <tr>\n              <th width=\"4%\"></th>\n              <th width=\"20%\">{gettext('Name')}</th>\n              <th width=\"20%\">{gettext('Shared by')}</th>\n              <th width=\"26%\">{gettext('At server')}</th>\n              <th width=\"20%\">{gettext('Time')}</th>\n              <th width=\"10%\">{/* operations */}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((item, index) => {\n              return <Item\n                key={index}\n                item={item}\n                leaveShare={this.props.leaveShare}\n              />;\n            })}\n          </tbody>\n        </table>\n      );\n\n      return items.length ? table : emptyTip;\n    }\n  }\n}\n\nContent.propTypes = {\n  loading: PropTypes.bool.isRequired,\n  errorMsg: PropTypes.string.isRequired,\n  items: PropTypes.array.isRequired,\n};\n\nclass Item extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  leaveShare = (e) => {\n    e.preventDefault();\n    this.props.leaveShare(this.props.item);\n  }\n\n  render() {\n    const item = this.props.item;\n    const { isOpIconShown } = this.state;\n\n    item.icon_url = Utils.getLibIconUrl(item);\n    item.icon_title = Utils.getLibIconTitle(item);\n\n    let shareRepoUrl =`${siteRoot}remote-library/${this.props.item.provider_id}/${this.props.item.repo_id}/${Utils.encodePath(this.props.item.repo_name)}/`;\n    return (\n      <tr onMouseOver={this.handleMouseOver} onMouseOut={this.handleMouseOut}>\n        <td><img src={item.icon_url} title={item.icon_title} alt={item.icon_title} width=\"24\" /></td>\n        <td><Link to={shareRepoUrl}>{item.repo_name}</Link></td>\n        <td>{item.from_user}</td>\n        <td>{item.from_server_url}</td>\n        <td title={moment(item.last_modified).format('llll')}>{moment(item.ctime).fromNow()}</td>\n        <td>\n          <a href=\"#\" className={`action-icon sf2-icon-x3 ${isOpIconShown ? '' : 'invisible'}`} title={gettext('Leave Share')} onClick={this.leaveShare}></a>\n        </td>\n      </tr>\n    );\n  }\n}\n\nItem.propTypes = {\n  item: PropTypes.object.isRequired\n};\n\nclass SharedWithOCM extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      items: []\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listOCMSharesReceived().then((res) => {\n      this.setState({\n        loading: false,\n        items: res.data.ocm_share_received_list\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  leaveShare = (item) => {\n    const { id, repo_name } = item;\n    seafileAPI.deleteOCMShareReceived(id).then((res) => {\n      let items = this.state.items.filter(item => {\n        return item.id != id;\n      });\n      this.setState({items: items});\n      toaster.success(gettext('Successfully unshared {name}').replace('{name}', repo_name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared from other servers')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content\n                loading={this.state.loading}\n                errorMsg={this.state.errorMsg}\n                items={this.state.items}\n                leaveShare={this.leaveShare}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default SharedWithOCM;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Account from '../../components/common/account';\n\nconst propTypes = {\n  children: PropTypes.object\n};\n\nclass MainPanelTopbar extends Component {\n\n  render() {\n    return (\n      <div className={`main-panel-north ${this.props.children ? 'border-left-show' : ''}`}>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\"></span>\n          <div className=\"operation\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className=\"common-toolbar\">\n          <Account isAdminPanel={false} />\n        </div>\n      </div>\n    );\n  }\n}\n\nMainPanelTopbar.propTypes = propTypes;\n\nexport default MainPanelTopbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    return (\n      <div className=\"path-container\">\n        <Link to={siteRoot + 'shared-with-ocm/'} className=\"normal\" onClick={(e) => this.props.onTabNavClick('shared-with-ocm')}>{gettext('All')}</Link>\n        <span className=\"path-split\">/</span>\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\n\nclass DirentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false\n    };\n  }\n\n  handleMouseOver = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  handleMouseOut = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  openFolder = () => {\n    this.props.openFolder(this.props.dirent);\n  }\n\n  downloadDirent = (e) => {\n    e.preventDefault();\n    this.props.downloadDirent(this.props.dirent);\n  }\n\n  render () {\n    let { isOpIconShown } = this.state;\n    let { dirent } = this.props;\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    return (\n      <Fragment>\n        <tr onMouseEnter={this.handleMouseOver} onMouseLeave={this.handleMouseOut}>\n          <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt='' /></td>\n          <td>\n            {dirent.is_file ?\n              dirent.name :\n              <Link to=\"#\" onClick={this.openFolder}>{dirent.name}</Link>\n            }\n          </td>\n          <td>\n            {isOpIconShown && dirent.is_file &&\n            <a href=\"#\" className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.downloadDirent}></a>\n            }\n          </td>\n          <td>{Utils.bytesToSize(dirent.size)}</td>\n          <td>{moment(dirent.mtime).fromNow()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n}\n\n\nconst propTypes = {\n  direntList: PropTypes.array.isRequired\n};\n\nclass DirContent extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { loading, errorMsg, direntList } = this.props;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-4\">{errorMsg}</p>;\n    }\n\n    return (\n      <Fragment>\n        <table className=\"table-hover\">\n          <thead>\n            <tr>\n              <th width=\"5%\">{/*icon*/}</th>\n              <th width=\"55%\">{gettext('Name')}</th>\n              <th width=\"10%\">{/*operation*/}</th>\n              <th width=\"15%\">{gettext('Size')}</th>\n              <th width=\"15%\">{gettext('Last Update')}</th>\n            </tr>\n          </thead>\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return <DirentItem\n                key={index}\n                dirent={dirent}\n                openFolder={this.props.openFolder}\n                deleteDirent={this.props.deleteDirent}\n                downloadDirent={this.props.downloadDirent}\n                fromSystemRepo={this.props.fromSystemRepo}\n              />;\n            })}\n          </tbody>\n        </table>\n      </Fragment>\n    );\n  }\n}\n\nDirContent.propTypes = propTypes;\n\nexport default DirContent;\n","import React, { Component, Fragment } from 'react';\nimport { Button } from 'reactstrap';\nimport { post } from 'axios';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { loginUrl, siteRoot, gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\nimport MainPanelTopbar from './remote-dir-topbar';\nimport DirPathBar from './remote-dir-path';\nimport DirContent from './remote-dir-content';\n\nclass Dirent {\n  constructor(obj) {\n    this.name = obj.name;\n    this.mtime = obj.mtime;\n    this.size = obj.size;\n    this.is_file = obj.type === 'file';\n  }\n\n  isDir() {\n    return !this.is_file;\n  }\n}\n\nclass DirView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.fileInput = React.createRef();\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      repoName: '',\n      path: '',\n      direntList: [],\n      isNewFolderDialogOpen: false,\n      userPerm: '',\n    };\n  }\n\n  componentDidMount () {\n    this.loadDirentList('/');\n  }\n\n  onPathClick = (path) => {\n    this.loadDirentList(path);\n  }\n\n  openFolder = (dirent) => {\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (!dirent.is_file) {\n      this.loadDirentList(direntPath);\n    }\n  }\n\n  loadDirentList = (path) => {\n    const { providerID, repoID } = this.props;\n    seafileAPI.listOCMRepoDir(providerID, repoID, path).then(res => {\n      const { repo_name: repoName, dirent_list, user_perm } = res.data;\n      let direntList = [];\n      dirent_list.forEach(item => {\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n      this.setState({\n        loading: false,\n        repoName: repoName,\n        direntList: direntList,\n        path: path,\n        userPerm: user_perm,\n      }, () => {\n        let url =`${siteRoot}remote-library/${providerID}/${repoID}/${repoName}${Utils.encodePath(path)}`;\n        window.history.replaceState({url: url, path: path}, path, url);\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  downloadDirent = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    seafileAPI.getOCMRepoDownloadURL(this.props.providerID, this.props.repoID, path).then(res => {\n      location.href = res.data;\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  openFileInput = () => {\n    this.fileInput.current.click();\n  }\n\n  onFileInputChange = () => {\n    if (!this.fileInput.current.files.length) {\n      return;\n    }\n    const file = this.fileInput.current.files[0];\n\n    let { path } = this.state;\n    let { providerID, repoID } = this.props;\n    seafileAPI.getOCMRepoUploadURL(providerID, repoID, path).then(res => {\n      let formData = new FormData();\n      formData.append('parent_dir', path);\n      formData.append('file', file);\n      post(res.data, formData).then(res => {\n        const fileObj = res.data[0];\n        let newDirent = new Dirent({\n          'type': 'file',\n          'name': fileObj.name,\n          'size': fileObj.size,\n          'mtime': (new Date()).getTime()\n        });\n        let direntList = this.state.direntList;\n        const dirs = direntList.filter(item => { return !item.is_file; });\n        direntList.splice(dirs.length, 0, newDirent);\n        this.setState({\n          direntList: direntList\n        });\n      });\n    }).catch((err) => {\n      let errMessage = Utils.getErrorMsg(err);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    const { loading, errorMsg,\n      repoName, direntList, path, userPerm } = this.state;\n    const { repoID } = this.props;\n\n    return (\n      <Fragment>\n        <MainPanelTopbar>\n          <Fragment>\n            <input className=\"d-none\" type=\"file\" onChange={this.onFileInputChange} ref={this.fileInput} />\n            {userPerm === 'rw' &&\n              <Button className=\"operation-item\" onClick={this.openFileInput}>{gettext('Upload')}</Button>\n            }\n          </Fragment>\n        </MainPanelTopbar>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path align-items-center\">\n              <DirPathBar\n                repoID={repoID}\n                repoName={repoName}\n                currentPath={path}\n                onPathClick={this.onPathClick}\n                onTabNavClick={this.props.onTabNavClick}\n              />\n            </div>\n            <div className=\"cur-view-content\">\n              <DirContent\n                loading={loading}\n                errorMsg={errorMsg}\n                direntList={direntList}\n                openFolder={this.openFolder}\n                deleteDirent={this.deleteDirent}\n                downloadDirent={this.downloadDirent}\n              />\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default DirView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, enableEncryptedLibrary, repoPasswordMinLength, storages, libraryTemplates } from '../../utils/constants';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired,\n};\n\nclass CreateRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      disabled: true,\n      encrypt: false,\n      password1: '',\n      password2: '',\n      errMessage: '',\n      permission: 'rw',\n      storage_id: storages.length ? storages[0].id : '',\n      library_template: libraryTemplates.length ? libraryTemplates[0] : '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleRepoNameChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({repoName: e.target.value});\n  }\n\n  handlePassword1Change = (e) => {\n    this.setState({password1: e.target.value});\n  }\n\n  handlePassword2Change = (e) => {\n    this.setState({password2: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateInputParams();\n    if (isValid) {\n      let repoData = this.prepareRepoData();\n      if (this.props.libraryType === 'department') {\n        this.props.onCreateRepo(repoData, 'department');\n        return;\n      }\n      this.props.onCreateRepo(repoData);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n  }\n\n  validateInputParams() {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (this.state.encrypt) {\n      let password1 = this.state.password1.trim();\n      let password2 = this.state.password2.trim();\n      if (!password1.length) {\n        errMessage = gettext('Please enter password');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (!password2.length) {\n        errMessage = gettext('Please enter the password again');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1.length < repoPasswordMinLength) {\n        errMessage = gettext('Password is too short');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n      if (password1 !== password2) {\n        errMessage = gettext('Passwords don\\'t match');\n        this.setState({errMessage: errMessage});\n        return false;\n      }\n    }\n    return true;\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    this.setState({permission: permission});\n  }\n\n  handleStorageInputChange = (selectedItem) => {\n    this.setState({storage_id: selectedItem.value});\n  }\n\n  handlelibraryTemplatesInputChange = (selectedItem) => {\n    this.setState({library_template: selectedItem.value});\n  }\n\n  onEncrypted = (e) => {\n    let isChecked = e.target.checked;\n    this.setState({\n      encrypt: isChecked,\n      disabled: !isChecked\n    });\n  }\n\n  prepareRepoData = () => {\n    let libraryType = this.props.libraryType;\n\n    let repoName = this.state.repoName.trim();\n    let password = this.state.encrypt ? this.state.password1 : '';\n    let permission = this.state.permission;\n\n    let repo = null;\n    if (libraryType === 'mine' || libraryType === 'public') {\n      repo = {\n        name: repoName,\n        passwd: password\n      };\n    }\n    if (libraryType === 'group') {\n      repo = {\n        repo_name: repoName,\n        password: password,\n        permission: permission,\n      };\n    }\n    if (libraryType === 'department') {\n      repo = {\n        repo_name: repoName,\n        passwd: password,\n      };\n    }\n\n    const storage_id = this.state.storage_id;\n    if (storage_id) {\n      repo.storage_id = storage_id;\n    }\n\n    const library_template = this.state.library_template;\n    if (library_template) {\n      repo.library_template = library_template;\n    }\n\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repoName\">{gettext('Name')}</Label>\n              <Input\n                id=\"repoName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleRepoNameChange}\n              />\n            </FormGroup>\n\n            {libraryTemplates.length > 0 && (\n              <FormGroup>\n                <Label for=\"library-template\">{gettext('Template')}</Label>\n                <Select\n                  id=\"library-template\"\n                  defaultValue={{value: libraryTemplates[0], label: libraryTemplates[0]}}\n                  options={libraryTemplates.map((item, index) => { return {value: item, label: item}; })}\n                  onChange={this.handlelibraryTemplatesInputChange}\n                /> \n              </FormGroup>\n            )}\n\n            {storages.length > 0 && (\n              <FormGroup>\n                <Label for=\"storage-backend\">{gettext('Storage Backend')}</Label>\n                <Select\n                  id=\"storage-backend\"\n                  defaultValue={{value: storages[0].id, label: storages[0].name}}\n                  options={storages.map((item, index) => { return {value: item.id, label: item.name}; })}\n                  onChange={this.handleStorageInputChange}\n                />\n              </FormGroup>\n            )}\n\n            {this.props.libraryType === 'group' && (\n              <FormGroup>\n                <Label for=\"exampleSelect\">{gettext('Permission')}</Label>\n                <Input type=\"select\" name=\"select\" id=\"exampleSelect\" onChange={this.onPermissionChange} value={this.state.permission}>\n                  <option value='rw'>{gettext('Read-Write')}</option>\n                  <option value='r'>{gettext('Read-Only')}</option>\n                </Input>\n              </FormGroup>\n            )}\n            {enableEncryptedLibrary &&\n              <div>\n                <FormGroup check>\n                  <Input type=\"checkbox\" id=\"encrypt\" onChange={this.onEncrypted} />\n                  <Label for=\"encrypt\">{gettext('Encrypt')}</Label>\n                </FormGroup>\n                {!this.state.disabled &&\n                  <FormGroup>\n                    {/* todo translate */}\n                    <Label for=\"passwd1\">{gettext('Password')}</Label><span className=\"tip\">{' '}{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span>\n                    <Input\n                      id=\"passwd1\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password1}\n                      onChange={this.handlePassword1Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n                {!this.state.disabled &&\n                  <FormGroup>\n                    <Label for=\"passwd2\">{gettext('Password again')}</Label>\n                    <Input\n                      id=\"passwd2\"\n                      type=\"password\"\n                      disabled={this.state.disabled}\n                      value={this.state.password2}\n                      onChange={this.handlePassword2Change}\n                      autoComplete=\"new-password\"\n                    />\n                  </FormGroup>\n                }\n              </div>\n            }\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateRepoDialog.propTypes = propTypes;\n\nexport default CreateRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { Link } from '@reach/router';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateRepoDialog from '../dialog/create-repo-dialog';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst propTypes = {\n  libraryType: PropTypes.string.isRequired,\n  onCreateRepo: PropTypes.func.isRequired,\n  onShowSidePanel: PropTypes.func.isRequired,\n};\n\nclass RepoViewToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isCreateRepoDialogShow: false,\n      isOpen: false,\n    };\n  }\n\n  onCreateRepo = (repo) => {\n    this.props.onCreateRepo(repo);\n    this.onCreateToggle();\n  }\n\n  onCreateToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  toggleMore = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateToggle}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n              </button>\n              <Dropdown isOpen={this.state.isOpen} toggle={this.toggleMore}>\n                <DropdownToggle className='btn btn-secondary operation-item'>\n                  {gettext('More')}\n                </DropdownToggle>\n                <DropdownMenu>\n                  <DropdownItem className=\"link-dropdown-container\">\n                    <Link className=\"link-dropdown-item\" to={siteRoot + 'my-libs/deleted/'}>{gettext('Deleted Libraries')}</Link>\n                  </DropdownItem>\n                </DropdownMenu>\n              </Dropdown>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateToggle}></span>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.props.libraryType}\n              onCreateRepo={this.onCreateRepo}\n              onCreateToggle={this.onCreateToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nRepoViewToolbar.propTypes = propTypes;\n\nexport default RepoViewToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  currentRepo: PropTypes.object.isRequired,\n  closeDetails: PropTypes.func.isRequired,\n};\n\nclass LibDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileCount: 0,\n    };\n  }\n\n  componentDidMount() {\n    let repo = this.props.currentRepo;\n    this.getFileCounts(repo);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentRepo.repo_id !== this.props.currentRepo.repo_id) {\n      this.getFileCounts(nextProps.currentRepo);\n    }\n  }\n\n  getFileCounts = (repo) => {\n    seafileAPI.getRepoInfo(repo.repo_id).then(res => {\n      this.setState({fileCount: res.data.file_count});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let repo = this.props.currentRepo;\n    let smallIconUrl = Utils.getLibIconUrl(repo);\n    let bigIconUrl = Utils.getLibIconUrl(repo, true);\n\n    return (\n      <div className=\"detail-container\">\n        <div className=\"detail-header\">\n          <div className=\"detail-control sf2-icon-x1\" onClick={this.props.closeDetails}></div>\n          <div className=\"detail-title dirent-title\">\n            <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{'  '}\n            <span className=\"name ellipsis\" title={repo.repo_name}>{repo.repo_name}</span>\n          </div>\n        </div>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\">\n            <img src={bigIconUrl} height=\"96\"  alt=\"\" />\n          </div>\n          <div className=\"dirent-table-container\">\n            <table className=\"table-thead-hidden\">\n              <thead>\n                <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n              </thead>\n              <tbody>\n                <tr><th>{gettext('Files')}</th><td>{this.state.fileCount}</td></tr>\n                <tr><th>{gettext('Size')}</th><td>{repo.size}</td></tr>\n                <tr><th>{gettext('Last Update')}</th><td>{ moment(repo.last_modified).fromNow()}</td></tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nLibDetail.propTypes = propTypes;\n\nexport default LibDetail;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  itemName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibHistorySetting extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      keepDays: -1,\n      expireDays: 30,\n      disabled: true,\n      allHistory: true,\n      noHistory: false,\n      autoHistory: false,\n      errorInfo: ''\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoHistoryLimit(this.props.repoID).then(res => {\n      this.setState({\n        keepDays: res.data.keep_days,\n        allHistory: res.data.keep_days < 0 ? true : false,\n        noHistory: res.data.keep_days === 0 ? true : false,\n        autoHistory: res.data.keep_days > 0 ? true : false,\n        disabled: res.data.keep_days > 0 ? false : true,\n        expireDays: res.data.keep_days > 0 ? res.data.keep_days : 30,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let days = this.state.keepDays;\n    if (this.state.autoHistory) {\n      days = this.state.expireDays;\n    }\n    let repoID = this.props.repoID;\n    let reg = /^-?\\d+$/;\n    let flag = reg.test(days);\n    if (flag) {\n      let message = gettext('Successfully set library history.');\n      seafileAPI.setRepoHistoryLimit(repoID, days).then(res => {\n        toaster.success(message);\n        this.setState({keepDays: res.data.keep_days});\n        this.props.toggleDialog();\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      this.setState({\n        errorInfo: gettext('Please enter a non-negative integer'),\n      });\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let num = e.target.value;\n    this.setState({\n      keepDays: num,\n      expireDays: num,\n    });\n  }\n\n  setLimitDays = (type) => {\n    if (type === 'allHistory') {\n      this.setState({\n        keepDays: -1,\n      });\n    } else if (type === 'noHistory') {\n      this.setState({\n        keepDays: 0,\n      });\n    } else {\n      this.setState({\n        disabled: false\n      });\n    }\n\n    this.setState({\n      allHistory: type === 'allHistory' ? true : false,\n      noHistory: type === 'noHistory' ? true : false,\n      autoHistory: type === 'autoHistory' ? true : false,\n    });\n  }\n\n  render() {\n    const itemName = this.props.itemName;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span className=\"op-target\" title={itemName}>{itemName}</span>{' '}\n          {gettext('History Setting')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            {!enableRepoHistorySetting &&\n              <FormGroup>\n                <Label className=\"error\">{gettext('Setting library history is disabled by Admin.')}</Label>\n              </FormGroup>\n            }\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.allHistory} disabled={!enableRepoHistorySetting} onChange={() => {this.setLimitDays('allHistory');}}/>{' '}\n              <Label>{gettext('Keep full history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.noHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('noHistory');}}/>{' '}\n              <Label>{gettext('Don\\'t keep history')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.autoHistory} disabled={!enableRepoHistorySetting} onChange={() =>{this.setLimitDays('autoHistory');}}/>{' '}\n              <Label>{gettext('Only keep a period of history:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.expireDays}\n                onChange={this.onChange}\n                disabled={this.state.disabled}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibHistorySetting.propTypes = propTypes;\n\nexport default LibHistorySetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, repoPasswordMinLength } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ChangeRepoPasswordDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      newPasswordAgain: '',\n      submitBtnDisabled: false,\n      errorMsg: ''\n    };\n  }\n\n  handleOldPasswordInputChange = (e) => {\n    this.setState({\n      oldPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordInputChange = (e) => {\n    this.setState({\n      newPassword: e.target.value\n    });\n  }\n\n  handleNewPasswordAgainInputChange = (e) => {\n    this.setState({\n      newPasswordAgain: e.target.value\n    });\n  }\n\n  formSubmit = (e) => {\n    const { oldPassword, newPassword, newPasswordAgain } = this.state;\n    if (!oldPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter the old password')\n      });\n      return false;\n    }\n    if (!newPassword) {\n      this.setState({\n        errorMsg: gettext('Please enter a new password')\n      });\n      return false;\n    }\n    if (newPassword.length < repoPasswordMinLength) {\n      this.setState({\n        errorMsg: gettext('New password is too short')\n      });\n      return false;\n    }\n    if (!newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('Please enter the new password again')\n      });\n      return false;\n    }\n    if (newPassword != newPasswordAgain) {\n      this.setState({\n        errorMsg: gettext('New passwords don\\'t match')\n      });\n      return false;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n    seafileAPI.changeEncryptedRepoPassword(this.props.repoID, oldPassword, newPassword)\n      .then(() => {\n        this.props.toggleDialog();\n        toaster.success(gettext('Successfully changed library password.'));\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({\n          errorMsg: errorMsg,\n          submitBtnDisabled: false\n        });\n      });\n  }\n\n\n  render() {\n    const { repoName, toggleDialog } = this.props;\n\n    return (\n      <Modal isOpen={true} centered={true} style={{height: 'auto'}}>\n        <ModalHeader toggle={toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: Utils.generateDialogTitle(gettext('Change Password of Library {placeholder}'), repoName)}}></span>\n        </ModalHeader>\n        <ModalBody>\n          <form id=\"repo-change-passwd-form\" action=\"\" method=\"post\">\n            <label htmlFor=\"passwd\">{gettext('Old Password')}</label><br />\n            <input type=\"password\" name=\"old_passwd\" className=\"form-control\" id=\"passwd\" value={this.state.oldPassword} onChange={this.handleOldPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd\">{gettext('New Password')}</label><span className=\"tip\">{gettext('(at least {placeholder} characters)').replace('{placeholder}', repoPasswordMinLength)}</span><br />\n            <input type=\"password\" name=\"new_passwd\" className=\"form-control\" id=\"new-passwd\" value={this.state.newPassword} onChange={this.handleNewPasswordInputChange} /><br />\n            <label htmlFor=\"new-passwd-again\">{gettext('New Password Again')}</label><br />\n            <input type=\"password\" name=\"new_passwd_again\" className=\"form-control\" id=\"new-passwd-again\" value={this.state.newPasswordAgain} onChange={this.handleNewPasswordAgainInputChange} /><br />\n            {this.state.errorMsg && <Alert color=\"danger\">{this.state.errorMsg}</Alert>}\n          </form>\n        </ModalBody>\n        <ModalFooter>\n          <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nChangeRepoPasswordDialog.propTypes = propTypes;\n\nexport default ChangeRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport toaster from '../../components/toast';\nimport { Button, Form, FormGroup, Label, Input, Modal, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext, contactEmail } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass ResetEncryptedRepoPasswordDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      errMessage: '',\n      showLoading: true,\n      showSuccess: false,\n      showError: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.resetAndSendEncryptedRepoPassword(this.props.repoID).then((res) => {\n      this.setState({showLoading: false});\n      this.setState({showSuccess: true});\n    }).catch((error) => {\n      if (error.response) {\n        this.setState({\n          errMessage: error.response.data.error_msg\n        });\n        this.setState({showLoading: false});\n        this.setState({showError: true});\n      }\n    });\n  }\n\n  render() {\n\n    let user_email = '<strong>' + contactEmail + '</strong>';\n    let message = gettext('New password has been sent to your email {mail}. Please check your mailbox. If you dont receive the password, please check if your email address is properly configured.').replace('{mail}', user_email);\n\n    return (\n      <Modal isOpen={true}  centered={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Reset library password')}\n        </ModalHeader>\n        <ModalBody>\n          {this.state.showLoading && (\n            <span>{gettext('Sending new password...')}</span>\n          )}\n          {this.state.showSuccess && (\n            <div dangerouslySetInnerHTML={{__html:message}} />\n          )}\n          {this.state.showError && (\n            <span className=\"err-message\">{this.state.errMessage}</span>\n          )}\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nResetEncryptedRepoPasswordDialog.propTypes = propTypes;\n\nexport default ResetEncryptedRepoPasswordDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LabelRepoStateDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      existingLabels: null,\n      errorMsg: '',\n      submitBtnDisabled: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getAllRepoSnapshotLabels().then((res) => {\n      this.setState({\n        isLoading: false,\n        existingLabels: res.data,\n        errorMsg: ''\n      });\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        isLoading: false,\n        errorMsg: errorMsg\n      });\n    });\n  }\n\n  handleInputChange = (value) => {\n    this.setState({\n      inputValue: value\n    });\n  }\n\n  formSubmit = () => {\n    const inputValue = this.state.inputValue;\n\n    if (!inputValue || !inputValue.length) { // undefined or []\n      this.setState({\n        formErrorMsg: gettext('It is required.')\n      });\n      return;\n    }\n\n    this.setState({\n      submitBtnDisabled: true\n    });\n\n    const {repoID, repoName} = this.props;\n    const labels = inputValue.map((item, index) => item.value).join(',');\n    seafileAPI.addNewRepoLabels(repoID, labels).then((res) => {\n      const msg = gettext('Successfully added label(s) for library {placeholder}').replace('{placeholder}', repoName);\n      toaster.success(msg);\n      this.props.toggleDialog();\n    }).catch((error) => {\n      let errorMsg = Utils.getErrorMsg(error);\n      this.setState({\n        formErrorMsg: errorMsg,\n        submitBtnDisabled: false\n      });\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Label Current State')}</ModalHeader>\n        <ModalBody>\n          <Content data={this.state} handleChange={this.handleInputChange} />\n        </ModalBody>\n        {this.state.existingLabels && (\n          <ModalFooter>\n            <button className=\"btn btn-secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</button>\n            <button className=\"btn btn-primary\" disabled={this.state.submitBtnDisabled} onClick={this.formSubmit}>{gettext('Submit')}</button>\n          </ModalFooter>\n        )}\n      </Modal>\n    );\n  }\n}\n\nclass Content extends React.Component {\n\n  render() {\n    const { isLoading, errorMsg, existingLabels, formErrorMsg } = this.props.data;\n\n    if (isLoading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error mt-4 text-center\">{errorMsg}</p>;\n    }\n\n    return (\n      <React.Fragment>\n        <CreatableSelect\n          isMulti={true}\n          onChange={this.props.handleChange}\n          placeholder=''\n          options={existingLabels.map((item, index) => { return {label: item, value: item}; })}\n        />\n        {formErrorMsg && <p className=\"error m-0 mt-2\">{formErrorMsg}</p>}\n      </React.Fragment>\n    );\n  }\n}\n\nLabelRepoStateDialog.propTypes = propTypes;\n\nexport default LabelRepoStateDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport UserSelect from '../user-select';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass UserItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteUserFolderPermission = () => {\n    let item = this.props.item;\n    this.props.deleteUserFolderPermission(item);\n  }\n\n  onChangeUserFolderPerm = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeUserFolderPerm(item.repo_id, permission, item.folder_path, item.user_email);\n  }\n\n  render() {\n    let item = this.props.item;\n    let currentPermission = item.permission;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td>\n          <a href={`${siteRoot}profile/${encodeURIComponent(item.user_email)}/`} target=\"_blank\">{item.user_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={currentPermission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeUserFolderPerm}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteUserFolderPermission}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\n\nclass LibSubFolderSetUserPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedUsers: null,\n      errorMsg: [],\n      permission: 'rw',\n      userFolderPermItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleUserSelectChange = (option) => {\n    this.setState({selectedUsers: option});\n  }\n\n  componentDidMount() {\n    const {repoID, folderPath, isDepartmentRepo} = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoUserFolderPerm(repoID, folderPath) :\n      seafileAPI.listUserFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({userFolderPermItems: res.data});\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addUserFolderPerm = () => {\n    const { selectedUsers } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedUsers || !selectedUsers.length || !folderPath) { // selectedUsers: null or []\n      return false;\n    }\n\n    const users = selectedUsers.map((item, index) => item.email);\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users) :\n      seafileAPI.addUserFolderPerm(this.props.repoID, this.state.permission, folderPath, users);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n      this.setState({\n        errorMsg: errorMsg,\n        userFolderPermItems: this.state.userFolderPermItems.concat(res.data.success),\n        selectedUsers: null,\n        permission: 'rw',\n        folderPath: '',\n      });\n      this.refs.userSelect.clearSelect();\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteUserFolderPermItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email) :\n      seafileAPI.deleteUserFolderPerm(item.repo_id, item.permission, item.folder_path, item.user_email);\n    request.then(res => {\n      this.setState({\n        userFolderPermItems: this.state.userFolderPermItems.filter(deletedItem => {\n          return deletedItem != item;\n        })\n      });\n    });\n  }\n\n  onChangeUserFolderPerm = (repoID, permission, folderPath, userEmail) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoUserFolderPerm(repoID, permission, folderPath, userEmail) :\n      seafileAPI.updateUserFolderPerm(repoID, permission, folderPath, userEmail);\n    request.then(res => {\n      let userFolderPermItems = this.state.userFolderPermItems.map(item => {\n        if (item.user_email === userEmail && item.folder_path === folderPath) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({userFolderPermItems: userFolderPermItems});\n    });\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleFileChooserSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n    let { userFolderPermItems } = this.state;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleFileChooserSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%': '55%'}>{gettext('User')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%': '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <UserSelect\n                  ref=\"userSelect\"\n                  isMulti={true}\n                  className=\"reviewer-select\"\n                  placeholder={gettext('Search users...')}\n                  onSelectChange={this.handleUserSelectChange}\n                  value={this.state.selectedUsers}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addUserFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = '';\n                if (item.user_email) {\n                  errMessage = item.user_email + ': ' + item.error_msg;\n                } else {\n                  errMessage = item;\n                }\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {userFolderPermItems.map((item, index) => {\n                return (\n                  <UserItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteUserFolderPermission={this.deleteUserFolderPermItem}\n                    onChangeUserFolderPerm={this.onChangeUserFolderPerm}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSetUserPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSetUserPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Input, InputGroup, InputGroupAddon } from 'reactstrap';\nimport Select from 'react-select';\nimport makeAnimated from 'react-select/lib/animated';\nimport { gettext, isPro, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils.js';\nimport SharePermissionEditor from '../select-editor/share-permission-editor';\nimport FileChooser from '../file-chooser/file-chooser';\n\nclass GroupItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  }\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  }\n\n  deleteGroupPermissionItem = () => {\n    let item = this.props.item;\n    this.props.deleteGroupPermissionItem(item);\n  }\n\n  onChangeGroupPermission = (permission) => {\n    let item = this.props.item;\n    this.props.onChangeGroupPermission(item, permission);\n  }\n\n  render() {\n    let item = this.props.item;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td>\n          <a href={`${siteRoot}group/${item.group_id}/`} target=\"_blank\">{item.group_name}</a>\n        </td>\n        {this.props.showPath &&\n          <td>\n            <a href={`${siteRoot}library/${item.repo_id}/${Utils.encodePath(this.props.repoName + item.folder_path)}`}>{item.folder_name}</a>\n          </td>\n        }\n        <td>\n          <SharePermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            permissions={this.props.permissions}\n            onPermissionChanged={this.onChangeGroupPermission}\n          />\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.deleteGroupPermissionItem}\n            title={gettext('Delete')}\n          >\n          </span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  isDepartmentRepo: PropTypes.bool\n};\n\nconst NoOptionsMessage = (props) => {\n  return (\n    <div {...props.innerProps} style={{margin: '6px 10px', textAlign: 'center', color: 'hsl(0,0%,50%)'}}>{gettext('Group not found')}</div>\n  );\n};\n\nclass LibSubFolderSerGroupPermissionDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errorMsg: [],\n      permission: 'rw',\n      groupPermissionItems: [],\n      folderPath: '',\n      showFileChooser: false\n    };\n    this.options = [];\n    if (!isPro) {\n      this.permissions = ['r', 'rw'];\n    } else {\n      this.permissions = ['r', 'rw', 'cloud-edit', 'preview'];\n    }\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({selectedOption: option});\n  }\n\n  componentDidMount() {\n    this.loadOptions();\n    this.listGroupPermissionItems();\n  }\n\n  loadOptions = () => {\n    seafileAPI.shareableGroups().then((res) => {\n      this.options = res.data.map((item, index) => {\n        return {\n          id: item.id,\n          label: item.name,\n          value: item.name\n        };\n      });\n    });\n  }\n\n  listGroupPermissionItems = () => {\n    const { isDepartmentRepo, repoID, folderPath } = this.props;\n    const request = isDepartmentRepo ?\n      seafileAPI.listDepartmentRepoGroupFolderPerm(repoID, folderPath) :\n      seafileAPI.listGroupFolderPerm(repoID, folderPath);\n    request.then((res) => {\n      if (res.data.length !== 0) {\n        this.setState({\n          groupPermissionItems: res.data\n        });\n      }\n    });\n  }\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  }\n\n  addGroupFolderPerm = () => {\n    const { selectedOption } = this.state;\n    const folderPath = this.props.folderPath || this.state.folderPath;\n    if (!selectedOption || !folderPath) {\n      return false;\n    }\n\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.addDepartmentRepoGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id) :\n      seafileAPI.addGroupFolderPerm(this.props.repoID, this.state.permission, folderPath, selectedOption.id);\n    request.then(res => {\n      let errorMsg = [];\n      if (res.data.failed.length > 0) {\n        for (let i = 0; i < res.data.failed.length; i++) {\n          errorMsg[i] = res.data.failed[i];\n        }\n      }\n\n      this.setState({\n        errorMsg: errorMsg,\n        groupPermissionItems: this.state.groupPermissionItems.concat(res.data.success),\n        selectedOption: null,\n        permission: 'rw',\n        folderPath: ''\n      });\n    }).catch((error) => {\n      let errorMsg = '';\n      if (error.response) {\n        if (error.response.data && error.response.data['error_msg']) {\n          errorMsg = error.response.data['error_msg'];\n        } else {\n          errorMsg = gettext('Error');\n        }\n      } else {\n        errorMsg = gettext('Please check the network.');\n      }\n      this.setState({\n        errorMsg: [errorMsg]\n      });\n    });\n  }\n\n  deleteGroupPermissionItem = (item) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.deleteDepartmentRepoGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id) :\n      seafileAPI.deleteGroupFolderPerm(item.repo_id, item.permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.setState({\n        groupPermissionItems: this.state.groupPermissionItems.filter(deletedItem => { return deletedItem != item; })\n      });\n    });\n  }\n\n  onChangeGroupPermission = (item, permission) => {\n    const request = this.props.isDepartmentRepo ?\n      seafileAPI.updateDepartmentRepoGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id) :\n      seafileAPI.updateGroupFolderPerm(item.repo_id, permission, item.folder_path, item.group_id);\n    request.then(() => {\n      this.updateGroupPermission(item, permission);\n    });\n  }\n\n  updateGroupPermission = (item, permission) => {\n    let groupID = item.group_id;\n    let groupPermissionItems = this.state.groupPermissionItems.map(sharedItem => {\n      let sharedItemGroupID = sharedItem.group_id;\n      if (groupID === sharedItemGroupID && item.folder_path === sharedItem.folder_path) {\n        sharedItem.permission = permission;\n      }\n      return sharedItem;\n    });\n    this.setState({groupPermissionItems: groupPermissionItems});\n  }\n\n  onSetSubFolder = (e) => {\n    this.setState({\n      folderPath: e.target.value\n    });\n  }\n\n  toggleFileChooser = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser,\n      folderPath: ''\n    });\n  }\n\n  toggleSubFolder = (repo, path, item) => {\n    this.setState({\n      folderPath: path,\n    });\n  }\n\n  handleSubmit = () => {\n    this.setState({\n      showFileChooser: !this.state.showFileChooser\n    });\n  }\n\n  onRepoItemClick = () => {\n    this.setState({\n      folderPath: '/'\n    });\n  }\n\n  render() {\n    let showPath = this.props.folderPath ? false : true;\n\n    if (this.state.showFileChooser) {\n      return (\n        <div>\n          <FileChooser repoID={this.props.repoID}\n            mode={'only_current_library'}\n            onDirentItemClick={this.toggleSubFolder}\n            onRepoItemClick={this.onRepoItemClick}\n          />\n          <div className=\"modal-footer\">\n            <Button color=\"secondary\" onClick={this.toggleFileChooser}>{gettext('Cancel')}</Button>\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n          </div>\n        </div>\n      );\n    }\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width={showPath ? '32%' : '55%'}>{gettext('Group')}</th>\n          {showPath &&\n          <th width=\"32%\">{gettext('Folder')}</th>\n          }\n          <th width={showPath ? '24%' : '30%'}>{gettext('Permission')}</th>\n          <th width={showPath ? '12%' : '15%'}></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        <table className=\"w-xs-250\">\n          {thead}\n          <tbody>\n            <tr>\n              <td>\n                <Select\n                  onChange={this.handleSelectChange}\n                  options={this.options}\n                  placeholder={gettext('Select a group')}\n                  maxMenuHeight={200}\n                  inputId={'react-select-2-input'}\n                  value={this.state.selectedOption}\n                  components={{ NoOptionsMessage }}\n                />\n              </td>\n              {showPath &&\n                <td>\n                  <InputGroup>\n                    <Input value={this.state.folderPath} onChange={this.onSetSubFolder} />\n                    <InputGroupAddon addonType=\"append\"><Button className=\"sf2-icon-plus\" onClick={this.toggleFileChooser}></Button></InputGroupAddon>\n                  </InputGroup>\n                </td>\n              }\n              <td>\n                <SharePermissionEditor\n                  isTextMode={false}\n                  isEditIconShow={false}\n                  currentPermission={this.state.permission}\n                  permissions={this.permissions}\n                  onPermissionChanged={this.setPermission}\n                />\n              </td>\n              <td>\n                <Button onClick={this.addGroupFolderPerm}>{gettext('Submit')}</Button>\n              </td>\n            </tr>\n            {this.state.errorMsg.length > 0 &&\n              this.state.errorMsg.map((item, index) => {\n                let errMessage = item.group_id + ': ' + item.error_msg;\n                return (\n                  <tr key={index}>\n                    <td colSpan={3}><p className=\"error\">{errMessage}</p></td>\n                  </tr>\n                );\n              })\n            }\n          </tbody>\n        </table>\n        <div className=\"share-list-container\">\n          <table className=\"table-thead-hidden w-xs-250\">\n            {thead}\n            <tbody>\n              {this.state.groupPermissionItems.map((item, index) => {\n                return (\n                  <GroupItem\n                    key={index}\n                    item={item}\n                    permissions={this.permissions}\n                    deleteGroupPermissionItem={this.deleteGroupPermissionItem}\n                    onChangeGroupPermission={this.onChangeGroupPermission}\n                    showPath={showPath}\n                    repoName={this.props.repoName}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nLibSubFolderSerGroupPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderSerGroupPermissionDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, TabContent, TabPane, Nav, NavItem, NavLink } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport LibSubFolderSetUserPermissionDialog from './lib-sub-folder-set-user-permission-dialog';\nimport LibSubFolderSetGroupPermissionDialog from './lib-sub-folder-set-group-permission-dialog';\nimport '../../css/share-link-dialog.css';\nimport '../../css/sub-folder-permission.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string,\n  isDepartmentRepo: PropTypes.bool,\n  folderPath: PropTypes.string,\n  folderName: PropTypes.string,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass LibSubFolderPermissionDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTab: 'userPermission'\n    };\n  }\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n  }\n\n  renderContent = () => {\n    let activeTab = this.state.activeTab;\n\n    return (\n      <Fragment>\n        <div className=\"share-dialog-side\">\n          <Nav pills>\n            <NavItem>\n              <NavLink className={activeTab === 'userPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'userPermission')}>\n                {gettext('User Permission')}\n              </NavLink>\n            </NavItem>\n            <NavItem>\n              <NavLink className={activeTab === 'groupPermission' ? 'active' : ''} onClick={this.toggle.bind(this, 'groupPermission')}>\n                {gettext('Group Permission')}\n              </NavLink>\n            </NavItem>\n          </Nav>\n        </div>\n        <div className=\"share-dialog-main\">\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"userPermission\">\n              <LibSubFolderSetUserPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n            <TabPane tabId=\"groupPermission\">\n              <LibSubFolderSetGroupPermissionDialog repoID={this.props.repoID} repoName={this.props.repoName} folderPath={this.props.folderPath} isDepartmentRepo={this.props.isDepartmentRepo} />\n            </TabPane>\n          </TabContent>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const { repoName, folderName } = this.props;\n\n    return (\n      <div>\n        <Modal isOpen={true} style={{maxWidth: '980px'}} className=\"share-dialog\" toggle={this.props.toggleDialog}>\n          <ModalHeader toggle={this.props.toggleDialog}>\n            <span dangerouslySetInnerHTML={{__html: repoName ? Utils.generateDialogTitle(gettext('{placeholder} Folder Permission'), repoName) : Utils.generateDialogTitle(gettext('Set {placeholder}\\'s permission'), folderName)}}></span>\n          </ModalHeader>\n          <ModalBody className=\"dialog-list-container share-dialog-content\">\n            {this.renderContent()}\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nLibSubFolderPermissionDialog.propTypes = propTypes;\n\nexport default LibSubFolderPermissionDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../utils/constants';\nimport toaster from './toast';\n\nconst propTypes = {\n  hasSuffix: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  onRenameConfirm: PropTypes.func.isRequired,\n  onRenameCancel: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: props.name\n    };\n  }\n\n  componentDidMount() {\n    this.refs.renameInput.focus();\n    if (this.props.hasSuffix) {\n      var endIndex = this.props.name.lastIndexOf('.');\n      this.refs.renameInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.refs.renameInput.setSelectionRange(0, -1);\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({name: e.target.value});\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  onKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.onRenameConfirm(e);\n    }\n  }\n\n  onRenameConfirm = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let newName = this.state.name.trim();\n    if (newName === this.props.name) {\n      this.props.onRenameCancel();\n      return;\n    }\n\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      toaster.danger(errMessage);\n    } else {\n      this.props.onRenameConfirm(newName);\n    }\n  }\n\n  onRenameCancel = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onRenameCancel();\n  }\n\n  validateInput = () => {\n    let newName = this.state.name.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  render() {\n    return (\n      <div className=\"rename-container\">\n        <input\n          ref=\"renameInput\"\n          value={this.state.name}\n          onChange={this.onChange}\n          onKeyPress={this.onKeyPress}\n          onClick={this.onClick}\n        />\n        <button className=\"btn btn-secondary sf2-icon-confirm confirm\" onClick={this.onRenameConfirm}></button>\n        <button className=\"btn btn-secondary sf2-icon-cancel cancel\" onClick={this.onRenameCancel}></button>\n      </div>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, isPro, folderPermEnabled, enableRepoSnapshotLabel, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  isPC: PropTypes.bool,\n  repo: PropTypes.object.isRequired,\n  isStarred: PropTypes.bool,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoMenu extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemMenuShow: false,\n    };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = Utils.getEventData(e, 'toggle');\n    this.props.onMenuItemClick(operation);\n  }\n\n  onDropdownToggleClick = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n        }\n      }\n    );\n  }\n\n  generatorOperations = () => {\n    let repo = this.props.repo;\n    let showResetPasswordMenuItem = isPro && repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured;\n    let operations = ['Rename', 'Transfer'];\n    if (folderPermEnabled) {\n      operations.push('Folder Permission');\n    }\n    operations.push('Share Links Admin', 'Divider');\n    if (repo.encrypted) {\n      operations.push('Change Password');\n    }\n    if (showResetPasswordMenuItem) {\n      operations.push('Reset Password');\n    }\n    operations.push('History Setting', 'API Token');\n    if (this.props.isPC && enableRepoSnapshotLabel) {\n      operations.push('Label Current State');\n    }\n    if (isPro) {\n      operations.push('Old Files Auto Delete');\n    }\n    return operations;\n  }\n\n  translateOperations = (item) => {\n    let translateResult = '';\n    switch(item) {\n      case 'Star':\n        translateResult = gettext('Star');\n        break;\n      case 'Unstar':\n        translateResult = gettext('Unstar');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'Delete':\n        translateResult = gettext('Delete');\n        break;\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Transfer':\n        translateResult = gettext('Transfer');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Label Current State':\n        translateResult = gettext('Label Current State');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      case 'Share Links Admin':\n        translateResult = gettext('Share Links Admin');\n        break;\n      case 'Old Files Auto Delete':\n        translateResult = gettext('Auto deletion');\n        break;\n      default:\n        break;\n    }\n\n    return translateResult;\n  }\n\n  render() {\n    let operations = this.generatorOperations();\n\n    // pc menu\n    if (this.props.isPC) {\n      return (\n        <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n          <DropdownToggle\n            tag=\"i\"\n            className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n            title={gettext('More Operations')}\n            // onClick={this.clickOperationMenuToggle}\n            data-toggle=\"dropdown\"\n            aria-expanded={this.state.isItemMenuShow}\n          />\n          <DropdownMenu>\n            {operations.map((item, index)=> {\n              if (item == 'Divider') {\n                return <DropdownItem key={index} divider />;\n              } else {\n                return (<DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateOperations(item)}</DropdownItem>);\n              }\n            })}\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    // mobile menu\n    operations.unshift('Delete');\n    operations.unshift('Share');\n    this.props.isStarred ? operations.unshift('Unstar') : operations.unshift('Star');\n\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          // onClick={this.clickOperationMenuToggle}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n        />\n        <div className={`${this.state.isItemMenuShow ? '' : 'd-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              if (item != 'Divider') {\n                return (<DropdownItem key={index} className=\"mobile-menu-item\" data-toggle={item} onClick={this.onMenuItemClick}>{this.translateOperations(item)}</DropdownItem>);\n              }\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n}\n\nMylibRepoMenu.propTypes = propTypes;\n\nexport default MylibRepoMenu;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'react-select';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  isTextMode: PropTypes.bool.isRequired,\n  isEditIconShow: PropTypes.bool.isRequired,\n  currentPermission: PropTypes.string.isRequired,\n  onPermissionChanged: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenPermissionEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditing: false,\n    };\n    this.options = [\n      { value: 'rw', label: <div>{gettext('Read-Write')}</div> },\n      { value: 'r', label: <div>{gettext('Read-Only')}</div> }\n    ];\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.onHideSelect);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.onHideSelect);\n  }\n\n  onHideSelect = () => {\n    this.setState({ isEditing: false });\n  }\n\n  onEditPermission = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({ isEditing: true });\n  }\n\n  onPermissionChanged = (e) => {\n    if (e.value !== this.props.currentPermission) {\n      this.props.onPermissionChanged(e.value);\n    }\n    this.setState({ isEditing: false });\n  }\n\n  onSelectHandler = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n  }\n\n  render() {\n    const { currentPermission, isTextMode } = this.props;\n    let optionTranslation = currentPermission === 'rw' ? gettext('Read-Write') : gettext('Read-Only');\n    return (\n      <div onClick={this.onSelectHandler}>\n        {(isTextMode && !this.state.isEditing) ?\n          <Fragment>\n            <span>{optionTranslation}</span>\n            {this.props.isEditIconShow &&\n              <span title={gettext('Edit')} className=\"fa fa-pencil-alt attr-action-icon\" onClick={this.onEditPermission}/>\n            }\n          </Fragment>\n          :\n          <Select\n            options={this.options}\n            placeholder={optionTranslation}\n            onChange={this.onPermissionChanged}\n            captureMenuScroll={false}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoAPITokenPermissionEditor.propTypes = propTypes;\n\nexport default RepoAPITokenPermissionEditor;\n","import React, {Fragment} from 'react';\nimport PropTypes from 'prop-types';\nimport {gettext} from '../../utils/constants';\nimport {Modal, ModalHeader, ModalBody, Button, Input} from 'reactstrap';\nimport RepoAPITokenPermissionEditor from '../select-editor/repo-api-token-permission-editor';\nimport {seafileAPI} from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport copy from 'copy-to-clipboard';\nimport Loading from '../loading';\n\nconst apiTokenItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  deleteAPIToken: PropTypes.func.isRequired,\n  updateAPIToken: PropTypes.func.isRequired,\n};\n\nclass APITokenItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteAPIToken = () => {\n    this.props.deleteAPIToken(this.props.item.app_name);\n  };\n\n  onUpdateAPIToken = (permission) => {\n    this.props.updateAPIToken(this.props.item.app_name, permission);\n  };\n\n  onCopyAPIToken = () => {\n    let api_token = this.props.item.api_token;\n    copy(api_token);\n    toaster.success(gettext('API token is copied to the clipboard.'));\n  };\n\n  render() {\n    let item = this.props.item;\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">{item.app_name}</td>\n        <td>\n          <RepoAPITokenPermissionEditor\n            isTextMode={true}\n            isEditIconShow={this.state.isOperationShow}\n            currentPermission={item.permission}\n            onPermissionChanged={this.onUpdateAPIToken}\n          />\n        </td>\n        <td>\n          <span>{item.api_token}</span>\n          {this.state.isOperationShow &&\n          <span className=\"far fa-copy action-icon\" onClick={this.onCopyAPIToken} />\n          }\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'hide'}`}\n            onClick={this.onDeleteAPIToken}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nAPITokenItem.propTypes = apiTokenItemPropTypes;\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  onRepoAPITokenToggle: PropTypes.func.isRequired,\n};\n\nclass RepoAPITokenDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      apiTokenList: [],\n      permission: 'rw',\n      appName: '',\n      errorMsg: '',\n      loading: true,\n      isSubmitBtnActive: true,\n    };\n    this.repo = this.props.repo;\n  }\n\n  listAPITokens = () => {\n    seafileAPI.listRepoAPITokens(this.repo.repo_id).then((res) => {\n      this.setState({\n        apiTokenList: res.data.repo_api_tokens,\n        loading: false,\n      });\n    }).catch(error => {\n      if (error.response.status === 403) {\n        this.setState({\n          errorMsg: gettext('Permission denied'),\n        });\n      } else {\n        this.handleError(error);\n      }\n    });\n  };\n\n  onInputChange = (e) => {\n    let appName = e.target.value;\n    this.setState({\n      appName: appName,\n    });\n  };\n\n  onKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.addAPIToken();\n    }\n  };\n\n  setPermission = (permission) => {\n    this.setState({permission: permission});\n  };\n\n  addAPIToken = () => {\n    if (!this.state.appName) {\n      return;\n    }\n\n    this.setState({\n      isSubmitBtnActive: false,\n    });\n    const {appName, permission, apiTokenList} = this.state;\n\n    seafileAPI.addRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      apiTokenList.push(res.data);\n      this.setState({\n        apiTokenList: apiTokenList,\n        isSubmitBtnActive: true,\n      });\n    }).catch(error => {\n      this.handleError(error);\n      this.setState({\n        isSubmitBtnActive: true,\n      });\n    });\n  };\n\n  deleteAPIToken = (appName) => {\n    seafileAPI.deleteRepoAPIToken(this.repo.repo_id, appName).then((res) => {\n      const apiTokenList = this.state.apiTokenList.filter(item => {\n        return item.app_name !== appName;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  updateAPIToken = (appName, permission) => {\n    seafileAPI.updateRepoAPIToken(this.repo.repo_id, appName, permission).then((res) => {\n      let apiTokenList = this.state.apiTokenList.filter(item => {\n        if (item.app_name === appName) {\n          item.permission = permission;\n        }\n        return item;\n      });\n      this.setState({\n        apiTokenList: apiTokenList,\n      });\n    }).catch(error => {\n      this.handleError(error);\n    });\n  };\n\n  handleError = (e) => {\n    if (e.response) {\n      toaster.danger(e.response.data.error_msg || e.response.data.detail || gettext('Error'), {duration: 3});\n    } else {\n      toaster.danger(gettext('Please check the network.'), {duration: 3});\n    }\n  };\n\n  componentDidMount() {\n    this.listAPITokens();\n  }\n\n  renderContent = () => {\n    const renderAPITokenList = this.state.apiTokenList.map((item, index) => {\n      return (\n        <APITokenItem\n          key={index}\n          item={item}\n          deleteAPIToken={this.deleteAPIToken}\n          updateAPIToken={this.updateAPIToken}\n        />\n      );\n    });\n\n    const thead = (\n      <thead>\n        <tr>\n          <th width=\"20%\">{gettext('App Name')}</th>\n          <th width=\"20%\">{gettext('Permission')}</th>\n          <th width=\"48%\">API Token</th>\n          <th width=\"12%\"></th>\n        </tr>\n      </thead>\n    );\n    return (\n      <Fragment>\n        {this.state.errorMsg &&\n          <p className=\"error text-center\">{this.state.errorMsg}</p>\n        }\n        {!this.state.errorMsg &&\n        <Fragment>\n          <table className=\"w-xs-250\">\n            {thead}\n            <tbody>\n              <tr>\n                <td>\n                  <Input\n                    type=\"text\"\n                    id=\"appName\"\n                    value={this.state.appName}\n                    onChange={this.onInputChange}\n                    onKeyDown={this.onKeyDown}\n                  />\n                </td>\n                <td>\n                  <RepoAPITokenPermissionEditor\n                    isTextMode={false}\n                    isEditIconShow={false}\n                    currentPermission={this.state.permission}\n                    onPermissionChanged={this.setPermission}\n                  />\n                </td>\n                <td><span className=\"text-secondary\">--</span></td>\n                <td>\n                  <Button onClick={this.addAPIToken} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div style={{minHeight: '10rem', maxHeight: '18rem'}}>\n            {this.state.apiTokenList.length !== 0 &&\n            <table className=\"table-thead-hidden w-xs-250\">\n              {thead}\n              <tbody>\n                {renderAPITokenList}\n              </tbody>\n            </table>\n            }\n          </div>\n          {this.state.loading && <Loading/>}\n        </Fragment>\n        }\n      </Fragment>\n    );\n  };\n\n  render() {\n    let repo = this.repo;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} API Token').replace('{placeholder}', itemName);\n    return (\n      <Modal\n        isOpen={true} style={{maxWidth: '800px'}}\n        toggle={this.props.onRepoAPITokenToggle}\n      >\n        <ModalHeader toggle={this.props.onRepoAPITokenToggle}>\n          <p dangerouslySetInnerHTML={{__html: title}} className=\"m-0\"></p>\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"o-auto\">\n            {this.renderContent()}\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoAPITokenDialog.propTypes = propTypes;\n\nexport default RepoAPITokenDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, NavLink } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Loading from '../loading';\nimport EmptyTip from '../empty-tip';\n\nconst repoShareUploadLinkItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  activeTab: PropTypes.string.isRequired,\n  deleteItem: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinkItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false\n    };\n  }\n\n  onMouseEnter = () => {\n    this.setState({isOperationShow: true});\n  };\n\n  onMouseLeave = () => {\n    this.setState({isOperationShow: false});\n  };\n\n  onDeleteLink = (e) => {\n    e.preventDefault();\n    this.props.deleteItem(this.props.item.token);\n  };\n\n  render() {\n\n    let objUrl;\n    let item = this.props.item;\n    let path = item.path === '/' ? '/' : item.path.slice(0, item.path.length - 1);\n\n    if (this.props.activeTab === 'shareLinks') {\n      if (item.is_dir) {\n        objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n      } else {\n        objUrl = `${siteRoot}lib/${item.repo_id}/file${Utils.encodePath(item.path)}`;\n      }\n    }\n\n    if (this.props.activeTab === 'uploadLinks') {\n      objUrl = `${siteRoot}library/${item.repo_id}/${encodeURIComponent(item.repo_name)}${Utils.encodePath(path)}`;\n    }\n\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">{item.creator_name}</td>\n        <td>\n          <a href={objUrl} target=\"_blank\" className=\"text-inherit\">{item.obj_name}</a>\n        </td>\n        <td>\n          <a href={item.link} target=\"_blank\" className=\"text-inherit\">{item.link}</a>\n        </td>\n        <td>\n          <span\n            className={`sf2-icon-x3 action-icon ${this.state.isOperationShow ? '' : 'invisible'}`}\n            onClick={this.onDeleteLink}\n            title={gettext('Delete')}\n          />\n        </td>\n      </tr>\n    );\n  }\n}\n\nRepoShareUploadLinkItem.propTypes = repoShareUploadLinkItemPropTypes;\n\nconst RepoShareUploadLinksDialogPropTypes = {\n  repo: PropTypes.object.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass RepoShareUploadLinksDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      activeTab: 'shareLinks',\n      repoShareUploadLinkList: [],\n      errorMsg: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getItems('share-link');\n  }\n\n  getItems = (itemType) => {\n    const repoID = this.props.repo.repo_id;\n    const request = itemType == 'share-link' ?\n      seafileAPI.listRepoShareLinks(repoID) :\n      seafileAPI.listRepoUploadLinks(repoID);\n    request.then((res) => {\n      this.setState({\n        loading: false,\n        repoShareUploadLinkList: res.data,\n      });\n    }).catch(error => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true)\n      });\n    });\n  }\n\n  deleteItem = (token) => {\n    const repoID = this.props.repo.repo_id;\n    const request = this.state.activeTab == 'shareLinks' ?\n      seafileAPI.deleteRepoShareLink(repoID, token) :\n      seafileAPI.deleteRepoUploadLink(repoID, token);\n    request.then((res) => {\n      const repoShareUploadLinkList = this.state.repoShareUploadLinkList.filter(item => {\n        return item.token !== token;\n      });\n      this.setState({\n        repoShareUploadLinkList: repoShareUploadLinkList\n      });\n    }).catch(error => {\n      toaster.danger(Utils.getErrorMsg(error));\n    });\n  };\n\n  toggle = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({activeTab: tab});\n    }\n    if (tab == 'shareLinks') {\n      this.getItems('share-link');\n    }\n    if (tab == 'uploadLinks') {\n      this.getItems('upload-link');\n    }\n  };\n\n  render() {\n\n    const { loading, errorMsg, activeTab, repoShareUploadLinkList } = this.state;\n\n    const itemName = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.repo.repo_name) + '</span>';\n    const title = gettext('{placeholder} Share/Upload Links').replace('{placeholder}', itemName);\n\n    return (\n      <Modal isOpen={true} style={{maxWidth: '800px'}}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          <span dangerouslySetInnerHTML={{__html: title}}></span>\n        </ModalHeader>\n        <ModalBody className=\"p-0 pb-4\">\n          <div className=\"main-panel-center\">\n            <div className=\"cur-view-container\">\n              <div className=\"cur-view-path share-upload-nav\">\n                <ul className=\"nav\">\n                  <li className=\"nav-item\">\n                    <NavLink className={activeTab === 'shareLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'shareLinks')}>{gettext('Share Links')}</NavLink>\n                  </li>\n                  <li className=\"nav-item\">\n                    <NavLink className={activeTab === 'uploadLinks' ? 'active' : ''} onClick={this.toggle.bind(this, 'uploadLinks')}>{gettext('Upload Links')}</NavLink>\n                  </li>\n                </ul>\n              </div>\n              <div className=\"cur-view-content\" style={{minHeight: '20rem', maxHeight: '20rem'}}>\n                {loading && <Loading />}\n                {!loading && errorMsg && <p className=\"error text-center mt-8\">{errorMsg}</p>}\n                {!loading && !errorMsg && !repoShareUploadLinkList.length &&\n                  <EmptyTip forDialog={true}>\n                    <p className=\"text-secondary\">{activeTab == 'shareLinks' ? gettext('No share links') : gettext('No upload links')}</p>\n                  </EmptyTip>\n                }\n                {!loading && !errorMsg && repoShareUploadLinkList.length > 0 &&\n                <table>\n                  <thead>\n                    <tr>\n                      <th width=\"22%\">{gettext('Creator')}</th>\n                      <th width=\"20%\">{gettext('Name')}</th>\n                      <th width=\"48%\">{gettext('Link')}</th>\n                      <th width=\"10%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {this.state.repoShareUploadLinkList.map((item, index) => {\n                      return (\n                        <RepoShareUploadLinkItem\n                          key={index}\n                          item={item}\n                          activeTab={this.state.activeTab}\n                          deleteItem={this.deleteItem}\n                        />\n                      );\n                    })}\n                  </tbody>\n                </table>\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nRepoShareUploadLinksDialog.propTypes = RepoShareUploadLinksDialogPropTypes;\n\nexport default RepoShareUploadLinksDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, Alert } from 'reactstrap';\nimport { gettext, enableRepoHistorySetting } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n};\n\nclass LibOldFilesAutoDelDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      autoDelDays: 0,\n      isAutoDel: false,\n      errorInfo: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getRepoOldFilesAutoDelDays(this.props.repoID).then(res => {\n      this.setState({\n        autoDelDays: res.data.auto_delete_days,\n        isAutoDel: res.data.auto_delete_days > 0,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  submit = () => {\n    let daysNeedTobeSet = this.state.autoDelDays;\n\n    let reg = /^-?\\d+$/;\n    let isvalid_days = reg.test(daysNeedTobeSet);\n    if (!isvalid_days || daysNeedTobeSet <= 0) {\n      this.setState({\n        errorInfo: gettext('Please enter a positive integer'),\n      });\n      return;\n    }\n\n    if (!this.state.isAutoDel) {\n      daysNeedTobeSet = 0;    // if no auto del, give 0 to server\n    }\n\n    let repoID = this.props.repoID;\n\n    seafileAPI.setRepoOldFilesAutoDelDays(repoID, daysNeedTobeSet).then(res => {\n      this.props.toggleDialog();\n      toaster.success(gettext('Successfully set it.'));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.submit();\n      e.preventDefault();\n    }\n  }\n\n  onChange = (e) => {\n    let days = e.target.value;\n    this.setState({\n      autoDelDays: days,\n    });\n  }\n\n  updateRadioCheck = (type) => {\n    if (type === 'noAutoDel') {\n      this.setState({\n        isAutoDel: false,\n      });\n    } else if (type === 'autoDel') {\n      this.setState({\n        isAutoDel: true,\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>\n          {gettext('Auto deletion')}\n        </ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={!this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('noAutoDel');}}/>{' '}\n              <Label>{gettext('Do not automatically delete files')}</Label>\n            </FormGroup>\n            <FormGroup check>\n              <Input type=\"radio\" name=\"radio1\" checked={this.state.isAutoDel} onChange={() =>{this.updateRadioCheck('autoDel');}}/>{' '}\n              <Label>{gettext('Automatically delete files that are not modified within certain days:')}</Label>\n              <Input\n                type=\"text\"\n                className=\"expire-input\"\n                value={this.state.autoDelDays}\n                onChange={this.onChange}\n                onKeyDown={this.handleKeyPress}\n              />{' '}\n              <Label><span>{gettext('days')}</span></Label>\n            </FormGroup>\n            {this.state.errorInfo && <Alert color=\"danger\">{this.state.errorInfo}</Alert>}\n          </Form>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.submit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nLibOldFilesAutoDelDialog.propTypes = propTypes;\n\nexport default LibOldFilesAutoDelDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport moment from 'moment';\nimport { Link, navigate } from '@reach/router';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, siteRoot, storages } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport toaster from '../../components/toast';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport TransferDialog from '../../components/dialog/transfer-dialog';\nimport LibHistorySettingDialog from '../../components/dialog/lib-history-setting-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport LabelRepoStateDialog from '../../components/dialog/label-repo-state-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport Rename from '../../components/rename';\nimport MylibRepoMenu from './mylib-repo-menu';\nimport RepoAPITokenDialog from '../../components/dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../../components/dialog/repo-share-upload-links-dialog';\nimport LibOldFilesAutoDelDialog from '../../components/dialog/lib-old-files-auto-del-dialog';\n\nconst propTypes = {\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShow: false,\n      isStarred: this.props.repo.starred,\n      isRenaming: false,\n      isShareDialogShow: false,\n      isDeleteDialogShow: false,\n      isTransferDialogShow: false,\n      isHistorySettingDialogShow: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false,\n      isLabelRepoStateDialogOpen: false,\n      isFolderPermissionDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isOldFilesAutoDelDialogOpen: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: true,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isOpIconShow: false,\n        highlight: false\n      });\n    }\n  }\n\n  onMenuItemClick = (item) => {\n    switch(item) {\n      case 'Star':\n      case 'Unstar':\n        this.onStarRepo();\n        break;\n      case 'Share':\n        this.onShareToggle();\n        break;\n      case 'Delete':\n        this.onDeleteToggle();\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Transfer':\n        this.onTransferToggle();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      case 'Folder Permission':\n        this.onFolderPermissionToggle();\n        break;\n      case 'Label Current State':\n        this.onLabelToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Old Files Auto Delete':\n        this.toggleOldFilesAutoDelDialog();\n        break;\n      default:\n        break;\n    }\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming && this.props.repo.repo_name) {\n      navigate(this.repoURL);\n    }\n  }\n\n  onRepoClick = () => {\n    this.props.onRepoClick(this.props.repo);\n  }\n\n  onStarRepo = () => {\n    const repoName = this.props.repo.repo_name;\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully unstarred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n        const msg = gettext('Successfully starred {library_name_placeholder}.')\n          .replace('{library_name_placeholder}', repoName);\n        toaster.success(msg);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onDeleteToggle = () => {\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferToggle = () => {\n    this.setState({isTransferDialogShow: !this.state.isTransferDialogShow});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  onLabelToggle = () => {\n    this.setState({isLabelRepoStateDialogOpen: !this.state.isLabelRepoStateDialogOpen});\n  }\n\n  onFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogShow: !this.state.isFolderPermissionDialogShow});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  toggleOldFilesAutoDelDialog = () => {\n    this.setState({isOldFilesAutoDelDialogOpen: !this.state.isOldFilesAutoDelDialogOpen});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({\n      highlight: false,\n      isOpIconShow: false,\n    });\n    this.props.onUnfreezedItem();\n  }\n\n  onRenameConfirm = (newName) => {\n    let repo = this.props.repo;\n    let repoID = repo.repo_id;\n    seafileAPI.renameRepo(repoID, newName).then(() => {\n      this.props.onRenameRepo(repo, newName);\n      this.onRenameCancel();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onTransferRepo = (user) => {\n    let repoID = this.props.repo.repo_id;\n    seafileAPI.transferRepo(repoID, user.email).then(res => {\n      this.props.onTransferRepo(repoID);\n      let message = gettext('Successfully transferred the library.');\n      toaster.success(message);\n    }).catch(error => {\n      if (error.response){\n        toaster.danger(error.response.data.error_msg || gettext('Error'), {duration: 3});\n      } else {\n        toaster.danger(gettext('Failed. Please check the network.'), {duration: 3});\n      }\n    });\n    this.onTransferToggle();\n  }\n\n  onDeleteRepo = (repo) => {\n    seafileAPI.deleteRepo(repo.repo_id).then((res) => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onDeleteRepo(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  renderPCUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td className=\"text-center\">\n          {!this.state.isStarred && <i className=\"far fa-star star-empty cursor-pointer\" onClick={this.onStarRepo}></i>}\n          {this.state.isStarred && <i className=\"fas fa-star cursor-pointer\" onClick={this.onStarRepo}></i>}\n        </td>\n        <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <Link to={repoURL}>{repo.repo_name}</Link>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            (gettext('Broken (please contact your administrator to fix this library)'))\n          }\n        </td>\n        <td>\n          {(repo.repo_name && this.state.isOpIconShow) && (\n            <div>\n              <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} onClick={this.onShareToggle}></a>\n              <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.onDeleteToggle}></a>\n              <MylibRepoMenu\n                isPC={true}\n                repo={this.props.repo}\n                onMenuItemClick={this.onMenuItemClick}\n                onFreezedItem={this.props.onFreezedItem}\n                onUnfreezedItem={this.onUnfreezedItem}\n              />\n            </div>\n          )}\n        </td>\n        <td>{repo.size}</td>\n        {storages.length > 0 && <td>{repo.storage_name}</td>}\n        <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n      </tr>\n    );\n  }\n\n  renderMobileUI = () => {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let repoURL = this.repoURL = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave} onClick={this.onRepoClick}>\n        <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n        <td onClick={this.visitRepo}>\n          {this.state.isRenaming && (\n            <Rename\n              name={repo.repo_name}\n              onRenameConfirm={this.onRenameConfirm}\n              onRenameCancel={this.onRenameCancel}\n            />\n          )}\n          {!this.state.isRenaming && repo.repo_name && (\n            <div><Link to={repoURL}>{repo.repo_name}</Link></div>\n          )}\n          {!this.state.isRenaming && !repo.repo_name &&\n            <div>(gettext('Broken (please contact your administrator to fix this library)'))</div>\n          }\n          <span className=\"item-meta-info\">{repo.size}</span>\n          <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n        </td>\n        <td>\n          {repo.repo_name && (\n            <MylibRepoMenu\n              repo={this.props.repo}\n              isStarred={this.state.isStarred}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.props.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n            />\n          )}\n        </td>\n      </tr>\n    );\n  }\n\n  render() {\n    let repo = this.props.repo;\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n        {this.state.isShareDialogShow && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow && (\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onDeleteRepo}\n              toggle={this.onDeleteToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isTransferDialogShow && (\n          <ModalPortal>\n            <TransferDialog\n              itemName={repo.repo_name}\n              submit={this.onTransferRepo}\n              toggleDialog={this.onTransferToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isLabelRepoStateDialogOpen && (\n          <ModalPortal>\n            <LabelRepoStateDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onLabelToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isFolderPermissionDialogShow && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isOldFilesAutoDelDialogOpen && (\n          <ModalPortal>\n            <LibOldFilesAutoDelDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.toggleOldFilesAutoDelDialog}\n            />\n          </ModalPortal>\n        )}\n\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListItem.propTypes = propTypes;\n\nexport default MylibRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport { gettext, storages } from '../../utils/constants';\nimport MylibRepoListItem from './mylib-repo-list-item';\nimport LibsMobileThead from '../../components/libs-mobile-thead';\n\nconst propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  repoList: PropTypes.array.isRequired,\n  sortRepoList: PropTypes.func.isRequired,\n  onRenameRepo: PropTypes.func.isRequired,\n  onDeleteRepo: PropTypes.func.isRequired,\n  onTransferRepo: PropTypes.func.isRequired,\n  onRepoClick: PropTypes.func.isRequired,\n};\n\nclass MylibRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortRepoList(sortBy, sortOrder);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(item => {\n          return (\n            <MylibRepoListItem\n              key={item.repo_id}\n              repo={item}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onRenameRepo={this.props.onRenameRepo}\n              onDeleteRepo={this.props.onDeleteRepo}\n              onTransferRepo={this.props.onTransferRepo}\n              onRepoClick={this.props.onRepoClick}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    const showStorageBackend = storages.length > 0;\n    const sortIcon = this.props.sortOrder === 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width={showStorageBackend ? '33%' : '38%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {this.props.sortBy === 'name' && sortIcon}</a></th>\n            <th width=\"14%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {this.props.sortBy === 'size' && sortIcon}</a></th>\n            {showStorageBackend ? <th width=\"15%\">{gettext('Storage Backend')}</th> : null}\n            <th width={showStorageBackend ? '15%' : '20%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {this.props.sortBy === 'time' && sortIcon}</a></th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <MediaQuery query=\"(min-width: 768px)\">\n          {this.renderPCUI()}\n        </MediaQuery>\n        <MediaQuery query=\"(max-width: 767.8px)\">\n          {this.renderMobileUI()}\n        </MediaQuery>\n      </Fragment>\n    );\n  }\n}\n\nMylibRepoListView.propTypes = propTypes;\n\nexport default MylibRepoListView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { gettext, mediaUrl, siteName, canAddRepo } from '../../utils/constants';\n\nconst propTypes = {\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass GuideForNewDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalBody>\n          <button type=\"button\" className=\"close text-gray\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <div className=\"p-2 text-center\">\n            <img src={`${mediaUrl}img/welcome.png`} width=\"180\" alt=\"\" />\n            <h3 id=\"dialogTitle\">{gettext('Welcome to {site_name_placeholder}').replace('{site_name_placeholder}', siteName)}</h3>\n            {canAddRepo ?\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. We have created a personal library for you. You can create more libraries later.').replace('{site_name_placeholder}', siteName)}</p> :\n              <p>{gettext('{site_name_placeholder} organizes files into libraries. Each library can be synced and shared separately. However, since you are a guest user now, you can not create libraries.').replace('{site_name_placeholder}', siteName)}</p>\n            }\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nGuideForNewDialog.propTypes = propTypes;\n\nexport default GuideForNewDialog;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Repo from '../../models/repo';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport RepoViewToolbar from '../../components/toolbar/repo-view-toobar';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport MylibRepoListView from './mylib-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport GuideForNewDialog from '../../components/dialog/guide-for-new-dialog';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass MyLibraries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorMsg: '',\n      isLoading: true,\n      repoList: [],\n      isShowDetails: false,\n      isSortOptionsDialogOpen: false,\n      isGuideForNewDialogOpen: window.app.pageOptions.guideEnabled,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n    };\n\n    this.emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No libraries')}</h2>\n        <p>{gettext('You have not created any libraries yet. A library is a container to organize your files and folders. A library can also be shared with others and synced to your connected devices. You can create a library by clicking the \"New Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then((res) => {\n      let repoList = res.data.repos.map((item) => {\n        return new Repo(item);\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createMineRepo(repo).then((res) => {\n      const newRepo = new Repo({\n        repo_id: res.data.repo_id,\n        repo_name: res.data.repo_name,\n        size: res.data.repo_size,\n        mtime: res.data.mtime,\n        owner_email: res.data.email,\n        encrypted: res.data.encrypted,\n        permission: res.data.permission,\n        storage_name: res.data.storage_name\n      });\n      this.state.repoList.unshift(newRepo);\n      this.setState({repoList: this.state.repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  sortRepoList = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  onTransferRepo = (repoID) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRenameRepo = (repo, newName) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.repo_name = newName;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onDeleteRepo = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onRepoClick = (repo) => {\n    if (this.state.isShowDetails) {\n      this.onRepoDetails(repo);\n    }\n  }\n\n  onRepoDetails = (repo) => {\n    this.setState({\n      currentRepo: repo,\n      isShowDetails: true,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: !this.state.isShowDetails});\n  }\n\n  toggleGuideForNewDialog = () => {\n    window.app.pageOptions.guideEnabled = false;\n    this.setState({\n      isGuideForNewDialogOpen: false\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <RepoViewToolbar onShowSidePanel={this.props.onShowSidePanel} onCreateRepo={this.onCreateRepo} libraryType={'mine'}/>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('My Libraries')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {!this.state.isLoading && this.state.errorMsg && <p className=\"error text-center mt-8\">{this.state.errorMsg}</p>}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length === 0 && this.emptyTip}\n              {!this.state.isLoading && !this.state.errorMsg && this.state.repoList.length > 0 &&\n                <MylibRepoListView\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  repoList={this.state.repoList}\n                  onRenameRepo={this.onRenameRepo}\n                  onDeleteRepo={this.onDeleteRepo}\n                  onTransferRepo={this.onTransferRepo}\n                  onRepoClick={this.onRepoClick}\n                  sortRepoList={this.sortRepoList}\n                />\n              }\n            </div>\n          </div>\n          {!this.state.isLoading && !this.state.errorMsg && this.state.isGuideForNewDialogOpen &&\n            <GuideForNewDialog\n              toggleDialog={this.toggleGuideForNewDialog}\n            />\n          }\n          {this.state.isSortOptionsDialogOpen &&\n            <SortOptionsDialog\n              toggleDialog={this.toggleSortOptionsDialog}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortRepoList}\n            />\n          }\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail\n                currentRepo={this.state.currentRepo}\n                closeDetails={this.closeDetails}\n              />\n            </div>\n          )}\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nMyLibraries.propTypes = propTypes;\n\nexport default MyLibraries;\n","import React, { Component, Fragment } from 'react';\nimport { Link } from '@reach/router';\nimport moment from 'moment';\nimport { gettext, siteRoot, lang, trashReposExpireDays } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\n\nmoment.locale(lang);\n\nclass MyLibsDeleted extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      deletedRepoList: [],\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listDeletedRepo().then(res => {\n      this.setState({\n        deletedRepoList: res.data,\n        isLoading: false,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  refreshDeletedRepoList = (repoID) => {\n    let deletedRepoList = this.state.deletedRepoList.filter(item => {\n      return item.repo_id !== repoID;\n    });\n    this.setState({deletedRepoList: deletedRepoList});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north\">\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <Link to={ siteRoot + 'my-libs/' }>{gettext('My Libraries')}</Link>\n                <span className=\"path-split\">/</span>\n                <span>{gettext('Deleted Libraries')}</span>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.deletedRepoList.length === 0) &&\n              <EmptyTip>\n                <h2>{gettext('No deleted libraries')}</h2>\n                <p>{gettext('You have not deleted any libraries in the last {placeholder} days. A deleted library will be cleaned automatically after this period.').replace('{placeholder}', trashReposExpireDays)}</p>\n              </EmptyTip>\n              }\n              {this.state.deletedRepoList.length !== 0 &&\n                <div>\n                  <p className=\"tip mt-2\">{gettext('Tip: libraries deleted {placeholder} days ago will be cleaned automatically.').replace('{placeholder}', trashReposExpireDays)}</p>\n                  <DeletedRepoTable\n                    deletedRepoList={this.state.deletedRepoList}\n                    refreshDeletedRepoList={this.refreshDeletedRepoList}\n                  />\n                </div>\n              }\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nclass DeletedRepoTable extends Component {\n\n  render() {\n    let deletedRepos = this.props.deletedRepoList;\n    return (\n      <table>\n        <thead>\n          <tr>\n            <th style={{width: '4%'}}>{/*img*/}</th>\n            <th style={{width: '52%'}}>{gettext('Name')}</th>\n            <th style={{width: '30%'}}>{gettext('Deleted Time')}</th>\n            <th style={{width: '14%'}}></th>\n          </tr>\n        </thead>\n        <tbody>\n          { deletedRepos && deletedRepos.map((item) => {\n            return (\n              <DeletedRepoItem\n                key={item.repo_id}\n                repo={item}\n                refreshDeletedRepoList={this.props.refreshDeletedRepoList}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass DeletedRepoItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hideRestoreMenu: true,\n      highlight: false,\n    };\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: false,\n        highlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        hideRestoreMenu: true,\n        highlight: false,\n      });\n    }\n  }\n\n  restoreDeletedRepo = () => {\n    let repoID = this.props.repo.repo_id;\n    let repoName = this.props.repo.repo_name;\n    seafileAPI.restoreDeletedRepo(repoID).then(res => {\n      let message = gettext('Successfully restored the library.') + '  ' + repoName;\n      toaster.success(message);\n      this.props.refreshDeletedRepoList(repoID);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed. Please check the network.');\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let localTime = moment.utc(this.props.repo.del_time).toDate();\n    localTime = moment(localTime).fromNow();\n    let iconUrl = Utils.getLibIconUrl(this.props.repo);\n\n    return (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"text-center\"><img src={iconUrl} alt='' width=\"24\" /></td>\n        <td className=\"name\">{this.props.repo.repo_name}</td>\n        <td className=\"update\">{localTime}</td>\n        <td>\n          <span onClick={this.restoreDeletedRepo} title={gettext('Restore')}\n            className={`sf2-icon-reply action-icon ${this.state.highlight ? '' : 'vh'}`}></span>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default MyLibsDeleted;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input, Alert } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\n\nconst shareRepoListItemProps = {\n  repo: PropTypes.object.isRequired,\n  onRepoSelect: PropTypes.func.isRequired,\n  onPermissionChange: PropTypes.func.isRequired,\n};\n\nclass ShareRepoListItem extends React.Component {\n\n  onRepoSelect = (e) => {\n    let isChecked = e.target.checked;\n    this.props.onRepoSelect(this.props.repo, isChecked);\n  }\n\n  onPermissionChange = (e) => {\n    let permission = e.target.value;\n    let repo = this.props.repo;\n    this.props.onPermissionChange(repo, permission);\n  }\n\n  render() {\n    let repo = this.props.repo;\n    let iconUrl = Utils.getLibIconUrl(repo);\n    return (\n      <tr>\n        <td className=\"text-center\"><input type=\"checkbox\" className=\"vam\" name=\"repo\" onChange={this.onRepoSelect} /></td>\n        <td className=\"text-center\"><img src={iconUrl} width=\"24\" alt={gettext('icon')} /></td>\n        <td className=\"name\">{repo.repo_name}</td>\n        <td>{moment(repo.last_modified).fromNow()}</td>\n        <td>\n          <Input style={{height: '1.5rem', padding: 0}} type=\"select\" name=\"select\" onChange={this.onPermissionChange} value={repo.sharePermission}>\n            <option value='rw'>{gettext('Read-Write')}</option>\n            <option value='r'>{gettext('Read-Only')}</option>\n          </Input>\n        </td>\n      </tr>\n    );\n  }\n}\n\nShareRepoListItem.propTypes = shareRepoListItemProps;\n\nconst propTypes = {\n  onRepoSelectedHandler: PropTypes.func.isRequired,\n  onShareRepoDialogClose: PropTypes.func.isRequired,\n};\n\nclass ShareRepoDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n      currentRepo: null,\n      permission: 'rw',\n      selectedRepoList: [],\n      errMessage: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'mine'}).then(res => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        repo.sharePermission = 'rw';\n        return repo;\n      });\n      this.setState({repoList: repoList});\n    });\n  }\n\n  onRepoSelect = (repo, isChecked) => {\n    let selectedRepoList = [];\n    if (isChecked) {\n      this.state.selectedRepoList.push(repo);\n      selectedRepoList = this.state.selectedRepoList;\n    } else {\n      selectedRepoList = this.state.selectedRepoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n    }\n    this.setState({selectedRepoList: selectedRepoList});\n  }\n\n  onPermissionChange = (repo, permission) => {\n    let repoList = this.state.repoList.map(item => {\n      if (item.repo_id === repo.repo_id) {\n        item.sharePermission = permission;\n      }\n      return item;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  handleSubmit = () => {\n    if (this.state.selectedRepoList.length === 0) {\n      let errMessage = gettext('Please select a library to share.');\n      this.setState({errMessage: errMessage});\n      return;\n    }\n\n    this.props.onRepoSelectedHandler(this.state.selectedRepoList);\n    this.onCloseDialog();\n  }\n\n  onCloseDialog = () => {\n    this.props.onShareRepoDialogClose();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Select libraries to share')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='4%'>{/* select */}</th>\n                <th width='6%'>{/* icon */}</th>\n                <th width='35%'>{gettext('Name')}</th>\n                <th width='25%'>{gettext('Last Update')}</th>\n                <th width='30%'>{gettext('Permission')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repoList.map((repo, index) => {\n                return (\n                  <ShareRepoListItem\n                    key={index}\n                    repo={repo}\n                    onRepoSelect={this.onRepoSelect}\n                    onPermissionChange={this.onPermissionChange}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.onCloseDialog}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nShareRepoDialog.propTypes = propTypes;\n\nexport default ShareRepoDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { Dropdown, DropdownMenu, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { Link, navigate } from '@reach/router';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot, isPro, username, folderPermEnabled, isSystemStaff, enableResetEncryptedRepoPassword, isEmailConfigured } from '../../utils/constants';\nimport ModalPortal from '../../components/modal-portal';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport LibSubFolderPermissionDialog from '../../components/dialog/lib-sub-folder-permission-dialog';\nimport DeleteRepoDialog from '../../components/dialog/delete-repo-dialog';\nimport ChangeRepoPasswordDialog from '../../components/dialog/change-repo-password-dialog';\nimport ResetEncryptedRepoPasswordDialog from '../../components/dialog/reset-encrypted-repo-password-dialog';\nimport Rename from '../rename';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport LibHistorySettingDialog from '../dialog/lib-history-setting-dialog';\nimport toaster from '../toast';\nimport RepoAPITokenDialog from '../dialog/repo-api-token-dialog';\nimport RepoShareUploadLinksDialog from '../dialog/repo-share-upload-links-dialog';\n\nconst propTypes = {\n  currentGroup: PropTypes.object,\n  libraryType: PropTypes.string,\n  repo: PropTypes.object.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  onItemDelete: PropTypes.func,\n};\n\nclass SharedRepoListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      highlight: false,\n      isOperationShow: false,\n      isItemMenuShow: false,\n      isShowSharedDialog: false,\n      isRenaming: false,\n      isStarred: this.props.repo.starred,\n      isFolderPermissionDialogOpen: false,\n      isHistorySettingDialogShow: false,\n      isDeleteDialogShow: false,\n      isAPITokenDialogShow: false,\n      isRepoShareUploadLinksDialogOpen: false,\n      isRepoDeleted: false,\n      isChangePasswordDialogShow: false,\n      isResetPasswordDialogShow: false\n    };\n    this.isDeparementOnwerGroupMember = false;\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n  }\n\n  clickOperationMenuToggle = (e) => {\n    this.toggleOperationMenu(e);\n  }\n\n  toggleOperationMenu = (e) => {\n    let dataset = e.target ? e.target.dataset : null;\n    if (dataset && dataset.toggle && dataset.toggle === 'Rename') {\n      this.setState({isItemMenuShow: !this.state.isItemMenuShow});\n      return;\n    }\n\n    this.setState(\n      {isItemMenuShow: !this.state.isItemMenuShow},\n      () => {\n        if (this.state.isItemMenuShow) {\n          this.props.onFreezedItem();\n        } else {\n          this.props.onUnfreezedItem();\n          this.setState({\n            highlight: false,\n            isOperationShow: false,\n          });\n        }\n      }\n    );\n  }\n\n  getRepoComputeParams = () => {\n    let repo = this.props.repo;\n\n    let iconUrl = Utils.getLibIconUrl(repo);\n    let iconTitle = Utils.getLibIconTitle(repo);\n    let libPath = `${siteRoot}library/${repo.repo_id}/${Utils.encodePath(repo.repo_name)}/`;\n\n    return { iconUrl, iconTitle, libPath };\n  }\n\n  onMenuItemClick = (e) => {\n    let operation = e.target.dataset.toggle;\n    switch(operation) {\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Folder Permission':\n        this.onItemFolderPermissionToggle();\n        break;\n      case 'Details':\n        this.onItemDetails();\n        break;\n      case 'Share':\n        this.onItemShare();\n        break;\n      case 'Unshare':\n        this.onItemUnshare();\n        break;\n      case 'History Setting':\n        this.onHistorySettingToggle();\n        break;\n      case 'API Token':\n        this.onAPITokenToggle();\n        break;\n      case 'Share Links Admin':\n        this.toggleRepoShareUploadLinksDialog();\n        break;\n      case 'Change Password':\n        this.onChangePasswordToggle();\n        break;\n      case 'Reset Password':\n        this.onResetPasswordToggle();\n        break;\n      default:\n        break;\n    }\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onFreezedItem();\n    this.setState({\n      isRenaming: !this.state.isRenaming,\n      isOperationShow: !this.state.isOperationShow\n    });\n  }\n\n  onRenameConfirm = (name) => {\n    this.props.onItemRename(this.props.repo, name);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({isRenaming: !this.state.isRenaming});\n  }\n\n  onItemFolderPermissionToggle = () => {\n    this.setState({isFolderPermissionDialogOpen: !this.state.isFolderPermissionDialogOpen});\n  }\n\n  onHistorySettingToggle = () => {\n    this.setState({isHistorySettingDialogShow: !this.state.isHistorySettingDialogShow});\n  }\n\n  onItemDetails = () => {\n    this.props.onItemDetails(this.props.repo);\n  }\n\n  onItemShare = () => {\n    this.setState({isShowSharedDialog: true});\n  }\n\n  onItemUnshare = () => {\n    this.props.onItemUnshare(this.props.repo);\n  }\n\n  onItemDeleteToggle = () => {\n    this.setState({isDeleteDialogShow: !this.state.isDeleteDialogShow});\n  }\n\n  onItemDelete = () => {\n    const { currentGroup, repo } = this.props;\n    if (!currentGroup) {  // repo can not be deleted in share all module\n      return;\n    }\n\n    const groupID = currentGroup.id;\n\n    seafileAPI.deleteGroupOwnedLibrary(groupID, repo.repo_id).then(() => {\n\n      this.setState({\n        isRepoDeleted: true,\n        isDeleteDialogShow: false,\n      });\n\n      this.props.onItemDelete(repo);\n      let name = repo.repo_name;\n      var msg = gettext('Successfully deleted {name}.').replace('{name}', name);\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        let name = repo.repo_name;\n        errMessage = gettext('Failed to delete {name}.').replace('{name}', name);\n      }\n      toaster.danger(errMessage);\n\n      this.setState({isRepoDeleted: false});\n    });\n  }\n\n  toggleShareDialog = () => {\n    this.setState({isShowSharedDialog: false});\n  }\n\n  toggleRepoShareUploadLinksDialog = () => {\n    this.setState({isRepoShareUploadLinksDialogOpen: !this.state.isRepoShareUploadLinksDialogOpen});\n  }\n\n  onAPITokenToggle = () => {\n    this.setState({isAPITokenDialogShow: !this.state.isAPITokenDialogShow});\n  }\n\n  onChangePasswordToggle = () => {\n    this.setState({isChangePasswordDialogShow: !this.state.isChangePasswordDialogShow});\n  }\n\n  onResetPasswordToggle = () => {\n    this.setState({isResetPasswordDialogShow: !this.state.isResetPasswordDialogShow});\n  }\n\n  translateMenuItem = (menuItem) => {\n    let translateResult = '';\n    switch(menuItem) {\n      case 'Rename':\n        translateResult = gettext('Rename');\n        break;\n      case 'Folder Permission':\n        translateResult = gettext('Folder Permission');\n        break;\n      case 'Details':\n        translateResult = gettext('Details');\n        break;\n      case 'Unshare':\n        translateResult = gettext('Unshare');\n        break;\n      case 'Share':\n        translateResult = gettext('Share');\n        break;\n      case 'History Setting':\n        translateResult = gettext('History Setting');\n        break;\n      case 'Share Links Admin':\n        translateResult = gettext('Share Links Admin');\n        break;\n      case 'Change Password':\n        translateResult = gettext('Change Password');\n        break;\n      case 'Reset Password':\n        translateResult = gettext('Reset Password');\n        break;\n      case 'API Token':\n        translateResult = 'API Token'; // translation is not needed here\n        break;\n      default:\n        break;\n    }\n    return translateResult;\n  }\n\n  generatorOperations = () => {\n    let { repo, currentGroup } = this.props;\n    //todo this have a bug; use current api is not return admins param;\n    let isStaff = currentGroup && currentGroup.admins && currentGroup.admins.indexOf(username) > -1; //for group repolist;\n    let isRepoOwner = repo.owner_email === username;\n    let isAdmin = repo.is_admin;\n    let operations = [];\n    if (isPro) {\n      if (repo.owner_email.indexOf('@seafile_group') != -1) {\n        if (isStaff) {\n          if (repo.owner_email == currentGroup.id + '@seafile_group') {\n            this.isDeparementOnwerGroupMember = true;\n            operations = ['Rename'];\n            if (folderPermEnabled) {\n              operations.push('Folder Permission');\n            }\n            operations.push('Share Links Admin');\n            if (repo.encrypted) {\n              operations.push('Change Password');\n            }\n            if (repo.encrypted && enableResetEncryptedRepoPassword && isEmailConfigured) {\n              operations.push('Reset Password');\n            }\n            operations.push('History Setting', 'API Token', 'Details');\n          } else {\n            operations.push('Unshare');\n          }\n        }\n      } else {\n        if (isRepoOwner || isAdmin) {\n          operations.push('Share');\n        }\n        if (isStaff || isRepoOwner || isAdmin) {\n          operations.push('Unshare');\n        }\n      }\n    } else {\n      if (isRepoOwner) {\n        operations.push('Share');\n      }\n      if (isStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    }\n    return operations;\n  }\n\n  generatorMobileMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      operations = this.generatorOperations();\n      if (this.isDeparementOnwerGroupMember) {\n        operations.unshift('Unshare');\n        operations.unshift('Share');\n      }\n    }\n\n    if (!operations.length) {\n      return null;\n    }\n    return (\n      <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n        <DropdownToggle\n          tag=\"i\"\n          className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n          title={gettext('More Operations')}\n          data-toggle=\"dropdown\"\n          aria-expanded={this.state.isItemMenuShow}\n          onClick={this.clickOperationMenuToggle}\n        />\n        <div className={`${this.state.isItemMenuShow?'':'d-none'}`} onClick={this.toggleOperationMenu}>\n          <div className=\"mobile-operation-menu-bg-layer\"></div>\n          <div className=\"mobile-operation-menu\">\n            {operations.map((item, index) => {\n              return (\n                <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>\n              );\n            })}\n          </div>\n        </div>\n      </Dropdown>\n    );\n  }\n\n  generatorPCMenu = () => {\n    let operations = [];\n    if (this.props.libraryType && this.props.libraryType === 'public') {\n      let isRepoOwner = this.props.repo.owner_email === username;\n      if (isSystemStaff || isRepoOwner) {\n        operations.push('Unshare');\n      }\n    } else {\n      // scene one: (Share, Delete, itemToggle and other operations);\n      // scene two: (Share, Unshare), (Share), (Unshare)\n      operations = this.generatorOperations();\n    }\n    const shareOperation   = <a href=\"#\" className=\"op-icon sf2-icon-share\" title={gettext('Share')} onClick={this.onItemShare}></a>;\n    const unshareOperation = <a href=\"#\" className=\"op-icon sf2-icon-x3\" title={gettext('Unshare')} onClick={this.onItemUnshare}></a>;\n    const deleteOperation  = <a href=\"#\" className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.onItemDeleteToggle}></a>;\n\n    if (this.isDeparementOnwerGroupMember) {\n      return (\n        <Fragment>\n          {shareOperation}\n          {deleteOperation}\n          <Dropdown isOpen={this.state.isItemMenuShow} toggle={this.toggleOperationMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle sf2-icon-caret-down\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isItemMenuShow}\n              onClick={this.clickOperationMenuToggle}\n            />\n            <DropdownMenu>\n              {operations.map((item, index) => {\n                return <DropdownItem key={index} data-toggle={item} onClick={this.onMenuItemClick}>{this.translateMenuItem(item)}</DropdownItem>;\n              })}\n            </DropdownMenu>\n          </Dropdown>\n        </Fragment>\n      );\n    } else {\n      if (operations.length == 2) {\n        return (\n          <Fragment>\n            {shareOperation}\n            {unshareOperation}\n          </Fragment>\n        );\n      }\n      if (operations.length == 1 && operations[0] === 'Share') {\n        return shareOperation;\n      }\n\n      if (operations.length == 1 && operations[0] === 'Unshare') {\n        return unshareOperation;\n      }\n    }\n    return null;\n  }\n\n  onStarRepo = () => {\n    if (this.state.isStarred) {\n      seafileAPI.unstarItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(this.props.repo.repo_id, '/').then(() => {\n        this.setState({isStarred: !this.state.isStarred});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renderPCUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td className=\"text-center\">\n            {!this.state.isStarred && <i className=\"far fa-star star-empty cursor-pointer\" onClick={this.onStarRepo}></i>}\n            {this.state.isStarred && <i className=\"fas fa-star cursor-pointer\" onClick={this.onStarRepo}></i>}\n          </td>\n          <td><img src={iconUrl} title={iconTitle} alt={iconTitle} width=\"24\" /></td>\n          <td>\n            {this.state.isRenaming ?\n              <Rename  name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <Link to={libPath}>{repo.repo_name}</Link>\n            }\n          </td>\n          <td>{this.state.isOperationShow && this.generatorPCMenu()}</td>\n          <td>{repo.size}</td>\n          <td title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</td>\n          <td title={repo.owner_contact_email}>{repo.owner_name}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  visitRepo = () => {\n    if (!this.state.isRenaming) {\n      navigate(this.repoURL);\n    }\n  }\n  \n  renderMobileUI = () => {\n    let { iconUrl, iconTitle, libPath } = this.getRepoComputeParams();\n    let { repo } = this.props;\n    this.repoURL = libPath;\n    return (\n      <Fragment>\n        <tr className={this.state.highlight ? 'tr-highlight' : ''}  onMouseEnter={this.onMouseEnter} onMouseOver={this.onMouseOver} onMouseLeave={this.onMouseLeave}>\n          <td onClick={this.visitRepo}><img src={iconUrl} title={iconTitle} width=\"24\" alt={iconTitle}/></td>\n          <td onClick={this.visitRepo}>\n            {this.state.isRenaming ?\n              <Rename name={repo.repo_name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n              <Link to={libPath}>{repo.repo_name}</Link>\n            }\n            <br />\n            <span className=\"item-meta-info\" title={repo.owner_contact_email}>{repo.owner_name}</span>\n            <span className=\"item-meta-info\">{repo.size}</span>\n            <span className=\"item-meta-info\" title={moment(repo.last_modified).format('llll')}>{moment(repo.last_modified).fromNow()}</span>\n          </td>\n          <td>{this.generatorMobileMenu()}</td>\n        </tr>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { repo } = this.props;\n    let isGroupOwnedRepo = repo.owner_email.indexOf('@seafile_group') > -1;\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI()}\n        {this.state.isShowSharedDialog && (\n          <ModalPortal>\n            <ShareDialog\n              itemType={'library'}\n              itemName={repo.repo_name}\n              itemPath={'/'}\n              repoID={repo.repo_id}\n              repoEncrypted={repo.encrypted}\n              enableDirPrivateShare={true}\n              userPerm={repo.permission}\n              isAdmin={repo.is_admin}\n              isGroupOwnedRepo={isGroupOwnedRepo}\n              toggleDialog={this.toggleShareDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isFolderPermissionDialogOpen && (\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onItemFolderPermissionToggle}\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              isDepartmentRepo={true}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isDeleteDialogShow &&\n          <ModalPortal>\n            <DeleteRepoDialog\n              repo={this.props.repo}\n              isRepoDeleted={this.state.isRepoDeleted}\n              onDeleteRepo={this.onItemDelete}\n              toggle={this.onItemDeleteToggle}\n            />\n          </ModalPortal>\n        }\n        {this.state.isHistorySettingDialogShow && (\n          <ModalPortal>\n            <LibHistorySettingDialog\n              repoID={repo.repo_id}\n              itemName={repo.repo_name}\n              toggleDialog={this.onHistorySettingToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAPITokenDialogShow && (\n          <ModalPortal>\n            <RepoAPITokenDialog\n              repo={repo}\n              onRepoAPITokenToggle={this.onAPITokenToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRepoShareUploadLinksDialogOpen && (\n          <ModalPortal>\n            <RepoShareUploadLinksDialog\n              repo={repo}\n              toggleDialog={this.toggleRepoShareUploadLinksDialog}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isChangePasswordDialogShow && (\n          <ModalPortal>\n            <ChangeRepoPasswordDialog\n              repoID={repo.repo_id}\n              repoName={repo.repo_name}\n              toggleDialog={this.onChangePasswordToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isResetPasswordDialogShow && (\n          <ModalPortal>\n            <ResetEncryptedRepoPasswordDialog\n              repoID={repo.repo_id}\n              toggleDialog={this.onResetPasswordToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nSharedRepoListItem.propTypes = propTypes;\n\nexport default SharedRepoListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport SharedRepoListItem from './shared-repo-list-item';\nimport toaster from '../toast';\nimport LibsMobileThead from '../libs-mobile-thead';\nimport Loading from '../loading';\n\nconst propTypes = {\n  libraryType: PropTypes.string,\n  currentGroup: PropTypes.object,\n  isShowTableThread: PropTypes.bool,\n  sortBy: PropTypes.string,\n  sortOrder: PropTypes.string,\n  sortItems: PropTypes.func,\n  repoList: PropTypes.array.isRequired,\n  onItemUnshare: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func,\n  onItemDetails: PropTypes.func,\n  onItemRename: PropTypes.func,\n  hasNextPage: PropTypes.bool\n};\n\nclass SharedRepoListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  getSortMetaData = () => {\n    return {\n      sortByName: this.props.sortBy == 'name',\n      sortByTime: this.props.sortBy == 'time',\n      sortBySize: this.props.sortBy == 'size',\n      sortIcon: this.props.sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (repo, newName) => {\n    let isDuplicated = this.props.repoList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(repo, newName);\n  }\n\n  renderRepoListView = () => {\n    return (\n      <Fragment>\n        {this.props.repoList.map(repo => {\n          return (\n            <SharedRepoListItem\n              key={repo.repo_id}\n              repo={repo}\n              libraryType={this.props.libraryType}\n              currentGroup={this.props.currentGroup}\n              isItemFreezed={this.state.isItemFreezed}\n              onFreezedItem={this.onFreezedItem}\n              onUnfreezedItem={this.onUnfreezedItem}\n              onItemUnshare={this.props.onItemUnshare}\n              onItemDelete={this.props.onItemDelete}\n              onItemDetails={this.props.onItemDetails}\n              onItemRename={this.props.onItemRename}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  }\n\n  renderPCUI = () => {\n    let isShowTableThread = this.props.isShowTableThread !== undefined ? this.props.isShowTableThread : true;\n\n    const { sortByName, sortByTime, sortBySize, sortIcon } = this.getSortMetaData();\n\n    return (\n      <table className={isShowTableThread ? '' : 'table-thead-hidden'}>\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"4%\"><span className=\"sr-only\">{gettext('Library Type')}</span></th>\n            <th width=\"36%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n            <th width=\"12%\"><span className=\"sr-only\">{gettext('Actions')}</span></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n            <th width={'14%'}><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n            <th width=\"16%\">{gettext('Owner')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  renderMobileUI = () => {\n    return (\n      <table className=\"table-thead-hidden\">\n        <LibsMobileThead />\n        <tbody>\n          {this.renderRepoListView()}\n        </tbody>\n      </table>\n    );\n  }\n\n  render() {\n    const table = Utils.isDesktop() ? this.renderPCUI() : this.renderMobileUI();\n    if (this.props.hasNextPage) {\n      return (\n        <Fragment>\n          {table}\n          <Loading />\n        </Fragment>\n      );\n    } else {\n      return table;\n    }\n  }\n}\n\nSharedRepoListView.propTypes = propTypes;\n\nexport default SharedRepoListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport MediaQuery from 'react-responsive';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, canAddPublicRepo } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport ShareRepoDialog from '../../components/dialog/share-repo-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass PublicSharedView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errMessage: '',\n      emptyTip: '',\n      repoList: [],\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      libraryType: 'public',\n      isCreateMenuShow: false,\n      isCreateRepoDialogShow: false,\n      isSelectRepoDialpgShow: false,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos({type: 'public'}).then((res) => {\n      let repoList = res.data.repos.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      this.setState({\n        isLoading: false,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onCreateRepo = (repo) => {\n    seafileAPI.createPublicRepo(repo).then(res => {\n      let object = {  // need modify api return value\n        repo_id: res.data.id,\n        repo_name: res.data.name,\n        permission: res.data.permission,\n        size: res.data.size,\n        owner_name: res.data.owner_name,\n        owner_email: res.data.owner,\n        mtime: res.data.mtime,\n        encrypted: res.data.encrypted,\n      };\n      let repo = new Repo(object);\n      let repoList = this.addRepoItem(repo);\n      this.setState({repoList: repoList});\n      this.onCreateRepoToggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRepoSelectedHandler = (selectedRepoList) => {\n    selectedRepoList.forEach(repo => {\n      seafileAPI.selectOwnedRepoToPublic(repo.repo_id, {share_type: 'public', permission: repo.sharePermission}).then(() => {\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    });\n  }\n\n  onItemUnshare = (repo) => {\n    seafileAPI.unshareRepo(repo.repo_id, {share_type: 'public'}).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      let message = gettext('Successfully unshared {name}').replace('{name}', repo.repo_name);\n      toaster.success(message);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to unshare {name}').replace('{name}', repo.repo_name);\n      }\n      toaster(errMessage);\n    });\n  }\n\n  onItemDelete = () => {\n    // todo need to optimized\n  }\n\n  addRepoItem = (repo) => {\n    let isExist = false;\n    let repoIndex = 0;\n    let repoList = this.state.repoList;\n    for (let i = 0; i < repoList.length; i ++) {\n      if (repo.repo_id === repoList[i].repo_id) {\n        isExist = true;\n        repoIndex = i;\n        break;\n      }\n    }\n    if (isExist) {\n      this.state.repoList.splice(repoIndex, 1);\n    }\n\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onAddRepoToggle = () => {\n    this.setState({isCreateMenuShow: !this.state.isCreateMenuShow});\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onSelectRepoToggle = () => {\n    this.setState({isSelectRepoDialpgShow: !this.state.isSelectRepoDialpgShow});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    let errMessage = this.state.errMessage;\n    let emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No public libraries')}</h2>\n        <p>{gettext('No public libraries have been created yet. A public library is accessible by all users. You can create a public library by clicking the \"Add Library\" button in the menu bar.')}</p>\n      </EmptyTip>\n    );\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          {canAddPublicRepo &&\n            <div className=\"cur-view-toolbar\">\n              <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n              <div className=\"operation\">\n                <Dropdown isOpen={this.state.isCreateMenuShow} toggle={this.onAddRepoToggle}>\n                  <MediaQuery query=\"(min-width: 768px)\">\n                    <DropdownToggle className='btn btn-secondary operation-item'>\n                      <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Add Library')}\n                    </DropdownToggle>\n                  </MediaQuery>\n                  <MediaQuery query=\"(max-width: 767.8px)\">\n                    <DropdownToggle\n                      tag=\"span\"\n                      className=\"sf2-icon-plus mobile-toolbar-icon\"\n                      title={gettext('Add Library')}\n                    />\n                  </MediaQuery>\n                  <DropdownMenu>\n                    <DropdownItem onClick={this.onSelectRepoToggle}>{gettext('Share existing libraries')}</DropdownItem>\n                    <DropdownItem onClick={this.onCreateRepoToggle}>{gettext('New Library')}</DropdownItem>\n                  </DropdownMenu>\n                </Dropdown>\n              </div>\n            </div>\n          }\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading m-0\">{gettext('Shared with all')}</h3>\n              {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n            </div>\n            <div className=\"cur-view-content\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && errMessage}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  libraryType={this.state.libraryType}\n                  repoList={this.state.repoList}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                />\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.state.sortBy}\n          sortOrder={this.state.sortOrder}\n          sortItems={this.sortItems}\n        />\n        }\n        {this.state.isCreateRepoDialogShow && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isSelectRepoDialpgShow && (\n          <ModalPortal>\n            <ShareRepoDialog\n              onRepoSelectedHandler={this.onRepoSelectedHandler}\n              onShareRepoDialogClose={this.onSelectRepoToggle}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nPublicSharedView.propTypes = propTypes;\n\nexport default PublicSharedView;\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import io from 'socket.io-client';\nimport { name, username, contactEmail, seafileCollabServer } from './constants';\n\nconst socket = (seafileCollabServer !== '') ? io(seafileCollabServer) : undefined;\n\nclass CollabServer {\n\n  watchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'watch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.on('repo_update', fn);\n  }\n\n  unwatchRepo(repoID, fn) {\n    if (!socket) {\n      return;\n    }\n    socket.emit('repo_update', {\n      request: 'unwatch_update',\n      repo_id: repoID,\n      user: {\n        name: name,\n        username: username,\n        contact_email: contactEmail,\n      },\n    });\n    socket.off('repo_update', fn);\n  }\n}\n\nconst collabServer = new CollabServer();\n\nexport default collabServer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalBody, Form } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\n\nimport '../../css/lib-decrypt.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onLibDecryptDialog: PropTypes.func.isRequired\n};\n\n\nclass LibDecryptDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      password: '',\n      showError: false,\n    };\n  }\n\n  handleSubmit = (e) => {\n    let repoID = this.props.repoID;\n    let password = this.state.password;\n    seafileAPI.setRepoDecryptPassword(repoID, password).then(res => {\n      this.props.onLibDecryptDialog();\n    }).catch(res => {\n      this.setState({\n        showError: true\n      });\n    });\n\n    e.preventDefault();\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key == 'Enter') {\n      this.handleSubmit(e);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      password: e.target.value,\n      showError: false\n    });\n  }\n\n  toggle = () => {\n    window.location.href = siteRoot;\n  };\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalBody>\n          <button type=\"button\" className=\"close\" onClick={this.toggle}><span aria-hidden=\"true\"></span></button>\n          <Form className=\"lib-decrypt-form text-center\">\n            <img src={`${mediaUrl}img/lock.png`} alt=\"\" aria-hidden=\"true\" />\n            <p className=\"intro\">{gettext('This library is password protected')}</p>\n            {this.state.showError &&\n              <p className=\"error\">{gettext('Wrong password')}</p>\n            }\n            <input type=\"password\" name=\"password\" className=\"form-control password-input\" autoComplete=\"off\" onKeyPress={this.handleKeyPress} placeholder={gettext('Password')} onChange={this.handleChange} />\n            <button type=\"submit\" className=\"btn btn-primary submit\" onClick={this.handleSubmit}>{gettext('Submit')}</button>\n            <p className=\"tip\">{'* '}{gettext('The password will be kept in the server for only 1 hour.')}</p>\n          </Form>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nLibDecryptDialog.propTypes = propTypes;\n\nexport default LibDecryptDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass ViewModeToolbar extends React.Component {\n\n  switchViewMode = (e) => {\n    e.preventDefault();\n    let id = e.target.id;\n    if (id === this.props.currentMode) {\n      return;\n    }\n    this.props.switchViewMode(id);\n  }\n\n  render() {\n    let baseClass = 'btn btn-secondary btn-icon sf-view-mode-btn ';\n    return (\n      <React.Fragment>\n        <div className=\"view-mode btn-group\">\n          <button className={`${baseClass} sf2-icon-list-view ${this.props.currentMode === 'list' ? 'current-mode' : ''}`} id='list' title={gettext('List')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-grid-view ${this.props.currentMode === 'grid' ? 'current-mode' : ''}`} id='grid' title={gettext('Grid')} onClick={this.switchViewMode}></button>\n          <button className={`${baseClass} sf2-icon-two-columns ${this.props.currentMode === 'column' ? 'current-mode' : ''}`} id='column' title={gettext('Column')} onClick={this.switchViewMode}></button>\n        </div>\n        <div className=\"detail-btn btn-group\">\n          <button className=\"btn btn-secondary btn-icon ml-1 fas fa-info\" id='detail' title={gettext('Detail')} onClick={this.switchViewMode}></button>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nViewModeToolbar.propTypes = propTypes;\n\nexport default ViewModeToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, isDocs } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  fileType: PropTypes.string,\n  parentPath: PropTypes.string.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  addFileCancel: PropTypes.func.isRequired,\n};\n\nclass CreateFile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      parentPath: '',\n      childName: props.fileType || '',\n      isDraft: false,\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    let parentPath = this.props.parentPath;\n    if (parentPath[parentPath.length - 1] === '/') {  // mainPanel\n      this.setState({parentPath: parentPath});\n    } else {\n      this.setState({parentPath: parentPath + '/'}); // sidePanel\n    }\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0,0);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      childName: e.target.value,\n    }) ;\n  }\n\n  handleSubmit = () => {\n    if (!this.state.isSubmitBtnActive) {\n      return;\n    }\n\n    let isDuplicated = this.checkDuplicatedName();\n    let newName = this.state.childName;\n\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      this.setState({errMessage: errMessage});\n    } else {\n      let path = this.state.parentPath + newName;\n      let isDraft = this.state.isDraft;\n      this.props.onAddFile(path, isDraft);\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  handleCheck = () => {\n    let pos = this.state.childName.lastIndexOf('.');\n\n    if (this.state.isDraft) {\n      // from draft to not draft\n      // case 1, normally, the file name is ended with `(draft)`, like `test(draft).md`\n      // case 2, the file name is not ended with `(draft)`, the user has deleted some characters, like `test(dra.md`\n      let p = this.state.childName.substring(pos-7, pos);\n      let fileName = this.state.childName.substring(0, pos-7);\n      let fileType = this.state.childName.substring(pos);\n      if (p === '(draft)') {\n        // remove `(draft)` from file name\n        this.setState({\n          childName: fileName + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else {\n        // don't change file name\n        this.setState({\n          isDraft: !this.state.isDraft\n        });\n      }\n    }\n\n    if (!this.state.isDraft) {\n      // from not draft to draft\n      // case 1, test.md  ===> test(draft).md\n      // case 2, .md ===> (draft).md\n      // case 3, no '.' in the file name, don't change the file name\n      if (pos > 0) {\n        let fileName = this.state.childName.substring(0, pos);\n        let fileType = this.state.childName.substring(pos);\n        this.setState({\n          childName: fileName + '(draft)' + fileType,\n          isDraft: !this.state.isDraft\n        });\n      } else if (pos === 0 ) {\n        this.setState({\n          childName: '(draft)' + this.state.childName,\n          isDraft: !this.state.isdraft\n        });\n      } else {\n        this.setState({\n          isDraft: !this.state.isdraft\n        });\n      }\n    }\n  }\n\n  toggle = () => {\n    this.props.addFileCancel();\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.childName);\n    return isDuplicated;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New File')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"fileName\">{gettext('Name')}</Label>\n              <Input\n                id=\"fileName\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.childName}\n                onChange={this.handleChange}\n              />\n            </FormGroup>\n            {this.props.fileType == '.md' && isDocs && (\n              <FormGroup check>\n                <Label check>\n                  <Input type=\"checkbox\" onChange={this.handleCheck}/>{'  '}{gettext('This is a draft')}\n                </Label>\n              </FormGroup>\n            )}\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateFile.propTypes = propTypes;\n\nexport default CreateFile;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport ModalPortal from '../modal-portal';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ShareDialog from '../../components/dialog/share-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass DirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '.md',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n      isShareDialogShow: false,\n      operationMenuStyle: '',\n      isMobileOpMenuOpen: false\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('click', this.hideOperationMenu);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.hideOperationMenu);\n  }\n\n  toggleMobileOpMenu = () => {\n    this.setState({isMobileOpMenuOpen: !this.state.isMobileOpMenuOpen});\n  }\n\n  hideOperationMenu = () => {\n    this.setState({\n      isUploadMenuShow: false,\n      isCreateMenuShow: false,\n    });\n  }\n\n  toggleOperationMenu = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let targetRect = e.target.getBoundingClientRect();\n    let left = targetRect.left;\n    let top  = targetRect.bottom;\n    let style = {position: 'fixed', display: 'block', left: left, top: top};\n    this.setState({operationMenuStyle: style});\n  }\n\n  onUploadClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isUploadMenuShow: true,\n      isCreateMenuShow: false,\n    });\n  }\n\n  onUploadFile = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFile(e);\n  }\n\n  onUploadFolder = (e) => {\n    this.setState({isUploadMenuShow: false});\n    this.props.onUploadFolder(e);\n  }\n\n  onCreateClick = (e) => {\n    this.toggleOperationMenu(e);\n    this.setState({\n      isCreateMenuShow: true,\n      isUploadMenuShow: false,\n    });\n  }\n\n  onShareClick = () => {\n    this.setState({\n      isShareDialogShow: !this.state.isShareDialogShow\n    });\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '',\n    });\n  }\n\n  onCreateMarkdownToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.md'\n    });\n  }\n\n  onCreateExcelToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.xlsx'\n    });\n  }\n\n  onCreatePPTToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.pptx'\n    });\n  }\n\n  onCreateWordToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n      fileType: '.docx'\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  render() {\n    let { path, repoName, userPerm } = this.props;\n\n    let itemType = path === '/' ? 'library' : 'dir';\n    let itemName = path == '/' ? repoName : Utils.getFolderName(path);\n\n    let content = null;\n    if (Utils.isDesktop()) {\n      let { showShareBtn } = this.props;\n      content = (\n        <Fragment>\n          {Utils.isSupportUploadFolder() ?\n            <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadClick}>{gettext('Upload')}</button> :\n            <button className=\"btn btn-secondary operation-item\" title={gettext('Upload')} onClick={this.onUploadFile}>{gettext('Upload')}</button>}\n          <button className=\"btn btn-secondary operation-item\" title={gettext('New')} onClick={this.onCreateClick}>{gettext('New')}</button>\n          {showShareBtn && <button className=\"btn btn-secondary operation-item\" title={gettext('Share')} onClick={this.onShareClick}>{gettext('Share')}</button>}\n        </Fragment>\n      );\n    } else {\n      content = (\n        <Dropdown isOpen={this.state.isMobileOpMenuOpen} toggle={this.toggleMobileOpMenu}>\n          <DropdownToggle tag=\"span\" className=\"sf2-icon-plus mobile-toolbar-icon\" />\n          <DropdownMenu>\n            <DropdownItem onClick={this.onUploadFile}>{gettext('Upload')}</DropdownItem>\n            <DropdownItem onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</DropdownItem>\n            <DropdownItem onClick={this.onCreateFileToggle}>{gettext('New File')}</DropdownItem>\n          </DropdownMenu>\n        </Dropdown>\n      );\n    }\n\n    return (\n      <Fragment>\n        {(userPerm === 'rw' || userPerm === 'admin') && (\n          <div className=\"dir-operation\">\n            <div className=\"operation\">\n              {content}\n            </div>\n            {this.state.isUploadMenuShow && (\n              <ul className=\"menu dropdown-menu\" style={this.state.operationMenuStyle}>\n                <li className=\"dropdown-item\" onClick={this.onUploadFile}>{gettext('Upload Files')}</li>\n                <li className=\"dropdown-item\" onClick={this.onUploadFolder}>{gettext('Upload Folder')}</li>\n              </ul>\n            )}\n            {this.state.isCreateMenuShow && (\n              <ul className=\"menu dropdown-menu\" style={this.state.operationMenuStyle}>\n                <li className=\"dropdown-item\" onClick={this.onCreateFolderToggle}>{gettext('New Folder')}</li>\n                <li className=\"dropdown-item\" onClick={this.onCreateFileToggle}>{gettext('New File')}</li>\n                <li className=\"dropdown-divider\"></li>\n                <li className=\"dropdown-item\" onClick={this.onCreateMarkdownToggle}>{gettext('New Markdown File')}</li>\n                <li className=\"dropdown-item\" onClick={this.onCreateExcelToggle}>{gettext('New Excel File')}</li>\n                <li className=\"dropdown-item\" onClick={this.onCreatePPTToggle}>{gettext('New PowerPoint File')}</li>\n                <li className=\"dropdown-item\" onClick={this.onCreateWordToggle}>{gettext('New Word File')}</li>\n              </ul>\n            )}\n          </div>\n        )}\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} />}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={itemType}\n              itemName={itemName}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareClick}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirOperationToolbar.propTypes = propTypes;\n\nexport default DirOperationToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemMove: PropTypes.func,\n  onItemsMove: PropTypes.func,\n  onCancelMove: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path\nclass MoveDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: null,\n      selectedPath: '',\n      errMessage: '',\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.moveItems();\n    } else {\n      this.moveItem();\n    }\n  }\n\n  moveItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to current path\n    if (selectedPath && selectedPath === this.props.path && (repo.repo_id === repoID)) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let moveDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        moveDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', moveDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsMove(repo, selectedPath);\n    this.toggle();\n  }\n\n  moveItem = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = gettext('Invalid destination path');\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemMove(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelMove();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: '',\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Move {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Move selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" style={{margin: '0.5rem'}}>{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nMoveDirent.propTypes = propTypes;\n\nexport default MoveDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalFooter, ModalBody, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  isMutipleOperation: PropTypes.bool.isRequired,\n  onItemCopy: PropTypes.func,\n  onItemsCopy: PropTypes.func,\n  onCancelCopy: PropTypes.func.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n};\n\n// need dirent file Path\nclass CopyDirent extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: null,\n      selectedPath: '',\n      errMessage: '',\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errMessage === nextState.errMessage) {\n      return false;\n    }\n    return true;\n  }\n\n  handleSubmit = () => {\n    if (this.props.isMutipleOperation) {\n      this.copyItems();\n    } else {\n      this.copyItem();\n    }\n  }\n\n  copyItems = () => {\n    let { repoID } = this.props;\n    let { repo, selectedPath } = this.state;\n    let message = gettext('Invalid destination path');\n\n    if (!repo || selectedPath === '') {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    let selectedDirentList = this.props.selectedDirentList;\n    let direntPaths = [];\n    selectedDirentList.forEach(dirent => {\n      let path = Utils.joinPath(this.props.path, dirent.name);\n      direntPaths.push(path);\n    });\n\n    // copy dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let copyDirentPath = '';\n    let isChildPath = direntPaths.some(direntPath => {\n      let flag = selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1;\n      if (flag) {\n        copyDirentPath = direntPath;\n      }\n      return flag;\n    });\n\n    if (isChildPath) {\n      message = gettext('Can not move directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', copyDirentPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemsCopy(repo, selectedPath);\n    this.toggle();\n  }\n\n  copyItem = () => {\n    let { repo, repoID, selectedPath } = this.state;\n    let direntPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    let message = 'Invalid destination path';\n\n    if (!repo || (repo.repo_id === repoID && selectedPath === '')) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (selectedPath && direntPath === selectedPath) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to current path\n    if (selectedPath && this.props.path === selectedPath && repo.repo_id === repoID) {\n      this.setState({errMessage: message});\n      return;\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if ( selectedPath && selectedPath.length > direntPath.length && selectedPath.indexOf(direntPath) > -1) {\n      message = gettext('Can not copy directory %(src)s to its subdirectory %(des)s');\n      message = message.replace('%(src)s', direntPath);\n      message = message.replace('%(des)s', selectedPath);\n      this.setState({errMessage: message});\n      return;\n    }\n\n    this.props.onItemCopy(repo, this.props.dirent, selectedPath, this.props.path);\n    this.toggle();\n  }\n\n  toggle = () => {\n    this.props.onCancelCopy();\n  }\n\n  onDirentItemClick = (repo, selectedPath) => {\n    this.setState({\n      repo: repo,\n      selectedPath: selectedPath,\n      errMessage: '',\n    });\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: repo,\n      selectedPath: '/',\n      errMessage: ''\n    });\n  }\n\n  render() {\n    let title = gettext('Copy {placeholder} to');\n    if (!this.props.isMutipleOperation) {\n      title = title.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    } else {\n      title = gettext('Copy selected item(s) to:');\n    }\n    let mode = this.props.repoEncrypted ? 'only_current_library':'current_repo_and_other_repos';\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <FileChooser\n            repoID={this.props.repoID}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode={mode}\n          />\n          {this.state.errMessage && <Alert color=\"danger\" style={{margin: '0.5rem'}}>{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCopyDirent.propTypes = propTypes;\n\nexport default CopyDirent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n  dirent: PropTypes.object,\n};\n\nclass Rename extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.dirent.name});\n  }\n\n  componentDidMount() {\n    let {dirent} = this.props;\n    this.changeState(dirent);\n    this.newInput.focus();\n    let type = dirent.type;\n    if (type === 'file') {\n      var endIndex = dirent.name.lastIndexOf('.md');\n      this.newInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.setSelectionRange(0, -1);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.dirent);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n        this.props.toggleCancel();\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (dirent) => {\n    let name = dirent.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  render() {\n    let type = this.props.dirent.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ButtonGroup } from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isPro, fileAuditEnabled, name, fileServerRoot, useGoFileserver } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport RelatedFileDialogs from '../dialog/related-file-dialogs';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport Rename from '../dialog/rename-dirent';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport ViewModeToolbar from './view-mode-toolbar';\n\nimport ModalPortal from '../modal-portal';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport toaster from '../toast';\n\nimport '../../css/dirents-menu.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onFilesTagChanged: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n};\n\nclass MultipleDirOperationToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isMutipleOperation: true,\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      fileTagList: [],\n      multiFileTagList: [],\n      showRelatedFileDialog: false,\n      viewMode: 'list_related_file',\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false\n    };\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDelete = () => {\n    this.props.onItemsDelete();\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n      if (!useGoFileserver) {\n        this.setState({\n          isZipDialogOpen: true\n        });\n      } else {\n        const target = this.props.selectedDirentList.map(dirent => dirent.name);\n        seafileAPI.zipDownload(repoID, path, target).then((res) => {\n          const zipToken = res.data['zip_token'];\n          location.href = `${fileServerRoot}zip/${zipToken}`;\n        }).catch((error) => {\n          let errorMsg = Utils.getErrorMsg(error);\n          this.setState({\n            isLoading: false,\n            errorMsg: errorMsg\n          });\n        });\n      }\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  onItemRename = (newName) => {\n    const dirent = this.props.selectedDirentList[0];\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onPermissionItem = () => {\n    this.setState({\n      showLibContentViewDialogs: !this.state.showLibContentViewDialogs,\n      isPermissionDialogOpen: !this.state.isPermissionDialogOpen\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  getDirentMenuList = (dirent) => {\n    const isRepoOwner = this.props.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    const isContextmenu = true;\n    let opList = Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n    const list = ['Move', 'Copy', 'Delete', 'Download'];\n    if (dirent.type == 'dir') {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1 && item != 'Divider';\n      });\n    } else {\n      opList = opList.filter((item, index) => {\n        return list.indexOf(item.key) == -1;\n      });\n    }\n    return opList;\n  }\n\n  onMenuItemClick = (operation) => {\n    const dirents = this.props.selectedDirentList;\n    const dirent = dirents[0];\n    switch (operation) {\n      case 'Share':\n        this.setState({\n          showLibContentViewDialogs: true,\n          showShareDialog: true,\n        });\n        break;\n      case 'Rename':\n        this.setState({\n          showLibContentViewDialogs: true,\n          isRenameDialogOpen: true\n        });\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Tags':\n        this.listFileTags(dirent);\n        break;\n      case 'Lock':\n        this.lockFile(dirent);\n        break;\n      case 'Unlock':\n        this.unlockFile(dirent);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'Related Files':\n        this.openRelatedFilesDialog(dirent);\n        break;\n      case 'History':\n        this.onHistory(dirent);\n        break;\n      case 'Access Log':\n        this.onAccessLog(dirent);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(dirent);\n        break;\n      default:\n        break;\n    }\n  }\n\n  lockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.lockfile(this.props.repoID, filePath).then((res) => {\n      if (res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', true);\n        this.props.updateDirent(dirent, 'locked_by_me', true);\n        this.props.updateDirent(dirent, 'lock_owner_name', name);\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  unlockFile = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    seafileAPI.unlockfile(this.props.repoID, filePath).then((res) => {\n      if (!res.data.is_locked) {\n        this.props.updateDirent(dirent, 'is_locked', false);\n        this.props.updateDirent(dirent, 'locked_by_me', false);\n        this.props.updateDirent(dirent, 'lock_owner_name', '');\n        this.props.unSelectDirent();\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenViaClient = (dirent) => {\n    const filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'open_via_client',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onHistory = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let url = URLDecorator.getUrl({\n      type: 'file_revisions',\n      repoID: this.props.repoID,\n      filePath: filePath\n    });\n    location.href = url;\n  }\n\n  onAccessLog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  openRelatedFilesDialog = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listRelatedFiles(this.props.repoID, filePath).then(res => {\n      let relatedFiles = res.data.related_files;\n      if (relatedFiles.length > 0) {\n        this.setState({\n          relatedFiles: relatedFiles,\n          showLibContentViewDialogs: true,\n          showRelatedFileDialog: true,\n          viewMode: 'list_related_file',\n        });\n      } else {\n        this.setState({\n          relatedFiles: relatedFiles,\n          showLibContentViewDialogs: true,\n          showRelatedFileDialog: true,\n          viewMode: 'add_related_file',\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showLibContentViewDialogs: false,\n      showShareDialog: false,\n      showEditFileTagDialog: false,\n      showRelatedFileDialog: false,\n      isRenameDialogOpen: false,\n      isPermissionDialogOpen: false,\n    });\n  }\n\n  listFileTags = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listFileTags(this.props.repoID, filePath).then(res => {\n      let fileTagList = res.data.file_tags;\n      for (let i = 0, length = fileTagList.length; i < length; i++) {\n        fileTagList[i].id = fileTagList[i].file_tag_id;\n      }\n      this.setState({\n        fileTagList: fileTagList,\n        showLibContentViewDialogs: true,\n        showEditFileTagDialog: true,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onMenuFileTagChanged = () => {\n    this.listFileTags(this.props.selectedDirentList[0]);\n    let length = this.props.selectedDirentList.length;\n    for (let i = 0; i < length; i++) {\n      const dirent = this.props.selectedDirentList[i];\n      const direntPath = this.getDirentPath(dirent);\n      this.props.onFilesTagChanged(dirent, direntPath);\n    }\n  }\n\n  listRelatedFiles = (dirent) => {\n    let filePath = this.getDirentPath(dirent);\n    seafileAPI.listRelatedFiles(this.props.repoID, filePath).then(res => {\n      this.setState({\n        relatedFiles: res.data.related_files\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onRelatedFileChange = () => {\n    this.listRelatedFiles(this.props.selectedDirentList[0]);\n  }\n\n  getDirentPath = (dirent) => {\n    if (dirent) return Utils.joinPath(this.props.path, dirent.name);\n  }\n\n  render() {\n\n    const { repoID, userPerm } = this.props;\n    const dirent = this.props.selectedDirentList[0];\n\n    let direntPath = this.getDirentPath(dirent);\n\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          <div className=\"d-flex\">\n            <ButtonGroup className=\"flex-row group-operations\">\n              {(userPerm === 'rw' || userPerm === 'admin') && (\n                <Fragment>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-move\" title={gettext('Move')} onClick={this.onMoveToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n                  <Button className=\"secondary group-op-item action-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.onItemsDelete}></Button>\n                </Fragment>\n              )}\n              {userPerm === 'r' && (\n                <Button className=\"secondary group-op-item action-icon sf2-icon-copy\" title={gettext('Copy')} onClick={this.onCopyToggle}></Button>\n              )}\n              {(userPerm === 'rw' || userPerm === 'admin' || userPerm === 'r') && (\n                <Button className=\"secondary group-op-item action-icon sf2-icon-download\" title={gettext('Download')} onClick={this.onItemsDownload}></Button>\n              )}\n              {this.props.selectedDirentList.length === 1 &&\n                <ItemDropdownMenu\n                  tagName={'button'}\n                  item={this.props.selectedDirentList[0]}\n                  toggleClass={'fas fa-ellipsis-v dirents-more-menu'}\n                  onMenuItemClick={this.onMenuItemClick}\n                  getMenuList={this.getDirentMenuList}\n                />\n              }\n            </ButtonGroup>\n          </div>\n        </div>\n        {Utils.isDesktop() && <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode} />}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            selectedDirentList={this.props.selectedDirentList}\n            onItemsMove={this.props.onItemsMove}\n            onCancelMove={this.onMoveToggle}\n          />\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.repoEncrypted}\n            selectedDirentList={this.props.selectedDirentList}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemsCopy={this.props.onItemsCopy}\n            onCancelCopy={this.onCopyToggle}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n        <ModalPortal>\n          <ZipDownloadDialog\n            repoID={this.props.repoID}\n            path={this.props.path}\n            target={this.props.selectedDirentList.map(dirent => dirent.name)}\n            toggleDialog={this.closeZipDialog}\n          />\n        </ModalPortal>\n        }\n        {this.state.showLibContentViewDialogs && (\n          <Fragment>\n            {this.state.showShareDialog &&\n              <ModalPortal>\n                <ShareDialog\n                  itemType={dirent.type}\n                  itemName={dirent.name}\n                  itemPath={direntPath}\n                  userPerm={dirent.permission}\n                  repoID={repoID}\n                  repoEncrypted={this.props.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  toggleDialog={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isRenameDialogOpen &&\n              <ModalPortal>\n                <Rename\n                  dirent={dirent}\n                  onRename={this.onItemRename}\n                  checkDuplicatedName={this.checkDuplicatedName}\n                  toggleCancel={this.toggleCancel}\n                />\n              </ModalPortal>\n            }\n            {this.state.isPermissionDialogOpen &&\n              <ModalPortal>\n                <LibSubFolderPermissionDialog\n                  toggleDialog={this.toggleCancel}\n                  repoID={repoID}\n                  folderPath={direntPath}\n                  folderName={dirent.name}\n                  isDepartmentRepo={this.props.isGroupOwnedRepo}\n                />\n              </ModalPortal>\n            }\n            {this.state.showEditFileTagDialog &&\n              <ModalPortal>\n                <EditFileTagDialog\n                  repoID={repoID}\n                  filePath={direntPath}\n                  fileTagList={this.state.fileTagList}\n                  toggleCancel={this.toggleCancel}\n                  onFileTagChanged={this.onMenuFileTagChanged}\n                />\n              </ModalPortal>\n            }\n            {this.state.showRelatedFileDialog &&\n              <ModalPortal>\n                <RelatedFileDialogs\n                  repoID={repoID}\n                  filePath={direntPath}\n                  relatedFiles={this.state.relatedFiles}\n                  toggleCancel={this.toggleCancel}\n                  onRelatedFileChange={this.onRelatedFileChange}\n                  dirent={this.props.selectedDirentList[0]}\n                  viewMode={this.state.viewMode}\n                />\n              </ModalPortal>\n            }\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nMultipleDirOperationToolbar.propTypes = propTypes;\n\nexport default MultipleDirOperationToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { DropdownToggle, Dropdown, DropdownMenu, DropdownItem, Tooltip} from 'reactstrap';\nimport { gettext, siteRoot, canGenerateShareLink, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ModalPotal from '../modal-portal';\nimport ShareDialog from '../dialog/share-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport RelatedFileDialogs from '../dialog/related-file-dialogs';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  relatedFiles: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n};\n\nclass ViewFileToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isDraftMessageShow: false,\n      isMoreMenuShow: false,\n      isShareDialogShow: false,\n      isEditTagDialogShow: false,\n      isRelatedFileDialogShow: false,\n      showRelatedFileDialog: false,\n    };\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDraftHover = () => {\n    this.setState({isDraftMessageShow: !this.state.isDraftMessageShow});\n  }\n\n  toggleMore = () => {\n    this.setState({isMoreMenuShow: !this.state.isMoreMenuShow});\n  }\n\n  onShareToggle = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({isEditTagDialogShow: !this.state.isEditTagDialogShow});\n  }\n\n  onListRelatedFileToggle = () => {\n    this.setState({\n      isRelatedFileDialogShow: true,\n      showRelatedFileDialog: true,\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      isRelatedFileDialogShow: false,\n      showRelatedFileDialog: false,\n    });\n  }\n\n  onHistoryClick = () => {\n    let historyUrl = siteRoot + 'repo/file_revisions/' + this.props.repoID + '/?p=' + Utils.encodePath(this.props.path);\n    location.href = historyUrl;\n  }\n\n  render() {\n    let { filePermission } = this.props;\n    let name = Utils.getFileName(this.props.path);\n    let dirent = { name: name };\n    return (\n      <Fragment>\n        <div className=\"dir-operation\">\n          {((filePermission === 'rw' || filePermission === 'cloud-edit') && !this.props.hasDraft) && (\n            <Fragment>\n              <button className=\"btn btn-secondary operation-item\" title={gettext('Edit File')} onClick={this.onEditClick}>{gettext('Edit')}</button>\n            </Fragment>\n          )}\n          {(filePermission === 'rw' && !this.props.isDraft && !this.props.hasDraft && isDocs) && (\n            <Fragment>\n              <button id=\"new-draft\" className=\"btn btn-secondary operation-item\" onClick={this.onNewDraft}>{gettext('New Draft')}</button>\n              <Tooltip target=\"new-draft\" placement=\"bottom\" isOpen={this.state.isDraftMessageShow} toggle={this.onDraftHover}>{gettext('Create a draft from this file, instead of editing it directly.')}</Tooltip>\n            </Fragment>\n          )}\n          {filePermission === 'rw' && (\n            <Dropdown isOpen={this.state.isMoreMenuShow} toggle={this.toggleMore}>\n              <DropdownToggle className='btn btn-secondary operation-item'>\n                {gettext('More')}\n              </DropdownToggle>\n              <DropdownMenu>\n                {this.props.showShareBtn &&\n                  <DropdownItem onClick={this.onShareToggle}>{gettext('Share')}</DropdownItem>\n                }\n                <DropdownItem onClick={this.onEditFileTagToggle}>{gettext('Tags')}</DropdownItem>\n                <DropdownItem onClick={this.onListRelatedFileToggle}>{gettext('Related Files')}</DropdownItem>\n                <DropdownItem onClick={this.onHistoryClick}>{gettext('History')}</DropdownItem>\n              </DropdownMenu>\n            </Dropdown>\n          )}\n        </div>\n        {this.state.isShareDialogShow && (\n          <ModalPotal>\n            <ShareDialog\n              itemType={'file'}\n              itemName={Utils.getFileName(this.props.path)}\n              itemPath={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.onShareToggle}\n            />\n          </ModalPotal>\n        )}\n        {this.state.isEditTagDialogShow && (\n          <ModalPotal>\n            <EditFileTagDialog\n              filePath={this.props.path}\n              repoID={this.props.repoID}\n              fileTagList={this.props.fileTags}\n              toggleCancel={this.onEditFileTagToggle}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPotal>\n        )}\n        {this.state.showRelatedFileDialog &&\n          <ModalPotal>\n            <RelatedFileDialogs\n              repoID={this.props.repoID}\n              filePath={this.props.path}\n              relatedFiles={this.props.relatedFiles}\n              toggleCancel={this.toggleCancel}\n              onRelatedFileChange={this.props.onRelatedFileChange}\n              dirent={dirent}\n              viewMode=\"list_related_file\"\n            />\n          </ModalPotal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nViewFileToolbar.propTypes = propTypes;\n\nexport default ViewFileToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport ViewModeToolbar from '../../components/toolbar/view-mode-toolbar';\nimport DirOperationToolBar from '../../components/toolbar/dir-operation-toolbar';\nimport MultipleDirOperationToolbar from '../../components/toolbar/multiple-dir-operation-toolbar';\nimport ViewFileToolbar from '../../components/toolbar/view-file-toolbar';\n\nconst propTypes = {\n  isViewFile: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  relatedFiles: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,  // for file-view-toolbar\n  onRelatedFileChange: PropTypes.func.isRequired,\n  // side-panel\n  onSideNavMenuClick: PropTypes.func.isRequired,\n  // mutiple-dir\n  isDirentSelected: PropTypes.bool.isRequired,\n  repoID: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  // dir\n  direntList: PropTypes.array.isRequired,\n  repoName: PropTypes.string.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string.isRequired,\n  showShareBtn: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onUploadFile: PropTypes.func.isRequired,\n  onUploadFolder: PropTypes.func.isRequired,\n  // view-mode\n  currentMode: PropTypes.string.isRequired,\n  switchViewMode: PropTypes.func.isRequired,\n  // search\n  onSearchedClick: PropTypes.func.isRequired,\n  isRepoOwner: PropTypes.bool.isRequired,\n  // selected menu\n  onFilesTagChanged: PropTypes.func.isRequired, // for mutiple select toolbar\n  updateDirent: PropTypes.func.isRequired,\n  unSelectDirent: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n};\n\nclass LibContentToolbar extends React.Component {\n\n  render() {\n\n    if (this.props.isViewFile) {\n      return (\n        <Fragment>\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n            <ViewFileToolbar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              filePermission={this.props.filePermission}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              fileTags={this.props.fileTags}\n              relatedFiles={this.props.relatedFiles}\n              onFileTagChanged={this.props.onFileTagChanged}\n              onRelatedFileChange={this.props.onRelatedFileChange}\n              showShareBtn={this.props.showShareBtn}\n            />\n            <ViewModeToolbar currentMode={this.props.currentMode} switchViewMode={this.props.switchViewMode}/>\n          </div>\n          <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n        </Fragment>\n      );\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-toolbar\">\n          <span className=\"sf2-icon-menu hidden-md-up d-md-none side-nav-toggle\" title={gettext('Side Nav Menu')} onClick={this.props.onSideNavMenuClick}></span>\n          {this.props.isDirentSelected ?\n            <MultipleDirOperationToolbar\n              repoID={this.props.repoID}\n              path={this.props.path}\n              userPerm={this.props.userPerm}\n              repoEncrypted={this.props.repoEncrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              direntList={this.props.direntList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onItemRename={this.props.onItemRename}\n              isRepoOwner={this.props.isRepoOwner}\n              currentRepoInfo={this.props.currentRepoInfo}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              updateDirent={this.props.updateDirent}\n              relatedFiles={this.props.relatedFiles}\n              unSelectDirent={this.props.unSelectDirent}\n              onFilesTagChanged={this.props.onFilesTagChanged}\n              showShareBtn={this.props.showShareBtn}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              showDirentDetail={this.props.showDirentDetail}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            /> :\n            <DirOperationToolBar\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoName={this.props.repoName}\n              repoEncrypted={this.props.repoEncrypted}\n              direntList={this.props.direntList}\n              showShareBtn={this.props.showShareBtn}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              userPerm={this.props.userPerm}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              onAddFile={this.props.onAddFile}\n              onAddFolder={this.props.onAddFolder}\n              onUploadFile={this.props.onUploadFile}\n              onUploadFolder={this.props.onUploadFolder}\n              currentMode={this.props.currentMode}\n              switchViewMode={this.props.switchViewMode}\n            />\n          }\n        </div>\n        <CommonToolbar isLibView={true} repoID={this.props.repoID} repoName={this.props.repoName} onSearchedClick={this.props.onSearchedClick} searchPlaceholder={gettext('Search files in this library')}/>\n      </Fragment>\n    );\n  }\n}\n\nLibContentToolbar.propTypes = propTypes;\n\nexport default LibContentToolbar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from '@reach/router';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport InternalLinkDialog from '../dialog/internal-link-dialog';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoName: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  repoID: PropTypes.string.isRequired,\n  isViewFile: PropTypes.bool,\n  fileTags: PropTypes.array.isRequired,\n};\n\nclass DirPath extends React.Component {\n\n  onPathClick = (e) => {\n    let path = Utils.getEventData(e, 'path');\n    this.props.onPathClick(path);\n  }\n\n  onTabNavClick = (e, tabName, id) => {\n    if (window.uploader &&\n      window.uploader.isUploadProgressDialogShow &&\n      window.uploader.totalProgress !== 100) {\n      if (!window.confirm(gettext('A file is being uploaded. Are you sure you want to leave this page?'))) {\n        e.preventDefault();\n        return false;\n      }\n      window.uploader.isUploadProgressDialogShow = false;\n    }\n    this.props.onTabNavClick(tabName, id);\n  }\n\n  turnPathToLink = (path) => {\n    path = path[path.length - 1] === '/' ? path.slice(0, path.length - 1) : path;\n    let pathList = path.split('/');\n    let nodePath = '';\n    let pathElem = pathList.map((item, index) => {\n      if (item === '') {\n        return;\n      }\n      if (index === (pathList.length - 1)) {\n        return (\n          <Fragment key={index}>\n            <span className=\"path-split\">/</span>\n            <span className=\"path-file-name\">{item}</span>\n          </Fragment>\n        );\n      } else {\n        nodePath += '/' + item;\n        return (\n          <Fragment key={index} >\n            <span className=\"path-split\">/</span>\n            <a className=\"path-link\" data-path={nodePath} onClick={this.onPathClick}>{item}</a>\n          </Fragment>\n        );\n      }\n    });\n    return pathElem;\n  }\n\n  render() {\n    let { currentPath, repoName, fileTags } = this.props;\n    let pathElem = this.turnPathToLink(currentPath);\n\n    let tagTitle = '';\n    if (fileTags.length > 0) {\n      fileTags.forEach(item => {\n        tagTitle += item.name + ' ';\n      });\n    }\n\n    return (\n      <div className=\"path-container\">\n        {this.props.pathPrefix && this.props.pathPrefix.map((item, index) => {\n          return (\n            <Fragment key={index}>\n              <Link to={item.url} className=\"normal\" onClick={(e) => this.onTabNavClick(e, item.name, item.id)}>{gettext(item.showName)}</Link>\n              <span className=\"path-split\">/</span>\n            </Fragment>\n          );\n        })}\n        {this.props.pathPrefix && this.props.pathPrefix.length === 0 && (\n          <Fragment>\n            <Link to={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {!this.props.pathPrefix && (\n          <Fragment>\n            <Link href={siteRoot + 'my-libs/'} className=\"normal\" onClick={(e) => this.onTabNavClick(e, 'my-libs')}>{gettext('Libraries')}</Link>\n            <span className=\"path-split\">/</span>\n          </Fragment>\n        )}\n        {(currentPath === '/' || currentPath === '') ?\n          <span className=\"path-repo-name\">{repoName}</span>:\n          <a className=\"path-link\" data-path=\"/\" onClick={this.onPathClick}>{repoName}</a>\n        }\n        {pathElem}\n        {this.props.isViewFile &&\n          <InternalLinkDialog\n            repoID={this.props.repoID}\n            path={this.props.currentPath}\n          />\n        }\n        {(this.props.isViewFile && fileTags.length !== 0) &&\n          <span id='column-mode-file-tags' className=\"tag-list tag-list-stacked align-middle ml-1\">\n            {fileTags.map((fileTag, index) => {\n              return (<span className=\"file-tag\" key={fileTag.id} style={{zIndex: index, backgroundColor: fileTag.color}}></span>);\n            })}\n            <UncontrolledTooltip target=\"column-mode-file-tags\" placement=\"bottom\">\n              {tagTitle}\n            </UncontrolledTooltip>\n          </span>\n        }\n      </div>\n    );\n  }\n}\n\nDirPath.propTypes = propTypes;\n\nexport default DirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport RepoTag from '../../models/repo-tag';\n\nimport '../../css/repo-tag.css';\n\nconst tagListItemPropTypes = {\n  item: PropTypes.object.isRequired,\n  onTagUpdate: PropTypes.func.isRequired,\n  onListTaggedFiles: PropTypes.func.isRequired,\n};\n\nclass TagListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showSelectedTag: false\n    };\n  }\n\n  onMouseOver = () => {\n    this.setState({\n      showSelectedTag: true\n    });\n  }\n\n  onMouseOut = () => {\n    this.setState({\n      showSelectedTag: false\n    });\n  }\n\n  onTagUpdate = () => {\n    this.props.onTagUpdate(this.props.item);\n  }\n\n  onListTaggedFiles = () => {\n    this.props.onListTaggedFiles(this.props.item);\n  }\n\n  render() {\n    let color = this.props.item.color;\n    let drakColor = Utils.getDarkColor(color);\n    const fileCount = this.props.item.fileCount;\n    let fileTranslation = (fileCount === 1 || fileCount === 0) ? gettext('file') : gettext('files');\n    return (\n      <li className=\"tag-list-item\">\n        <div className=\"tag-demo\" style={{backgroundColor:color}} onMouseOver={this.onMouseOver} onMouseOut={this.onMouseOut}>\n          <span className={`${this.state.showSelectedTag ? 'show-tag-selected': ''}`} style={{backgroundColor: drakColor}}></span>\n          <span className=\"tag-name\">{this.props.item.name}</span>\n          <span className=\"tag-files\" onClick={this.onListTaggedFiles}>\n            {fileCount}{' '}{fileTranslation}\n          </span>\n        </div>\n        <i className=\"tag-edit fa fa-pencil-alt\" onClick={this.onTagUpdate}></i>\n      </li>\n    );\n  }\n}\n\nTagListItem.propTypes = tagListItemPropTypes;\n\nconst listTagPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  onListTagCancel: PropTypes.func.isRequired,\n  onCreateRepoTag: PropTypes.func.isRequired,\n  onUpdateRepoTag: PropTypes.func.isRequired,\n  onListTaggedFiles: PropTypes.func.isRequired,\n};\n\nclass ListTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repotagList: [],\n    };\n  }\n\n  componentDidMount() {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let repotagList = [];\n      res.data.repo_tags.forEach(item => {\n        let repo_tag = new RepoTag(item);\n        repotagList.push(repo_tag);\n      });\n      this.setState({\n        repotagList: repotagList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.onListTagCancel();\n  }\n\n  createNewTag = (e) => {\n    e.preventDefault();\n    this.props.onCreateRepoTag();\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Tags')}</ModalHeader>\n        <ModalBody>\n          <ul className=\"tag-list tag-list-container\">\n            {this.state.repotagList.map((repoTag, index) => {\n              return (\n                <TagListItem\n                  key={index}\n                  item={repoTag}\n                  onTagUpdate={this.props.onUpdateRepoTag}\n                  onListTaggedFiles={this.props.onListTaggedFiles}\n                />\n              );\n            })}\n          </ul>\n          <a href=\"#\" className=\"add-tag-link\" onClick={this.createNewTag}>{gettext('Create a new tag')}</a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListTagDialog.propTypes = listTagPropTypes;\n\nexport default ListTagDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  currentTag: PropTypes.object,\n  repoID: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass UpdateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deleteRepoTag: false,\n      newName: this.props.currentTag.name,\n      newColor: this.props.currentTag.color,\n      colorList: ['#FFA8A8', '#FFA94D', '#FFD43B', '#A0EC50', '#A9E34B', '#63E6BE', '#4FD2C9', '#72C3FC', '#91A7FF', '#E599F7', '#B197FC', '#F783AC', '#CED4DA'],\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, -1);\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      newName: e.target.value,\n    });\n  }\n\n  selectNewcolor = (e) => {\n    this.setState({\n      newColor: e.target.value,\n    });\n  }\n\n  updateTag = () => {\n    let tag_id = this.props.currentTag.id;\n    let name = this.state.newName;\n    let color = this.state.newColor;\n    let repoID = this.props.repoID;\n    seafileAPI.updateRepoTag(repoID, tag_id, name, color).then(() => {\n      this.props.toggleCancel();\n      this.props.updateUsedRepoTags();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.updateTag();\n    }\n  }\n\n  deleteTagClick = (item) => {\n    this.setState({\n      deleteRepoTag: !this.state.deleteRepoTag,\n    });\n  }\n\n  onDeleteTag = () => {\n    let tag = this.props.currentTag;\n    let repoID = this.props.repoID;\n    seafileAPI.deleteRepoTag(repoID, tag.id).then((res) => {\n      this.props.toggleCancel();\n      if (res.data.success === 'true') {\n        this.props.onDeleteRepoTag(tag.id);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    if (colorList.indexOf(this.props.currentTag.color)===-1) {\n      colorList.push(this.props.currentTag.color);\n    }\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('Edit Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"tag-edit\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.newName} onChange={this.inputNewName}/>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"row gutters-xs\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"col-auto\" onChange={this.selectNewcolor}>\n                      <label className=\"colorinput\">\n                        {item===this.props.currentTag.color ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onChange={this.selectNewcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onChange={this.selectNewcolor}></input>}\n                        <span className=\"colorinput-color\" style={{backgroundColor:item}}></span>\n                      </label>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"danger\" onClick={this.onDeleteTag}>{gettext('Delete')}</Button>\n          <Button color=\"primary\" onClick={this.updateTag}>{gettext('Save')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nUpdateTagDialog.propTypes = propTypes;\n\nexport default UpdateTagDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentTag: PropTypes.object.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n};\n\nclass ListTaggedFilesDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      taggedFileList: [],\n    };\n  }\n\n  onFileTagChanged = (TaggedFile) => {\n    const path = TaggedFile.parent_path;\n    const dirent = {name: TaggedFile.filename};\n    let direntPath = path === '/' ? path + TaggedFile.filename : path + '/' + TaggedFile.filename;\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  onDeleteTaggedFile = (taggedFile) => {\n    let repoID = this.props.repoID;\n    let fileTagID = taggedFile.file_tag_id;\n    seafileAPI.deleteFileTag(repoID, fileTagID).then(res => {\n      this.getTaggedFiles();\n      this.props.updateUsedRepoTags();\n      if ((this.props.onFileTagChanged) && !taggedFile.file_deleted) this.onFileTagChanged(taggedFile);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  componentDidMount() {\n    this.getTaggedFiles();\n  }\n\n  getTaggedFiles = () => {\n    let { repoID, currentTag } = this.props;\n    seafileAPI.listTaggedFiles(repoID, currentTag.id).then(res => {\n      let taggedFileList = [];\n      res.data.tagged_files !== undefined &&\n      res.data.tagged_files.forEach(file => {\n        let taggedFile = file;\n        taggedFileList.push(taggedFile);\n      });\n      this.setState({\n        taggedFileList: taggedFileList,\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let taggedFileList = this.state.taggedFileList;\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.onClose}>{gettext('Tagged Files')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='45%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='27%'>{gettext('Size')}</th>\n                <th width='18%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {taggedFileList.map((taggedFile, index) => {\n                return (\n                  <TaggedFile\n                    key={index}\n                    repoID={this.props.repoID}\n                    taggedFile={taggedFile}\n                    onDeleteTaggedFile={this.onDeleteTaggedFile}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListTaggedFilesDialog.propTypes = propTypes;\n\nexport default ListTaggedFilesDialog;\n\nconst TaggedFilePropTypes = {\n  repoID: PropTypes.string.isRequired,\n  taggedFile: PropTypes.object,\n  onDeleteTaggedFile: PropTypes.func.isRequired,\n};\n\nclass TaggedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const taggedFile = this.props.taggedFile;\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    let path = taggedFile.parent_path ? Utils.joinPath(taggedFile.parent_path, taggedFile.filename) : '';\n    let href = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(path);\n    return ( taggedFile.file_deleted ?\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td colSpan='3' className=\"name\">{taggedFile.filename}{' '}\n          <span style={{color:'red'}}>{gettext('deleted')}</span>\n        </td>\n        <td><i className={className} onClick={this.props.onDeleteTaggedFile.bind(this, taggedFile)}></i></td>\n      </tr>\n      :\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\"><a href={href} target='_blank'>{taggedFile.filename}</a></td>\n        <td>{Utils.bytesToSize(taggedFile.size)}</td>\n        <td>{moment.unix(taggedFile.mtime).fromNow()}</td>\n        <td><i className={className} onClick={this.props.onDeleteTaggedFile.bind(this, taggedFile)}></i></td>\n      </tr>\n    );\n  }\n}\n\nTaggedFile.propTypes = TaggedFilePropTypes;\n","import React, { Fragment } from 'react';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport PropTypes from 'prop-types';\nimport ModalPortal from '../modal-portal';\nimport { Modal } from 'reactstrap';\nimport ListTagDialog from '../dialog/list-tag-dialog';\nimport CreateTagDialog from '../dialog/create-tag-dialog';\nimport UpdateTagDialog from '../dialog/update-tag-dialog';\nimport ListTaggedFilesDialog from '../dialog/list-taggedfiles-dialog';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  permission: PropTypes.bool.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass DirTool extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isRepoTagDialogShow: false,\n      currentTag: null,\n      isListRepoTagShow: false,\n      isUpdateRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false,\n    };\n  }\n\n  onShowListRepoTag = () => {\n    this.setState({\n      isRepoTagDialogShow: true,\n      isListRepoTagShow: true,\n      isUpdateRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCloseRepoTagDialog = () => {\n    this.setState({\n      isRepoTagDialogShow: false,\n      isListRepoTagShow: false,\n      isUpdateRepoTagShow: false,\n      isCreateRepoTagShow: false,\n      isListTaggedFileShow: false\n    });\n  }\n\n  onCreateRepoTagToggle = () => {\n    this.setState({\n      isCreateRepoTagShow: !this.state.isCreateRepoTagShow,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n    });\n  }\n\n  onUpdateRepoTagToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isUpdateRepoTagShow: !this.state.isUpdateRepoTagShow,\n    });\n  }\n\n  onListTaggedFileToggle = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListRepoTagShow: !this.state.isListRepoTagShow,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  isMarkdownFile(filePath) {\n    let name = Utils.getFileName(filePath);\n    return name.indexOf('.md') > -1 ? true : false;\n  }\n\n  render() {\n    let { repoID, repoName, permission, currentPath } = this.props;\n    let isFile = this.isMarkdownFile(currentPath);\n    let name = Utils.getFileName(currentPath);\n    let trashUrl = siteRoot + 'repo/' + repoID + '/trash/';\n    let historyUrl = siteRoot + 'repo/history/' + repoID + '/';\n    if (permission) {\n      if (!isFile) {\n        if (name) { // name not '' is not root path\n          trashUrl = siteRoot + 'repo/' + repoID + '/trash/?path=' + encodeURIComponent(currentPath);\n          return (\n            <ul className=\"path-toolbar\">\n              <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n            </ul>\n          );\n        } else { // currentPath === '/' is root path\n          return (\n            <Fragment>\n              <ul className=\"path-toolbar\">\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-tag\" onClick={this.onShowListRepoTag} title={gettext('Tags')} aria-label={gettext('Tags')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-recycle\" href={trashUrl} title={gettext('Trash')} aria-label={gettext('Trash')}></a></li>\n                <li className=\"toolbar-item\"><a className=\"op-link sf2-icon-history\" href={historyUrl} title={gettext('History')} aria-label={gettext('History')}></a></li>\n              </ul>\n\n              {this.state.isRepoTagDialogShow && (\n                <ModalPortal>\n                  <Modal isOpen={true}>\n                    {this.state.isListRepoTagShow && (\n                      <ListTagDialog\n                        repoID={repoID}\n                        onListTagCancel={this.onCloseRepoTagDialog}\n                        onCreateRepoTag={this.onCreateRepoTagToggle}\n                        onUpdateRepoTag={this.onUpdateRepoTagToggle}\n                        onListTaggedFiles={this.onListTaggedFileToggle}\n                      />\n                    )}\n                    {this.state.isCreateRepoTagShow && (\n                      <CreateTagDialog\n                        repoID={repoID}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onCreateRepoTagToggle}\n                      />\n                    )}\n                    {this.state.isUpdateRepoTagShow && (\n                      <UpdateTagDialog\n                        repoID={repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onUpdateRepoTagToggle}\n                        onDeleteRepoTag={this.props.onDeleteRepoTag}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                    {this.state.isListTaggedFileShow && (\n                      <ListTaggedFilesDialog\n                        repoID={this.props.repoID}\n                        currentTag={this.state.currentTag}\n                        onClose={this.onCloseRepoTagDialog}\n                        toggleCancel={this.onListTaggedFileToggle}\n                        updateUsedRepoTags={this.props.updateUsedRepoTags}\n                      />\n                    )}\n                  </Modal>\n                </ModalPortal>\n              )}\n            </Fragment>\n          );\n        }\n      }\n    }\n    return '';\n  }\n}\n\nDirTool.propTypes = propTypes;\n\nexport default DirTool;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\nimport DirPath from './dir-path';\nimport DirTool from './dir-tool';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  repoName: PropTypes.string.isRequired,\n  permission: PropTypes.bool.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onPathClick: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func,\n  pathPrefix: PropTypes.array,\n  isViewFile: PropTypes.bool,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n};\n\nclass CurDirPath extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSortOptionsDialogOpen: false\n    };\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  render() {\n    const isDesktop = Utils.isDesktop();\n    return (\n      <Fragment>\n        <DirPath\n          repoName={this.props.repoName}\n          pathPrefix={this.props.pathPrefix}\n          currentPath={this.props.currentPath}\n          onPathClick={this.props.onPathClick}\n          onTabNavClick={this.props.onTabNavClick}\n          repoID={this.props.repoID}\n          isViewFile={this.props.isViewFile}\n          fileTags={this.props.fileTags}\n        />\n        {isDesktop &&\n        <DirTool\n          repoID={this.props.repoID}\n          repoName={this.props.repoName}\n          permission={this.props.permission}\n          currentPath={this.props.currentPath}\n          updateUsedRepoTags={this.props.updateUsedRepoTags}\n          onDeleteRepoTag={this.props.onDeleteRepoTag}\n        />}\n        {!isDesktop && this.props.direntList.length > 0 &&\n        <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n        {this.state.isSortOptionsDialogOpen &&\n        <SortOptionsDialog\n          toggleDialog={this.toggleSortOptionsDialog}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nCurDirPath.propTypes = propTypes;\n\nexport default CurDirPath;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { processor } from '@seafile/seafile-editor/dist/utils/seafile-markdown2html';\nimport { Button, Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { gettext, username, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport ParticipantsList from '../file-view/participants-list';\nimport { MentionsInput, Mention } from 'react-mentions';\nimport { defaultStyle, defaultMentionStyle } from '../../css/react-mentions-default-style';\nimport '../../css/comments-list.css';\n\nconst DetailCommentListPropTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailCommentList extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      commentsList: [],\n      relatedUsers: null,\n      comment: '',\n    };\n    this.toBeAddedParticipant = [];\n  }\n\n  componentDidMount() {\n    this.listComments();\n    this.checkParticipant();\n    this.listRepoRelatedUsers();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.filePath !== this.props.filePath) {\n      this.listComments(nextProps.filePath);\n    }\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ comment: event.target.value });\n  }\n\n  listComments = (filePath) => {\n    seafileAPI.listComments(this.props.repoID, (filePath || this.props.filePath)).then((res) => {\n      this.setState({ commentsList: res.data.comments });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  addComment = () => {\n    const { repoID, filePath } = this.props;\n    if (!this.state.comment.trim()) return;\n    seafileAPI.postComment(repoID, filePath, this.state.comment.trim()).then(() => {\n      this.listComments();\n    }).catch(err => {\n      toaster.danger(Utils.getErrorMsg(err));\n    });\n    this.setState({ comment: '' });\n  }\n\n  onSubmit = () => {\n    this.addParticipant(username);\n    if (this.toBeAddedParticipant.length === 0) {\n      this.addComment();\n    } else {\n      const { repoID, filePath } = this.props;\n      seafileAPI.addFileParticipants(repoID, filePath, this.toBeAddedParticipant).then((res) => {\n        this.props.onParticipantsChange(repoID, filePath);\n        this.toBeAddedParticipant = [];\n        this.addComment();\n      }).catch((err) => {\n        toaster.danger(Utils.getErrorMsg(err));\n      });\n    }\n  }\n\n  resolveComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, event.target.id, 'true').then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteComment = (event) => {\n    const { repoID } = this.props;\n    seafileAPI.deleteComment(repoID, event.target.id).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  editComment = (commentID, newComment) => {\n    const { repoID } = this.props;\n    seafileAPI.updateComment(repoID, commentID, null, null, newComment).then(() => {\n      this.listComments();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  listRepoRelatedUsers = () => {\n    const { repoID } = this.props;\n    seafileAPI.listRepoRelatedUsers(repoID).then((res) => {\n      let users = res.data.user_list.map((item) => {\n        return { id: item.email, display: item.name};\n      });\n      this.setState({ relatedUsers: users });\n    });\n  }\n\n  checkParticipant = (email) => {\n    return this.props.fileParticipantList.map((participant) => {return participant.email;}).includes(email);\n  }\n\n  addParticipant = (email) => {\n    if (this.checkParticipant(email)) return;\n    this.toBeAddedParticipant.push(email);\n  }\n\n  renderUserSuggestion = (entry, search, highlightedDisplay, index, focused) => {\n    return <div className={`user ${focused ? 'focused' : ''}`}>{highlightedDisplay}</div>;\n  }\n\n  render() {\n    const { repoID, filePath, fileParticipantList } = this.props;\n    return (\n      <div className=\"seafile-comment detail-comments h-100 w-100\">\n        <ul className=\"seafile-comment-list\">\n          {this.state.commentsList.length > 0 &&\n            this.state.commentsList.map((item, index = 0, arr) => {\n              let oldTime = (new Date(item.created_at)).getTime();\n              let time = moment(oldTime).format('YYYY-MM-DD HH:mm');\n              return (\n                <React.Fragment key={item.id}>\n                  <CommentItem\n                    item={item} time={time} deleteComment={this.deleteComment}\n                    resolveComment={this.resolveComment} editComment={this.editComment}\n                  />\n                </React.Fragment>\n              );\n            })\n          }\n          {(this.state.commentsList.length == 0 ) &&\n            <li className=\"comment-vacant\">{gettext('No comment yet.')}</li>}\n        </ul>\n        <div className=\"seafile-comment-footer\">\n          {fileParticipantList &&\n            <ParticipantsList\n              onParticipantsChange={this.props.onParticipantsChange}\n              participants={fileParticipantList}\n              repoID={repoID}\n              filePath={filePath}\n              showIconTip={true}\n            />\n          }\n          <MentionsInput\n            value={this.state.comment}\n            onChange={this.handleCommentChange}\n            placeholder={gettext('Add a comment.')}\n            style={defaultStyle}\n          >\n            <Mention\n              trigger=\"@\"\n              displayTransform={(username, display) => `@${display}`}\n              data={this.state.relatedUsers}\n              renderSuggestion={this.renderUserSuggestion}\n              style={defaultMentionStyle}\n              onAdd={(id, display) => {this.addParticipant(id);}}\n              appendSpaceOnAdd={true}\n            />\n          </MentionsInput>\n          <Button className=\"submit-comment\" color=\"primary\" size=\"sm\" onClick={this.onSubmit}>{gettext('Submit')}</Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nDetailCommentList.propTypes = DetailCommentListPropTypes;\n\nconst commentItemPropTypes = {\n  time: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  deleteComment: PropTypes.func.isRequired,\n  resolveComment: PropTypes.func.isRequired,\n  editComment: PropTypes.func.isRequired,\n};\n\nclass CommentItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      dropdownOpen: false,\n      html: '',\n      newComment: this.props.item.comment,\n      editable: false,\n    };\n  }\n\n  componentWillMount() {\n    this.convertComment(this.props.item.comment);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.convertComment(nextProps.item.comment);\n  }\n\n  convertComment = (mdFile) => {\n    processor.process(mdFile).then((result) => {\n      let html = String(result);\n      this.setState({ html: html });\n    });\n  }\n\n  toggleDropDownMenu = () => {\n    this.setState({ dropdownOpen: !this.state.dropdownOpen });\n  }\n\n  toggleEditComment = () => {\n    this.setState({ editable: !this.state.editable });\n  }\n\n  updateComment = (event) => {\n    const newComment = this.state.newComment;\n    if (this.props.item.comment !== newComment) {\n      this.props.editComment(event.target.id, newComment);\n    }\n    this.toggleEditComment();\n  }\n\n  handleCommentChange = (event) => {\n    this.setState({ newComment: event.target.value });\n  }\n\n  onCommentClick = (e) => {\n    // click participant link, page shouldn't jump\n    if (e.target.nodeName !== 'A') return;\n    const preNode = e.target.previousSibling;\n    if (preNode && preNode.nodeType === 3 && preNode.nodeValue.slice(-1) === '@') {\n      e.preventDefault();\n    }\n  }\n\n  renderInfo = (item) => {\n    return (\n      <Fragment>\n        <img className=\"avatar\" src={item.avatar_url} alt=\"\"/>\n        <div className=\"reviewer-info\">\n          <div className=\"reviewer-name ellipsis\">{item.user_name}</div>\n          <div className=\"review-time\">{this.props.time}</div>\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    const item = this.props.item;\n    if (this.state.editable) {\n      return(\n        <li className=\"seafile-comment-item\" id={item.id}>\n          <div className=\"seafile-comment-info\">\n            {this.renderInfo(item)}\n          </div>\n          <div className=\"seafile-edit-comment\">\n            <textarea className=\"edit-comment-input\" value={this.state.newComment}\n              onChange={this.handleCommentChange} clos=\"100\" rows=\"3\" warp=\"virtual\"\n            ></textarea>\n            <Button className=\"comment-btn\" color=\"primary\" size=\"sm\" onClick={this.updateComment} id={item.id}>{gettext('Update')}</Button>{' '}\n            <Button className=\"comment-btn\" color=\"secondary\" size=\"sm\" onClick={this.toggleEditComment}> {gettext('Cancel')}</Button>\n          </div>\n        </li>\n      );\n    }\n    return (\n      <li className={item.resolved ? 'seafile-comment-item seafile-comment-item-resolved' : 'seafile-comment-item'} id={item.id}>\n        <div className=\"seafile-comment-info\">\n          {this.renderInfo(item)}\n          <Dropdown isOpen={this.state.dropdownOpen} size=\"sm\" className=\"seafile-comment-dropdown\" toggle={this.toggleDropDownMenu}>\n            <DropdownToggle className=\"seafile-comment-dropdown-btn\"><i className=\"fas fa-ellipsis-v\"></i></DropdownToggle>\n            <DropdownMenu>\n              {item.user_email === username &&\n                <DropdownItem onClick={this.props.deleteComment} className=\"delete-comment\" id={item.id}>{gettext('Delete')}</DropdownItem>\n              }\n              {item.user_email === username &&\n                <DropdownItem onClick={this.toggleEditComment} className=\"edit-comment\" id={item.id}>{gettext('Edit')}</DropdownItem>\n              }\n              {!item.resolved &&\n                <DropdownItem onClick={this.props.resolveComment} className=\"seafile-comment-resolved\"\n                  id={item.id}>{gettext('Mark as resolved')}</DropdownItem>\n              }\n            </DropdownMenu>\n          </Dropdown>\n        </div>\n        <div\n          className=\"seafile-comment-content\"\n          dangerouslySetInnerHTML={{ __html: this.state.html }}\n          onClick={e => this.onCommentClick(e)}\n        ></div>\n      </li>\n    );\n  }\n}\n\nCommentItem.propTypes = commentItemPropTypes;\n\nexport default DetailCommentList;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport ModalPortal from '../modal-portal';\nimport RelatedFileDialogs from '../dialog/related-file-dialogs';\nimport ParticipantsList from '../file-view/participants-list';\n\nconst propTypes = {\n  repoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  direntType: PropTypes.string.isRequired,\n  direntDetail: PropTypes.object.isRequired,\n  path: PropTypes.string.isRequired,\n  fileTagList: PropTypes.array.isRequired,\n  relatedFiles: PropTypes.array.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n  onParticipantsChange: PropTypes.func.isRequired,\n  fileParticipantList: PropTypes.array.isRequired,\n};\n\nclass DetailListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEditFileTagShow: false,\n      showRelatedFileDialog: false,\n    };\n  }\n\n  getDirentPostion = () => {\n    let { repoInfo } = this.props;\n    let direntPath = this.getDirentPath();\n    let position = repoInfo.repo_name;\n    if (direntPath !== '/') {\n      let index = direntPath.lastIndexOf('/');\n      let path = direntPath.slice(0, index);\n      position = position + path;\n    }\n    return position;\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  getDirentPath = () => {\n    if (Utils.isMarkdownFile(this.props.path)) {\n      return this.props.path; // column mode: view file\n    }\n    let { dirent, path } = this.props;\n    return Utils.joinPath(path, dirent.name);\n  }\n\n  onRelatedFileChange = () => {\n    let direntPath = this.getDirentPath();\n    this.props.onRelatedFileChange(this.props.dirent, direntPath);\n  }\n\n  onListRelatedFileToggle = () => {\n    this.setState({\n      showRelatedFileDialog: true,\n    });\n  }\n\n  toggleCancel = () => {\n    this.setState({\n      showRelatedFileDialog: false,\n    });\n  }\n\n  render() {\n    let { direntType, direntDetail, fileTagList, relatedFiles, fileParticipantList } = this.props;\n    let position = this.getDirentPostion();\n    let direntPath = this.getDirentPath();\n    if (direntType === 'dir') {\n      return (\n        <table className=\"table-thead-hidden\">\n          <thead>\n            <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n          </thead>\n          <tbody>\n            <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n            <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.mtime).format('YYYY-MM-DD')}</td></tr>\n          </tbody>\n        </table>\n      );\n    } else {\n      return (\n        <Fragment>\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr><th width=\"35%\"></th><th width=\"65%\"></th></tr>\n            </thead>\n            <tbody>\n              <tr><th>{gettext('Size')}</th><td>{Utils.bytesToSize(direntDetail.size)}</td></tr>\n              <tr><th>{gettext('Location')}</th><td>{position}</td></tr>\n              <tr><th>{gettext('Last Update')}</th><td>{moment(direntDetail.last_modified).fromNow()}</td></tr>\n              <tr className=\"file-tag-container\">\n                <th>{gettext('Tags')}</th>\n                <td>\n                  <ul className=\"file-tag-list\">\n                    {fileTagList.map((fileTag) => {\n                      return (\n                        <li key={fileTag.id} className=\"file-tag-item\">\n                          <span className=\"file-tag\" style={{backgroundColor:fileTag.color}}></span>\n                          <span className=\"tag-name\" title={fileTag.name}>{fileTag.name}</span>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                  <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onEditFileTagToggle}></i>\n                </td>\n              </tr>\n              <tr className=\"file-related-files\">\n                <th>{gettext('Related Files')}</th>\n                <td>\n                  <ul>\n                    {relatedFiles.map((relatedFile, index) => {\n                      let href = siteRoot + 'lib/' + relatedFile.repo_id + '/file' + Utils.encodePath(relatedFile.path);\n                      return (\n                        <li key={index}>\n                          <a href={href} target='_blank'>{relatedFile.name}</a>\n                        </li>\n                      );\n                    })}\n                  </ul>\n                  <i className='fa fa-pencil-alt attr-action-icon' onClick={this.onListRelatedFileToggle}></i>\n                </td>\n              </tr>\n              <tr className=\"file-participants\">\n                <th>{gettext('Participants')}</th>\n                <td>\n                  {fileParticipantList &&\n                    <ParticipantsList\n                      onParticipantsChange={this.props.onParticipantsChange}\n                      participants={fileParticipantList}\n                      repoID={this.props.repoID}\n                      filePath={direntPath}\n                      showIconTip={false}\n                    />\n                  }\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          {this.state.showRelatedFileDialog &&\n            <ModalPortal>\n              <RelatedFileDialogs\n                repoID={this.props.repoID}\n                filePath={direntPath}\n                relatedFiles={relatedFiles}\n                toggleCancel={this.toggleCancel}\n                onRelatedFileChange={this.onRelatedFileChange}\n                dirent={this.props.dirent}\n                viewMode=\"list_related_file\"\n              />\n            </ModalPortal>\n          }\n          {this.state.isEditFileTagShow &&\n            <ModalPortal>\n              <EditFileTagDialog\n                repoID={this.props.repoID}\n                fileTagList={fileTagList}\n                filePath={direntPath}\n                toggleCancel={this.onEditFileTagToggle}\n                onFileTagChanged={this.onFileTagChanged}\n              />\n            </ModalPortal>\n          }\n        </Fragment>\n      );\n    }\n  }\n}\n\nDetailListView.propTypes = propTypes;\n\nexport default DetailListView;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport { Nav, NavItem, NavLink, TabContent, TabPane } from 'reactstrap';\nimport DetailCommentList from './detail-comments-list';\nimport { siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport Dirent from '../../models/dirent';\nimport DetailListView from './detail-list-view';\nimport FileTag from '../../models/file-tag';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object,\n  path: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemDetailsClose: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass DirentDetail extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      direntType: '',\n      direntDetail: '',\n      fileTagList: [],\n      relatedFiles: [],\n      folderDirent: null,\n      activeTab: 'info',\n      fileParticipantList: [],\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  componentDidMount() {\n    let { dirent, path, repoID } = this.props;\n    this.loadDirentInfo(dirent, path, repoID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { dirent, path, repoID } = nextProps;\n    if (this.props.dirent !== nextProps.dirent) {\n      this.loadDirentInfo(dirent, path, repoID);\n    }\n    if (this.props.direntDetailPanelTab) {\n      this.tabItemClick(this.props.direntDetailPanelTab);\n    }\n  }\n\n  loadDirentInfo = (dirent, path, repoID) => {\n    if (dirent) {\n      let direntPath = Utils.joinPath(path, dirent.name);\n      this.updateDetailView(dirent, direntPath);\n    } else {\n      let dirPath = Utils.getDirName(path);\n      seafileAPI.listDir(repoID, dirPath).then(res => {\n        let direntList = res.data.dirent_list;\n        let folderDirent = null;\n        for (let i = 0; i < direntList.length; i++) {\n          let dirent = direntList[i];\n          if (dirent.parent_dir + dirent.name === path) {\n            folderDirent = new Dirent(dirent);\n            break;\n          }\n        }\n        this.setState({folderDirent: folderDirent});\n        this.updateDetailView(folderDirent, path);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateDetailView = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    if (dirent.type === 'file') {\n      seafileAPI.getFileInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'file',\n          direntDetail: res.data,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      seafileAPI.listFileTags(repoID, direntPath).then(res => {\n        let fileTagList = [];\n        res.data.file_tags.forEach(item => {\n          let file_tag = new FileTag(item);\n          fileTagList.push(file_tag);\n        });\n        this.setState({fileTagList: fileTagList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n      seafileAPI.listRelatedFiles(repoID, direntPath).then(res => {\n        let relatedFiles = [];\n        res.data.related_files.map((relatedFile) => {\n          relatedFiles.push(relatedFile);\n        });\n        this.setState({\n          relatedFiles: relatedFiles,\n        });\n      }).catch((error) => {\n        if (error.response.status === 500) {\n          this.setState({\n            relatedFiles: []\n          });\n        }\n      });\n      this.listParticipants(repoID, direntPath);\n    } else {\n      seafileAPI.getDirInfo(repoID, direntPath).then(res => {\n        this.setState({\n          direntType: 'dir',\n          direntDetail: res.data\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  listParticipants = (repoID, filePath) => {\n    seafileAPI.listFileParticipants(repoID, filePath).then((res) => {\n      this.setState({ fileParticipantList: res.data.participant_list });\n    });\n  }\n\n  onParticipantsChange = (repoID, filePath) => {\n    this.listParticipants(repoID, filePath);\n  }\n\n  onRelatedFileChange = (dirent, direntPath) => {\n    this.updateDetailView(dirent, direntPath);\n  }\n\n  tabItemClick = (tab) => {\n    if (this.state.activeTab !== tab) {\n      this.setState({ activeTab: tab });\n    }\n  }\n\n  renderNavItem = (showTab) => {\n    switch(showTab) {\n      case 'info':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'info' })} onClick={() => { this.tabItemClick('info');}}>\n              <i className=\"fas fa-info-circle\"></i>\n            </NavLink>\n          </NavItem>\n        );\n      case 'comments':\n        return (\n          <NavItem className=\"nav-item w-50\">\n            <NavLink className={classnames({ active: this.state.activeTab === 'comments' })} onClick={() => {this.tabItemClick('comments');}}>\n              <i className=\"fa fa-comments\"></i>\n            </NavLink>\n          </NavItem>\n        );\n    }\n  }\n\n  renderHeader = (smallIconUrl, direntName) => {\n    return (\n      <div className=\"detail-header\">\n        <div className=\"detail-control sf2-icon-x1\" onClick={this.props.onItemDetailsClose}></div>\n        <div className=\"detail-title dirent-title\">\n          <img src={smallIconUrl} width=\"24\" height=\"24\" alt=\"\" />{' '}\n          <span className=\"name ellipsis\" title={direntName}>{direntName}</span>\n        </div>\n      </div>\n    );\n  }\n\n  renderDetailBody = (bigIconUrl, folderDirent) => {\n    return (\n      <Fragment>\n        <div className=\"detail-body dirent-info\">\n          <div className=\"img\"><img src={bigIconUrl} className=\"thumbnail\" alt=\"\" /></div>\n          {this.state.direntDetail &&\n            <div className=\"dirent-table-container\">\n              <DetailListView\n                repoInfo={this.props.currentRepoInfo}\n                path={this.props.path}\n                repoID={this.props.repoID}\n                dirent={this.props.dirent || folderDirent}\n                direntType={this.state.direntType}\n                direntDetail={this.state.direntDetail}\n                fileTagList={this.state.fileTagList}\n                relatedFiles={this.state.relatedFiles}\n                onFileTagChanged={this.props.onFileTagChanged}\n                onRelatedFileChange={this.onRelatedFileChange}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </div>\n          }\n        </div>\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { dirent, repoID, path } = this.props;\n    let { folderDirent } = this.state;\n    if (!dirent && !folderDirent) {\n      return '';\n    }\n    let smallIconUrl = dirent ? Utils.getDirentIcon(dirent) : Utils.getDirentIcon(folderDirent);\n    let bigIconUrl = dirent ? Utils.getDirentIcon(dirent, true) : Utils.getDirentIcon(folderDirent, true);\n    const isImg = dirent ? Utils.imageCheck(dirent.name) : Utils.imageCheck(folderDirent.name);\n    if (isImg) {\n      bigIconUrl = `${siteRoot}thumbnail/${repoID}/1024` + Utils.encodePath(`${path === '/' ? '' : path}/${dirent.name}`);\n    }\n    let direntName = dirent ? dirent.name : folderDirent.name;\n\n    if ((dirent && dirent.type === 'file') || path.lastIndexOf('.') > -1) {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          <Nav tabs className=\"mx-0\">{this.renderNavItem('info')}{this.renderNavItem('comments')}</Nav>\n          <TabContent activeTab={this.state.activeTab}>\n            <TabPane tabId=\"info\">{this.renderDetailBody(bigIconUrl, folderDirent)}</TabPane>\n            <TabPane tabId=\"comments\" className=\"comments h-100\">\n              <DetailCommentList\n                repoID={this.props.repoID}\n                filePath={(dirent && dirent.type === 'file') ? Utils.joinPath(path, dirent.name) : path}\n                fileParticipantList={this.state.fileParticipantList}\n                onParticipantsChange={this.onParticipantsChange}\n              />\n            </TabPane>\n          </TabContent>\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"detail-container\">\n          {this.renderHeader(smallIconUrl, direntName)}\n          {this.renderDetailBody(bigIconUrl, folderDirent)}\n        </div>\n      );\n    }\n  }\n}\n\nDirentDetail.propTypes = propTypes;\n\nexport default DirentDetail;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../../components/dialog/create-file-dialog';\n\nimport '../../css/tip-for-new-file.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n};\n\nclass DirentNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fileType: '',\n      isCreateFileDialogShow: false,\n    };\n  }\n\n  onCreateNewFile = (type) => {\n    this.setState({\n      fileType: type,\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      fileType: '',\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  checkDuplicatedName = () => {\n    return false; // current repo is null, and unnecessary to check duplicated name\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  render() {\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <div className=\"tip-for-new-file text-center\">\n          <p className=\"text-secondary\">{gettext('This folder has no content at this time.')}</p>\n          <p className=\"text-secondary\">{gettext('You can create files quickly')}{' +'}</p>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.md')}>\n            {'+ Markdown'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.pptx')}>\n            {'+ PPT'}</button>\n          <br />\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.docx')}>\n            {'+ Word'}</button>\n          <button className=\"big-new-file-button\" onClick={this.onCreateNewFile.bind(this, '.xlsx')}>\n            {'+ Excel'}</button>\n        </div>\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              fileType={this.state.fileType}\n              onAddFile={this.onAddFile}\n              addFileCancel={this.onCreateFileToggle}\n              checkDuplicatedName={this.checkDuplicatedName}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentNodeView.propTypes = propTypes;\n\nexport default DirentNodeView;\n","import moment from 'moment';\n\nclass Draft {\n\n  constructor(item) {\n    this.created = item.created_at;\n    this.createdStr = moment((new Date(item.created_at)).getTime()).format('YYYY-MM-DD HH:mm');\n    this.id = item.id;\n    this.ownerNickname = item.owner_nickname;\n    this.originRepoID = item.origin_repo_id;\n    this.draftFilePath = item.draft_file_path;\n  }\n}\n\nexport default Draft;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport editorUtilities from '../../utils/editor-utilities';\nimport toaster from '../../components/toast';\nimport { Utils } from '../../utils/utils';\nimport Draft from '../../models/draft';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  toggle: PropTypes.func.isRequired,\n};\n\nclass ListRepoDraftsDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      drafts: [],\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepoDrafts(this.props.repoID).then(res => {\n      let drafts = res.data.drafts.map(item => {\n        let draft = new Draft(item);\n        return draft;\n      });\n      this.setState({\n        drafts: drafts\n      });\n    });\n  }\n\n  onDeleteDraftItem = (draft) => {\n    editorUtilities.deleteDraft(draft.id).then(() => {\n      let drafts = this.state.drafts.filter(item => {\n        return item.id !== draft.id;\n      });\n      this.setState({drafts: drafts});\n      let msg = gettext('Successfully deleted draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.success(msg);\n    }).catch(() => {\n      let msg = gettext('Failed to delete draft %(draft)s.');\n      msg = msg.replace('%(draft)s', draft.draftFilePath);\n      toaster.danger(msg);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggle();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Drafts')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='50%' className=\"ellipsis\">{gettext('Name')}</th>\n                <th width='20%'>{gettext('Owner')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='10%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.drafts.map((item, index) => {\n                return (\n                  <DraftItem\n                    key={index}\n                    draftItem={item}\n                    onDeleteDraftItem={this.onDeleteDraftItem}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nListRepoDraftsDialog.propTypes = propTypes;\n\nexport default ListRepoDraftsDialog;\n\nconst DraftItemPropTypes = {\n  draftItem: PropTypes.object,\n  onDeleteDraftItem: PropTypes.func.isRequired,\n};\n\nclass DraftItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    const draftItem = this.props.draftItem;\n    let href = siteRoot + 'drafts/' + draftItem.id + '/';\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td className=\"name\">\n          <a href={href} target='_blank'>{Utils.getFileName(draftItem.draftFilePath)}</a>\n        </td>\n        <td>{draftItem.ownerNickname}</td>\n        <td>{moment(draftItem.createdStr).fromNow()}</td>\n        <td>\n          <i className={className} onClick={this.props.onDeleteDraftItem.bind(this, draftItem)}></i>\n        </td>\n      </tr>\n    );\n  }\n}\n\nDraftItem.propTypes = DraftItemPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport MarkdownViewer from '@seafile/seafile-editor/dist/viewer/markdown-viewer';\nimport Loading from '../../components/loading';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  fileName: PropTypes.string.isRequired,\n  href: PropTypes.string,\n  toggleCancel: PropTypes.func.isRequired,\n};\n\nclass ReadmeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      readmeContent: null,\n      isLoading: true,\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.getFileDownloadLink(this.props.repoID, this.props.filePath).then(res => {\n      seafileAPI.getFileContent(res.data).then(res => {\n        this.setState({\n          readmeContent: res.data,\n          isLoading: false,\n        });\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleCancel} className=\"readme-dialog\" size=\"lg\">\n        <ModalHeader>{this.props.fileName}\n          <a className=\"readme-dialog-edit\" href={this.props.href} target='_blank'><i className=\"fa fa-pencil-alt\"></i></a>\n        </ModalHeader>\n        <ModalBody>\n          {this.state.isLoading ?\n            <Loading />:\n            <MarkdownViewer\n              markdownContent={this.state.readmeContent}\n              showTOC={false}\n              scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n            />\n          }\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nReadmeDialog.propTypes = propTypes;\n\nexport default ReadmeDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalPortal from './modal-portal';\nimport ListTaggedFilesDialog from './dialog/list-taggedfiles-dialog';\nimport ListRepoDraftsDialog from './dialog/list-repo-drafts-dialog';\nimport ReadmeDialog from './dialog/readme-dialog';\nimport { siteRoot, gettext } from '../utils/constants';\nimport { Utils } from '../utils/utils';\n\nimport '../css/repo-info-bar.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n};\n\nclass RepoInfoBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentTag: null,\n      isListTaggedFileShow: false,\n      showRepoDrafts: false,\n      showReadmeDialog: false,\n    };\n  }\n\n  onListTaggedFiles = (currentTag) => {\n    this.setState({\n      currentTag: currentTag,\n      isListTaggedFileShow: !this.state.isListTaggedFileShow,\n    });\n  }\n\n  onCloseDialog = () => {\n    this.setState({\n      isListTaggedFileShow: false\n    });\n  }\n\n  toggleDrafts = () => {\n    this.setState({\n      showRepoDrafts: !this.state.showRepoDrafts\n    });\n  }\n\n  toggleReadme = () => {\n    this.setState({\n      showReadmeDialog: !this.state.showReadmeDialog\n    });\n  }\n\n  render() {\n    let {repoID, currentPath, usedRepoTags, readmeMarkdown} = this.props;\n    let href = readmeMarkdown !== null ? siteRoot + 'lib/' + repoID + '/file' + Utils.joinPath(currentPath, readmeMarkdown.name) +  '?mode=edit' : '';\n    let filePath = readmeMarkdown !== null ? currentPath + readmeMarkdown.name : '';\n    return (\n      <div className=\"repo-info-bar\">\n        {usedRepoTags.length > 0 && (\n          <ul className=\"used-tag-list\">\n            {usedRepoTags.map((usedRepoTag) => {\n              return (\n                <li key={usedRepoTag.id} className=\"used-tag-item\">\n                  <span className=\"used-tag\" style={{backgroundColor:usedRepoTag.color}}></span>\n                  <span className=\"used-tag-name\" title={usedRepoTag.name}>{usedRepoTag.name}</span>\n                  <span className=\"used-tag-files\" onClick={this.onListTaggedFiles.bind(this, usedRepoTag)}>\n                    {usedRepoTag.fileCount > 1 ? usedRepoTag.fileCount + ' files' : usedRepoTag.fileCount + ' file'}\n                  </span>\n                </li>\n              );\n            })}\n          </ul>\n        )}\n        <div className={(usedRepoTags.length > 0 && readmeMarkdown) ? 'file-info-list mt-1' : 'file-info-list'}>\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) > 1) &&\n            <span className=\"file-info\" onClick={this.toggleReadme}>\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <span className=\"used-tag-name\">{readmeMarkdown.name}</span>\n            </span>\n          }\n          {(readmeMarkdown !== null && parseInt(readmeMarkdown.size) < 2) &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-readme\"></span>\n              <a className=\"used-tag-name\" href={href} target='_blank'>{readmeMarkdown.name}</a>\n            </span>\n          }\n          {this.props.draftCounts > 0 &&\n            <span className=\"file-info\">\n              <span className=\"info-icon sf2-icon-drafts\"></span>\n              <span className=\"used-tag-name\">{gettext('draft')}</span>\n              <span className=\"used-tag-files\" onClick={this.toggleDrafts}>\n                {this.props.draftCounts > 1 ? this.props.draftCounts + ' files' : this.props.draftCounts + ' file'}\n              </span>\n            </span>\n          }\n        </div>\n        {this.state.isListTaggedFileShow && (\n          <ModalPortal>\n            <ListTaggedFilesDialog\n              repoID={repoID}\n              currentTag={this.state.currentTag}\n              onClose={this.onCloseDialog}\n              toggleCancel={this.onListTaggedFiles}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              onFileTagChanged={this.props.onFileTagChanged}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showRepoDrafts && (\n          <ModalPortal>\n            <ListRepoDraftsDialog\n              toggle={this.toggleDrafts}\n              repoID={this.props.repoID}\n            />\n          </ModalPortal>\n        )}\n\n        {this.state.showReadmeDialog && (\n          <ModalPortal>\n            <ReadmeDialog\n              toggleCancel={this.toggleReadme}\n              repoID={repoID}\n              filePath={filePath}\n              href={href}\n              fileName={readmeMarkdown.name}\n            />\n          </ModalPortal>\n        )}\n      </div>\n    );\n  }\n}\n\nRepoInfoBar.propTypes = propTypes;\n\nexport default RepoInfoBar;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl, username } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\nimport Rename from '../rename';\nimport ModalPortal from '../modal-portal';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\n\nimport '../../css/dirent-list-item.css';\nimport toaster from '../toast';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onItemRenameToggle: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isRepoOwner: PropTypes.bool,\n  isAdmin: PropTypes.bool.isRequired,\n  repoEncrypted: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  onItemMouseDown: PropTypes.func.isRequired,\n  onItemContextMenu: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  activeDirent: PropTypes.object,\n  getDirentItemMenuList: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onShowDirentsDraggablePreview: PropTypes.func,\n};\n\nclass DirentListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOperationShow: false,\n      highlight: false,\n      isZipDialogOpen: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isShareDialogShow: false,\n      isMutipleOperation: false,\n      isShowTagTooltip: false,\n      isDragTipShow: false,\n      isDropTipshow: false,\n      isEditFileTagShow: false,\n      isPermissionDialogOpen: false,\n      isOpMenuOpen: false // for mobile\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.isItemFreezed !== this.props.isItemFreezed && !nextProps.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      }, () => {\n        if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n          this.setState({isOperationShow: true});\n        }\n      });\n    }\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  //UI Interactive\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    this.setState({isDragTipShow: true});\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: true,\n        isOperationShow: true,\n      });\n    }\n    this.setState({isDragTipShow: true});\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        highlight: false,\n        isOperationShow: false,\n      });\n    }\n    this.setState({isDragTipShow: false});\n  }\n\n  unfreezeItem = () => {\n    this.setState({\n      highlight: false,\n      isOperationShow: false,\n    });\n    this.props.unfreezeItem();\n  }\n\n  //buiness handler\n  onItemSelected = () => {\n    this.props.onItemSelected(this.props.dirent);\n  }\n\n  onItemStarred = () => {\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(dirent);\n\n    if (dirent.starred) {\n      seafileAPI.unstarItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', false);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.starItem(repoID, filePath).then(() => {\n        this.props.updateDirent(this.props.dirent, 'starred', true);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  // on '<tr>'\n  onDirentClick = (e) => {\n    // '<td>' is clicked\n    e.stopPropagation();\n    if (e.target.tagName == 'TD') {\n      this.props.onDirentClick(this.props.dirent);\n    }\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (this.state.isRenameing) {\n      return;\n    }\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onItemDelete = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(this.props.dirent);\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onMobileMenuItemClick = (e) => {\n    const operation = e.target.getAttribute('data-op');\n    this.onMenuItemClick(operation, e);\n  }\n\n  onMenuItemClick = (operation, event) => {\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem();\n        break;\n      case 'Lock':\n        this.onLockItem();\n        break;\n      case 'Comment':\n        this.props.onDirentClick(this.props.dirent);\n        this.props.showDirentDetail('comments');\n        break;\n      case 'History':\n        this.onHistory();\n        break;\n      case 'Access Log':\n        this.onAccessLog();\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient();\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let direntPath = this.getDirentPath(this.props.dirent);\n    this.props.onFileTagChanged(this.props.dirent, direntPath);\n  }\n\n  onItemRenameToggle = () => {\n    this.props.onItemRenameToggle(this.props.dirent);\n    this.setState({\n      isOperationShow: false,\n      isRenameing: true,\n    });\n  }\n\n  onRenameConfirm = (newName) => {\n    this.props.onItemRename(this.props.dirent, newName);\n    this.onRenameCancel();\n  }\n\n  onRenameCancel = () => {\n    this.setState({isRenameing: false});\n    this.unfreezeItem();\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', true);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(this.props.dirent, 'is_locked', false);\n      this.props.updateDirent(this.props.dirent, 'locked_by_me', false);\n      this.props.updateDirent(this.props.dirent, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onHistory = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = () => {\n    let filePath = this.getDirentPath(this.props.dirent);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(this.props.dirent);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemDownload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = this.props.dirent;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  onTagTooltipToggle = (e) => {\n    e.stopPropagation();\n    this.setState({isShowTagTooltip: !this.state.isShowTagTooltip});\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemDragStart = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    e.dataTransfer.effectAllowed = 'move';\n    let { selectedDirentList } = this.props;\n    if (selectedDirentList.length > 0 && selectedDirentList.includes(this.props.dirent)) { // drag items and selectedDirentList include item\n      this.props.onShowDirentsDraggablePreview();\n      e.dataTransfer.setDragImage(this.refs.empty_content, 0, 0); // Show an empty content\n      let selectedList =  selectedDirentList.map(item => {\n        let nodeRootPath = this.getDirentPath(item);\n        let dragStartItemData = {nodeDirent: item, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n        return dragStartItemData;\n      });\n      selectedList = JSON.stringify(selectedList);\n      e.dataTransfer.setData('applicaiton/drag-item-info', selectedList);\n      return ;\n    }\n\n    if (e.dataTransfer && e.dataTransfer.setDragImage) {\n      e.dataTransfer.setDragImage(this.refs.drag_icon, 15, 15);\n    }\n\n    let nodeRootPath = this.getDirentPath(this.props.dirent);\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path, nodeRootPath: nodeRootPath};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onItemDragEnter = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n      this.setState({isDropTipshow: true});\n    }\n  }\n\n  onItemDragOver = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onItemDragLeave = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    }\n    this.setState({isDropTipshow: false});\n  }\n\n  onItemDragDrop = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    this.setState({isDropTipshow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    if (this.props.dirent.type === 'dir') {\n      e.stopPropagation();\n    } else {\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    if (Array.isArray(dragStartItemData)) { //move items\n      let direntPaths =  dragStartItemData.map(draggedItem => {\n        return draggedItem.nodeRootPath;\n      });\n\n      let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n\n      if (direntPaths.some(direntPath => { return direntPath === selectedPath;})) { //eg; A/B, A/C --> A/B\n        return;\n      }\n\n      this.props.onItemsMove(this.props.currentRepoInfo, selectedPath);\n      return ;\n    }\n\n    let { nodeDirent, nodeParentPath, nodeRootPath } = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    //  copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropItemData.type === 'dir' && nodeDirent.type === 'dir') {\n      if (nodeParentPath !== this.props.path) {\n        if (this.props.path.indexOf(nodeRootPath) !== -1) {\n          return;\n        }\n      }\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onItemMouseDown = (event) => {\n    this.props.onItemMouseDown(event);\n  }\n\n  onItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onItemContextMenu(event, dirent);\n  }\n\n  renderItemOperation = () => {\n    let { dirent, currentRepoInfo, selectedDirentList } = this.props;\n\n    // https://dev.seafile.com/seahub/lib/d6f300e7-bb2b-4722-b83e-cf45e370bfbc/file/seaf-server%20%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/%E6%9D%83%E9%99%90%E7%9B%B8%E5%85%B3/%E8%B5%84%E6%96%99%E5%BA%93%E6%9D%83%E9%99%90%E8%A7%84%E8%8C%83.md\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, dirent.permission, dirent);\n\n    return (\n      <Fragment>\n        {selectedDirentList.length > 1 ?\n          <Fragment>\n            {this.state.isOperationShow && !dirent.isSelected &&\n              <div className=\"operations\">\n                <ul className=\"operation-group\">\n                  {(dirent.permission === 'rw' || dirent.permission === 'r') && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.onItemDownload}></i>\n                    </li>\n                  )}\n                  {showShareBtn && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-share\" title={gettext('Share')} onClick={this.onItemShare}></i>\n                    </li>\n                  )}\n                  {dirent.permission === 'rw' && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.onItemDelete}></i>\n                    </li>\n                  )}\n                  <li className=\"operation-group-item\">\n                    <ItemDropdownMenu\n                      item={this.props.dirent}\n                      toggleClass={'sf2-icon-caret-down'}\n                      isHandleContextMenuEvent={true}\n                      getMenuList={this.props.getDirentItemMenuList}\n                      onMenuItemClick={this.onMenuItemClick}\n                      unfreezeItem={this.unfreezeItem}\n                      freezeItem={this.props.freezeItem}\n                    />\n                  </li>\n                </ul>\n              </div>\n            }\n          </Fragment> :\n          <Fragment>\n            {this.state.isOperationShow &&\n              <div className=\"operations\">\n                <ul className=\"operation-group\">\n                  {(dirent.permission === 'rw' || dirent.permission === 'r') && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-download\" title={gettext('Download')} onClick={this.onItemDownload}></i>\n                    </li>\n                  )}\n                  {showShareBtn && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-share\" title={gettext('Share')} onClick={this.onItemShare}></i>\n                    </li>\n                  )}\n                  {dirent.permission === 'rw' && (\n                    <li className=\"operation-group-item\">\n                      <i className=\"op-icon sf2-icon-delete\" title={gettext('Delete')} onClick={this.onItemDelete}></i>\n                    </li>\n                  )}\n                  <li className=\"operation-group-item\">\n                    <ItemDropdownMenu\n                      item={this.props.dirent}\n                      toggleClass={'sf2-icon-caret-down'}\n                      isHandleContextMenuEvent={true}\n                      getMenuList={this.props.getDirentItemMenuList}\n                      onMenuItemClick={this.onMenuItemClick}\n                      unfreezeItem={this.unfreezeItem}\n                      freezeItem={this.props.freezeItem}\n                    />\n                  </li>\n                </ul>\n              </div>\n            }\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n\n  render() {\n    let { path, dirent, activeDirent } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let iconUrl = Utils.getDirentIcon(dirent);\n\n    let trClass = this.state.highlight ? 'tr-highlight ' : '';\n    trClass += this.state.isDropTipshow ? 'tr-drop-effect' : '';\n    trClass += (activeDirent && activeDirent.name === dirent.name)  ? 'tr-active' : '';\n    trClass += dirent.isSelected? 'tr-active' : '';\n\n    let lockedInfo = gettext('locked by {name}').replace('{name}', dirent.lock_owner_name);\n\n    const isDesktop = Utils.isDesktop();\n    const desktopItem = (\n      <tr\n        className={trClass}\n        draggable=\"true\"\n        onMouseEnter={this.onMouseEnter}\n        onMouseOver={this.onMouseOver}\n        onMouseLeave={this.onMouseLeave}\n        onClick={this.onDirentClick}\n        onDragStart={this.onItemDragStart}\n        onDragEnter={this.onItemDragEnter}\n        onDragOver={this.onItemDragOver}\n        onDragLeave={this.onItemDragLeave}\n        onDrop={this.onItemDragDrop}\n        onMouseDown={this.onItemMouseDown}\n        onContextMenu={this.onItemContextMenu}\n      >\n        <td className={`pl10 ${this.state.isDragTipShow ? 'tr-drag-effect' : ''}`}>\n          <input type=\"checkbox\" className=\"vam\" onChange={this.onItemSelected} checked={dirent.isSelected}/>\n        </td>\n        <td className=\"pl10\">\n          {dirent.starred !== undefined && !dirent.starred && <i className=\"far fa-star star-empty cursor-pointer\" onClick={this.onItemStarred}></i>}\n          {dirent.starred !== undefined && dirent.starred && <i className=\"fas fa-star cursor-pointer\" onClick={this.onItemStarred}></i>}\n        </td>\n        <td className=\"pl10\">\n          <div className=\"dir-icon\">\n            {dirent.encoded_thumbnail_src ?\n              <img ref='drag_icon' src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" onClick={this.onItemClick} alt=\"\" /> :\n              <img ref='drag_icon' src={iconUrl} width=\"24\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n            <div ref=\"empty_content\" style={{position: 'absolute', width: '1px', height: '1px'}}></div>\n          </div>\n        </td>\n        <td className=\"name\">\n          {this.state.isRenameing ?\n            <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n            <a href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemClick}>{dirent.name}</a>\n          }\n        </td>\n        <td className=\"tag-list-title\">\n          {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n            <Fragment>\n              <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked\">\n                {dirent.file_tags.map((fileTag, index) => {\n                  let length = dirent.file_tags.length;\n                  return (\n                    <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                  );\n                })}\n              </div>\n              <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                {tagTitle}\n              </UncontrolledTooltip>\n            </Fragment>\n          )}\n        </td>\n        <td className=\"operation\">{this.renderItemOperation()}</td>\n        <td className=\"file-size\">{dirent.size && dirent.size}</td>\n        <td className=\"last-update\">{dirent.mtime_relative}</td>\n      </tr>\n    );\n    const mobileItem = (\n      <tr>\n        <td onClick={this.onItemClick}>\n          <div className=\"dir-icon\">\n            {dirent.encoded_thumbnail_src ?\n              <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n              <img src={iconUrl} width=\"24\" alt=\"\" />\n            }\n            {dirent.is_locked && <img className=\"locked\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n        </td>\n        <td onClick={this.onItemClick}>\n          {this.state.isRenameing ?\n            <Rename hasSuffix={dirent.type !== 'dir'} name={dirent.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel} /> :\n            <a href={dirent.type === 'dir' ? dirHref : fileHref}>{dirent.name}</a>\n          }\n          <br />\n          {dirent.size && <span className=\"item-meta-info\">{dirent.size}</span>}\n          <span className=\"item-meta-info\">{dirent.mtime_relative}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {dirent.starred !== undefined &&\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onItemStarred}>{dirent.starred ? gettext('Unstar') : gettext('Star')}</DropdownItem>}\n                {this.props.getDirentItemMenuList(dirent, true).map((item, index) => {\n                  if (item != 'Divider' && item.key != 'Open via Client') {\n                    return (\n                      <DropdownItem className=\"mobile-menu-item\" key={index} data-op={item.key} onClick={this.onMobileMenuItemClick}>{item.value}</DropdownItem>\n                    );\n                  }\n                })}\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {isDesktop ? desktopItem : mobileItem}\n        {this.state.isMoveDialogShow &&\n          <ModalPortal>\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemMove={this.props.onItemMove}\n              onCancelMove={this.onItemMoveToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <ModalPortal>\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              dirent={this.props.dirent}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemCopy={this.props.onItemCopy}\n              onCancelCopy={this.onItemCopyToggle}\n              repoEncrypted={this.props.repoEncrypted}\n            />\n          </ModalPortal>\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.props.dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.repoEncrypted}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nDirentListItem.propTypes = propTypes;\n\nexport default DirentListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  selectedDirentList: PropTypes.array,\n  onHideDirentsDraggablePreview: PropTypes.func\n};\n\nclass DirentsDraggedPreview extends React.Component {\n\n  componentDidMount() {\n    document.addEventListener('dragover', this.handleDragOver);\n    document.addEventListener('drop', this.handleDrop);\n    document.addEventListener('dragend', this.handleDragEnd);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('dragover', this.handleDragOver);\n    document.removeEventListener('drop', this.handleDrop);\n    document.removeEventListener('dragend', this.handleDragEnd);\n  }\n\n  handleDragEnd = () => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  handleDragOver = (event) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n\n    this.element.style.top = event.clientY + 'px';\n    this.element.style.left = event.clientX + 'px';\n  }\n\n  handleDrop = (event) => {\n    this.element.style.opacity = 0;\n    this.props.onHideDirentsDraggablePreview();\n  }\n\n  render() {\n    let{ selectedDirentList } = this.props;\n    const inlineStyle = {\n      position: 'absolute',\n      opacity: 1,\n      pointerEvents: 'none',\n      display: 'block',\n      left: '-9999px',\n      top: '-9999px',\n      zIndex: 101,\n      maxHeight: document.documentElement.clientHeight,\n      overflow: 'hidden'\n    };\n    return (\n      <div style={inlineStyle} ref={element => this.element = element}>\n        {selectedDirentList.map((dirent, index) => {\n          let iconUrl = Utils.getDirentIcon(dirent);\n          return (\n            <div key={index}>\n              {dirent.encoded_thumbnail_src ?\n                <img src={`${siteRoot}${dirent.encoded_thumbnail_src}`} className=\"thumbnail cursor-pointer\" alt=\"\" /> :\n                <img src={iconUrl} width=\"24\" alt='' />\n              }\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nDirentsDraggedPreview.propTypes = propTypes;\n\nexport default DirentsDraggedPreview;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, gettext, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport TextTranslation from '../../utils/text-translation';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport toaster from '../toast';\nimport ModalPortal from '../modal-portal';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport ImageDialog from '../dialog/image-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport DirentListItem from './dirent-list-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport DirentsDraggedPreview from '../draggable/dirents-dragged-preview';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirentListView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      fileType: '',\n      isCreateFileDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isProgressDialogShow: false,\n      downloadItems: [],\n      isMutipleOperation: true,\n      activeDirent: null,\n      isListDropTipShow: false,\n      isShowDirentsDraggablePreview: false,\n    };\n\n    this.enteredCounter = 0; // Determine whether to enter the child element to avoid dragging bubbling bugs\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n    this.isAdmin = props.currentRepoInfo.is_admin;\n    this.repoEncrypted = props.currentRepoInfo.encrypted;\n\n    this.clickedDirent = null;\n    this.direntItems = [];\n    this.currentItemRef = null;\n\n    this.zipToken = null;\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onItemRename = (dirent, newName) => {\n    let isDuplicated = this.props.direntList.some(item => {\n      return item.name === newName;\n    });\n    if (isDuplicated) {\n      let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n      errMessage = errMessage.replace('{name}', Utils.HTMLescape(newName));\n      toaster.danger(errMessage);\n      return false;\n    }\n    this.props.onItemRename(dirent, newName);\n  }\n\n  onItemRenameToggle = () => {\n    this.freezeItem();\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({activeDirent: null});\n    this.props.onItemSelected(dirent);\n  }\n\n  onDirentClick = (dirent) => {\n    if (this.props.selectedDirentList.length > 0 && !this.state.activeDirent ) {\n      return;\n    }\n    this.setState({activeDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  sortByName = (e) => {\n    e.preventDefault();\n    const sortBy = 'name';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortByTime = (e) => {\n    e.preventDefault();\n    const sortBy = 'time';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  sortBySize = (e) => {\n    e.preventDefault();\n    const sortBy = 'size';\n    const sortOrder = this.props.sortOrder == 'asc' ? 'desc' : 'asc';\n    this.props.sortItems(sortBy, sortOrder);\n  }\n\n  // for image popup\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.direntList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({isCreateFileDialogShow: !this.state.isCreateFileDialogShow});\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  checkDuplicatedName = (newName) => {\n    let direntList = this.props.direntList;\n    let isDuplicated = direntList.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onItemsDownload = () => {\n    let { path, repoID, selectedDirentList } = this.props;\n    if (selectedDirentList.length) {\n      if (selectedDirentList.length === 1 && !selectedDirentList[0].isDir()) {\n        let direntPath = Utils.joinPath(path, selectedDirentList[0].name);\n        let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n        location.href= url;\n        return;\n      }\n\n      let selectedDirentNames = selectedDirentList.map(dirent => {\n        return dirent.name;\n      });\n\n      this.setState({\n        isProgressDialogShow: true,\n        downloadItems: selectedDirentNames\n      });\n    }\n  }\n\n  onCloseZipDownloadDialog = () => {\n    this.setState({isProgressDialogShow: false});\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  // table-container contextmenu handle\n  onContainerClick = () => {\n    if (this.state.activeDirent) {\n      this.onDirentClick(null);\n    }\n  }\n\n  onContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n\n    if (this.props.selectedDirentList.length === 0) {\n      let id = 'dirent-container-menu';\n      let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n      this.handleContextClick(event, id, menuList);\n    } else {\n      if (this.props.selectedDirentList.length === 1) {\n        if (!this.state.activeDirent) {\n          let id = 'dirent-item-menu';\n          let dirent = this.props.selectedDirentList[0];\n          let menuList = this.getDirentItemMenuList(dirent, true);\n          this.handleContextClick(event, id, menuList, dirent);\n        } else {\n          this.onDirentClick(null);\n          event.preventDefault();\n          event.persist();\n          setTimeout(() => {\n            let id = 'dirent-container-menu';\n            let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n            this.handleContextClick(event, id, menuList);\n          }, 0);\n        }\n      } else {\n        let id = 'dirents-menu';\n        let menuList = [TextTranslation.MOVE, TextTranslation.COPY, TextTranslation.DOWNLOAD, TextTranslation.DELETE];\n        this.handleContextClick(event, id, menuList);\n      }\n    }\n  }\n\n  onContainerMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'New Folder':\n        this.onCreateFolderToggle();\n        break;\n      case 'New File':\n        this.onCreateFileToggle();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  onDirentsMenuItemClick = (operation) => {\n    switch(operation) {\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Download':\n        this.onItemsDownload();\n        break;\n      case 'Delete':\n        this.props.onItemsDelete();\n        break;\n      default:\n        break;\n    }\n\n    hideMenu();\n  }\n\n  // table-thread contextmenu handle -- Shield event\n  onThreadMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onThreadContextMenu = (event) => {\n    event.stopPropagation();\n  }\n\n  // table-dirent-item contextmenu handle\n  onItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    if (this.props.selectedDirentList.length > 1) {\n      return;\n    }\n    this.onDirentClick(dirent);\n    let id = 'dirent-item-menu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n  }\n\n  setDirentItemRef = (index) => item => {\n    this.direntItems[index] = item;\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    let index = this.getDirentIndex(currentObject);\n    this.direntItems[index].onMenuItemClick(operation, event);\n\n    hideMenu();\n  }\n\n  onShowMenu = (e) => {\n    this.freezeItem();\n  }\n\n  onHideMenu = (e) => {\n    this.unfreezeItem();\n  }\n\n  // contextmenu utils\n  getDirentIndex = (dirent) => {\n    let direntList = this.props.direntList;\n    let index = 0;\n    for (let i = 0; i < direntList.length; i++) {\n      if (direntList[i].name === dirent.name) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  onTableDragEnter = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    this.enteredCounter++;\n    if (this.enteredCounter !== 0) {\n      if (this.state.isListDropTipShow) {\n        return ;\n      }\n      this.setState({isListDropTipShow: true});\n    }\n  }\n\n  onTableDragOver = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    if (e.dataTransfer.dropEffect === 'copy') {\n      return;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onTableDragLeave = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    this.enteredCounter--;\n    if (this.enteredCounter === 0) {\n      this.setState({isListDropTipShow: false});\n    }\n  }\n\n  tableDrop = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    e.persist();\n    this.enteredCounter = 0;\n    this.setState({isListDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartItemData;\n\n    if (Array.isArray(dragStartItemData)) { //selected items\n      return;\n    }\n\n    if (nodeRootPath === this.props.path || nodeParentPath === this.props.path) {\n      return;\n    }\n\n    if (this.props.path.indexOf(nodeRootPath) !== -1) {\n      return;\n    }\n\n    this.props.onItemMove(this.props.currentRepoInfo, nodeDirent, this.props.path, nodeParentPath);\n  }\n\n  onShowDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: true,\n    });\n  }\n\n  onHideDirentsDraggablePreview = () => {\n    this.setState({\n      isShowDirentsDraggablePreview: false\n    });\n  }\n\n  render() {\n    const { direntList, sortBy, sortOrder } = this.props;\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    // sort\n    const sortByName = sortBy == 'name';\n    const sortByTime = sortBy == 'time';\n    const sortBySize = sortBy == 'size';\n    const sortIcon = sortOrder == 'asc' ? <span className=\"fas fa-caret-up\"></span> : <span className=\"fas fa-caret-down\"></span>;\n\n    const isDesktop = Utils.isDesktop();\n\n    return (\n      <div\n        className={`table-container ${this.state.isListDropTipShow ? 'table-drop-active' : ''}`}\n        onMouseDown={this.onContainerMouseDown}\n        onContextMenu={this.onContainerContextMenu}\n        onClick={this.onContainerClick}\n        onDragEnter={this.onTableDragEnter}\n        onDragOver={this.onTableDragOver}\n        onDragLeave={this.onTableDragLeave}\n        onDrop={this.tableDrop}\n      >\n        <table className={`table-hover ${isDesktop ? '': 'table-thead-hidden'}`}>\n          {isDesktop ? (\n            <thead onMouseDown={this.onThreadMouseDown} onContextMenu={this.onThreadContextMenu}>\n              <tr>\n                <th width=\"3%\" className=\"pl10\">\n                  <input type=\"checkbox\" className=\"vam\" onChange={this.props.onAllItemSelected} checked={this.props.isAllItemSelected}/>\n                </th>\n                <th width=\"3%\" className=\"pl10\">{/*icon */}</th>\n                <th width=\"5%\" className=\"pl10\">{/*star */}</th>\n                <th width=\"39%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByName}>{gettext('Name')} {sortByName && sortIcon}</a></th>\n                <th width=\"6%\">{/*tag */}</th>\n                <th width=\"18%\">{/*operation */}</th>\n                <th width=\"11%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortBySize}>{gettext('Size')} {sortBySize && sortIcon}</a></th>\n                <th width=\"15%\"><a className=\"d-block table-sort-op\" href=\"#\" onClick={this.sortByTime}>{gettext('Last Update')} {sortByTime && sortIcon}</a></th>\n              </tr>\n            </thead>\n          ) : (\n            <thead>\n              <tr>\n                <th width=\"12%\"></th>\n                <th width=\"80%\"></th>\n                <th width=\"8%\"></th>\n              </tr>\n            </thead>\n          )}\n          <tbody>\n            {direntList.map((dirent, index) => {\n              return (\n                <DirentListItem\n                  ref={this.setDirentItemRef(index)}\n                  key={index}\n                  dirent={dirent}\n                  path={this.props.path}\n                  repoID={this.props.repoID}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  isAdmin={this.isAdmin}\n                  isRepoOwner={this.isRepoOwner}\n                  repoEncrypted={this.repoEncrypted}\n                  enableDirPrivateShare={this.props.enableDirPrivateShare}\n                  isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                  onItemClick={this.props.onItemClick}\n                  onItemRenameToggle={this.onItemRenameToggle}\n                  onItemSelected={this.onItemSelected}\n                  onItemDelete={this.props.onItemDelete}\n                  onItemRename={this.onItemRename}\n                  onItemMove={this.props.onItemMove}\n                  onItemCopy={this.props.onItemCopy}\n                  updateDirent={this.props.updateDirent}\n                  isItemFreezed={this.state.isItemFreezed}\n                  freezeItem={this.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                  onDirentClick={this.onDirentClick}\n                  showImagePopup={this.showImagePopup}\n                  onItemMouseDown={this.onItemMouseDown}\n                  onItemContextMenu={this.onItemContextMenu}\n                  selectedDirentList={this.props.selectedDirentList}\n                  activeDirent={this.state.activeDirent}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  getDirentItemMenuList={this.getDirentItemMenuList}\n                  showDirentDetail={this.props.showDirentDetail}\n                  onItemsMove={this.props.onItemsMove}\n                  onShowDirentsDraggablePreview={this.onShowDirentsDraggablePreview}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n        <Fragment>\n          <ContextMenu\n            id={'dirent-container-menu'}\n            onMenuItemClick={this.onContainerMenuItemClick}\n          />\n          <ContextMenu\n            id={'dirent-item-menu'}\n            onMenuItemClick={this.onMenuItemClick}\n            onShowMenu={this.onShowMenu}\n            onHideMenu={this.onHideMenu}\n          />\n          <ContextMenu\n            id={'dirents-menu'}\n            onMenuItemClick={this.onDirentsMenuItemClick}\n          />\n          {this.state.isShowDirentsDraggablePreview &&\n            <ModalPortal>\n              <DirentsDraggedPreview\n                selectedDirentList={this.props.selectedDirentList}\n                onHideDirentsDraggablePreview={this.onHideDirentsDraggablePreview}\n                dragStartPosition={this.state.dragStartPosition}\n              />\n            </ModalPortal>\n          }\n          {this.state.isImagePopupOpen && (\n            <ModalPortal>\n              <ImageDialog\n                imageItems={this.state.imageItems}\n                imageIndex={this.state.imageIndex}\n                closeImagePopup={this.closeImagePopup}\n                moveToPrevImage={this.moveToPrevImage}\n                moveToNextImage={this.moveToNextImage}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFolderDialogShow && (\n            <ModalPortal>\n              <CreateFolder\n                parentPath={this.props.path}\n                onAddFolder={this.onAddFolder}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFolderCancel={this.onCreateFolderToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isCreateFileDialogShow && (\n            <ModalPortal>\n              <CreateFile\n                parentPath={this.props.path}\n                fileType={this.state.fileType}\n                onAddFile={this.onAddFile}\n                checkDuplicatedName={this.checkDuplicatedName}\n                addFileCancel={this.onCreateFileToggle}\n              />\n            </ModalPortal>\n          )}\n          {this.state.isMoveDialogShow &&\n            <MoveDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              isMutipleOperation={this.state.isMutipleOperation}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onCancelMove={this.onMoveToggle}\n            />\n          }\n          {this.state.isCopyDialogShow &&\n            <CopyDirentDialog\n              path={this.props.path}\n              repoID={this.props.repoID}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              selectedDirentList={this.props.selectedDirentList}\n              isMutipleOperation={this.state.isMutipleOperation}\n              onItemsCopy={this.props.onItemsCopy}\n              onCancelCopy={this.onCopyToggle}\n            />\n          }\n          {this.state.isProgressDialogShow &&\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={this.state.downloadItems}\n              toggleDialog={this.onCloseZipDownloadDialog}\n            />\n          }\n        </Fragment>\n      </div>\n    );\n  }\n}\n\nDirentListView.propTypes = propTypes;\n\nexport default DirentListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentListView from '../../components/dirent-list-view/dirent-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirListView extends React.Component {\n\n  render() {\n\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentListView\n          path={this.props.path}\n          currentRepoInfo={this.props.currentRepoInfo}\n          repoID={this.props.repoID}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          sortBy={this.props.sortBy}\n          sortOrder={this.props.sortOrder}\n          sortItems={this.props.sortItems}\n          onItemClick={this.props.onItemClick}\n          onItemSelected={this.props.onItemSelected}\n          onItemDelete={this.props.onItemDelete}\n          onItemRename={this.props.onItemRename}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          onDirentClick={this.props.onDirentClick}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          isAllItemSelected={this.props.isAllItemSelected}\n          onAllItemSelected={this.props.onAllItemSelected}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n          onItemsCopy={this.props.onItemsCopy}\n          onItemsDelete={this.props.onItemsDelete}\n          onAddFile={this.props.onAddFile}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n          showDirentDetail={this.props.showDirentDetail}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirListView.propTypes = propTypes;\n\nexport default DirListView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport MD5 from 'MD5';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { gettext, siteRoot, mediaUrl } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  showImagePopup: PropTypes.func.isRequired,\n  onGridItemContextMenu: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func.isRequired,\n  activeDirent: PropTypes.object,\n  onGridItemMouseDown: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  onItemMove: PropTypes.func.isRequired,\n};\n\nclass DirentGridItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGridSelected: false,\n      isGridDropTipShow: false,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({isGridSelected: false}, () => {\n      if (nextProps.activeDirent && nextProps.activeDirent.name === nextProps.dirent.name) {\n        this.setState({isGridSelected: true});\n      }\n    });\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  onItemClick = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const dirent = this.props.dirent;\n    if (this.props.dirent === this.props.activeDirent) {\n      this.setState({isGridSelected: false});\n      if (Utils.imageCheck(dirent.name)) {\n        this.props.showImagePopup(dirent);\n      } else {\n        this.props.onItemClick(dirent);\n      }\n    } else {\n      this.setState({isGridSelected: false});\n      this.props.onGridItemClick(this.props.dirent);\n    }\n  }\n\n  onItemLinkClick = (e) => {\n    e.preventDefault();\n    const dirent = this.props.dirent;\n    if (Utils.imageCheck(dirent.name)) {\n      this.props.showImagePopup(dirent);\n    } else {\n      this.props.onItemClick(dirent);\n    }\n  }\n\n  onGridItemDragStart = (e) => {\n    let dragStartItemData = {nodeDirent: this.props.dirent, nodeParentPath: this.props.path};\n    dragStartItemData = JSON.stringify(dragStartItemData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartItemData);\n  }\n\n  onGridItemDragEnter = (e) => {\n    if (this.props.dirent.type === 'dir') {\n      this.setState({isGridDropTipShow: true});\n    }\n  }\n\n  onGridItemDragOver = (e) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onGridItemDragLeave = (e) => {\n    this.setState({isGridDropTipShow: false});\n  }\n\n  onGridItemDragDrop = (e) => {\n    this.setState({isGridDropTipShow: false});\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartItemData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartItemData = JSON.parse(dragStartItemData);\n    let {nodeDirent, nodeParentPath} = dragStartItemData;\n    let dropItemData = this.props.dirent;\n\n    if (nodeDirent.name === dropItemData.name) {\n      return;\n    }\n\n    if (dropItemData.type !== 'dir') {\n      return;\n    }\n\n    let selectedPath = Utils.joinPath(this.props.path, this.props.dirent.name);\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, selectedPath, nodeParentPath);\n  }\n\n  onGridItemMouseDown = (event) =>{\n    this.props.onGridItemMouseDown(event);\n  }\n\n  getFileUrl = (url) => {\n    let fileUrlArr = url.split('/');\n    if (fileUrlArr.indexOf('48') !== -1) {\n      fileUrlArr.splice(fileUrlArr.indexOf('48'), 1, '192');\n    }\n    let fileUrl = fileUrlArr.join('/');\n    return fileUrl;\n  }\n\n  onGridItemContextMenu = (event) => {\n    let dirent = this.props.dirent;\n    this.props.onGridItemContextMenu(event, dirent);\n  }\n\n  render() {\n    let { dirent, path } = this.props;\n    let direntPath = Utils.joinPath(path, dirent.name);\n    let iconUrl = Utils.getDirentIcon(dirent, true);\n    let fileUrl = dirent.encoded_thumbnail_src ? this.getFileUrl(dirent.encoded_thumbnail_src) : '';\n\n    let toolTipID = '';\n    let tagTitle = '';\n    if (dirent.file_tags && dirent.file_tags.length > 0) {\n      toolTipID = MD5(dirent.name).slice(0, 7);\n      tagTitle = dirent.file_tags.map(item => item.name).join(' ');\n    }\n\n    let dirHref = '';\n    if (this.props.currentRepoInfo) {\n      dirHref = siteRoot + 'library/' + this.props.repoID + '/' + this.props.currentRepoInfo.repo_name + Utils.encodePath(direntPath);\n    }\n    let fileHref = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(direntPath);\n\n    let gridClass = 'grid-file-img-link cursor-pointer';\n    gridClass += this.state.isGridSelected ? ' grid-selected-active' : ' ';\n    gridClass += this.state.isGridDropTipShow ? ' grid-drop-show' : ' ';\n\n    let lockedInfo = gettext('locked by {name}');\n    lockedInfo = lockedInfo.replace('{name}', dirent.lock_owner_name);\n\n    return(\n      <Fragment>\n        <li className=\"grid-item\" onContextMenu={this.onGridItemContextMenu} onMouseDown={this.onGridItemMouseDown}>\n          <div\n            className={gridClass}\n            draggable=\"true\"\n            onClick={this.onItemClick}\n            onDragStart={this.onGridItemDragStart}\n            onDragEnter={this.onGridItemDragEnter}\n            onDragOver={this.onGridItemDragOver}\n            onDragLeave={this.onGridItemDragLeave}\n            onDrop={this.onGridItemDragDrop}\n          >\n            {dirent.encoded_thumbnail_src ?\n              <img src={`${siteRoot}${fileUrl}`} ref={this.gridIcon} className=\"thumbnail\" onClick={this.onItemClick} alt=\"\"/> :\n              <img src={iconUrl} ref={this.gridIcon} width=\"96\" alt='' />\n            }\n            {dirent.is_locked && <img className=\"grid-file-locked-icon\" src={mediaUrl + 'img/file-locked-32.png'} alt={gettext('locked')} title={lockedInfo}/>}\n          </div>\n          <div className=\"grid-file-name\" onDragStart={this.onGridItemDragStart} draggable=\"true\" >\n            {(dirent.type !== 'dir' && dirent.file_tags && dirent.file_tags.length > 0) && (\n              <Fragment>\n                <div id={`tag-list-title-${toolTipID}`} className=\"dirent-item tag-list tag-list-stacked d-inline-block align-middle\">\n                  {dirent.file_tags.map((fileTag, index) => {\n                    let length = dirent.file_tags.length;\n                    return (\n                      <span className=\"file-tag\" key={fileTag.id} style={{zIndex:length - index, backgroundColor:fileTag.color}}></span>\n                    );\n                  })}\n                </div>\n                <UncontrolledTooltip target={`tag-list-title-${toolTipID}`} placement=\"bottom\">\n                  {tagTitle}\n                </UncontrolledTooltip>\n              </Fragment>\n            )}\n            <a className={`grid-file-name-link ${this.state.isGridSelected ? 'grid-link-selected-active' : ''}`} href={dirent.type === 'dir' ? dirHref : fileHref} onClick={this.onItemLinkClick}>{dirent.name}</a>\n          </div>\n        </li>\n      </Fragment>\n    );\n  }\n}\n\nDirentGridItem.propTypes = propTypes;\nexport default DirentGridItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { siteRoot, thumbnailSizeForOriginal, username, isPro, enableFileComment, fileAuditEnabled, folderPermEnabled, canGenerateShareLink } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport URLDecorator from '../../utils/url-decorator';\nimport Loading from '../loading';\nimport ModalPortal from '../modal-portal';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport DirentGridItem from '../../components/dirent-grid-view/dirent-grid-item';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport TextTranslation from '../../utils/text-translation';\nimport MoveDirentDialog from '../dialog/move-dirent-dialog';\nimport CopyDirentDialog from '../dialog/copy-dirent-dialog';\nimport ShareDialog from '../dialog/share-dialog';\nimport ZipDownloadDialog from '../dialog/zip-download-dialog';\nimport EditFileTagDialog from '../dialog/edit-filetag-dialog';\nimport Rename from '../../components/dialog/rename-dirent';\nimport CreateFile from '../dialog/create-file-dialog';\nimport CreateFolder from '../dialog/create-folder-dialog';\nimport LibSubFolderPermissionDialog from '../dialog/lib-sub-folder-permission-dialog';\nimport toaster from '../toast';\n\nimport '../../css/grid-view.css';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object,\n  direntList: PropTypes.array.isRequired,\n  onAddFile: PropTypes.func,\n  onItemDelete: PropTypes.func,\n  onItemCopy: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string, // current path's user permission\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  onGridItemClick: PropTypes.func,\n  onFileTagChanged: PropTypes.func,\n  onAddFolder: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirentGridView extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImagePopupOpen: false,\n      imageItems: [],\n      imageIndex: 0,\n      // onmenuClick\n      isShareDialogShow: false,\n      isMoveDialogShow: false,\n      isCopyDialogShow: false,\n      isEditFileTagShow: false,\n      isZipDialogOpen: false,\n      isRenameDialogShow: false,\n      isCreateFolderDialogShow: false,\n      isCreateFileDialogShow: false,\n      isPermissionDialogOpen: false,\n\n      isMutipleOperation: false,\n      isGridItemFreezed: false,\n      activeDirent: null,\n    };\n    this.isRepoOwner = props.currentRepoInfo.owner_email === username;\n  }\n\n  onCreateFileToggle = () => {\n    this.setState({\n      isCreateFileDialogShow: !this.state.isCreateFileDialogShow,\n    });\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({activeDirent: dirent});\n    this.props.onGridItemClick(dirent);\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    this.setState({isCreateFileDialogShow: false});\n    this.props.onAddFile(filePath, isDraft);\n  }\n\n  onAddFolder = (dirPath) => {\n    this.setState({isCreateFolderDialogShow: false});\n    this.props.onAddFolder(dirPath);\n  }\n\n  onItemShare = (e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  closeSharedDialog = () => {\n    this.setState({isShareDialogShow: !this.state.isShareDialogShow});\n  }\n\n  onItemDelete = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation(); //for document event\n    this.props.onItemDelete(currentObject);\n  }\n\n  onMenuItemClick = (operation, currentObject, event) => {\n    hideMenu();\n    switch(operation) {\n      case 'Download':\n        this.onItemDownload(currentObject, event);\n        break;\n      case 'Share':\n        this.onItemShare(event);\n        break;\n      case 'Delete':\n        this.onItemDelete(currentObject, event);\n        break;\n      case 'Rename':\n        this.onItemRenameToggle();\n        break;\n      case 'Move':\n        this.onItemMoveToggle();\n        break;\n      case 'Copy':\n        this.onItemCopyToggle();\n        break;\n      case 'Tags':\n        this.onEditFileTagToggle();\n        break;\n      case 'Permission':\n        this.onPermissionItem();\n        break;\n      case 'Unlock':\n        this.onUnlockItem(currentObject);\n        break;\n      case 'Lock':\n        this.onLockItem(currentObject);\n        break;\n      case 'Comment':\n        this.onCommentItem();\n        break;\n      case 'History':\n        this.onHistory(currentObject);\n        break;\n      case 'New Folder':\n        this.onCreateFolderToggle(currentObject);\n        break;\n      case 'New File':\n        this.onCreateFileToggle(currentObject);\n        break;\n      case 'Access Log':\n        this.onAccessLog(currentObject);\n        break;\n      case 'Open via Client':\n        this.onOpenViaClient(currentObject);\n        break;\n      default:\n        break;\n    }\n  }\n\n  onEditFileTagToggle = () => {\n    this.setState({\n      isEditFileTagShow: !this.state.isEditFileTagShow\n    });\n  }\n\n  onFileTagChanged = () => {\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(this.props.path, dirent.name);\n    this.props.onFileTagChanged(dirent, direntPath);\n  }\n\n  getDirentPath = (dirent) => {\n    let path = this.props.path;\n    return path === '/' ? path + dirent.name : path + '/' + dirent.name;\n  }\n\n  closeZipDialog = () => {\n    this.setState({\n      isZipDialogOpen: false\n    });\n  }\n\n  onItemDownload = (currentObject, e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    let dirent = currentObject;\n    let repoID = this.props.repoID;\n    let direntPath = this.getDirentPath(dirent);\n    if (dirent.type === 'dir') {\n      this.setState({\n        isZipDialogOpen: true\n      });\n    } else {\n      let url = URLDecorator.getUrl({type: 'download_file_url', repoID: repoID, filePath: direntPath});\n      location.href = url;\n    }\n  }\n\n  onCreateFolderToggle = () => {\n    this.setState({\n      isCreateFolderDialogShow: !this.state.isCreateFolderDialogShow,\n    });\n  }\n\n  onItemRenameToggle = () => {\n    this.setState({\n      isRenameDialogShow: !this.state.isRenameDialogShow,\n    });\n  }\n\n  onItemMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onItemCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onPermissionItem = () => {\n    this.setState({isPermissionDialogOpen: !this.state.isPermissionDialogOpen});\n  }\n\n  onLockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.lockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', true);\n      this.props.updateDirent(currentObject, 'locked_by_me', true);\n      let lockName = username.split('@');\n      this.props.updateDirent(currentObject, 'lock_owner_name', lockName[0]);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUnlockItem = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    seafileAPI.unlockfile(repoID, filePath).then(() => {\n      this.props.updateDirent(currentObject, 'is_locked', false);\n      this.props.updateDirent(currentObject, 'locked_by_me', false);\n      this.props.updateDirent(currentObject, 'lock_owner_name', '');\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCommentItem = () => {\n    this.props.showDirentDetail('comments');\n  }\n\n  onHistory = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'file_revisions', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onAccessLog = (currentObject) => {\n    let filePath = this.getDirentPath(currentObject);\n    let path = siteRoot + 'repo/file-access/' + this.props.repoID + '/?p=' + encodeURIComponent(filePath) ;\n    window.open(path);\n  }\n\n  onOpenViaClient = (currentObject) => {\n    let repoID = this.props.repoID;\n    let filePath = this.getDirentPath(currentObject);\n    let url = URLDecorator.getUrl({type: 'open_via_client', repoID: repoID, filePath: filePath});\n    location.href = url;\n  }\n\n  onItemRename = (newName) => {\n    this.props.onItemRename(this.state.activeDirent, newName);\n  }\n\n  prepareImageItem = (item) => {\n    const useThumbnail = !this.repoEncrypted;\n    const name = item.name;\n\n    const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n    const isGIF = fileExt == 'gif';\n\n    const path = Utils.encodePath(Utils.joinPath(this.props.path, name));\n    const repoID = this.props.repoID;\n    let src;\n    if (useThumbnail && !isGIF) {\n      src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n    } else {\n      src = `${siteRoot}repo/${repoID}/raw${path}`;\n    }\n\n    return {\n      'name': name,\n      'url': `${siteRoot}lib/${repoID}/file${path}`,\n      'src': src\n    };\n  }\n\n  showImagePopup = (curItem) => {\n    let items = this.props.direntList.filter((item) => {\n      return Utils.imageCheck(item.name);\n    });\n\n    const imageItems = items.map((item) => {\n      return this.prepareImageItem(item);\n    });\n\n    this.setState({\n      isImagePopupOpen: true,\n      imageItems: imageItems,\n      imageIndex: items.indexOf(curItem)\n    });\n  }\n\n  closeImagePopup = () => {\n    this.setState({isImagePopupOpen: false});\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  checkDuplicatedName = (newName) => {\n    return Utils.checkDuplicatedNameInList(this.props.direntList, newName);\n  }\n\n  // common contextmenu handle\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onGridContainerMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  onGridItemMouseDown = (event) => {\n    this.onMouseDown(event);\n  }\n\n  gridContainerClick = () => {\n    if (!this.props.isDirentDetailShow) {\n      this.onGridItemClick(null);\n    }\n  }\n\n  onGridContainerContextMenu = (event) => {\n    event.preventDefault();\n    // Display menu items based on the permissions of the current path\n    let permission = this.props.userPerm;\n    if (permission !== 'admin' && permission !== 'rw') {\n      return;\n    }\n    let id = 'dirent-grid-container-menu';\n    let menuList = [TextTranslation.NEW_FOLDER, TextTranslation.NEW_FILE];\n    this.handleContextClick(event, id, menuList);\n  }\n\n  onGridItemContextMenu = (event, dirent) => {\n    // Display menu items according to the current dirent permission\n    let id = 'grid-item-contextmenu';\n    let menuList = this.getDirentItemMenuList(dirent, true);\n    this.handleContextClick(event, id, menuList, dirent);\n    this.props.onGridItemClick && this.props.onGridItemClick(dirent);\n  }\n\n  handleContextClick = (event, id, menuList, currentObject = null) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    this.setState({activeDirent: currentObject});\n\n    let showMenuConfig = {\n      id: id,\n      position: { x, y },\n      target: event.target,\n      currentObject: currentObject,\n      menuList: menuList,\n    };\n\n    if (menuList.length === 0) {\n      return;\n    }\n\n    showMenu(showMenuConfig);\n  }\n\n  getDirentItemMenuList = (dirent, isContextmenu) => {\n    const isRepoOwner = this.isRepoOwner;\n    const currentRepoInfo = this.props.currentRepoInfo;\n    return Utils.getDirentOperationList(isRepoOwner, currentRepoInfo, dirent, isContextmenu);\n  }\n\n  render() {\n    let {direntList, path} = this.props;\n    let dirent = this.state.activeDirent ? this.state.activeDirent : '';\n    let direntPath = Utils.joinPath(path, dirent.name);\n\n    if (this.props.isDirentListLoading) {\n      return (<Loading />);\n    }\n\n    return (\n      <Fragment>\n        <ul className=\"grid-view\" onClick={this.gridContainerClick} onContextMenu={this.onGridContainerContextMenu} onMouseDown={this.onGridContainerMouseDown}>\n          {\n            direntList.length !== 0 && direntList.map((dirent, index) => {\n              return (\n                <DirentGridItem\n                  key={index}\n                  dirent={dirent}\n                  repoID={this.props.repoID}\n                  path={this.props.path}\n                  onItemClick={this.props.onItemClick}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  showImagePopup={this.showImagePopup}\n                  onGridItemContextMenu={this.onGridItemContextMenu}\n                  onItemMove={this.props.onItemMove}\n                  onGridItemMouseDown={this.onGridItemMouseDown}\n                  onGridItemClick={this.onGridItemClick}\n                  activeDirent={this.state.activeDirent}\n                />\n              );\n            })\n          }\n        </ul>\n        <ContextMenu\n          id={'grid-item-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        <ContextMenu\n          id={'dirent-grid-container-menu'}\n          onMenuItemClick={this.onMenuItemClick}\n        />\n        {this.state.isCreateFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.props.path}\n              onAddFolder={this.onAddFolder}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onCreateFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.props.path}\n              onAddFile={this.onAddFile}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onCreateFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow &&\n          <MoveDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemMove={this.props.onItemMove}\n            onCancelMove={this.onMoveToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isZipDialogOpen &&\n          <ModalPortal>\n            <ZipDownloadDialog\n              repoID={this.props.repoID}\n              path={this.props.path}\n              target={dirent.name}\n              toggleDialog={this.closeZipDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isCopyDialogShow &&\n          <CopyDirentDialog\n            path={this.props.path}\n            repoID={this.props.repoID}\n            repoEncrypted={this.props.currentRepoInfo.encrypted}\n            isMutipleOperation={this.state.isMutipleOperation}\n            onItemCopy={this.props.onItemCopy}\n            onCancelCopy={this.onCopyToggle}\n            dirent={this.state.activeDirent}\n          />\n        }\n        {this.state.isEditFileTagShow &&\n          <EditFileTagDialog\n            repoID={this.props.repoID}\n            fileTagList={dirent.file_tags}\n            filePath={direntPath}\n            toggleCancel={this.onEditFileTagToggle}\n            onFileTagChanged={this.onFileTagChanged}\n          />\n        }\n        {this.state.isShareDialogShow &&\n          <ModalPortal>\n            <ShareDialog\n              itemType={dirent.type}\n              itemName={dirent.name}\n              itemPath={direntPath}\n              userPerm={dirent.permission}\n              repoID={this.props.repoID}\n              repoEncrypted={false}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              toggleDialog={this.closeSharedDialog}\n            />\n          </ModalPortal>\n        }\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              dirent={this.state.activeDirent}\n              onRename={this.onItemRename}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onItemRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isPermissionDialogOpen &&\n          <ModalPortal>\n            <LibSubFolderPermissionDialog\n              toggleDialog={this.onPermissionItem}\n              repoID={this.props.repoID}\n              folderPath={direntPath}\n              folderName={dirent.name}\n              isDepartmentRepo={this.props.isGroupOwnedRepo}\n            />\n          </ModalPortal>\n        }\n        {this.state.isImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirentGridView.propTypes = propTypes;\n\nexport default DirentGridView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport RepoInfoBar from '../../components/repo-info-bar';\nimport DirentGridView from '../../components/dirent-grid-view/dirent-grid-view';\nimport DirentNoneView from '../../components/dirent-list-view/dirent-none-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  readmeMarkdown: PropTypes.object,\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  direntList: PropTypes.array.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onGridItemClick: PropTypes.func,\n  onAddFile: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  isDirentListLoading: PropTypes.bool.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  onItemRename: PropTypes.func.isRequired,\n};\n\nclass DirGridView extends React.Component {\n\n  render() {\n    if (this.props.path === '/' && this.props.direntList.length === 0) {\n      return (\n        <DirentNoneView\n          path={this.props.path}\n          isDirentListLoading={this.props.isDirentListLoading}\n          onAddFile={this.props.onAddFile}\n        />\n      );\n    }\n    return (\n      <Fragment>\n        {this.props.isRepoInfoBarShow && (\n          <RepoInfoBar\n            repoID={this.props.repoID}\n            currentPath={this.props.path}\n            readmeMarkdown={this.props.readmeMarkdown}\n            draftCounts={this.props.draftCounts}\n            usedRepoTags={this.props.usedRepoTags}\n            updateUsedRepoTags={this.props.updateUsedRepoTags}\n            onFileTagChanged={this.props.onFileTagChanged}\n          />\n        )}\n        <DirentGridView\n          path={this.props.path}\n          repoID={this.props.repoID}\n          currentRepoInfo={this.props.currentRepoInfo}\n          isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n          userPerm={this.props.userPerm}\n          enableDirPrivateShare={this.props.enableDirPrivateShare}\n          direntList={this.props.direntList}\n          onAddFile={this.props.onAddFile}\n          onItemClick={this.props.onItemClick}\n          onItemDelete={this.props.onItemDelete}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          isDirentListLoading={this.props.isDirentListLoading}\n          updateDirent={this.props.updateDirent}\n          onRenameNode={this.props.onRenameNode}\n          showDirentDetail={this.props.showDirentDetail}\n          onGridItemClick={this.props.onGridItemClick}\n          isDirentDetailShow={this.props.isDirentDetailShow}\n          onItemRename={this.props.onItemRename}\n          onAddFolder={this.props.onAddFolder}\n          onFileTagChanged={this.props.onFileTagChanged}\n        />\n      </Fragment>\n    );\n  }\n}\n\nDirGridView.propTypes = propTypes;\n\nexport default DirGridView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Alert } from 'reactstrap';\n\nconst propTypes = {\n  currentNode: PropTypes.object,\n  onRename: PropTypes.func.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  checkDuplicatedName: PropTypes.func.isRequired,\n};\n\nclass Rename extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      newName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentWillMount() {\n    this.setState({newName: this.props.currentNode.object.name});\n  }\n\n  componentDidMount() {\n    let currentNode = this.props.currentNode;\n    this.changeState(currentNode);\n    this.newInput.focus();\n    let type = currentNode.object.type;\n    if (type === 'file') {\n      var endIndex = currentNode.object.name.lastIndexOf('.md');\n      this.newInput.setSelectionRange(0, endIndex, 'forward');\n    } else {\n      this.newInput.setSelectionRange(0, -1);\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.changeState(nextProps.currentNode);\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({newName: e.target.value});\n  }\n\n  handleSubmit = () => {\n    let { isValid, errMessage } = this.validateInput();\n    if (!isValid) {\n      this.setState({errMessage : errMessage});\n    } else {\n      let isDuplicated = this.checkDuplicatedName();\n      if (isDuplicated) {\n        let errMessage = gettext('The name \"{name}\" is already taken. Please choose a different name.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(this.state.newName));\n        this.setState({errMessage: errMessage});\n      } else {\n        this.props.onRename(this.state.newName);\n      }\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  changeState = (currentNode) => {\n    let name = currentNode.object.name;\n    this.setState({newName: name});\n  }\n\n  validateInput = () => {\n    let newName = this.state.newName.trim();\n    let isValid = true;\n    let errMessage = '';\n    if (!newName) {\n      isValid = false;\n      errMessage = gettext('Name is required.');\n      return { isValid, errMessage };\n    }\n\n    if (newName.indexOf('/') > -1) {\n      isValid = false;\n      errMessage = gettext('Name should not include ' + '\\'/\\'' + '.');\n      return { isValid, errMessage };\n    }\n\n    return { isValid, errMessage };\n  }\n\n  checkDuplicatedName = () => {\n    let isDuplicated = this.props.checkDuplicatedName(this.state.newName);\n    return isDuplicated;\n  }\n\n  render() {\n    let type = this.props.currentNode.object.type;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{type === 'file' ? gettext('Rename File') : gettext('Rename Folder') }</ModalHeader>\n        <ModalBody>\n          <p>{type === 'file' ? gettext('New file name'): gettext('New folder name')}</p>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} placeholder=\"newName\" value={this.state.newName} onChange={this.handleChange} />\n          {this.state.errMessage && <Alert color=\"danger\" className=\"mt-2\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nRename.propTypes = propTypes;\n\nexport default Rename;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport TreeView from '../../components/tree-view/tree-view';\nimport Loading from '../../components/loading';\nimport ModalPortal from '../../components/modal-portal';\nimport Rename from '../../components/dialog/rename-dialog';\nimport Copy from '../../components/dialog/copy-dirent-dialog';\nimport Move from '../../components/dialog/move-dirent-dialog';\nimport CreateFolder from '../../components/dialog/create-folder-dialog';\nimport CreateFile from '../../components/dialog/create-file-dialog';\nimport ImageDialog from '../../components/dialog/image-dialog';\nimport { siteRoot, thumbnailSizeForOriginal } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  currentPath: PropTypes.string.isRequired,\n  repoPermission: PropTypes.bool.isRequired,\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  repoID: PropTypes.string.isRequired,\n  navRate: PropTypes.number,\n  inResizing: PropTypes.bool.isRequired,\n  currentRepoInfo: PropTypes.object.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n};\n\nclass DirColumnNav extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      opNode: null,\n      isAddFileDialogShow: false,\n      isAddFolderDialogShow: false,\n      isRenameDialogShow: false,\n      isNodeImagePopupOpen: false,\n      imageNodeItems: [],\n      imageIndex: 0,\n      isCopyDialogShow: false,\n      isMoveDialogShow: false,\n      isMutipleOperation: false,\n    };\n    this.isNodeMenuShow = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({opNode: nextProps.currentNode});\n  }\n\n  onNodeClick = (node) => {\n    this.setState({opNode: node});\n    if (Utils.imageCheck(node.object.name)) {\n      this.showNodeImagePopup(node);\n      return;\n    }\n    this.props.onNodeClick(node);\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.setState({opNode: node});\n    switch (operation) {\n      case 'New Folder':\n        if (!node) {\n          this.onAddFolderToggle('root');\n        } else {\n          this.onAddFolderToggle();\n        }\n        break;\n      case 'New File':\n        if (!node) {\n          this.onAddFileToggle('root');\n        } else {\n          this.onAddFileToggle();\n        }\n        break;\n      case 'Rename':\n        this.onRenameToggle();\n        break;\n      case 'Delete':\n        this.onDeleteNode(node);\n        break;\n      case 'Copy':\n        this.onCopyToggle();\n        break;\n      case 'Move':\n        this.onMoveToggle();\n        break;\n      case 'Open in New Tab':\n        this.onOpenFile(node);\n        break;\n    }\n  }\n\n  onAddFileToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFileDialogShow: !this.state.isAddFileDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    }\n  }\n\n  onAddFolderToggle = (type) => {\n    if (type === 'root') {\n      let root = this.props.treeData.root;\n      this.setState({\n        isAddFolderDialogShow: !this.state.isAddFolderDialogShow,\n        opNode: root,\n      });\n    } else {\n      this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    }\n  }\n\n  onRenameToggle = () => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n  }\n\n  onCopyToggle = () => {\n    this.setState({isCopyDialogShow: !this.state.isCopyDialogShow});\n  }\n\n  onMoveToggle = () => {\n    this.setState({isMoveDialogShow: !this.state.isMoveDialogShow});\n  }\n\n  onAddFolderNode = (dirPath) => {\n    this.setState({isAddFolderDialogShow: !this.state.isAddFolderDialogShow});\n    this.props.onAddFolderNode(dirPath);\n  }\n\n  onAddFileNode = (filePath, isDraft) => {\n    this.setState({isAddFileDialogShow: !this.state.isAddFileDialogShow});\n    this.props.onAddFileNode(filePath, isDraft);\n  }\n\n  onRenameNode = (newName) => {\n    this.setState({isRenameDialogShow: !this.state.isRenameDialogShow});\n    let node = this.state.opNode;\n    this.props.onRenameNode(node, newName);\n  }\n\n  onDeleteNode = (node) => {\n    this.props.onDeleteNode(node);\n  }\n\n  onOpenFile = (node) => {\n    let newUrl = siteRoot + 'lib/' + this.props.repoID + '/file' + Utils.encodePath(node.path);\n    window.open(newUrl, '_blank');\n  }\n\n  checkDuplicatedName = (newName) => {\n    let node = this.state.opNode;\n    // root node to new node conditions: parentNode is null,\n    let parentNode = node.parentNode ? node.parentNode : node;\n    let childrenObject = parentNode.children.map(item => {\n      return item.object;\n    });\n    let isDuplicated = childrenObject.some(object => {\n      return object.name === newName;\n    });\n    return isDuplicated;\n  }\n\n  showNodeImagePopup = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n    let imageNames = items.map((item) => {\n      return item.object.name;\n    });\n    this.setState({\n      isNodeImagePopupOpen: true,\n      imageNodeItems: this.prepareImageItems(node),\n      imageIndex: imageNames.indexOf(node.object.name)\n    });\n  }\n\n  prepareImageItems = (node) => {\n    let childrenNode = node.parentNode.children;\n    let items = childrenNode.filter((item) => {\n      return Utils.imageCheck(item.object.name);\n    });\n\n    const useThumbnail = !this.props.currentRepoInfo.encrypted;\n    let prepareItem = (item) => {\n      const name = item.object.name;\n\n      const path = Utils.encodePath(Utils.joinPath(node.parentNode.path, name));\n      const fileExt = name.substr(name.lastIndexOf('.') + 1).toLowerCase();\n      const isGIF = fileExt === 'gif';\n\n      const repoID = this.props.repoID;\n      let src = '';\n      if (useThumbnail && !isGIF) {\n        src = `${siteRoot}thumbnail/${repoID}/${thumbnailSizeForOriginal}${path}`;\n      } else {\n        src = `${siteRoot}repo/${repoID}/raw${path}`;\n      }\n\n      return {\n        'name': name,\n        'url': `${siteRoot}lib/${repoID}/file${path}`,\n        'src': src\n      };\n    };\n\n    return items.map((item) => { return prepareItem(item); });\n  }\n\n  closeNodeImagePopup = () => {\n    this.setState({\n      isNodeImagePopupOpen: false\n    });\n  }\n\n  moveToPrevImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + imageItemsLength - 1) % imageItemsLength\n    }));\n  }\n\n  moveToNextImage = () => {\n    const imageItemsLength = this.state.imageNodeItems.length;\n    this.setState((prevState) => ({\n      imageIndex: (prevState.imageIndex + 1) % imageItemsLength\n    }));\n  }\n\n  stopTreeScrollPropagation = (e) => {\n    e.stopPropagation();\n  }\n\n  render() {\n    let flex = this.props.navRate ? '0 0 ' + this.props.navRate * 100 + '%' : '0 0 25%';\n    const select = this.props.inResizing ? 'none' : '';\n    return (\n      <Fragment>\n        <div className=\"dir-content-nav\" role=\"navigation\" style={{flex: (flex), userSelect: select}} onScroll={this.stopTreeScrollPropagation}>\n          {this.props.isTreeDataLoading ?\n            (<Loading/>) :\n            (<TreeView\n              repoPermission={this.props.repoPermission}\n              isNodeMenuShow={this.isNodeMenuShow}\n              treeData={this.props.treeData}\n              currentPath={this.props.currentPath}\n              onNodeClick={this.onNodeClick}\n              onNodeExpanded={this.props.onNodeExpanded}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onMenuItemClick={this.onMenuItemClick}\n              onFreezedItem={this.onFreezedItem}\n              onUnFreezedItem={this.onUnFreezedItem}\n              onItemMove={this.props.onItemMove}\n              currentRepoInfo={this.props.currentRepoInfo}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n            />)\n          }\n        </div>\n        {this.state.isAddFolderDialogShow && (\n          <ModalPortal>\n            <CreateFolder\n              parentPath={this.state.opNode.path}\n              onAddFolder={this.onAddFolderNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFolderCancel={this.onAddFolderToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isAddFileDialogShow && (\n          <ModalPortal>\n            <CreateFile\n              parentPath={this.state.opNode.path}\n              onAddFile={this.onAddFileNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              addFileCancel={this.onAddFileToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isRenameDialogShow && (\n          <ModalPortal>\n            <Rename\n              currentNode={this.state.opNode}\n              onRename={this.onRenameNode}\n              checkDuplicatedName={this.checkDuplicatedName}\n              toggleCancel={this.onRenameToggle}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCopyDialogShow && (\n          <ModalPortal>\n            <Copy\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemCopy={this.props.onItemCopy}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelCopy={this.onCopyToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isMoveDialogShow && (\n          <ModalPortal>\n            <Move\n              path={this.state.opNode.parentNode.path}\n              repoID={this.props.repoID}\n              dirent={this.state.opNode.object}\n              onItemMove={this.props.onItemMove}\n              repoEncrypted={this.props.currentRepoInfo.encrypted}\n              onCancelMove={this.onMoveToggle}\n              isMutipleOperation={this.state.isMutipleOperation}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isNodeImagePopupOpen && (\n          <ModalPortal>\n            <ImageDialog\n              imageItems={this.state.imageNodeItems}\n              imageIndex={this.state.imageIndex}\n              closeImagePopup={this.closeNodeImagePopup}\n              moveToPrevImage={this.moveToPrevImage}\n              moveToNextImage={this.moveToNextImage}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nDirColumnNav.defaultProps={\n  navRate: 0.25\n};\n\nDirColumnNav.propTypes = propTypes;\n\nexport default DirColumnNav;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport toaster from '../toast';\nimport WikiMarkdownViewer from '../wiki-markdown-viewer';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool,\n  hasDraft: PropTypes.bool,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n};\n\nclass DirColumnFile extends React.Component {\n\n  componentDidMount() {\n    if (this.props.hash) {\n      let hash = this.props.hash;\n      setTimeout(function() {\n        window.location.hash = hash;\n      }, 500);\n    }\n  }\n\n  onEditClick = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path) + '?mode=edit';\n    window.open(url);\n  }\n\n  onNewDraft = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    seafileAPI.createDraft(repoID, path).then(res => {\n      window.location.href = siteRoot + 'lib/' + res.data.origin_repo_id + '/file' + res.data.draft_file_path + '?mode=edit';\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onOpenFile = (e) => {\n    e.preventDefault();\n    let { path, repoID } = this.props;\n    let newUrl = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(path);\n    window.open(newUrl, '_blank');\n  }\n\n  goDraftPage = (e) => {\n    e.preventDefault();\n    this.props.goDraftPage();\n  }\n\n  render() {\n    if (this.props.isFileLoadedErr) {\n      return (\n        <div className=\"message err-tip\">{gettext('File does not exist.')}</div>\n      );\n    }\n    return (\n      <WikiMarkdownViewer\n        isTOCShow={false}\n        isFileLoading={this.props.isFileLoading}\n        markdownContent={this.props.content}\n        lastModified = {this.props.lastModified}\n        latestContributor={this.props.latestContributor}\n        onLinkClick={this.props.onLinkClick}\n        repoID={this.props.repoID}\n        path={this.props.path}\n      >\n        <Fragment>\n          <span className='wiki-open-file position-fixed' onClick={this.onOpenFile}>\n            <i className=\"fas fa-expand-arrows-alt\"></i>\n          </span>\n          {(!this.props.isDraft && this.props.hasDraft) &&\n            <div className='seafile-btn-view-review text-center mt-2'>\n              <div className='tag tag-green'>\n                {gettext('This file is in draft stage.')}\n                <span className=\"ml-2\" onClick={this.goDraftPage}>{gettext('View Draft')}</span>\n              </div>\n            </div>\n          }\n        </Fragment>\n      </WikiMarkdownViewer>\n    );\n  }\n}\n\nDirColumnFile.propTypes = propTypes;\n\nexport default DirColumnFile;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DirColumnNav from './dir-column-nav';\nimport DirColumnFile from './dir-column-file';\nimport DirListView from './dir-list-view';\n\nconst propTypes = {\n  path: PropTypes.string.isRequired,\n  repoID: PropTypes.string.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoPermission: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // repo content\n  isRepoInfoBarShow: PropTypes.bool.isRequired,\n  draftCounts: PropTypes.number.isRequired,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  isAllItemSelected: PropTypes.bool.isRequired,\n  onAllItemSelected: PropTypes.func.isRequired,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func,\n  showDirentDetail: PropTypes.func.isRequired,\n};\n\nclass DirColumnView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      inResizing: false,\n      navRate: 0.25,\n    };\n    this.containerWidth = null;\n  }\n\n  onResizeMouseUp = () => {\n    if (this.state.inResizing) {\n      this.setState({\n        inResizing: false\n      });\n    }\n    this.setCookie('navRate', this.state.navRate);\n  }\n\n  onResizeMouseDown = () => {\n    this.containerWidth = this.refs.viewModeContainer.clientWidth;\n    this.setState({\n      inResizing: true\n    });\n  };\n\n  onResizeMouseMove = (e) => {\n    let sizeNavWidth = this.containerWidth / 0.78 * 0.22 + 3;\n    let rate = (e.nativeEvent.clientX - sizeNavWidth) / this.containerWidth;\n    if (rate < 0.1) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.12,\n      });\n    }\n    else if (rate > 0.4) {\n      this.setState({\n        inResizing: false,\n        navRate: 0.38,\n      });\n    }\n    else {\n      this.setState({\n        navRate: rate\n      });\n    }\n  };\n\n  setCookie = (name, value) => {\n    let cookie = name + '=' + value + ';';\n    document.cookie = cookie;\n  }\n\n  getCookie = (cookiename) => {\n    let name = cookiename + '=';\n    let cookie = document.cookie.split(';');\n    for (let i = 0, len = cookie.length; i < len; i++) {\n      let c = cookie[i].trim();\n      if (c.indexOf(name) == 0) {\n        return c.substring(name.length, c.length) * 1;\n      }\n    }\n    return '';\n  }\n\n  componentWillMount() {\n    let rate = this.getCookie('navRate');\n    if (rate) {\n      this.setState({\n        navRate: rate,\n      });\n    }\n  }\n\n  render() {\n    const onResizeMove = this.state.inResizing ? this.onResizeMouseMove : null;\n    const select = this.state.inResizing ? 'none' : '';\n    const mainFlex = '1 0 ' + (1 - this.state.navRate - 0.05) * 100 + '%';\n    return (\n      <div className=\"dir-colunm-view\" onMouseMove={onResizeMove} onMouseUp={this.onResizeMouseUp} ref=\"viewModeContainer\">\n        <DirColumnNav\n          currentPath={this.props.path}\n          repoPermission={this.props.repoPermission}\n          isTreeDataLoading={this.props.isTreeDataLoading}\n          treeData={this.props.treeData}\n          currentNode={this.props.currentNode}\n          onNodeClick={this.props.onNodeClick}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onAddFolderNode={this.props.onAddFolderNode}\n          onAddFileNode={this.props.onAddFileNode}\n          onRenameNode={this.props.onRenameNode}\n          onDeleteNode={this.props.onDeleteNode}\n          repoID={this.props.repoID}\n          navRate={this.state.navRate}\n          inResizing={this.state.inResizing}\n          currentRepoInfo={this.props.currentRepoInfo}\n          onItemMove={this.props.onItemMove}\n          onItemCopy={this.props.onItemCopy}\n          selectedDirentList={this.props.selectedDirentList}\n          onItemsMove={this.props.onItemsMove}\n        />\n        <div className=\"dir-content-resize\" onMouseDown={this.onResizeMouseDown}></div>\n        <div className=\"dir-content-main\" style={{userSelect: select, flex: mainFlex}}>\n          {this.props.isViewFile ? (\n            <DirColumnFile\n              path={this.props.path}\n              repoID={this.props.repoID}\n              hash={this.props.hash}\n              isDraft={this.props.isDraft}\n              hasDraft={this.props.hasDraft}\n              goDraftPage={this.props.goDraftPage}\n              isFileLoading={this.props.isFileLoading}\n              isFileLoadedErr={this.props.isFileLoadedErr}\n              filePermission={this.props.filePermission}\n              content={this.props.content}\n              lastModified={this.props.lastModified}\n              latestContributor={this.props.latestContributor}\n              onLinkClick={this.props.onLinkClick}\n            />\n          ) : (\n            <DirListView\n              path={this.props.path}\n              repoID={this.props.repoID}\n              currentRepoInfo={this.props.currentRepoInfo}\n              isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n              userPerm={this.props.userPerm}\n              enableDirPrivateShare={this.props.enableDirPrivateShare}\n              isRepoInfoBarShow={this.props.isRepoInfoBarShow}\n              usedRepoTags={this.props.usedRepoTags}\n              readmeMarkdown={this.props.readmeMarkdown}\n              draftCounts={this.props.draftCounts}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              isDirentListLoading={this.props.isDirentListLoading}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n              onAddFolder={this.props.onAddFolder}\n              onAddFile={this.props.onAddFile}\n              onItemClick={this.props.onItemClick}\n              onItemSelected={this.props.onItemSelected}\n              onItemDelete={this.props.onItemDelete}\n              onItemRename={this.props.onItemRename}\n              onItemMove={this.props.onItemMove}\n              onItemCopy={this.props.onItemCopy}\n              onDirentClick={this.props.onDirentClick}\n              updateDirent={this.props.updateDirent}\n              isAllItemSelected={this.props.isAllItemSelected}\n              onAllItemSelected={this.props.onAllItemSelected}\n              selectedDirentList={this.props.selectedDirentList}\n              onItemsMove={this.props.onItemsMove}\n              onItemsCopy={this.props.onItemsCopy}\n              onItemsDelete={this.props.onItemsDelete}\n              onFileTagChanged={this.props.onFileTagChanged}\n              showDirentDetail={this.props.showDirentDetail}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirColumnView.propTypes = propTypes;\n\nexport default DirColumnView;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport CurDirPath from '../../components/cur-dir-path';\nimport DirentDetail from '../../components/dirent-detail/dirent-details';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport DirListView from '../../components/dir-view-mode/dir-list-view';\nimport DirGridView from '../../components/dir-view-mode/dir-grid-view';\nimport DirColumnView from '../../components/dir-view-mode/dir-column-view';\n\nimport '../../css/lib-content-view.css';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  currentMode: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired,\n  pathExist: PropTypes.bool.isRequired,\n  // repoinfo\n  currentRepoInfo: PropTypes.object.isRequired,\n  repoID: PropTypes.string.isRequired,\n  repoPermission: PropTypes.bool.isRequired,\n  enableDirPrivateShare: PropTypes.bool.isRequired,\n  isGroupOwnedRepo: PropTypes.bool.isRequired,\n  userPerm: PropTypes.string,\n  // path func\n  onTabNavClick: PropTypes.func.isRequired,\n  onMainNavBarClick: PropTypes.func.isRequired,\n  // file\n  isViewFile: PropTypes.bool.isRequired,\n  isFileLoadedErr: PropTypes.bool.isRequired,\n  hash: PropTypes.string,\n  isDraft: PropTypes.bool.isRequired,\n  hasDraft: PropTypes.bool.isRequired,\n  fileTags: PropTypes.array.isRequired,\n  goDraftPage: PropTypes.func.isRequired,\n  isFileLoading: PropTypes.bool.isRequired,\n  filePermission: PropTypes.string,\n  content: PropTypes.string,\n  lastModified: PropTypes.string,\n  latestContributor: PropTypes.string,\n  onLinkClick: PropTypes.func.isRequired,\n  // tree\n  isTreeDataLoading: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentNode: PropTypes.object,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onRenameNode: PropTypes.func.isRequired,\n  onDeleteNode: PropTypes.func.isRequired,\n  onAddFileNode: PropTypes.func.isRequired,\n  onAddFolderNode: PropTypes.func.isRequired,\n  // repo content\n  draftCounts: PropTypes.number,\n  usedRepoTags: PropTypes.array.isRequired,\n  readmeMarkdown: PropTypes.object,\n  updateUsedRepoTags: PropTypes.func.isRequired,\n  // list\n  isDirentListLoading: PropTypes.bool.isRequired,\n  direntList: PropTypes.array.isRequired,\n  sortBy: PropTypes.string.isRequired,\n  sortOrder: PropTypes.string.isRequired,\n  sortItems: PropTypes.func.isRequired,\n  updateDirent: PropTypes.func.isRequired,\n  onItemClick: PropTypes.func.isRequired,\n  onItemSelected: PropTypes.func.isRequired,\n  onItemDelete: PropTypes.func.isRequired,\n  onItemRename: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func.isRequired,\n  onItemCopy: PropTypes.func.isRequired,\n  onAddFolder: PropTypes.func.isRequired,\n  onAddFile: PropTypes.func.isRequired,\n  onFileTagChanged: PropTypes.func.isRequired,\n  isDirentSelected: PropTypes.bool.isRequired,\n  isAllDirentSelected: PropTypes.bool.isRequired,\n  onAllDirentSelected: PropTypes.func.isRequired,\n  isDirentDetailShow: PropTypes.bool.isRequired,\n  selectedDirent: PropTypes.object,\n  selectedDirentList: PropTypes.array.isRequired,\n  onItemsMove: PropTypes.func.isRequired,\n  onItemsCopy: PropTypes.func.isRequired,\n  onItemsDelete: PropTypes.func.isRequired,\n  closeDirentDetail: PropTypes.func.isRequired,\n  showDirentDetail: PropTypes.func.isRequired,\n  onDeleteRepoTag: PropTypes.func.isRequired,\n  updateDetail: PropTypes.bool.isRequired,\n  onListContainerScroll: PropTypes.func.isRequired,\n  onDirentClick: PropTypes.func.isRequired,\n  direntDetailPanelTab: PropTypes.string,\n};\n\nclass LibContentContainer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentDirent: null,\n    };\n\n    this.errMessage = (<div className=\"message err-tip\">{gettext('Folder does not exist.')}</div>);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.path !== this.props.path || nextProps.updateDetail !== this.props.updateDetail) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onPathClick = (path) => {\n    this.props.onMainNavBarClick(path);\n    this.props.closeDirentDetail();\n  }\n\n  onItemClick = (dirent) => {\n    this.props.onItemClick(dirent);\n    this.props.closeDirentDetail();\n  }\n\n  onGridItemClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  // on '<tr>'\n  onDirentClick = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onDirentClick(dirent);\n  }\n\n  onItemSelected = (dirent) => {\n    this.setState({currentDirent: dirent});\n    this.props.onItemSelected(dirent);\n  }\n\n  onItemDelete = (dirent) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemDelete(dirent);\n  }\n\n  onItemMove = (destRepo, dirent, selectedPath, currentPath) => {\n    this.checkCurrentDirent(dirent);\n    this.props.onItemMove(destRepo, dirent, selectedPath, currentPath);\n  }\n\n  checkCurrentDirent = (deletedDirent) => {\n    let { currentDirent } = this.state;\n    if (currentDirent && deletedDirent.name === currentDirent.name) {\n      this.setState({currentDirent: null});\n    }\n  }\n\n  onItemsScroll = (e) => {\n    let target = e.target;\n\n    if (target.scrollTop === 0) {\n      return;\n    }\n\n    if (target.scrollTop + target.clientHeight + 1 >= target.scrollHeight) {\n      this.props.onListContainerScroll();\n    }\n  }\n\n  render() {\n    let { path, repoID, usedRepoTags, readmeMarkdown, draftCounts } = this.props;\n    let isRepoInfoBarShow = false;\n    if (path === '/') {\n      if (usedRepoTags.length !== 0 || readmeMarkdown !== null || draftCounts !== 0) {\n        isRepoInfoBarShow = true;\n      }\n    }\n\n    return (\n      <Fragment>\n        <div className=\"cur-view-container\">\n          {this.props.currentRepoInfo.status === 'read-only' &&\n            <div className=\"readonly-tip-message\">\n              {gettext('This library has been set to read-only by admin and cannot be updated.')}\n            </div>\n          }\n          <div className=\"cur-view-path\">\n            <CurDirPath\n              repoID={repoID}\n              repoName={this.props.currentRepoInfo.repo_name}\n              pathPrefix={this.props.pathPrefix}\n              currentPath={this.props.path}\n              permission={this.props.repoPermission}\n              isViewFile={this.props.isViewFile}\n              onTabNavClick={this.props.onTabNavClick}\n              onPathClick={this.onPathClick}\n              updateUsedRepoTags={this.props.updateUsedRepoTags}\n              fileTags={this.props.fileTags}\n              onDeleteRepoTag={this.props.onDeleteRepoTag}\n              direntList={this.props.direntList}\n              sortBy={this.props.sortBy}\n              sortOrder={this.props.sortOrder}\n              sortItems={this.props.sortItems}\n            />\n          </div>\n          <div className={`cur-view-content lib-content-container ${this.props.currentMode === 'column' ? 'view-mode-container' : ''}`} onScroll={this.onItemsScroll}>\n            {!this.props.pathExist && this.errMessage}\n            {this.props.pathExist && (\n              <Fragment>\n                {this.props.currentMode === 'list' && (\n                  <DirListView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n                {this.props.currentMode === 'grid' && (\n                  <DirGridView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    repoPermission={this.props.repoPermission}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    onRenameNode={this.props.onRenameNode}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemDelete={this.props.onItemDelete}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    updateDirent={this.props.updateDirent}\n                    onAddFolder={this.props.onAddFolder}\n                    showDirentDetail={this.props.showDirentDetail}\n                    onGridItemClick={this.onGridItemClick}\n                    isDirentDetailShow={this.props.isDirentDetailShow}\n                    onItemRename={this.props.onItemRename}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                  />\n                )}\n                {this.props.currentMode === 'column' && (\n                  <DirColumnView\n                    path={this.props.path}\n                    repoID={repoID}\n                    currentRepoInfo={this.props.currentRepoInfo}\n                    repoPermission={this.props.repoPermission}\n                    isGroupOwnedRepo={this.props.isGroupOwnedRepo}\n                    userPerm={this.props.userPerm}\n                    enableDirPrivateShare={this.props.enableDirPrivateShare}\n                    isTreeDataLoading={this.props.isTreeDataLoading}\n                    treeData={this.props.treeData}\n                    currentNode={this.props.currentNode}\n                    onNodeClick={this.props.onNodeClick}\n                    onNodeCollapse={this.props.onNodeCollapse}\n                    onNodeExpanded={this.props.onNodeExpanded}\n                    onAddFolderNode={this.props.onAddFolder}\n                    onAddFileNode={this.props.onAddFile}\n                    onRenameNode={this.props.onRenameNode}\n                    onDeleteNode={this.props.onDeleteNode}\n                    isViewFile={this.props.isViewFile}\n                    isFileLoading={this.props.isFileLoading}\n                    isFileLoadedErr={this.props.isFileLoadedErr}\n                    hash={this.props.hash}\n                    isDraft={this.props.isDraft}\n                    hasDraft={this.props.hasDraft}\n                    goDraftPage={this.props.goDraftPage}\n                    filePermission={this.props.filePermission}\n                    content={this.props.content}\n                    lastModified={this.props.lastModified}\n                    latestContributor={this.props.latestContributor}\n                    onLinkClick={this.props.onLinkClick}\n                    isRepoInfoBarShow={isRepoInfoBarShow}\n                    usedRepoTags={this.props.usedRepoTags}\n                    readmeMarkdown={this.props.readmeMarkdown}\n                    draftCounts={this.props.draftCounts}\n                    updateUsedRepoTags={this.props.updateUsedRepoTags}\n                    isDirentListLoading={this.props.isDirentListLoading}\n                    direntList={this.props.direntList}\n                    sortBy={this.props.sortBy}\n                    sortOrder={this.props.sortOrder}\n                    sortItems={this.props.sortItems}\n                    onAddFolder={this.props.onAddFolder}\n                    onAddFile={this.props.onAddFile}\n                    onItemClick={this.onItemClick}\n                    onItemSelected={this.onItemSelected}\n                    onItemDelete={this.onItemDelete}\n                    onItemRename={this.props.onItemRename}\n                    onItemMove={this.onItemMove}\n                    onItemCopy={this.props.onItemCopy}\n                    onDirentClick={this.onDirentClick}\n                    updateDirent={this.props.updateDirent}\n                    isAllItemSelected={this.props.isAllDirentSelected}\n                    onAllItemSelected={this.props.onAllDirentSelected}\n                    selectedDirentList={this.props.selectedDirentList}\n                    onItemsMove={this.props.onItemsMove}\n                    onItemsCopy={this.props.onItemsCopy}\n                    onItemsDelete={this.props.onItemsDelete}\n                    onFileTagChanged={this.props.onFileTagChanged}\n                    showDirentDetail={this.props.showDirentDetail}\n                  />\n                )}\n              </Fragment>\n            )}\n          </div>\n        </div>\n        {this.props.isDirentDetailShow &&\n          <Fragment>\n            <div className=\"cur-view-detail\">\n              {(this.props.path === '/' && !this.state.currentDirent) ?\n                <LibDetail\n                  currentRepo={this.props.currentRepoInfo}\n                  closeDetails={this.props.closeDirentDetail}\n                /> :\n                <DirentDetail\n                  repoID={repoID}\n                  path={this.props.path}\n                  dirent={this.state.currentDirent}\n                  currentRepoInfo={this.props.currentRepoInfo}\n                  onFileTagChanged={this.props.onFileTagChanged}\n                  onItemDetailsClose={this.props.closeDirentDetail}\n                  direntDetailPanelTab={this.props.direntDetailPanelTab}\n                />\n              }\n            </div>\n          </Fragment>\n        }\n      </Fragment>\n    );\n  }\n}\n\nLibContentContainer.propTypes = propTypes;\n\nexport default LibContentContainer;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  resumableFile: PropTypes.object.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n};\n\nconst UPLOAD_UPLOADING = 'uploading';\nconst UPLOAD_ERROR = 'error';\nconst UPLOAD_ISSAVING = 'isSaving';\nconst UPLOAD_UPLOADED = 'uploaded';\n\nclass UploadListItem extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadState: UPLOAD_UPLOADING\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    let { resumableFile } = nextProps;\n    let uploadState = UPLOAD_UPLOADING;\n\n    if (resumableFile.error) {\n      uploadState = UPLOAD_ERROR;\n    } else {\n      if (resumableFile.remainingTime === 0 && !resumableFile.isSaved) {\n        uploadState = UPLOAD_ISSAVING;\n      }\n\n      if (resumableFile.isSaved) {\n        uploadState = UPLOAD_UPLOADED;\n      }\n    }\n\n    this.setState({uploadState: uploadState});\n  }\n\n  onUploadCancel = (e) => {\n    e.preventDefault();\n    this.props.onUploadCancel(this.props.resumableFile);\n  }\n\n  onUploadRetry = (e) => {\n    e.preventDefault();\n    this.props.onUploadRetry(this.props.resumableFile);\n  }\n\n  formatFileSize = (size) => {\n    if (typeof size !== 'number') {\n      return '';\n    }\n    if (size >= 1000 * 1000 * 1000) {\n      return (size / (1000 * 1000 * 1000)).toFixed(1) + ' G';\n    }\n    if (size >= 1000 * 1000) {\n      return (size / (1000 * 1000)).toFixed(1) + ' M';\n    }\n    if (size >= 1000) {\n      return (size / 1000).toFixed(1) + ' K';\n    }\n    return size.toFixed(1) + ' B';\n  }\n\n  render() {\n    let { resumableFile } = this.props;\n    let progress = Math.round(resumableFile.progress() * 100);\n    let error = resumableFile.error;\n\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\">{resumableFile.newFileName}</div>\n        </td>\n        <td>\n          <span className=\"file-size\">{this.formatFileSize(resumableFile.size)}</span>\n        </td>\n        <td className=\"upload-progress\">\n          {(this.state.uploadState === UPLOAD_UPLOADING || this.state.uploadState === UPLOAD_ISSAVING) &&\n            <Fragment>\n              {resumableFile.size >= (100 * 1000 * 1000) &&\n                <Fragment>\n                  {resumableFile.isUploading() && (\n                    <div className=\"progress-container\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                      {(resumableFile.remainingTime === -1) && <div className=\"progress-text\">{gettext('Preparing to upload...')}</div>}\n                      {(resumableFile.remainingTime > 0) && <div className=\"progress-text\">{gettext('Remaining')}{' '}{Utils.formatTime(resumableFile.remainingTime)}</div>}\n                      {(resumableFile.remainingTime === 0) && <div className=\"progress-text\">{gettext('Indexing...')}</div>}\n                    </div>\n                  )}\n                  {!resumableFile.isUploading() && (\n                    <div className=\"progress-container d-flex align-items-center\">\n                      <div className=\"progress\">\n                        <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                      </div>\n                    </div>\n                  )}\n                </Fragment>\n              }\n              {(resumableFile.size < (100 * 1000 * 1000)) &&\n                <div className=\"progress-container d-flex align-items-center\">\n                  <div className=\"progress\">\n                    <div className=\"progress-bar\" role=\"progressbar\" style={{width: `${progress}%`}} aria-valuenow={progress} aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                  </div>\n                </div>\n              }\n            </Fragment>\n          }\n          {this.state.uploadState === UPLOAD_ERROR && (\n            <div className=\"message err-message ml-0\" dangerouslySetInnerHTML={{__html: error}}></div>\n          )}\n        </td>\n        <td className=\"upload-operation\">\n          <Fragment>\n            {this.state.uploadState === UPLOAD_UPLOADING && (\n              <a href=\"#\" onClick={this.onUploadCancel}>{gettext('Cancel')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ERROR && (\n              <a href=\"#\" onClick={this.onUploadRetry}>{gettext('Retry')}</a>\n            )}\n            {this.state.uploadState === UPLOAD_ISSAVING && (\n              <span className=\"saving\">{gettext('Saving...')}</span>\n            )}\n            {this.state.uploadState === UPLOAD_UPLOADED && (\n              <span className=\"uploaded\">{gettext('Uploaded')}</span>\n            )}\n          </Fragment>\n        </td>\n      </tr>\n    );\n  }\n}\n\nUploadListItem.propTypes = propTypes;\n\nexport default UploadListItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, maxUploadFileSize } from '../../utils/constants';\n\nconst propTypes = {\n  file: PropTypes.object,\n};\n\nclass ForbidUploadListItem extends React.Component {\n\n  render() {\n    let { file } = this.props;\n    let msg = gettext('Please upload files less than {placeholder}M').replace('{placeholder}', maxUploadFileSize);\n    return (\n      <tr className=\"file-upload-item\">\n        <td className=\"upload-name\">\n          <div className=\"ellipsis\">{file.name}</div>\n        </td>\n\n        <td colSpan={3} className=\"error\">{msg}</td>\n      </tr>\n    );\n  }\n}\n\nForbidUploadListItem.propTypes = propTypes;\n\nexport default ForbidUploadListItem;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport UploadListItem from './upload-list-item';\nimport ForbidUploadListItem from './forbid-upload-list-item';\n\nconst propTypes = {\n  uploadBitrate: PropTypes.number.isRequired,\n  totalProgress: PropTypes.number.isRequired,\n  retryFileList: PropTypes.array.isRequired,\n  uploadFileList: PropTypes.array.isRequired,\n  forbidUploadFileList: PropTypes.array.isRequired,\n  onCloseUploadDialog: PropTypes.func.isRequired,\n  onCancelAllUploading: PropTypes.func.isRequired,\n  onUploadCancel: PropTypes.func.isRequired,\n  onUploadRetry: PropTypes.func.isRequired,\n  onUploadRetryAll: PropTypes.func.isRequired,\n  allFilesUploaded: PropTypes.bool.isRequired,\n};\n\nclass UploadProgressDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isMinimized: false\n    };\n  }\n\n  onCancelAllUploading = () => {\n    this.props.onCancelAllUploading();\n  }\n\n  onMinimizeUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.setState({isMinimized: !this.state.isMinimized});\n  }\n\n  onCloseUpload = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.onCloseUploadDialog();\n  }\n\n  render() {\n\n    let uploadBitrate = Utils.formatBitRate(this.props.uploadBitrate);\n    let uploadedMessage = gettext('File Upload');\n    let uploadingMessage = gettext('File Uploading...') + ' ' + this.props.totalProgress + '%' + ' (' + uploadBitrate + ')';\n\n    let uploadingOptions = (<span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>);\n\n    let uploadedOptions = (\n      <Fragment>\n        <span className=\"sf2-icon-minus\" onClick={this.onMinimizeUpload}></span>\n        <span className=\"sf2-icon-x1\" onClick={this.onCloseUpload}></span>\n      </Fragment>\n    );\n\n    let { totalProgress, allFilesUploaded, retryFileList } = this.props;\n\n    return (\n      <div className=\"uploader-list-view\" style={{height: this.state.isMinimized ? '2.25rem' : '20rem'}}>\n        <div className=\"uploader-list-header\">\n          <div className=\"title\">\n            {totalProgress === 100 ? uploadedMessage : uploadingMessage}\n          </div>\n          <div className=\"uploader-options\">\n            {totalProgress === 100 ||  allFilesUploaded ? uploadedOptions : uploadingOptions}\n          </div>\n        </div>\n        <div className=\"uploader-list-content\">\n          <table className=\"table-thead-hidden\">\n            <thead>\n              <tr>\n                <th width=\"35%\">{gettext('name')}</th>\n                <th width=\"15%\">{gettext('size')}</th>\n                <th width=\"35%\">{gettext('progress')}</th>\n                <th width=\"15%\">{gettext('state')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td className=\"text-right\" colSpan={3}>\n                  {retryFileList.length > 0 ?\n                    <span className=\"cursor-pointer\" onClick={this.props.onUploadRetryAll}>{gettext('Retry All')}</span>\n                    :\n                    <span className=\"cursor-pointer disabled-link\">{gettext('Retry All')}</span>\n                  }\n                </td>\n                <td className=\"text-right\" colSpan={1}>\n                  {!allFilesUploaded ?\n                    <span className=\"cursor-pointer\" onClick={this.onCancelAllUploading}>{gettext('Cancel All')}</span>\n                    :\n                    <span className=\"cursor-pointer disabled-link\" >{gettext('Cancel All')}</span>\n                  }\n                </td>\n              </tr>\n              {\n                this.props.forbidUploadFileList.map((file, index) => {\n                  return (<ForbidUploadListItem key={index} file={file} />);\n                })\n              }\n              {\n                this.props.uploadFileList.map((resumableFile, index) => {\n                  return (\n                    <UploadListItem\n                      key={index}\n                      resumableFile={resumableFile}\n                      onUploadCancel={this.props.onUploadCancel}\n                      onUploadRetry={this.props.onUploadRetry}\n                    />\n                  );\n                })\n              }\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}\n\nUploadProgressDialog.propTypes = propTypes;\n\nexport default UploadProgressDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nconst propTypes = {\n  currentResumableFile: PropTypes.object.isRequired,\n  replaceRepetitionFile: PropTypes.func.isRequired,\n  uploadFile: PropTypes.func.isRequired,\n  cancelFileUpload: PropTypes.func.isRequired,\n};\n\nclass UploadRemindDialog extends React.Component {\n\n  toggle = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.cancelFileUpload();\n  }\n\n  replaceRepetitionFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.replaceRepetitionFile();\n  }\n\n  uploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.props.uploadFile();\n  }\n\n  render() {\n\n    let title = gettext('Replace file {filename}?');\n    title = title.replace('{filename}', '<span class=\"a-simaulte\">' + this.props.currentResumableFile.fileName + '</span>');\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle} ><div dangerouslySetInnerHTML={{__html: title}}></div></ModalHeader>\n        <ModalBody>\n          <p>{gettext('A file with the same name already exists in this folder.')}</p>\n          <p>{gettext('Replacing it will overwrite its content.')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.replaceRepetitionFile}>{gettext('Replace')}</Button>\n          <Button color=\"primary\" onClick={this.uploadFile}>{gettext('Don\\'t replace')}</Button>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nUploadRemindDialog.propTypes = propTypes;\n\nexport default UploadRemindDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Resumablejs from '@seafile/resumablejs';\nimport MD5 from 'MD5';\nimport { resumableUploadFileBlockSize, maxUploadFileSize, maxNumberOfFilesForFileupload } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport UploadProgressDialog from './upload-progress-dialog';\nimport UploadRemindDialog from '../dialog/upload-remind-dialog';\nimport toaster from '../toast';\nimport '../../css/file-uploader.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  direntList: PropTypes.array.isRequired,\n  filetypes: PropTypes.array,\n  chunkSize: PropTypes.number,\n  withCredentials: PropTypes.bool,\n  testMethod: PropTypes.string,\n  testChunks: PropTypes.number,\n  simultaneousUploads: PropTypes.number,\n  fileParameterName: PropTypes.string,\n  minFileSizeErrorCallback: PropTypes.func,\n  fileTypeErrorCallback: PropTypes.func,\n  dragAndDrop: PropTypes.bool.isRequired,\n  path: PropTypes.string.isRequired,\n  onFileUploadSuccess: PropTypes.func.isRequired,\n};\n\nclass FileUploader extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      retryFileList: [],\n      uploadFileList: [],\n      forbidUploadFileList: [],\n      totalProgress: 0,\n      isUploadProgressDialogShow: false,\n      isUploadRemindDialogShow: false,\n      currentResumableFile: null,\n      uploadBitrate: 0,\n      allFilesUploaded: false,\n    };\n\n    this.uploadInput = React.createRef();\n\n    this.notifiedFolders = [];\n\n    this.timestamp = null;\n    this.loaded = 0;\n    this.bitrateInterval = 500; // Interval in milliseconds to calculate the bitrate\n    window.onbeforeunload = this.onbeforeunload;\n    this.isUploadLinkLoaded = false;\n  }\n\n  componentDidMount() {\n    this.resumable = new Resumablejs({\n      target: '',\n      query: this.setQuery || {},\n      fileType: this.props.filetypes,\n      maxFiles: maxNumberOfFilesForFileupload || undefined,\n      maxFileSize: maxUploadFileSize * 1000 * 1000 || undefined,\n      testMethod: this.props.testMethod || 'post',\n      testChunks: this.props.testChunks || false,\n      headers: this.setHeaders || {},\n      withCredentials: this.props.withCredentials || false,\n      chunkSize: parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1 * 1024 * 1024,\n      simultaneousUploads: this.props.simultaneousUploads || 1,\n      fileParameterName: this.props.fileParameterName,\n      generateUniqueIdentifier: this.generateUniqueIdentifier,\n      forceChunkSize: true,\n      maxChunkRetries: 3,\n      minFileSize: 0,\n    });\n\n    this.resumable.assignBrowse(this.uploadInput.current, true);\n\n    //Enable or Disable DragAnd Drop\n    if (this.props.dragAndDrop === true) {\n      this.resumable.enableDropOnDocument();\n    }\n\n    this.bindCallbackHandler();\n    this.bindEventHandler();\n  }\n\n  componentWillUnmount = () => {\n    window.onbeforeunload = null;\n    if (this.props.dragAndDrop === true) {\n      this.resumable.disableDropOnDocument();\n    }\n  }\n\n  onbeforeunload = () => {\n    if (window.uploader &&\n        window.uploader.isUploadProgressDialogShow &&\n        window.uploader.totalProgress !== 100) {\n      return '';\n    }\n  }\n\n  bindCallbackHandler = () => {\n    let { minFileSizeErrorCallback, fileTypeErrorCallback } = this.props;\n\n    if (this.maxFilesErrorCallback) {\n      this.resumable.opts.maxFilesErrorCallback = this.maxFilesErrorCallback;\n    }\n\n    if (minFileSizeErrorCallback) {\n      this.resumable.opts.minFileSizeErrorCallback = this.props.minFileSizeErrorCallback;\n    }\n\n    if (this.maxFileSizeErrorCallback) {\n      this.resumable.opts.maxFileSizeErrorCallback = this.maxFileSizeErrorCallback;\n    }\n\n    if (fileTypeErrorCallback) {\n      this.resumable.opts.fileTypeErrorCallback = this.props.fileTypeErrorCallback;\n    }\n\n  }\n\n  bindEventHandler = () => {\n    this.resumable.on('chunkingComplete', this.onChunkingComplete.bind(this));\n    this.resumable.on('fileAdded', this.onFileAdded.bind(this));\n    this.resumable.on('filesAddedComplete', this.filesAddedComplete.bind(this));\n    this.resumable.on('fileProgress', this.onFileProgress.bind(this));\n    this.resumable.on('fileSuccess', this.onFileUploadSuccess.bind(this));\n    this.resumable.on('progress', this.onProgress.bind(this));\n    this.resumable.on('complete', this.onComplete.bind(this));\n    this.resumable.on('pause', this.onPause.bind(this));\n    this.resumable.on('fileRetry', this.onFileRetry.bind(this));\n    this.resumable.on('fileError', this.onFileError.bind(this));\n    this.resumable.on('error', this.onError.bind(this));\n    this.resumable.on('beforeCancel', this.onBeforeCancel.bind(this));\n    this.resumable.on('cancel', this.onCancel.bind(this));\n    this.resumable.on('dragstart', this.onDragStart.bind(this));\n  }\n\n  maxFilesErrorCallback = (files, errorCount) => {\n    let maxFiles = maxNumberOfFilesForFileupload;\n    let message = gettext('Please upload no more than {maxFiles} files at a time.');\n    message = message.replace('{maxFiles}', maxFiles);\n    toaster.danger(message);\n  }\n\n  maxFileSizeErrorCallback = (file) => {\n    let { forbidUploadFileList } = this.state;\n    forbidUploadFileList.push(file);\n    this.setState({forbidUploadFileList: forbidUploadFileList});\n  }\n\n  onChunkingComplete = (resumableFile) => {\n\n    let allFilesUploaded = this.state.allFilesUploaded;\n    if (allFilesUploaded === true) {\n      this.setState({allFilesUploaded: false});\n    }\n\n    //get parent_dir relative_path\n    let path = this.props.path === '/' ? '/' : this.props.path + '/';\n    let fileName = resumableFile.fileName;\n    let relativePath = resumableFile.relativePath;\n    let isFile = fileName === relativePath;\n\n    //update formdata\n    resumableFile.formData = {};\n    if (isFile) { // upload file\n      resumableFile.formData  = {\n        parent_dir: path,\n      };\n    } else { // upload folder\n      let relative_path = relativePath.slice(0, relativePath.lastIndexOf('/') + 1);\n      resumableFile.formData  = {\n        parent_dir: path,\n        relative_path: relative_path\n      };\n    }\n  }\n\n  onFileAdded = (resumableFile, files) => {\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    // uploading is file and only upload one file\n    if (isFile && files.length === 1) {\n      let hasRepetition = false;\n      let direntList = this.props.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        if (direntList[i].type === 'file' && direntList[i].name === resumableFile.fileName) {\n          hasRepetition = true;\n          break;\n        }\n      }\n      if (hasRepetition) {\n        this.setState({\n          isUploadRemindDialogShow: true,\n          currentResumableFile: resumableFile,\n        });\n      } else {\n        this.setUploadFileList(this.resumable.files);\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumableUpload(resumableFile);\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      this.setUploadFileList(this.resumable.files);\n      if (!this.isUploadLinkLoaded) {\n        this.isUploadLinkLoaded = true;\n        let { repoID, path } = this.props;\n        seafileAPI.getFileServerUploadLink(repoID, path).then(res => {\n          this.resumable.opts.target = res.data + '?ret-json=1';\n          this.resumable.upload();\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    }\n  }\n\n  resumableUpload = (resumableFile) => {\n    let { repoID, path } = this.props;\n    seafileAPI.getFileUploadedBytes(repoID, path, resumableFile.fileName).then(res => {\n      let uploadedBytes = res.data.uploadedBytes;\n      let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n      let offset = Math.floor(uploadedBytes / blockSize);\n      resumableFile.markChunksCompleted(offset);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  filesAddedComplete = (resumable, files) => {\n    let { forbidUploadFileList } = this.state;\n    if (forbidUploadFileList.length > 0 && files.length === 0) {\n      this.setState({\n        isUploadProgressDialogShow: true,\n        totalProgress: 100\n      });\n    }\n  }\n\n  setUploadFileList = () => {\n    let uploadFileList = this.resumable.files;\n    this.setState({\n      uploadFileList: uploadFileList,\n      isUploadProgressDialogShow: true,\n    });\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n  }\n\n  onFileProgress = (resumableFile) => {\n    let uploadBitrate = this.getBitrate();\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        if (uploadBitrate) {\n          let lastSize = (item.size - (item.size * item.progress())) * 8;\n          let time = Math.floor(lastSize / uploadBitrate);\n          item.remainingTime = time;\n        }\n      }\n      return item;\n    });\n\n    this.setState({\n      uploadBitrate: uploadBitrate,\n      uploadFileList: uploadFileList\n    });\n  }\n\n  getBitrate = () => {\n    let loaded = 0;\n    let uploadBitrate = 0;\n    let now = new Date().getTime();\n\n    this.resumable.files.forEach(file => {\n      loaded += file.progress() * file.size;\n    });\n\n    if (this.timestamp) {\n      let timeDiff = (now - this.timestamp);\n      if (timeDiff < this.bitrateInterval) {\n        return this.state.uploadBitrate;\n      }\n\n      // 1. Cancel will produce loaded greater than this.loaded\n      // 2. reset can make this.loaded to be 0\n      if (loaded < this.loaded || this.loaded === 0) {\n        this.loaded = loaded; //\n      }\n\n      uploadBitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;\n    }\n\n    this.timestamp = now;\n    this.loaded = loaded;\n\n    return uploadBitrate;\n  }\n\n  onProgress = () => {\n    let progress = Math.round(this.resumable.progress() * 100);\n    this.setState({totalProgress: progress});\n    Utils.registerGlobalVariable('uploader', 'totalProgress', progress);\n  }\n\n  onFileUploadSuccess = (resumableFile, message) => {\n    let formData = resumableFile.formData;\n    let currentTime = new Date().getTime()/1000;\n    message = formData.replace ? message : JSON.parse(message)[0];\n    if (formData.relative_path) { // upload folder\n      let relative_path = formData.relative_path;\n      let dir_name = relative_path.slice(0, relative_path.indexOf('/'));\n      let dirent = {\n        id: message.id,\n        name: dir_name,\n        type: 'dir',\n        mtime: currentTime,\n      };\n\n      // update folders cache\n      let isExist = this.notifiedFolders.some(item => {return item.name === dirent.name;});\n      if (!isExist) {\n        this.notifiedFolders.push(dirent);\n        this.props.onFileUploadSuccess(dirent);\n      }\n\n      // update uploadFileList\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = relative_path + message.name;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    if (formData.replace) { // upload file -- replace exist file\n      let fileName = resumableFile.fileName;\n      let dirent = {\n        id: message,\n        name: fileName,\n        type: 'file',\n        mtime: currentTime\n      };\n      this.props.onFileUploadSuccess(dirent); // this contance: just one file\n\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.newFileName = fileName;\n          item.isSaved = true;\n        }\n        return item;\n      });\n      this.setState({uploadFileList: uploadFileList});\n\n      return;\n    }\n\n    // upload file -- add files\n    let dirent = {\n      id: message.id,\n      type: 'file',\n      name: message.name,\n      size: message.size,\n      mtime: currentTime,\n    };\n    this.props.onFileUploadSuccess(dirent); // this contance:  no repetition file\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        item.newFileName = message.name;\n        item.isSaved = true;\n      }\n      return item;\n    });\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  getFileServerErrorMessage = (key) => {\n    const errorMessage = {\n      'File locked by others.': gettext('File is locked by others.'),       // 403\n      'Invalid filename.': gettext('Invalid filename.'),                    // 440\n      'File already exists.': gettext('File already exists.'),              // 441\n      'File size is too large.': gettext('File size is too large.'),        // 442\n      'Out of quota.': gettext('Out of quota.'),                            // 443\n      'Internal error.': gettext('Internal Server Error'),                  // 500\n    }\n    return errorMessage[key] || key;\n  }\n\n  onFileError = (resumableFile, message) => {\n    let error = '';\n    if (!message) {\n      error = gettext('Network error');\n    } else {\n      // eg: '{\"error\": \"Internal error\" \\n }'\n      let errorMessage = message.replace(/\\n/g, '');\n      errorMessage  = JSON.parse(errorMessage);\n      error = this.getFileServerErrorMessage(errorMessage.error);\n    }\n\n    let uploadFileList = this.state.uploadFileList.map(item => {\n      if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n        this.state.retryFileList.push(item);\n        item.error = error;\n      }\n      return item;\n    });\n\n    this.loaded = 0;  // reset loaded data;\n    this.setState({\n      retryFileList: this.state.retryFileList,\n      uploadFileList: uploadFileList\n    });\n\n  }\n\n  onComplete = () => {\n    this.notifiedFolders = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({allFilesUploaded: true});\n  }\n\n  onPause = () => {\n\n  }\n\n  onError = (message) => {\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    // After the error, the user can switch windows\n    Utils.registerGlobalVariable('uploader', 'totalProgress', 100);\n  }\n\n  onFileRetry = () => {\n    // todo, cancel upload file, uploded again;\n  }\n\n  onBeforeCancel = () => {\n    // todo, giving a pop message ?\n  }\n\n  onCancel = () => {\n\n  }\n\n  setHeaders = (resumableFile, resumable) => {\n    let offset = resumable.offset;\n    let chunkSize = resumable.getOpt('chunkSize');\n    let fileSize = resumableFile.size === 0 ? 1 : resumableFile.size;\n    let startByte = offset !== 0 ? offset * chunkSize : 0;\n    let endByte = Math.min(fileSize, (offset + 1) * chunkSize) - 1;\n\n    if (fileSize - resumable.endByte < chunkSize && !resumable.getOpt('forceChunkSize')) {\n      endByte = fileSize;\n    }\n\n    let headers = {\n      'Accept': 'application/json; text/javascript, */*; q=0.01',\n      'Content-Disposition': 'attachment; filename=\"' + encodeURI(resumableFile.fileName) + '\"',\n      'Content-Range': 'bytes ' + startByte + '-' + endByte + '/' + fileSize,\n    };\n\n    return headers;\n  }\n\n  setQuery = (resumableFile) => {\n    let formData = resumableFile.formData;\n    return formData;\n  }\n\n  generateUniqueIdentifier = (file) => {\n    let relativePath = file.webkitRelativePath||file.relativePath||file.fileName||file.name;\n    return MD5(relativePath + new Date()) + relativePath;\n  }\n\n  onClick = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.stopPropagation();\n  }\n\n  onFileUpload = () => {\n    this.uploadInput.current.removeAttribute('webkitdirectory');\n\n    this.uploadInput.current.click();\n  }\n\n  onFolderUpload = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n    this.uploadInput.current.click();\n  }\n\n  onDragStart = () => {\n    this.uploadInput.current.setAttribute('webkitdirectory', 'webkitdirectory');\n  }\n\n  onCloseUploadDialog = () => {\n    this.loaded = 0;\n    this.resumable.files = [];\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n    this.setState({isUploadProgressDialogShow: false, uploadFileList: [], forbidUploadFileList: []});\n    Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', false);\n  }\n\n  onUploadCancel = (uploadingItem) => {\n\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (item.uniqueIdentifier === uploadingItem.uniqueIdentifier) {\n        item.cancel(); // execute cancel function will delete the file at the same time\n        return false;\n      }\n      return true;\n    });\n\n    if (!this.resumable.isUploading()) {\n      this.setState({\n        totalProgress: '100',\n        allFilesUploaded: true,\n      });\n      this.loaded = 0;\n    }\n\n    this.setState({uploadFileList: uploadFileList});\n  }\n\n  onCancelAllUploading = () => {\n    let uploadFileList = this.state.uploadFileList.filter(item => {\n      if (Math.round(item.progress() !== 1)) {\n        item.cancel();\n        return false;\n      }\n      return true;\n    });\n\n    this.loaded = 0;\n\n    this.setState({\n      allFilesUploaded: true,\n      totalProgress: '100',\n      uploadFileList: uploadFileList\n    });\n    // reset upload link loaded\n    this.isUploadLinkLoaded = false;\n  }\n\n  onUploadRetry = (resumableFile) => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n\n      let retryFileList = this.state.retryFileList.filter(item => {\n        return item.uniqueIdentifier !== resumableFile.uniqueIdentifier;\n      });\n      let uploadFileList = this.state.uploadFileList.map(item => {\n        if (item.uniqueIdentifier === resumableFile.uniqueIdentifier) {\n          item.error = null;\n          this.retryUploadFile(item);\n        }\n        return item;\n      });\n\n      this.setState({\n        retryFileList: retryFileList,\n        uploadFileList: uploadFileList\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onUploadRetryAll = () => {\n\n    seafileAPI.getFileServerUploadLink(this.props.repoID, this.props.path).then(res => {\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.state.retryFileList.forEach(item => {\n        item.error = false;\n        this.retryUploadFile(item);\n      });\n\n      let uploadFileList = this.state.uploadFileList.slice(0);\n      this.setState({\n        retryFileList: [],\n        uploadFileList: uploadFileList\n      });\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  retryUploadFile = (resumableFile) => {\n    let { repoID, path } = this.props;\n    let fileName = resumableFile.fileName;\n    let isFile = resumableFile.fileName === resumableFile.relativePath;\n    if (!isFile) {\n      let relative_path = resumableFile.formData.relative_path;\n      let prefix = path === '/' ? (path + relative_path) : (path + '/' + relative_path);\n      fileName = prefix + fileName;\n    }\n\n    resumableFile.bootstrap();\n    var firedRetry = false;\n    resumableFile.resumableObj.on('chunkingComplete', () => {\n      if(!firedRetry) {\n        seafileAPI.getFileUploadedBytes(repoID, path, fileName).then(res => {\n          let uploadedBytes = res.data.uploadedBytes;\n          let blockSize = parseInt(resumableUploadFileBlockSize) * 1024 * 1024 || 1024 * 1024;\n          let offset = Math.floor(uploadedBytes / blockSize);\n          resumableFile.markChunksCompleted(offset);\n\n          resumableFile.resumableObj.upload();\n\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      firedRetry = true;\n    });\n\n  }\n\n  replaceRepetitionFile = () => {\n    let { repoID, path } = this.props;\n    seafileAPI.getUpdateLink(repoID, path).then(res => {\n      this.resumable.opts.target = res.data;\n\n      let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n      resumableFile.formData['replace'] = 1;\n      resumableFile.formData['target_file'] = resumableFile.formData.parent_dir + resumableFile.fileName;\n      this.setState({isUploadRemindDialogShow: false});\n      this.setUploadFileList(this.resumable.files);\n      this.resumable.upload();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  uploadFile = () => {\n    let resumableFile = this.resumable.files[this.resumable.files.length - 1];\n    let { repoID, path } = this.props;\n    seafileAPI.getFileServerUploadLink(repoID, path).then((res) => {  // get upload link\n      this.resumable.opts.target = res.data + '?ret-json=1';\n      this.setState({\n        isUploadRemindDialogShow: false,\n        isUploadProgressDialogShow: true,\n        uploadFileList: [...this.state.uploadFileList, resumableFile]\n      }, () => {\n        this.resumable.upload();\n      });\n      Utils.registerGlobalVariable('uploader', 'isUploadProgressDialogShow', true);\n\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  cancelFileUpload = () => {\n    this.resumable.files.pop(); //delete latest file\n    this.setState({isUploadRemindDialogShow: false});\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"file-uploader-container\">\n          <div className=\"file-uploader\">\n            <input className=\"upload-input\" type=\"file\" ref={this.uploadInput} onClick={this.onClick}/>\n          </div>\n        </div>\n        {this.state.isUploadRemindDialogShow &&\n          <UploadRemindDialog\n            currentResumableFile={this.state.currentResumableFile}\n            replaceRepetitionFile={this.replaceRepetitionFile}\n            uploadFile={this.uploadFile}\n            cancelFileUpload={this.cancelFileUpload}\n          />\n        }\n        {this.state.isUploadProgressDialogShow &&\n          <UploadProgressDialog\n            retryFileList={this.state.retryFileList}\n            uploadFileList={this.state.uploadFileList}\n            forbidUploadFileList={this.state.forbidUploadFileList}\n            totalProgress={this.state.totalProgress}\n            uploadBitrate={this.state.uploadBitrate}\n            allFilesUploaded={this.state.allFilesUploaded}\n            onCloseUploadDialog={this.onCloseUploadDialog}\n            onCancelAllUploading={this.onCancelAllUploading}\n            onUploadCancel={this.onUploadCancel}\n            onUploadRetry={this.onUploadRetry}\n            onUploadRetryAll={this.onUploadRetryAll}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nFileUploader.propTypes = propTypes;\n\nexport default FileUploader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\n\nconst propTypes = {\n  type: PropTypes.oneOf(['move', 'copy']).isRequired,\n  asyncOperatedFilesLength: PropTypes.number.isRequired,\n  asyncOperationProgress: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass CopyMoveDirentProgressDialog extends React.Component {\n\n  render() {\n\n    let { type , asyncOperationProgress, asyncOperatedFilesLength } = this.props;\n    let title = type === 'move' ? gettext('Move {num} items') : gettext('Copy {num} items');\n    title = title.replace('{num}', asyncOperatedFilesLength);\n    let progressStyle = {\n      width: asyncOperationProgress + '%',\n      lineHeight: '40px',\n      textAlign: 'left',\n    };\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.props.toggleDialog}>{title}</ModalHeader>\n        <ModalBody style={{minHeight: '80px'}}>\n          <div className=\"progress\" style={{height: '40px'}}>\n            <div\n              className=\"progress-bar pl-2\"\n              role=\"progressbar\"\n              style={progressStyle}\n              aria-valuenow={asyncOperationProgress}\n              aria-valuemin=\"0\"\n              aria-valuemax=\"100\"\n            >\n              {asyncOperationProgress + '%'}\n            </div>\n          </div>\n        </ModalBody>\n      </Modal>\n    );\n  }\n}\n\nCopyMoveDirentProgressDialog.propTypes = propTypes;\n\nexport default CopyMoveDirentProgressDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport { gettext, siteRoot, username, isDocs } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport collabServer from '../../utils/collab-server';\nimport Dirent from '../../models/dirent';\nimport FileTag from '../../models/file-tag';\nimport RepoTag from '../../models/repo-tag';\nimport RepoInfo from '../../models/repo-info';\nimport TreeNode from '../../components/tree-view/tree-node';\nimport treeHelper from '../../components/tree-view/tree-helper';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport LibDecryptDialog from '../../components/dialog/lib-decrypt-dialog';\nimport LibContentToolbar from './lib-content-toolbar';\nimport LibContentContainer from './lib-content-container';\nimport FileUploader from '../../components/file-uploader/file-uploader';\nimport CopyMoveDirentProgressDialog from '../../components/dialog/copy-move-dirent-progress-dialog';\n\nconst propTypes = {\n  pathPrefix: PropTypes.array.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  onMenuClick: PropTypes.func.isRequired,\n  repoID: PropTypes.string,\n};\n\nclass LibContentView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentMode: cookie.load('seafile_view_mode') || 'list',\n      path: '',\n      pathExist: true,\n      isViewFile: false,\n      hash: '',\n      currentRepoInfo: null,\n      repoName: '',\n      repoPermission: true,\n      repoEncrypted: false,\n      libNeedDecrypt: false,\n      isGroupOwnedRepo: false,\n      userPerm: '',\n      selectedDirentList: [],\n      isDraft: false,\n      hasDraft: false,\n      fileTags: [],\n      relatedFiles: [],\n      draftID: '',\n      draftCounts: 0,\n      usedRepoTags: [],\n      readmeMarkdown: null,\n      isTreeDataLoading: true,\n      treeData: treeHelper.buildTree(),\n      currentNode: null,\n      isFileLoading: true,\n      isFileLoadedErr: false,\n      filePermission: '',\n      content: '',\n      lastModified: '',\n      latestContributor: '',\n      isDirentListLoading: true,\n      direntList: [],\n      isDirentSelected: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isAllDirentSelected: false,\n      dirID: '',  // for update dir list\n      errorMsg: '',\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n      updateDetail: false,\n      itemsShowLength: 100,\n      isSessionExpired: false,\n      isCopyMoveProgressDialogShow: false,\n      asyncCopyMoveTaskId: '',\n      asyncOperationType: 'move',\n      asyncOperationProgress: 0,\n      asyncOperatedFilesLength: 0,\n    };\n\n    this.oldonpopstate = window.onpopstate;\n    window.onpopstate = this.onpopstate;\n    this.lastModifyTime = new Date();\n    this.isNeedUpdateHistoryState = true; // Load, refresh page, switch mode for the first time, no need to set historyState\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n  }\n\n  showDirentDetail = (direntDetailPanelTab) => {\n    if (direntDetailPanelTab) {\n      this.setState({ direntDetailPanelTab: direntDetailPanelTab }, () => {\n        this.setState({ isDirentDetailShow: true });\n      });\n    } else {\n      this.setState({\n        direntDetailPanelTab: '',\n        isDirentDetailShow: true\n      });\n    }\n  }\n\n  toggleDirentDetail = () => {\n    this.setState({\n      direntDetailPanelTab: '',\n      isDirentDetailShow: !this.state.isDirentDetailShow\n    });\n  }\n\n  closeDirentDetail = () => {\n    this.setState({\n      isDirentDetailShow: false,\n      direntDetailPanelTab: '',\n    });\n  }\n\n  componentWillMount() {\n    const hash = window.location.hash;\n    if (hash.slice(0, 1) === '#') {\n      this.setState({hash: hash});\n    }\n  }\n\n  componentDidMount() {\n    // eg: http://127.0.0.1:8000/library/repo_id/repo_name/**/**/\\\n    let repoID = this.props.repoID;\n    let location = window.location.href.split('#')[0];\n    location = decodeURIComponent(location);\n    seafileAPI.getRepoInfo(repoID).then(res => {\n      let repoInfo = new RepoInfo(res.data);\n      let isGroupOwnedRepo = repoInfo.owner_email.indexOf('@seafile_group') > -1;\n      this.setState({\n        currentRepoInfo: repoInfo,\n        repoName: repoInfo.repo_name,\n        libNeedDecrypt: repoInfo.lib_need_decrypt,\n        repoEncrypted: repoInfo.encrypted,\n        repoPermission: repoInfo.permission === 'rw',\n        isGroupOwnedRepo: isGroupOwnedRepo,\n      });\n\n      let repoID = repoInfo.repo_id;\n      let path = location.slice(location.indexOf(repoID) + repoID.length + 1); // get the string after repoID\n      path = path.slice(path.indexOf('/')); // get current path\n\n      this.isNeedUpdateHistoryState = false;\n\n      this.setState({path: path});\n\n      if (!repoInfo.lib_need_decrypt) {\n        this.loadDirData(path);\n      }\n    }).catch(error => {\n      if (error.response) {\n        if (error.response.status == 403) {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Permission denied')\n          });\n\n          let errorMsg = gettext('Permission denied');\n          toaster.danger(errorMsg);\n        } else {\n          this.setState({\n            isDirentListLoading: false,\n            errorMsg: gettext('Error')\n          });\n        }\n      } else {\n        this.setState({\n          isDirentListLoading: false,\n          errorMsg: gettext('Please check the network.')\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    window.onpopstate = this.oldonpopstate;\n    collabServer.unwatchRepo(this.props.repoID, this.onRepoUpdateEvent);\n  }\n\n  componentDidUpdate() {\n    this.lastModifyTime = new Date();\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.key) { // root path\n      if (this.state.path === '/') {\n        return;\n      } else {\n        let path = '/';\n        this.loadDirentList(path);\n        this.setState({\n          path: path,\n          isViewFile: false\n        });\n      }\n    } else if (event.state && event.state.path) { // file path\n      let path = event.state.path;\n      if (this.state.currentMode === 'column') {\n        if (Utils.isMarkdownFile(path)) { // Judging not strict\n          this.showFile(path);\n          return;\n        }\n      }\n      this.loadDirentList(path);\n      this.setState({\n        path: path,\n        isViewFile: false\n      });\n    }\n  }\n\n  onRepoUpdateEvent = () => {\n    let currentTime = new Date();\n    if ((parseFloat(currentTime - this.lastModifyTime)/1000) <= 5) {\n      return;\n    }\n    let repoID = this.props.repoID;\n    let { path, dirID } = this.state;\n\n    if (this.state.currentMode === 'column') {\n      if (this.state.isViewFile) {\n        this.updataColumnMarkdownData(path);\n      } else {\n        seafileAPI.dirMetaData(repoID, path).then((res) => {\n          if (res.data.id !== dirID) {\n            this.loadDirentList(path);\n          }\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n    } else {\n      seafileAPI.dirMetaData(repoID, path).then((res) => {\n        if (res.data.id !== dirID) {\n          this.loadDirentList(path);\n        }\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  updateUsedRepoTags = () => {\n    let repoID = this.props.repoID;\n    seafileAPI.listRepoTags(repoID).then(res => {\n      let usedRepoTags = [];\n      res.data.repo_tags.forEach(item => {\n        let usedRepoTag = new RepoTag(item);\n        if (usedRepoTag.fileCount > 0) {\n          usedRepoTags.push(usedRepoTag);\n        }\n      });\n      this.setState({usedRepoTags: usedRepoTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  updateReadmeMarkdown = (direntList) => {\n    this.setState({readmeMarkdown: null});\n    direntList.some(item => {\n      let fileName = item.name.toLowerCase();\n      if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n        this.setState({readmeMarkdown: item});\n        return true;\n      }\n    });\n  }\n\n  updataColumnMarkdownData = (filePath) => {\n    let repoID = this.props.repoID;\n    // update state\n    this.setState({\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          if (this.state.content !== res.data) {\n            this.setState({isFileLoading: true});\n          }\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch(() => {\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n  }\n\n  // load data\n  loadDirData = (path) => {\n    let repoID = this.props.repoID;\n\n    // listen current repo\n    collabServer.watchRepo(repoID, this.onRepoUpdateEvent);\n\n    // list used FileTags\n    this.updateUsedRepoTags();\n\n    // list draft counts and revierw counts\n    if (isDocs) {\n      seafileAPI.getRepoDraftCounts(repoID).then(res => {\n        this.setState({\n          draftCounts: res.data.draft_counts,\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n\n    if (Utils.isMarkdownFile(path)) {\n      seafileAPI.getFileInfo(this.props.repoID, path).then(() => {\n        if (this.state.currentMode !== 'column') {\n          cookie.save('seafile_view_mode', 'column');\n          this.setState({currentMode: 'column'});\n        }\n        this.loadSidePanel(path);\n        this.showFile(path);\n      }).catch(() => {\n        if (this.state.currentMode === 'column') { // After an error occurs, follow dir\n          this.loadSidePanel(path);\n          this.showDir(path);\n        } else {\n          this.showDir(path);\n        }\n      });\n    } else {\n      if (this.state.currentMode === 'column') {\n        this.loadSidePanel(path);\n        this.showDir(path);\n      } else {\n        this.showDir(path);\n      }\n    }\n  }\n\n  loadSidePanel = (path) => {\n    let repoID = this.props.repoID;\n    if (path === '/') {\n      seafileAPI.listDir(repoID, '/').then(res => {\n        let tree = this.state.treeData;\n        this.addResponseListToNode(res.data.dirent_list, tree.root);\n        this.setState({\n          isTreeDataLoading: false,\n          treeData: tree\n        });\n      }).catch(() => {\n        this.setState({isTreeDataLoading: false});\n      });\n    } else {\n      this.loadNodeAndParentsByPath(path);\n    }\n  }\n\n  showDir = (path) => {\n    let repoID = this.props.repoID;\n\n    if (!this.state.isSessionExpired) {\n      // update stste\n      this.setState({\n        isDirentListLoading: true,\n        isViewFile: false,\n        selectedDirentList: [],\n      });\n    }\n\n    // update data\n    this.loadDirentList(path);\n    this.resetShowLength();\n\n    if (!this.isNeedUpdateHistoryState) {\n      this.isNeedUpdateHistoryState = true;\n      return;\n    }\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n    window.history.pushState({url: url, path: path}, path, url);\n  }\n\n  showFile = (filePath) => {\n    let repoID = this.props.repoID;\n\n    if (this.state.currentMode === 'column') {\n      seafileAPI.listFileTags(repoID, filePath).then(res => {\n        let fileTags = res.data.file_tags.map(item => {\n          return new FileTag(item);\n        });\n        this.setState({fileTags: fileTags});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n      seafileAPI.listRelatedFiles(repoID, filePath).then(res => {\n        let relatedFiles = res.data.related_files.map((relatedFile) => {\n          return relatedFile;\n        });\n        this.setState({relatedFiles: relatedFiles});\n      }).catch((error) => {\n        if (error.response.status === 500) {\n          this.setState({relatedFiles: []});\n        }\n      });\n    }\n\n    // update state\n    this.setState({\n      isFileLoading: true,\n      path: filePath,\n      isViewFile: true\n    });\n\n    // update data\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      let { mtime, permission, last_modifier_name, is_draft, has_draft, draft_id } = res.data;\n      seafileAPI.getFileDownloadLink(repoID, filePath).then((res) => {\n        seafileAPI.getFileContent(res.data).then((res) => {\n          this.setState({\n            content: res.data,\n            filePermission: permission,\n            latestContributor: last_modifier_name,\n            lastModified: moment.unix(mtime).fromNow(),\n            isFileLoading: false,\n            isFileLoadedErr: false,\n            isDraft: is_draft,\n            hasDraft: has_draft,\n            draftID: draft_id\n          });\n        });\n      });\n    }).catch((err) => {\n      let errMsg = Utils.getErrorMsg(err, true);\n      if (!err.response || err.response.status !== 403) {\n        toaster.danger(errMsg);\n      }\n      this.setState({\n        isFileLoading: false,\n        isFileLoadedErr: true,\n      });\n    });\n\n    // update location\n    let repoInfo = this.state.currentRepoInfo;\n    let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(filePath);\n    window.history.pushState({url: url, path: filePath}, filePath, url);\n  }\n\n  loadDirentList = (path) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listDir(repoID, path, {'with_thumbnail': true}).then(res => {\n      let direntList = [];\n      let markdownItem = null;\n      res.data.dirent_list.forEach(item => {\n        let fileName = item.name.toLowerCase();\n        if (fileName === 'readme.md' || fileName === 'readme.markdown') {\n          markdownItem = item;\n        }\n        let dirent = new Dirent(item);\n        direntList.push(dirent);\n      });\n\n      this.setState({\n        pathExist: true,\n        userPerm: res.data.user_perm,\n        isDirentListLoading: false,\n        direntList: Utils.sortDirents(direntList, this.state.sortBy, this.state.sortOrder),\n        dirID: res.data.dir_id,\n        readmeMarkdown: markdownItem,\n        path: path,\n        isSessionExpired: false,\n      });\n\n      if (!this.state.repoEncrypted && direntList.length) {\n        this.getThumbnails(repoID, path, this.state.direntList);\n      }\n    }).catch((err) => {\n      Utils.getErrorMsg(err, true);\n      if (err.response && err.response.status === 403) {\n        this.setState({isDirentListLoading: false});\n        return;\n      }\n      this.setState({\n        isDirentListLoading: false,\n        pathExist: false,\n      });\n    });\n  }\n\n  onListContainerScroll = () => {\n    let itemsShowLength = this.state.itemsShowLength + 100;\n    this.setState({itemsShowLength: itemsShowLength});\n  }\n\n  resetShowLength = () => {\n    this.setState({itemsShowLength: 100});\n  }\n\n  getThumbnails = (repoID, path, direntList) => {\n    let items = direntList.filter((item) => {\n      return Utils.imageCheck(item.name) && !item.encoded_thumbnail_src;\n    });\n    if (items.length == 0) {\n      return ;\n    }\n\n    const _this = this;\n    const len = items.length;\n    const thumbnailSize = 48;\n    let getThumbnail = (i) => {\n      const curItem = items[i];\n      const curItemPath = [path, curItem.name].join('/');\n      seafileAPI.createThumbnail(repoID, curItemPath, thumbnailSize).then((res) => {\n        curItem.encoded_thumbnail_src = res.data.encoded_thumbnail_src;\n      }).catch((error) => {\n        // do nothing\n      }).then(() => {\n        if (i < len - 1) {\n          getThumbnail(++i);\n        } else {\n          _this.setState({\n            direntList: direntList\n          });\n        }\n      });\n    };\n    getThumbnail(0);\n  }\n\n  updateMoveCopyTreeNode = (path) => {\n    let repoID = this.props.repoID;\n\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n\n    let nodeChildren = node.children.map(item => item.object);\n    let nodeChildrenNames = nodeChildren.map(item => item.name);\n\n    seafileAPI.listDir(repoID, path).then(res => {\n      let newDirentList = res.data.dirent_list;\n      let newAddedDirents = newDirentList.filter(item => {\n        return !nodeChildrenNames.includes(item.name);\n      });\n      newAddedDirents.map(item => {\n        this.addNodeToTree(item.name, path, item.type);\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  async getAsyncCopyMoveProgress() {\n    let { asyncOperationType, asyncCopyMoveTaskId } = this.state;\n    try {\n      let res = await seafileAPI.queryAsyncOperationProgress(asyncCopyMoveTaskId);\n      let data = res.data;\n      if (data.failed) {\n        let message = gettext('Failed to move files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Failed to copy files to another library.');\n        }\n        toaster.danger(message);\n        this.setState({\n          asyncOperationProgress: 0,\n          isCopyMoveProgressDialogShow: false,\n        });\n        return;\n      }\n\n      if (data.successful) {\n        if (asyncOperationType === 'move') {\n          if (this.currentMoveItemName && this.currentMoveItemPath) {\n            if (this.state.currentMode === 'column') {\n              this.deleteTreeNode(this.currentMoveItemPath);\n            }\n            this.moveDirent(this.currentMoveItemName);\n            this.currentMoveItemName = '';\n            this.currentMoveItemPath = '';\n          } else {\n            if (this.state.currentMode === 'column') {\n              let direntPaths = this.getSelectedDirentPaths();\n              this.deleteTreeNodes(direntPaths);\n            }\n            let direntNames = this.getSelectedDirentNames();\n            this.moveDirents(direntNames);\n          }\n        }\n\n        this.setState({isCopyMoveProgressDialogShow: false});\n        let message = gettext('Successfully moved files to another library.');\n        if (asyncOperationType === 'copy') {\n          message = gettext('Successfully copied files to another library.');\n        }\n        toaster.success(message);\n        return;\n      }\n      // init state: total is 0\n      let asyncOperationProgress = !data.total ? 0 : parseInt((data.done/data.total * 100).toFixed(2));\n\n      this.getAsyncCopyMoveProgress();\n      this.setState({asyncOperationProgress: asyncOperationProgress});\n    } catch (error) {\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n    }\n  }\n\n  cancelCopyMoveDirent = () => {\n    let taskId = this.state.asyncCopyMoveTaskId;\n    seafileAPI.cancelCopyMoveOperation(taskId);\n\n    this.currentMoveItemName = '';\n    this.currentMoveItemPath = '';\n    let direntList = this.state.direntList;\n    this.setState({direntList: direntList.slice(0)});\n  }\n\n  onMoveProgressDialogToggle = () => {\n    let { asyncOperationProgress } = this.state;\n    if (asyncOperationProgress !== 100) {\n      this.cancelCopyMoveDirent();\n    }\n\n    this.setState({\n      asyncOperationProgress: 0,\n      isCopyMoveProgressDialogShow: false,\n    });\n  }\n\n  // toolbar operations\n  onMoveItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n    if (repoID !== destRepo.repo_id) {\n      this.setState(() => ({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true\n      }));\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    let direntPaths = this.getSelectedDirentPaths();\n    seafileAPI.moveDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          // After moving successfully, delete related files\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.deleteTreeNodes(direntPaths);\n        }\n\n        this.moveDirents(dirNames);\n\n        // 2. tow columns mode need update left tree\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        // show tip message if move to current repo\n        let message =  Utils.getMoveSuccessMessage(dirNames);\n        toaster.success(message);\n      }\n\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getMoveFailedMessage(dirNames);\n      }\n      this.setState({\n        asyncOperationProgress: 0,\n        isCopyMoveProgressDialogShow: false,\n      });\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItems = (destRepo, destDirentPath) => {\n    let repoID = this.props.repoID;\n    let selectedDirentList = this.state.selectedDirentList;\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: selectedDirentList.length,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    let dirNames = this.getSelectedDirentNames();\n    seafileAPI.copyDir(repoID, destRepo.repo_id, destDirentPath, this.state.path, dirNames).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(destDirentPath);\n        }\n\n        if (destDirentPath === this.state.path) {\n          this.loadDirentList(this.state.path);\n        }\n\n        // show tip message if copy to current repo\n        let message =  Utils.getCopySuccessfulMessage(dirNames);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = Utils.getCopyFailedMessage(dirNames);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDeleteItems = () => {\n    let repoID = this.props.repoID;\n    let direntPaths = this.getSelectedDirentPaths();\n    let dirNames = this.getSelectedDirentNames();\n\n    this.setState({updateDetail: !this.state.updateDetail});\n    seafileAPI.deleteMutipleDirents(repoID, this.state.path, dirNames).then(res => {\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNodes(direntPaths);\n      }\n\n      this.deleteDirents(dirNames);\n\n      let msg = '';\n      if (direntPaths.length > 1) {\n        msg = gettext('Successfully deleted {name} and other {n} items.');\n        msg = msg.replace('{name}', dirNames[0]);\n        msg = msg.replace('{n}', dirNames.length - 1);\n      } else {\n        msg = gettext('Successfully deleted {name}.');\n        msg = msg.replace('{name}', dirNames[0]);\n      }\n      toaster.success(msg);\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to delete {name} and other {n} items.');\n        errMessage = errMessage.replace('{name}', dirNames[0]);\n        errMessage = errMessage.replace('{n}', dirNames.length - 1);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFolder = (dirPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createDir(repoID, dirPath).then(() => {\n      let name = Utils.getFileName(dirPath);\n      let parentPath = Utils.getDirName(dirPath);\n\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'dir');\n      }\n\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'dir');\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onAddFile = (filePath, isDraft) => {\n    let repoID = this.props.repoID;\n    seafileAPI.createFile(repoID, filePath, isDraft).then(res => {\n      let name = Utils.getFileName(filePath);\n      let parentPath = Utils.getDirName(filePath);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(name, parentPath, 'file');\n      }\n      if (parentPath === this.state.path && !this.state.isViewFile) {\n        this.addDirent(name, 'file', res.data.size);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  switchViewMode = (mode) => {\n    if (mode === this.state.currentMode) {\n      return;\n    }\n    if (mode === 'detail') {\n      this.toggleDirentDetail();\n      return;\n    }\n    cookie.save('seafile_view_mode', mode);\n    let path = this.state.path;\n    if (this.state.currentMode === 'column' && this.state.isViewFile) {\n      path = Utils.getDirName(path);\n      this.setState({\n        path: path,\n        isViewFile: false,\n      });\n      let repoInfo = this.state.currentRepoInfo;\n\n      let url = siteRoot + 'library/' + repoInfo.repo_id + '/' + encodeURIComponent(repoInfo.repo_name) + Utils.encodePath(path);\n      window.history.pushState({url: url, path: path}, path, url);\n    }\n\n    if (mode === 'column') {\n      this.loadSidePanel(this.state.path);\n    }\n    this.isNeedUpdateHistoryState = false;\n    this.setState({currentMode: mode});\n    this.showDir(path);\n  }\n\n  onSearchedClick = (item) => {\n    let path = item.is_dir ? item.path.slice(0, item.path.length - 1) : item.path;\n    if (this.state.currentPath === path) {\n      return;\n    }\n    if (this.state.currentMode === 'column') {\n      // load sidePanel\n      let index = -1;\n      let paths = Utils.getPaths(path);\n      for (let i = 0; i < paths.length; i++) {\n        let node = this.state.treeData.getNodeByPath(node);\n        if (!node) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1) { // all the data has been loaded already.\n        let node = this.state.treeData.getNodeByPath(path);\n        this.setState({currentNode: node});\n      } else {\n        this.loadNodeAndParentsByPath(path);\n      }\n\n      // load mainPanel\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        if (Utils.isMarkdownFile(path)) {\n          this.showFile(path);\n        } else {\n          let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n          let isWeChat = Utils.isWeChat();\n          if (!isWeChat) {\n            let newWindow = window.open('about:blank');\n            newWindow.location.href = url;\n          } else {\n            location.href = url;\n          }\n        }\n      }\n    } else {\n      if (item.is_dir) {\n        this.showDir(path);\n      } else {\n        let url = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(path);\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          let newWindow = window.open('about:blank');\n          newWindow.location.href = url;\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onMainNavBarClick = (nodePath) => {\n    //just for dir\n    this.resetSelected();\n    if (this.state.currentMode === 'column') {\n      let tree = this.state.treeData.clone();\n      let node = tree.getNodeByPath(nodePath);\n      tree.expandNode(node);\n      this.setState({treeData: tree, currentNode: node});\n    }\n\n    this.showDir(nodePath);\n  }\n\n  onLinkClick = (link) => {\n    const url = link;\n    let repoID = this.props.repoID;\n    if (Utils.isInternalMarkdownLink(url, repoID)) {\n      let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n      this.showFile(path);\n    } else if (Utils.isInternalDirLink(url, repoID)) {\n      let path = Utils.getPathFromInternalDirLink(url, repoID);\n      this.showDir(path);\n    } else {\n      window.open(url);\n    }\n  }\n\n  // list&tree operations\n  onMainPanelItemRename = (dirent, newName) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.renameItem(path, dirent.isDir(), newName);\n  }\n\n  onMainPanelItemDelete = (dirent) => {\n    let path = Utils.joinPath(this.state.path, dirent.name);\n    this.deleteItem(path, dirent.isDir());\n  }\n\n  onRenameTreeNode = (node, newName) => {\n    this.renameItem(node.path, node.object.isDir(), newName);\n  }\n\n  onDeleteTreeNode = (node) => {\n    this.deleteItem(node.path, node.object.isDir());\n  }\n\n  renameItem = (path, isDir, newName) => {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.renameDir(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.renameFile(repoID, path, newName).then(() => {\n        this.renameItemAjaxCallback(path, newName);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Renaming {name} failed').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  renameItemAjaxCallback(path, newName) {\n    if (this.state.currentMode === 'column') {\n      this.renameTreeNode(path, newName);\n    }\n    this.renameDirent(path, newName);\n  }\n\n  deleteItem(path, isDir) {\n    let repoID = this.props.repoID;\n    if (isDir) {\n      seafileAPI.deleteDir(repoID, path).then(() => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        toaster.success(msg);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    } else {\n      seafileAPI.deleteFile(repoID, path).then(() => {\n        this.deleteItemAjaxCallback(path, isDir);\n        let name = Utils.getFileName(path);\n        var msg = gettext('Successfully deleted {name}').replace('{name}', name);\n        toaster.success(msg);\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        if (errMessage === gettext('Error')) {\n          let name = Utils.getFileName(path);\n          errMessage = gettext('Failed to delete {name}').replace('{name}', name);\n        }\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  deleteItemAjaxCallback(path) {\n    if (this.state.currentMode === 'column') {\n      this.deleteTreeNode(path);\n    }\n    this.deleteDirent(path);\n  }\n\n  // list operations\n  onMoveItem = (destRepo, dirent, moveToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n    let direntPath = Utils.joinPath(nodeParentPath, dirName);\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'move',\n        isCopyMoveProgressDialogShow: true,\n      });\n    }\n\n    seafileAPI.moveDir(repoID, destRepo.repo_id, moveToDirentPath, nodeParentPath, dirName).then(res => {\n      if (repoID !== destRepo.repo_id) {\n        this.setState({asyncCopyMoveTaskId: res.data.task_id}, () => {\n          this.currentMoveItemName = dirName;\n          this.currentMoveItemPath = direntPath;\n          this.getAsyncCopyMoveProgress(dirName, direntPath);\n        });\n      }\n\n      if (this.state.currentMode === 'column') {\n        this.deleteTreeNode(direntPath);\n      }\n\n      // 1. move to current repo\n      // 2. tow columns mode need update left tree\n      if (repoID === destRepo.repo_id && this.state.currentMode === 'column') {\n        this.updateMoveCopyTreeNode(moveToDirentPath);\n      }\n\n      this.moveDirent(direntPath, moveToDirentPath);\n\n      // show tip message if move to current repo\n      if (repoID === destRepo.repo_id) {\n        let message = gettext('Successfully moved {name}.');\n        message = message.replace('{name}', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to move {name}.');\n        errMessage = errMessage.replace('{name}', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onCopyItem = (destRepo, dirent, copyToDirentPath, nodeParentPath) => {\n    let repoID = this.props.repoID;\n    //just for view list state\n    let dirName = dirent.name;\n    if (!nodeParentPath) {\n      nodeParentPath = this.state.path;\n    }\n\n    if (repoID !== destRepo.repo_id) {\n      this.setState({\n        asyncOperatedFilesLength: 1,\n        asyncOperationProgress: 0,\n        asyncOperationType: 'copy',\n        isCopyMoveProgressDialogShow: true\n      });\n    }\n\n    seafileAPI.copyDir(repoID, destRepo.repo_id, copyToDirentPath, nodeParentPath, dirName).then(res => {\n\n      if (repoID !== destRepo.repo_id) {\n        this.setState({\n          asyncCopyMoveTaskId: res.data.task_id,\n        }, () => {\n          this.getAsyncCopyMoveProgress();\n        });\n      }\n\n      if (repoID === destRepo.repo_id) {\n        if (this.state.currentMode === 'column') {\n          this.updateMoveCopyTreeNode(copyToDirentPath);\n        }\n\n        if (copyToDirentPath === nodeParentPath) {\n          this.loadDirentList(this.state.path);\n        }\n\n        let message = gettext('Successfully copied %(name)s.');\n        message = message.replace('%(name)s', dirName);\n        toaster.success(message);\n      }\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      if (errMessage === gettext('Error')) {\n        errMessage = gettext('Failed to copy %(name)s');\n        errMessage = errMessage.replace('%(name)s', dirName);\n      }\n      toaster.danger(errMessage);\n    });\n  }\n\n  onDirentClick = (dirent) => {\n    let direntList = this.state.direntList.map(dirent => {\n      dirent.isSelected = false;\n      return dirent;\n    });\n    if (dirent) {\n      // dirent.isSelected = true;\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: true,\n        selectedDirentList: [dirent],\n      });\n    } else {\n      this.setState({\n        direntList: direntList,\n        isDirentSelected: false,\n        selectedDirentList: [],\n      });\n    }\n  }\n\n  onItemClick = (dirent) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    let direntPath = Utils.joinPath(this.state.path, dirent.name);\n    if (dirent.isDir()) {  // is dir\n      if (this.state.currentMode === 'column') {\n        this.loadTreeNodeByPath(direntPath);\n      }\n      this.showDir(direntPath);\n    } else {  // is file\n      if (this.state.currentMode === 'column' && Utils.isMarkdownFile(direntPath)) {\n        this.showColumnMarkdownFile(direntPath);\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(direntPath);\n\n        let isWeChat = Utils.isWeChat();\n        if (!isWeChat) {\n          window.open(url);\n        } else {\n          location.href = url;\n        }\n      }\n    }\n  }\n\n  onDirentSelected = (dirent) => {\n    let direntList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item.isSelected = !item.isSelected;\n      }\n      return item;\n    });\n    let selectedDirentList = direntList.filter(item => {\n      return item.isSelected;\n    });\n\n    if (selectedDirentList.length) {\n      this.setState({isDirentSelected: true});\n      if (selectedDirentList.length === direntList.length) {\n        this.setState({\n          isAllDirentSelected: true,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList,\n        });\n      } else {\n        this.setState({\n          isAllDirentSelected: false,\n          direntList: direntList,\n          selectedDirentList: selectedDirentList\n        });\n      }\n    } else {\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: []\n      });\n    }\n  }\n\n  onAllDirentSelected = () => {\n    if (this.state.isAllDirentSelected) {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = false;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: false,\n        isAllDirentSelected: false,\n        direntList: direntList,\n        selectedDirentList: [],\n      });\n    } else {\n      let direntList = this.state.direntList.map(item => {\n        item.isSelected = true;\n        return item;\n      });\n      this.setState({\n        isDirentSelected: true,\n        isAllDirentSelected: true,\n        direntList: direntList,\n        selectedDirentList: direntList,\n      });\n    }\n  }\n\n  onFileTagChanged = (dirent, direntPath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.listFileTags(repoID, direntPath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n      this.updateDirent(dirent, 'file_tags', fileTags);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n\n    this.updateUsedRepoTags();\n  }\n\n  onFileUploadSuccess = (direntObject) => {\n    let isExist = this.state.direntList.some(item => {\n      return item.name === direntObject.name && item.type === direntObject.type;\n    });\n    if (isExist) {\n      let direntList = this.state.direntList;\n      for (let i = 0; i < direntList.length; i++) {\n        let dirent = direntList[i];\n        if (dirent.name === direntObject.name && dirent.type === direntObject.type) {\n          let mtime = moment.unix(direntObject.mtime).fromNow();\n          this.updateDirent(dirent, 'mtime', mtime);  // todo file size is need update too, api is not return;\n          break;\n        }\n      }\n    } else {\n      direntObject.permission = 'rw';\n      let dirent = new Dirent(direntObject);\n      if (this.state.currentMode === 'column') {\n        this.addNodeToTree(dirent.name, this.state.path, dirent.type);\n      }\n      if (direntObject.type === 'dir') {\n        this.setState({direntList: [dirent, ...this.state.direntList]});\n      } else {\n        this.setState({direntList: [...this.state.direntList, dirent]});\n        this.updateReadmeMarkdown(this.state.direntList);\n      }\n    }\n  }\n\n  addDirent = (name, type, size) => {\n    let item = this.createDirent(name, type, size);\n    let direntList = this.state.direntList;\n    if (type === 'dir') {\n      direntList.unshift(item);\n    } else {\n      // there will be there conditions;\n      // first: direntList.length === 0;\n      // second: all the direntList's items are dir;\n      // third: direntList has dir and file;\n      let length = direntList.length;\n      if (length === 0 || direntList[length - 1].type === 'dir') {\n        direntList.push(item);\n      } else {\n        let index = 0;\n        for (let i = 0; i <= length; i++) {\n          if (direntList[i].type === 'file') {\n            index = i;\n            break;\n          }\n        }\n        direntList.splice(index, 0, item);\n      }\n    }\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  renameDirent = (direntPath, newName) => {\n    let repoID = this.props.repoID;\n    let parentPath = Utils.getDirName(direntPath);\n    let newDirentPath = Utils.joinPath(parentPath, newName);\n    if (direntPath === this.state.path) {\n      // the renamed item is current viewed item\n      // example: direntPath = /A/B/C, state.path = /A/B/C\n\n      this.setState({ path: newDirentPath });\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newDirentPath;\n      window.history.replaceState({ url: url, path: newDirentPath}, newDirentPath, url);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B/C/D, state.path = /A/B/C\n      let oldName = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.map(item => {\n        if (item.name === oldName) {\n          item.name = newName;\n        }\n        return item;\n      });\n      this.setState({ direntList: direntList });\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // example: direntPath = /A/B, state.path = /A/B/C\n      let newPath = Utils.renameAncestorPath(this.state.path, direntPath, newDirentPath);\n      this.setState({ path: newPath });\n\n      let repoInfo = this.state.currentRepoInfo;\n      let url = siteRoot + 'library/' + repoID + '/' + encodeURIComponent(repoInfo.repo_name) + newPath;\n      window.history.replaceState({ url: url, path: newPath}, newPath, url);\n    }\n  }\n\n  deleteDirent(direntPath) {\n    if (direntPath === this.state.path) {\n      // The deleted item is current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    } else if (Utils.isChildPath(direntPath, this.state.path)) {\n      // The deleted item is inside current path\n      let name = Utils.getFileName(direntPath);\n      let direntList = this.state.direntList.filter(item => {\n        return item.name !== name;\n      });\n\n      // Recalculate the state of the selection\n      this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n      this.setState({direntList: direntList});\n      this.updateReadmeMarkdown(direntList);\n    } else if (Utils.isAncestorPath(direntPath, this.state.path)) {\n      // the deleted item is ancester of the current item\n      let parentPath = Utils.getDirName(direntPath);\n      this.showDir(parentPath);\n    }\n    // else do nothing\n  }\n\n  // only one scence: The deleted items are inside current path\n  deleteDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  moveDirent = (direntPath, moveToDirentPath = null) => {\n    let name = Utils.getFileName(direntPath);\n    if (moveToDirentPath === this.state.path) {\n      this.loadDirentList(this.state.path);\n      return;\n    }\n    let direntList = this.state.direntList.filter(item => {\n      return item.name !== name;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  // only one scence: The moved items are inside current path\n  moveDirents = (direntNames) => {\n    let direntList = this.state.direntList.filter(item => {\n      return direntNames.indexOf(item.name) === -1;\n    });\n\n    // Recalculate the state of the selection\n    this.recaculateSelectedStateAfterDirentDeleted(name, direntList);\n\n    this.setState({direntList: direntList});\n    this.updateReadmeMarkdown(direntList);\n  }\n\n  updateDirent = (dirent, paramKey, paramValue) => {\n    let newDirentList = this.state.direntList.map(item => {\n      if (item.name === dirent.name) {\n        item[paramKey] = paramValue;\n      }\n      return item;\n    });\n    this.setState({direntList: newDirentList});\n  }\n\n  // tree operations\n  loadTreeNodeByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    let node = tree.getNodeByPath(path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        let parentNode = tree.getNodeByPath(node.parentNode.path);\n        parentNode.isExpanded = true;\n        this.setState({\n          treeData: tree,\n          currentNode: node\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      let parentNode = tree.getNodeByPath(node.parentNode.path);\n      parentNode.isExpanded = true;\n      this.setState({treeData: tree, currentNode: node}); //tree\n    }\n  }\n\n  loadNodeAndParentsByPath = (path) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    if (Utils.isMarkdownFile(path)) {\n      path = Utils.getDirName(path);\n    }\n    seafileAPI.listDir(repoID, path, {with_parents: true}).then(res => {\n      let direntList = res.data.dirent_list;\n      let results = {};\n      for (let i = 0; i < direntList.length; i++) {\n        let object = direntList[i];\n        let parentDir = object.parent_dir;\n        let key = parentDir === '/' ?  '/' : parentDir.slice(0, parentDir.length - 1);\n        if (!results[key]) {\n          results[key] = [];\n        }\n        results[key].push(object);\n      }\n      for (let key in results) {\n        let node = tree.getNodeByPath(key);\n        if (!node.isLoaded) {\n          this.addResponseListToNode(results[key], node);\n        }\n      }\n      this.setState({\n        isTreeDataLoading: false,\n        treeData: tree\n      });\n    }).catch(() => {\n      this.setState({isLoadFailed: true});\n    });\n  }\n\n  onTreeNodeClick = (node) => {\n    this.resetSelected();\n    let repoID = this.props.repoID;\n    if (!this.state.pathExist) {\n      this.setState({pathExist: true});\n    }\n\n    if (node.object.isDir()) {\n      let isLoaded = node.isLoaded;\n      if (!node.isLoaded) {\n        let tree = this.state.treeData.clone();\n        node = tree.getNodeByPath(node.path);\n        seafileAPI.listDir(repoID, node.path).then(res => {\n          this.addResponseListToNode(res.data.dirent_list, node);\n          tree.collapseNode(node);\n          this.setState({treeData: tree});\n        }).catch(error => {\n          let errMessage = Utils.getErrorMsg(error);\n          toaster.danger(errMessage);\n        });\n      }\n      if (isLoaded && node.path === this.state.path) {\n        if (node.isExpanded) {\n          let tree = treeHelper.collapseNode(this.state.treeData, node);\n          this.setState({treeData: tree});\n        } else {\n          let tree = this.state.treeData.clone();\n          node = tree.getNodeByPath(node.path);\n          tree.expandNode(node);\n          this.setState({treeData: tree});\n        }\n      }\n    }\n\n    if (node.path === this.state.path ) {\n      return;\n    }\n\n    if (node.object.isDir()) {  // isDir\n      this.showDir(node.path);\n    } else {\n      if (Utils.isMarkdownFile(node.path)) {\n        if (node.path !== this.state.path) {\n          this.showColumnMarkdownFile(node.path);\n        }\n      } else {\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(node.path);\n        window.open(url);\n      }\n    }\n  }\n\n  showColumnMarkdownFile = (filePath) => {\n    let repoID = this.props.repoID;\n    seafileAPI.getFileInfo(repoID, filePath).then((res) => {\n      if (res.data.size === 0) {\n        // loading of asynchronously obtained data may be blocked\n        const w = window.open('about:blank');\n        const url = siteRoot + 'lib/' + repoID + '/file' + Utils.encodePath(filePath);\n        w.location.href = url;\n      } else {\n        this.showFile(filePath);\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTreeNodeCollapse = (node) => {\n    let tree = treeHelper.collapseNode(this.state.treeData, node);\n    this.setState({treeData: tree});\n  }\n\n  onTreeNodeExpanded = (node) => {\n    let repoID = this.props.repoID;\n    let tree = this.state.treeData.clone();\n    node = tree.getNodeByPath(node.path);\n    if (!node.isLoaded) {\n      seafileAPI.listDir(repoID, node.path).then(res => {\n        this.addResponseListToNode(res.data.dirent_list, node);\n        this.setState({treeData: tree});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    } else {\n      tree.expandNode(node);\n      this.setState({treeData: tree});\n    }\n  }\n\n  addNodeToTree = (name, parentPath, type) => {\n    let node = this.createTreeNode(name, type);\n    let tree = treeHelper.addNodeToParentByPath(this.state.treeData, node, parentPath);\n    this.setState({treeData: tree});\n  }\n\n  renameTreeNode = (path, newName) => {\n    let tree = treeHelper.renameNodeByPath(this.state.treeData, path, newName);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNode = (path) => {\n    let tree = treeHelper.deleteNodeByPath(this.state.treeData, path);\n    this.setState({treeData: tree});\n  }\n\n  deleteTreeNodes = (paths) => {\n    let tree = treeHelper.deleteNodeListByPaths(this.state.treeData, paths);\n    this.setState({treeData: tree});\n  }\n\n  moveTreeNode = (nodePath, moveToPath, moveToRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== moveToRepo.repo_id) {\n      let tree = treeHelper.deleteNodeByPath(this.state.treeData, nodePath);\n      this.setState({treeData: tree});\n      return;\n    }\n    let tree = treeHelper.moveNodeByPath(this.state.treeData, nodePath, moveToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  copyTreeNode = (nodePath, copyToPath, destRepo, nodeName) => {\n    let repoID = this.props.repoID;\n    if (repoID !== destRepo.repo_id) {\n      return;\n    }\n    let tree = treeHelper.copyNodeByPath(this.state.treeData, nodePath, copyToPath, nodeName);\n    this.setState({treeData: tree});\n  }\n\n  createTreeNode(name, type) {\n    let object = this.createDirent(name, type);\n    return new TreeNode({object});\n  }\n\n  createDirent(name, type, size) {\n    let mtime = new Date().getTime()/1000;\n    let dirent = new Dirent({name, type, mtime, size});\n    return dirent;\n  }\n\n  addResponseListToNode = (list, node) => {\n    node.isLoaded = true;\n    node.isExpanded = true;\n    let direntList = list.map(item => {\n      return new Dirent(item);\n    });\n    direntList = Utils.sortDirents(direntList, 'name', 'asc');\n\n    let nodeList = direntList.map(object => {\n      return new TreeNode({object});\n    });\n    node.addChildren(nodeList);\n  }\n\n  getSelectedDirentPaths = () => {\n    let paths = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      paths.push(Utils.joinPath(this.state.path, selectedDirent.name));\n    });\n    return paths;\n  }\n\n  getSelectedDirentNames = () => {\n    let names = [];\n    this.state.selectedDirentList.forEach(selectedDirent => {\n      names.push(selectedDirent.name);\n    });\n    return names;\n  }\n\n  resetSelected = () => {\n    this.setState({\n      isDirentSelected: false,\n      isAllDirentSelected: false,\n    });\n  }\n\n  recaculateSelectedStateAfterDirentDeleted = (name, newDirentList) => {\n    let selectedDirentList = this.state.selectedDirentList.slice(0);\n    if (selectedDirentList.length > 0) {\n      selectedDirentList = selectedDirentList.filter(item => {\n        return item.name !== name;\n      });\n    }\n    this.setState({\n      selectedDirentList: selectedDirentList,\n      isDirentSelected: selectedDirentList.length > 0,\n      isAllDirentSelected: selectedDirentList.length === newDirentList.length,\n    });\n  }\n\n  onLibDecryptDialog = () => {\n    this.setState({libNeedDecrypt: false});\n    this.loadDirData(this.state.path);\n  }\n\n  goDraftPage = () => {\n    window.open(siteRoot + 'drafts/' + this.state.draftID + '/');\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      items: Utils.sortDirents(this.state.direntList, sortBy, sortOrder)\n    });\n  }\n\n  onUploadFile = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFileUpload();\n  }\n\n  onUploadFolder = (e) => {\n    e.nativeEvent.stopImmediatePropagation();\n    this.uploader.onFolderUpload();\n  }\n\n  onToolbarFileTagChanged = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n    seafileAPI.listFileTags(repoID, filePath).then(res => {\n      let fileTags = res.data.file_tags.map(item => {\n        return new FileTag(item);\n      });\n\n      this.setState({fileTags: fileTags});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onToolbarRelatedFileChange = () => {\n    let repoID = this.props.repoID;\n    let filePath = this.state.path;\n\n    seafileAPI.listRelatedFiles(repoID, filePath).then(res => {\n      let relatedFiles = res.data.related_files.map((relatedFile) => {\n        return relatedFile;\n      });\n      this.setState({relatedFiles: relatedFiles});\n    }).catch((error) => {\n      if (error.response.status === 500) {\n        this.setState({relatedFiles: []});\n      }\n    });\n  }\n\n  unSelectDirent = () => {\n    this.setState({\n      isDirentSelected: false,\n      selectedDirentList: []\n    });\n    const dirent = {};\n    this.onDirentSelected(dirent);\n  }\n\n  onDeleteRepoTag = (deletedTagID) => {\n    let direntList = this.state.direntList.map(dirent => {\n      if (dirent.file_tags) {\n        let fileTags = dirent.file_tags.filter(item => {\n          return item.repo_tag_id !== deletedTagID;\n        });\n        dirent.file_tags = fileTags;\n      }\n      return dirent;\n    });\n    this.setState({direntList: direntList});\n    this.updateUsedRepoTags();\n  }\n\n  render() {\n    if (this.state.libNeedDecrypt) {\n      return (\n        <ModalPortal>\n          <LibDecryptDialog\n            repoID={this.props.repoID}\n            onLibDecryptDialog={this.onLibDecryptDialog}\n          />\n        </ModalPortal>\n      );\n    }\n\n    if (!this.state.currentRepoInfo) {\n      return '';\n    }\n\n    let enableDirPrivateShare = false;\n    let { currentRepoInfo, userPerm, isCopyMoveProgressDialogShow } = this.state;\n    let showShareBtn = Utils.isHasPermissionToShare(currentRepoInfo, userPerm);\n    let isRepoOwner = currentRepoInfo.owner_email === username;\n    let isVirtual = currentRepoInfo.is_virtual;\n    let isAdmin = currentRepoInfo.is_admin;\n    if (!isVirtual && (isRepoOwner || isAdmin)) {\n      enableDirPrivateShare = true;\n    }\n    let direntItemsList = this.state.direntList.filter((item, index) => {\n      return index < this.state.itemsShowLength;\n    });\n\n    return (\n      <Fragment>\n        <div className=\"main-panel o-hidden\">\n          <div className=\"main-panel-north border-left-show\">\n            <LibContentToolbar\n              isViewFile={this.state.isViewFile}\n              filePermission={this.state.filePermission}\n              isDraft={this.state.isDraft}\n              hasDraft={this.state.hasDraft}\n              fileTags={this.state.fileTags}\n              relatedFiles={this.state.relatedFiles}\n              onFileTagChanged={this.onToolbarFileTagChanged}\n              onRelatedFileChange={this.onToolbarRelatedFileChange}\n              onSideNavMenuClick={this.props.onMenuClick}\n              repoID={this.props.repoID}\n              path={this.state.path}\n              isDirentSelected={this.state.isDirentSelected}\n              selectedDirentList={this.state.selectedDirentList}\n              onItemsMove={this.onMoveItems}\n              onItemsCopy={this.onCopyItems}\n              onItemsDelete={this.onDeleteItems}\n              onItemRename={this.onMainPanelItemRename}\n              direntList={this.state.direntList}\n              repoName={this.state.repoName}\n              repoEncrypted={this.state.repoEncrypted}\n              isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n              userPerm={this.state.userPerm}\n              showShareBtn={showShareBtn}\n              enableDirPrivateShare={enableDirPrivateShare}\n              onAddFile={this.onAddFile}\n              onAddFolder={this.onAddFolder}\n              onUploadFile={this.onUploadFile}\n              onUploadFolder={this.onUploadFolder}\n              currentMode={this.state.currentMode}\n              switchViewMode={this.switchViewMode}\n              onSearchedClick={this.onSearchedClick}\n              isRepoOwner={isRepoOwner}\n              currentRepoInfo={this.state.currentRepoInfo}\n              updateDirent={this.updateDirent}\n              onDirentSelected={this.onDirentSelected}\n              showDirentDetail={this.showDirentDetail}\n              listRelatedFiles={this.listRelatedFiles}\n              unSelectDirent={this.unSelectDirent}\n              onFilesTagChanged={this.onFileTagChanged}\n            />\n          </div>\n          <div className=\"main-panel-center flex-row\">\n            <LibContentContainer\n              pathPrefix={this.props.pathPrefix}\n              currentMode={this.state.currentMode}\n              path={this.state.path}\n              pathExist={this.state.pathExist}\n              currentRepoInfo={this.state.currentRepoInfo}\n              repoID={this.props.repoID}\n              repoPermission={this.state.repoPermission}\n              enableDirPrivateShare={enableDirPrivateShare}\n              userPerm={userPerm}\n              isGroupOwnedRepo={this.state.isGroupOwnedRepo}\n              onTabNavClick={this.props.onTabNavClick}\n              onMainNavBarClick={this.onMainNavBarClick}\n              isViewFile={this.state.isViewFile}\n              hash={this.state.hash}\n              isDraft={this.state.isDraft}\n              hasDraft={this.state.hasDraft}\n              fileTags={this.state.fileTags}\n              relatedFiles={this.state.relatedFiles}\n              goDraftPage={this.goDraftPage}\n              isFileLoading={this.state.isFileLoading}\n              isFileLoadedErr={this.state.isFileLoadedErr}\n              filePermission={this.state.filePermission}\n              content={this.state.content}\n              lastModified={this.state.lastModified}\n              latestContributor={this.state.latestContributor}\n              onLinkClick={this.onLinkClick}\n              isTreeDataLoading={this.state.isTreeDataLoading}\n              treeData={this.state.treeData}\n              currentNode={this.state.currentNode}\n              onNodeClick={this.onTreeNodeClick}\n              onNodeCollapse={this.onTreeNodeCollapse}\n              onNodeExpanded={this.onTreeNodeExpanded}\n              onAddFolderNode={this.onAddFolder}\n              onAddFileNode={this.onAddFile}\n              onRenameNode={this.onRenameTreeNode}\n              onDeleteNode={this.onDeleteTreeNode}\n              draftCounts={this.state.draftCounts}\n              usedRepoTags={this.state.usedRepoTags}\n              readmeMarkdown={this.state.readmeMarkdown}\n              updateUsedRepoTags={this.updateUsedRepoTags}\n              isDirentListLoading={this.state.isDirentListLoading}\n              direntList={direntItemsList}\n              sortBy={this.state.sortBy}\n              sortOrder={this.state.sortOrder}\n              sortItems={this.sortItems}\n              updateDirent={this.updateDirent}\n              onDirentClick={this.onDirentClick}\n              onItemClick={this.onItemClick}\n              onItemSelected={this.onDirentSelected}\n              onItemDelete={this.onMainPanelItemDelete}\n              onItemRename={this.onMainPanelItemRename}\n              onItemMove={this.onMoveItem}\n              onItemCopy={this.onCopyItem}\n              onAddFolder={this.onAddFolder}\n              onAddFile={this.onAddFile}\n              onFileTagChanged={this.onFileTagChanged}\n              isDirentSelected={this.state.isDirentSelected}\n              isAllDirentSelected={this.state.isAllDirentSelected}\n              onAllDirentSelected={this.onAllDirentSelected}\n              isDirentDetailShow={this.state.isDirentDetailShow}\n              selectedDirent={this.state.selectedDirentList && this.state.selectedDirentList[0]}\n              selectedDirentList={this.state.selectedDirentList}\n              onItemsMove={this.onMoveItems}\n              onItemsCopy={this.onCopyItems}\n              onItemsDelete={this.onDeleteItems}\n              closeDirentDetail={this.closeDirentDetail}\n              showDirentDetail={this.showDirentDetail}\n              direntDetailPanelTab={this.state.direntDetailPanelTab}\n              onDeleteRepoTag={this.onDeleteRepoTag}\n              onToolbarFileTagChanged={this.onToolbarFileTagChanged}\n              updateDetail={this.state.updateDetail}\n              onListContainerScroll={this.onListContainerScroll}\n            />\n            {this.state.pathExist && !this.state.isViewFile && (\n              <FileUploader\n                ref={uploader => this.uploader = uploader}\n                dragAndDrop={true}\n                path={this.state.path}\n                repoID={this.props.repoID}\n                direntList={this.state.direntList}\n                onFileUploadSuccess={this.onFileUploadSuccess}\n              />\n            )}\n          </div>\n        </div>\n        {isCopyMoveProgressDialogShow && (\n          <CopyMoveDirentProgressDialog\n            type={this.state.asyncOperationType}\n            asyncOperatedFilesLength={this.state.asyncOperatedFilesLength}\n            asyncOperationProgress={this.state.asyncOperationProgress}\n            toggleDialog={this.onMoveProgressDialogToggle}\n          />\n        )}\n      </Fragment>\n    );\n  }\n}\n\nLibContentView.propTypes = propTypes;\n\nexport default LibContentView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass DismissGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  dismissGroup = () => {\n    let that = this;\n    seafileAPI.deleteGroup(this.props.groupID).then((res)=> {\n      that.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showDismissGroupDialog} toggle={this.props.toggleDismissGroupDialog}>\n        <ModalHeader>{gettext('Delete Group')}</ModalHeader>\n        <ModalBody>\n          <span>{gettext('Really want to delete this group?')}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDismissGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.dismissGroup}>{gettext('Delete')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst DismissGroupDialogPropTypes = {\n  showDismissGroupDialog: PropTypes.bool.isRequired,\n  toggleDismissGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nDismissGroupDialog.propTypes = DismissGroupDialogPropTypes;\n\nexport default DismissGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, Input, ModalBody, ModalFooter, Form, FormGroup, Label, Alert } from 'reactstrap';\nimport { gettext, maxFileName } from '../../utils/constants';\n\nconst propTypes = {\n  onCreateRepo: PropTypes.func.isRequired,\n  onCreateToggle: PropTypes.func.isRequired\n};\n\nclass CreateDepartmentRepoDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoName: '',\n      errMessage: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  handleChange = (e) => {\n    if (!e.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      repoName: e.target.value,\n    });\n  }\n\n  handleSubmit = () => {\n    let isValid = this.validateRepoName();\n    if (isValid) {\n      let repo = this.createRepo(this.state.repoName);\n      this.props.onCreateRepo(repo, 'department');\n    }\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n      e.preventDefault();\n    }\n  }\n\n  toggle = () => {\n    this.props.onCreateToggle();\n  }\n\n  componentDidMount = () => {\n    this.newInput.focus();\n  }\n\n  validateRepoName = () => {\n    let errMessage = '';\n    let repoName = this.state.repoName.trim();\n    if (!repoName.length) {\n      errMessage = gettext('Name is required');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n    if (repoName.indexOf('/') > -1) {\n      errMessage = gettext('Name should not include \\'/\\'.');\n      this.setState({errMessage: errMessage});\n      return false;\n    }\n\n    return true;\n  }\n\n  createRepo = (repoName) => {\n    let repo = { repo_name: repoName };\n    return repo;\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Department Library')}</ModalHeader>\n        <ModalBody>\n          <Form>\n            <FormGroup>\n              <Label for=\"repo-name\">{gettext('Name')}</Label>\n              <Input\n                id=\"repo-name\"\n                onKeyPress={this.handleKeyPress}\n                innerRef={input => {this.newInput = input;}}\n                value={this.state.repoName}\n                onChange={this.handleChange}\n                maxLength={maxFileName}\n              />\n            </FormGroup>\n          </Form>\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nCreateDepartmentRepoDialog.propTypes = propTypes;\n\nexport default CreateDepartmentRepoDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\n\nclass RenameGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      newGroupName: this.props.currentGroupName,\n      isSubmitBtnActive: false,\n    };\n  }\n\n  handleGroupNameChange = (event) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    let name = event.target.value;\n    this.setState({\n      newGroupName: name\n    });\n  }\n\n  renameGroup = () => {\n    let name = this.state.newGroupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.renameGroup(this.props.groupID, name).then((res)=> {\n        that.props.loadGroup(this.props.groupID);\n        that.props.onGroupChanged(res.data.id);\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.setState({\n      newGroupName: '',\n    });\n    this.props.toggleRenameGroupDialog();\n  }\n\n  handleKeyDown = (event) => {\n    if (event.keyCode === 13) {\n      this.renameGroup();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showRenameGroupDialog} toggle={this.props.toggleRenameGroupDialog}>\n        <ModalHeader>{gettext('Rename Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"newGroupName\">{gettext('Rename group to')}</label>\n          <Input type=\"text\" id=\"newGroupName\" value={this.state.newGroupName}\n            onChange={this.handleGroupNameChange} onKeyDown={this.handleKeyDown}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleRenameGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.renameGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst RenameGroupDialogPropTypes = {\n  showRenameGroupDialog: PropTypes.bool.isRequired,\n  toggleRenameGroupDialog: PropTypes.func.isRequired,\n  loadGroup: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  currentGroupName: PropTypes.string.isRequired,\n};\n\nRenameGroupDialog.propTypes = RenameGroupDialogPropTypes;\n\nexport default RenameGroupDialog;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api.js';\nimport UserSelect from '../user-select';\nimport { Utils } from '../../utils/utils';\n\nimport '../../css/transfer-group-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  toggleTransferGroupDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired\n};\n\nclass TransferGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedOption: null,\n      errMessage: '',\n    };\n    this.options = [];\n  }\n\n  handleSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: '',\n    });\n    this.options = [];\n  }\n\n  transferGroup = () => {\n    const email = this.state.selectedOption && this.state.selectedOption.email;\n    if (email) {\n      seafileAPI.transferGroup(this.props.groupID, email).then((res) => {\n        this.props.toggleTransferGroupDialog();\n      }).catch((error) => {\n        let errMessage = Utils.getErrorMsg(error);\n        this.setState({errMessage: errMessage});\n      });\n    }\n  }\n\n  toggle = () => {\n    this.props.toggleTransferGroupDialog();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Transfer Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Transfer group to')}</p>\n          <UserSelect\n            ref=\"userSelect\"\n            isMulti={false}\n            className=\"reviewer-select\"\n            placeholder={gettext('Please enter 1 or more character')}\n            onSelectChange={this.handleSelectChange}\n          />\n          <div className=\"error\">{this.state.errMessage}</div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n          <Button color=\"primary\" onClick={this.transferGroup}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nTransferGroupDialog.propTypes = propTypes;\n\nexport default TransferGroupDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert, Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, siteRoot, groupImportMembersExtraMsg } from '../../utils/constants';\n\nconst propTypes = {\n  toggleImportMembersDialog: PropTypes.func.isRequired,\n  importMembersInBatch: PropTypes.func.isRequired,\n};\n\nclass ImportMembersDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fileInputRef = React.createRef();\n    this.state = {\n      errorMsg: ''\n    };\n  }\n\n  toggle = () => {\n    this.props.toggleImportMembersDialog();\n  }\n\n  openFileInput = () => {\n    this.fileInputRef.current.click();\n  }\n\n  uploadFile = (e) => {\n    // no file selected\n    if (!this.fileInputRef.current.files.length) {\n      return;\n    }\n    // check file extension\n    let fileName = this.fileInputRef.current.files[0].name;\n    if(fileName.substr(fileName.lastIndexOf('.') + 1) != 'xlsx') {\n      this.setState({\n        errorMsg: gettext('Please choose a .xlsx file.')\n      });\n      return;\n    }\n    const file = this.fileInputRef.current.files[0];\n    this.props.importMembersInBatch(file);\n    this.toggle();\n  }\n\n  render() {\n    let { errorMsg } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Import members from a .xlsx file')}</ModalHeader>\n\n        <ModalBody>\n          <p>{groupImportMembersExtraMsg}</p>\n          <p><a className=\"text-secondary small\" href={`${siteRoot}api/v2.1/group-members-import-example/`}>{gettext('Download an example file')}</a></p>\n          <button className=\"btn btn-outline-primary\" onClick={this.openFileInput}>{gettext('Upload file')}</button>\n          <input className=\"d-none\" type=\"file\" onChange={this.uploadFile} ref={this.fileInputRef} />\n          {errorMsg && <Alert color=\"danger\">{errorMsg}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nImportMembersDialog.propTypes = propTypes;\n\nexport default ImportMembersDialog;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport RoleEditor from '../select-editor/role-editor';\nimport UserSelect from '../user-select';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nimport '../../css/manage-members-dialog.css';\n\nconst propTypes = {\n  groupID: PropTypes.string.isRequired,\n  toggleManageMembersDialog: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n};\n\nclass ManageMembersDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      groupMembers: [],\n      page: 1,\n      perPage: 100,\n      hasNextPage: false,\n      selectedOption: null,\n      errMessage: [],\n      isItemFreezed: false\n    };\n  }\n\n  componentDidMount() {\n    this.listGroupMembers(this.state.page);\n  }\n\n  listGroupMembers = (page) => {\n    const { groupID } = this.props;\n    const { perPage, groupMembers } = this.state;\n    seafileAPI.listGroupMembers(groupID, page, perPage).then((res) => {\n      const members = res.data;\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        page: page,\n        hasNextPage: members.length < perPage ? false : true,\n        groupMembers: groupMembers.concat(members) \n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        hasNextPage: false\n      });\n    });\n  }\n\n  onSelectChange = (option) => {\n    this.setState({\n      selectedOption: option,\n      errMessage: [],\n    });\n  }\n\n  addGroupMember = () => {\n    let emails = [];\n    for (let i = 0; i < this.state.selectedOption.length; i++) {\n      emails.push(this.state.selectedOption[i].email);\n    }\n    seafileAPI.addGroupMembers(this.props.groupID, emails).then((res) => {\n      const newMembers = res.data.success;\n      this.setState({\n        groupMembers: [].concat(newMembers, this.state.groupMembers),\n        selectedOption: null,\n      });\n      this.refs.userSelect.clearSelect();\n      if (res.data.failed.length > 0) {\n        this.setState({\n          errMessage: res.data.failed\n        });\n      }\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleItemFreezed = (isFreezed) => {\n    this.setState({\n      isItemFreezed: isFreezed\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleManageMembersDialog();\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { page, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.listGroupMembers(page + 1); \n        }); \n      }   \n    }   \n  }\n\n  changeMember = (targetMember) => {\n    this.setState({\n      groupMembers: this.state.groupMembers.map((item) => {\n        if (item.email == targetMember.email) {\n          item = targetMember;\n        }\n        return item;\n      })\n    });\n  }\n\n  deleteMember = (targetMember) => {\n    const groupMembers = this.state.groupMembers;\n    groupMembers.splice(groupMembers.indexOf(targetMember), 1);\n    this.setState({\n      groupMembers: groupMembers\n    });\n  }\n\n  render() {\n    const { isLoading, hasNextPage } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Manage group members')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Add group member')}</p>\n          <div className='add-members'>\n            <UserSelect\n              placeholder={gettext('Search users...')}\n              onSelectChange={this.onSelectChange}\n              ref=\"userSelect\"\n              isMulti={true}\n              className=\"add-members-select\"\n            />\n            {this.state.selectedOption ?\n              <Button color=\"secondary\" onClick={this.addGroupMember}>{gettext('Submit')}</Button> :\n              <Button color=\"secondary\" disabled>{gettext('Submit')}</Button>\n            }\n          </div>\n          {\n            this.state.errMessage.length > 0 &&\n            this.state.errMessage.map((item, index = 0) => {\n              return (\n                <div className=\"group-error error\" key={index}>{item.error_msg}</div>\n              );\n            })\n          }\n          <div className=\"manage-members\" onScroll={this.handleScroll}>\n            {isLoading ? <Loading /> : (\n              <Fragment>\n                <Table size=\"sm\" className=\"manage-members-table\">\n                  <thead>\n                    <tr>\n                      <th width=\"15%\"></th>\n                      <th width=\"45%\">{gettext('Name')}</th>\n                      <th width=\"30%\">{gettext('Role')}</th>\n                      <th width=\"10%\"></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {\n                      this.state.groupMembers.length > 0 &&\n                  this.state.groupMembers.map((item, index) => {\n                    return (\n                        <Member\n                          key={index}\n                          item={item}\n                          changeMember={this.changeMember}\n                          deleteMember={this.deleteMember}\n                          groupID={this.props.groupID}\n                          isOwner={this.props.isOwner}\n                          isItemFreezed={this.state.isItemFreezed}\n                          toggleItemFreezed={this.toggleItemFreezed}\n                        />\n                    );\n                  })\n                    }\n                  </tbody>\n                </Table>\n                {hasNextPage && <Loading />}\n              </Fragment>\n            )}\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nManageMembersDialog.propTypes = propTypes;\n\nconst MemberPropTypes = {\n  item: PropTypes.object.isRequired,\n  changeMember: PropTypes.func.isRequired,\n  deleteMember: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n};\n\nclass Member extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n    this.roles = ['Admin', 'Member'];\n    this.state = ({\n      highlight: false,\n    });\n  }\n\n  onChangeUserRole = (role) => {\n    let isAdmin = role === 'Admin' ? 'True' : 'False';\n    seafileAPI.setGroupAdmin(this.props.groupID, this.props.item.email, isAdmin).then((res) => {\n      this.props.changeMember(res.data);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  deleteMember = () => {\n    const { item } = this.props;\n    seafileAPI.deleteGroupMember(this.props.groupID, item.email).then((res) => {\n      this.props.deleteMember(item);\n      toaster.success(gettext('Successfully deleted {name}.').replace('{name}', item.name));\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  handleMouseOver = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: true,\n    });\n  }\n\n  handleMouseLeave = () => {\n    if (this.props.isItemFreezed) return;\n    this.setState({\n      highlight: false,\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  render() {\n    const { item, isOwner } = this.props;\n    const deleteAuthority = (item.role !== 'Owner' && isOwner === true) || (item.role === 'Member' && isOwner === false);\n    return(\n      <tr onMouseOver={this.handleMouseOver} onMouseLeave={this.handleMouseLeave} className={this.state.highlight ? 'editing' : ''}>\n        <th scope=\"row\"><img className=\"avatar\" src={item.avatar_url} alt=\"\"/></th>\n        <td>{item.name}</td>\n        <td>\n          {((isOwner === false) || (isOwner === true && item.role === 'Owner')) &&\n            <span className=\"group-admin\">{this.translateRole(item.role)}</span>\n          }\n          {(isOwner === true && item.role !== 'Owner') &&\n            <RoleEditor\n              isTextMode={true}\n              isEditIconShow={this.state.highlight}\n              currentRole={item.role}\n              roles={this.roles}\n              onRoleChanged={this.onChangeUserRole}\n              toggleItemFreezed={this.props.toggleItemFreezed}\n            />\n          }\n        </td>\n        <td>\n          {(deleteAuthority && !this.props.isItemFreezed) &&\n            <i\n              className=\"fa fa-times delete-group-member-icon\"\n              onClick={this.deleteMember}>\n            </i>\n          }\n        </td>\n      </tr>\n    );\n  }\n}\n\nMember.propTypes = MemberPropTypes;\n\n\nexport default ManageMembersDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport { gettext, username } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\n\nclass LeaveGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  leaveGroup = () => {\n    seafileAPI.quitGroup(this.props.groupID, username).then((res)=> {\n      this.props.onGroupChanged();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    return(\n      <Modal isOpen={true} toggle={this.props.toggleLeaveGroupDialog}>\n        <ModalHeader toggle={this.props.toggleLeaveGroupDialog}>{gettext('Leave Group')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Really want to leave this group?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleLeaveGroupDialog}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.leaveGroup}>{gettext('Leave')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst LeaveGroupDialogPropTypes = {\n  toggleLeaveGroupDialog: PropTypes.func.isRequired,\n  groupID: PropTypes.string.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n};\n\nLeaveGroupDialog.propTypes = LeaveGroupDialogPropTypes;\n\nexport default LeaveGroupDialog;\n","import React,{ Fragment } from 'react';\nimport { Popover } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport cookie from 'react-cookies';\nimport { gettext, siteRoot, username, canAddRepo } from '../../utils/constants';\nimport { Link } from '@reach/router';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport EmptyTip from '../../components/empty-tip';\nimport ModalPortal from '../../components/modal-portal';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport CreateRepoDialog from '../../components/dialog/create-repo-dialog';\nimport CreateDepartmentRepoDialog from '../../components/dialog/create-department-repo-dialog';\nimport DismissGroupDialog from '../../components/dialog/dismiss-group-dialog';\nimport RenameGroupDialog from '../../components/dialog/rename-group-dialog';\nimport TransferGroupDialog from '../../components/dialog/transfer-group-dialog';\nimport ImportMembersDialog from '../../components/dialog/import-members-dialog';\nimport ManageMembersDialog from '../../components/dialog/manage-members-dialog';\nimport LeaveGroupDialog from '../../components/dialog/leave-group-dialog';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport SortOptionsDialog from '../../components/dialog/sort-options';\n\nimport '../../css/group-view.css';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  onGroupChanged: PropTypes.func.isRequired,\n  onTabNavClick: PropTypes.func.isRequired,\n  groupID: PropTypes.string,\n};\n\nclass GroupView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true, // first loading\n      isLoadingMore: false,\n      errMessage: '',\n      emptyTip: null,\n      currentGroup: null,\n      currentRepo: null,\n      isStaff: false,\n      isOwner: false,\n      sortBy: cookie.load('seafile-repo-dir-sort-by') || 'name', // 'name' or 'time' or 'size'\n      sortOrder: cookie.load('seafile-repo-dir-sort-order') || 'asc', // 'asc' or 'desc'\n      isSortOptionsDialogOpen: false,\n      repoList: [],\n      currentPage: 1,\n      perPage: 50,\n      hasNextPage: false,\n      libraryType: 'group',\n      isCreateRepoDialogShow: false,\n      isDepartmentGroup: false,\n      showGroupDropdown: false,\n      showGroupMembersPopover: false,\n      showRenameGroupDialog: false,\n      showDismissGroupDialog: false,\n      showTransferGroupDialog: false,\n      showImportMembersDialog: false,\n      showManageMembersDialog: false,\n      groupMembers: [],\n      isShowDetails: false,\n      isLeaveGroupDialogOpen: false,\n    };\n  }\n\n  componentDidMount() {\n    let groupID = this.props.groupID;\n    this.loadGroup(groupID);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.groupID !== this.props.groupID) {\n      this.loadGroup(nextProps.groupID);\n    }\n  }\n\n  loadGroup = (groupID) => {\n    seafileAPI.getGroup(groupID).then((res) => {\n      let currentGroup = new Group(res.data);\n      let emptyTip = this.getEmptyTip(currentGroup);\n      let isStaff  = currentGroup.admins.indexOf(username) > -1;  //for item operations\n      let isOwner = currentGroup.owner === username ? true : false;\n      let isDepartmentGroup = currentGroup.parent_group_id !== 0;\n      this.setState({\n        emptyTip: emptyTip,\n        currentGroup: currentGroup,\n        isStaff: isStaff,\n        isDepartmentGroup: isDepartmentGroup,\n        isOwner: isOwner,\n        currentPage: 1,\n        repoList: []  // empty it for the current group\n      }, () => {\n        this.loadRepos(this.state.currentPage);\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  loadRepos = (page) => {\n    const { perPage } = this.state;\n    seafileAPI.listGroupRepos(this.props.groupID, page, perPage).then((res) => {\n      let hasNextPage = true;\n      if (res.data.length < perPage) {\n        hasNextPage = false;\n      }\n      let repoList = this.state.repoList;\n      let newRepoList = res.data.map(item => {\n        let repo = new Repo(item);\n        return repo;\n      });\n      if (newRepoList.length) {\n        repoList = repoList.concat(newRepoList);\n      }\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        currentPage: page,\n        hasNextPage: hasNextPage,\n        repoList: Utils.sortRepos(repoList, this.state.sortBy, this.state.sortOrder)\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        isLoadingMore: false,\n        errMessage: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  getEmptyTip = (currentGroup) => {\n    let emptyTip = null;\n    if (currentGroup) {\n      if (currentGroup.parent_group_id === 0) {\n        emptyTip = (\n          <EmptyTip>\n            <h2>{gettext('No libraries shared with this group')}</h2>\n            <p>{gettext('No libraries have been shared with this group yet. A library shared with a group can be accessed by all group members. You can share a library with a group in \"My Libraries\". You can also create a new library to be shared with this group by clicking the \"New Library\" button in the menu bar.')}</p>\n          </EmptyTip>\n        );\n      } else {\n        if (currentGroup.admins.indexOf(username) == -1) {  // is a member of this group\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n            </EmptyTip>\n          );\n        } else {\n          emptyTip = (\n            <EmptyTip>\n              <h2>{gettext('No libraries')}</h2>\n              <p>{gettext('You can create libraries by clicking the \"New Library\" button above.')}</p>\n            </EmptyTip>\n          );\n        }\n      }\n    }\n    return emptyTip;\n  }\n\n  onCreateRepoToggle = () => {\n    this.setState({isCreateRepoDialogShow: !this.state.isCreateRepoDialogShow});\n  }\n\n  onCreateRepo = (repo, groupOwnerType) => {\n    let groupId = this.props.groupID;\n    if (groupOwnerType && groupOwnerType === 'department') {\n      seafileAPI.createGroupOwnedLibrary(groupId, repo).then(res => { //need modify endpoint api\n        let object = {\n          repo_id: res.data.id,\n          repo_name: res.data.name,\n          owner_name: res.data.group_name,\n          owner_email: res.data.owner,\n          permission: res.data.permission,\n          mtime: res.data.mtime,\n          size: res.data.size,\n          encrypted: res.data.encrypted,\n        };\n        let repo = new Repo(object);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n\n    } else {\n      seafileAPI.createGroupRepo(groupId, repo).then(res => {\n        let repo = new Repo(res.data);\n        let repoList = this.addRepoItem(repo);\n        this.setState({repoList: repoList});\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n    this.onCreateRepoToggle();\n  }\n\n  onItemDelete = (repo) => {\n    let groupID = this.props.groupID;\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n    this.loadGroup(groupID);\n  }\n\n  addRepoItem = (repo) => {\n    let newRepoList = this.state.repoList.map(item => {return item;});\n    newRepoList.unshift(repo);\n    return newRepoList;\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.state.currentGroup;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n      this.loadGroup(group.id);\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemRename = (repo, newName) => {\n    seafileAPI.renameGroupOwnedLibrary(this.props.groupID, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onTabNavClick = (tabName) => {\n    this.props.onTabNavClick(tabName);\n  }\n\n  toggleGroupDropdown = () => {\n    this.setState({\n      showGroupDropdown: !this.state.showGroupDropdown\n    });\n  }\n\n  toggleDismissGroupDialog = () => {\n    this.setState({\n      showDismissGroupDialog: !this.state.showDismissGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleRenameGroupDialog = () => {\n    this.setState({\n      showRenameGroupDialog: !this.state.showRenameGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleTransferGroupDialog = () => {\n    this.setState({\n      showTransferGroupDialog: !this.state.showTransferGroupDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleImportMembersDialog= () => {\n    this.setState({\n      showImportMembersDialog: !this.state.showImportMembersDialog\n    });\n  }\n\n  importMembersInBatch= (file) => {\n    toaster.notify(gettext('It may take some time, please wait.'));\n    seafileAPI.importGroupMembersViaFile(this.state.currentGroup.id, file).then((res) => {\n      res.data.failed.map(item => {\n        const msg = `${item.email}: ${item.error_msg}`;\n        toaster.danger(msg);\n      });\n    }).catch((error) => {\n      let errMsg = Utils.getErrorMsg(error);\n      toaster.danger(errMsg);\n    });\n  }\n\n  toggleManageMembersDialog = () => {\n    this.setState({\n      showManageMembersDialog: !this.state.showManageMembersDialog,\n      showGroupDropdown: false,\n    });\n  }\n\n  toggleLeaveGroupDialog = () => {\n    this.setState({\n      isLeaveGroupDialogOpen: !this.state.isLeaveGroupDialogOpen,\n      showGroupDropdown: false,\n    });\n  }\n\n  listGroupMembers = () => {\n    seafileAPI.listGroupMembers(this.props.groupID).then((res) => {\n      this.setState({\n        groupMembers: res.data\n      });\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggleGroupMembersPopover = (state) => {\n    if (state === 'open') {\n      this.listGroupMembers();\n      this.setState({\n        showGroupMembersPopover: true\n      });\n    } else {\n      this.setState({\n        showGroupMembersPopover: false\n      });\n    }\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  sortItems = (sortBy, sortOrder) => {\n    cookie.save('seafile-repo-dir-sort-by', sortBy);\n    cookie.save('seafile-repo-dir-sort-order', sortOrder);\n    this.setState({\n      sortBy: sortBy,\n      sortOrder: sortOrder,\n      repoList: Utils.sortRepos(this.state.repoList, sortBy, sortOrder)\n    });\n  }\n\n  translateRole = (role) => {\n    if (role === 'Admin') {\n      return gettext('Admin');\n    }\n    else if (role === 'Member') {\n      return gettext('Member');\n    }\n    else if (role === 'Owner') {\n      return gettext('Owner');\n    }\n  }\n\n  toggleSortOptionsDialog = () => {\n    this.setState({\n      isSortOptionsDialogOpen: !this.state.isSortOptionsDialogOpen\n    });\n  }\n\n  handleScroll = (event) => {\n    // isLoadingMore: to avoid repeated request\n    const { currentPage, hasNextPage, isLoadingMore } = this.state;\n    if (hasNextPage && !isLoadingMore) {\n      const clientHeight = event.target.clientHeight;\n      const scrollHeight = event.target.scrollHeight;\n      const scrollTop    = event.target.scrollTop;\n      const isBottom = (clientHeight + scrollTop + 1 >= scrollHeight);\n      if (isBottom) { // scroll to the bottom\n        this.setState({isLoadingMore: true}, () => {\n          this.loadRepos(currentPage + 1);\n        });\n      }\n    }\n  }\n\n  render() {\n    let { errMessage, emptyTip, currentGroup, isDepartmentGroup, isStaff } = this.state;\n    let isShowSettingIcon = false;\n    if (currentGroup) { // group message is loaded\n      if (currentGroup.parent_group_id === 0) {\n        isShowSettingIcon = true;\n      } else {\n        if (currentGroup.admins.indexOf(username) > -1) {\n          isShowSettingIcon = true;\n        }\n      }\n    }\n    let useRate = 0;\n    if (isDepartmentGroup && currentGroup.group_quota) {\n      useRate = currentGroup.group_quota_usage / currentGroup.group_quota * 100 + '%';\n    }\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              {((!isDepartmentGroup && canAddRepo) || (isDepartmentGroup && isStaff)) && (\n                Utils.isDesktop() ? (\n                  <button className=\"btn btn-secondary operation-item\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}>\n                    <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Library')}\n                  </button>\n                ) : (\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Library')} onClick={this.onCreateRepoToggle}></span>\n                )\n              )}\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              {currentGroup && (\n                <Fragment>\n                  <div className=\"path-container\">\n                    <Link to={`${siteRoot}groups/`} onClick={() => this.onTabNavClick('groups')}>{gettext('Groups')}</Link>\n                    <span className=\"path-split\">/</span>\n                    <span>{currentGroup.name}</span>\n                    {isDepartmentGroup && (\n                      <Fragment>\n                        <span className=\"department-group-icon fas fa-building\" title={gettext('This is a special group representing a department.')}></span>\n                        {currentGroup.group_quota > 0 &&\n                          <span className=\"department-usage-container\">\n                            <div className=\"department-usage\">\n                              <span id=\"quota-bar\" className=\"department-quota-bar\"><span id=\"quota-usage\" className=\"usage\" style={{width: useRate}}></span></span>\n                              <span className=\"department-quota-info\">{Utils.bytesToSize(currentGroup.group_quota_usage)} / {Utils.bytesToSize(currentGroup.group_quota)}</span>\n                            </div>\n                          </span>\n                        }\n                      </Fragment>\n                    )}\n                  </div>\n                  <div className=\"path-tool\">\n                    { isShowSettingIcon &&\n                    <React.Fragment>\n                      <a href=\"#\" className=\"sf2-icon-cog1 action-icon group-top-action-icon\" title=\"Settings\" id=\"settings\"\n                        onClick={this.toggleGroupDropdown}></a>\n                      <Popover placement=\"bottom\" isOpen={this.state.showGroupDropdown} target=\"settings\"\n                        toggle={this.toggleGroupDropdown} hideArrow={true} className=\"sf-popover\">\n                        <div className=\"sf-popover-hd sf-popover-title\">\n                          <span>{gettext('Settings')}</span>\n                          <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                            onClick={this.toggleGroupDropdown}></a>\n                        </div>\n                        <div className=\"sf-popover-con\">\n                          {(this.state.isStaff || this.state.isOwner) &&\n                          <ul className=\"sf-popover-list\">\n                            <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleRenameGroupDialog} >{gettext('Rename')}</a></li>\n                            {\n                              this.state.isOwner &&\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleTransferGroupDialog} >{gettext('Transfer')}</a></li>\n                            }\n                          </ul>\n                          }\n                          {(this.state.isStaff || this.state.isOwner) &&\n                          <ul className=\"sf-popover-list\">\n                            <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleImportMembersDialog} >{gettext('Import Members')}</a></li>\n                            <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleManageMembersDialog} >{gettext('Manage Members')}</a></li>\n                          </ul>\n                          }\n                          {\n                            this.state.isOwner &&\n                            <ul className=\"sf-popover-list\">\n                              <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleDismissGroupDialog}>{gettext('Delete Group')}</a></li>\n                            </ul>\n                          }\n                          {/* gourp owner only can dissmiss group, admin could not quit, department member could not quit */}\n                          {(!this.state.isOwner && !this.state.isStaff && !isDepartmentGroup) &&\n                          <ul className=\"sf-popover-list\">\n                            <li><a href=\"#\" className=\"sf-popover-item\" onClick={this.toggleLeaveGroupDialog}>{gettext('Leave Group')}</a></li>\n                          </ul>\n                          }\n                        </div>\n                      </Popover>\n                    </React.Fragment>\n                    }\n                    <a href=\"#\"\n                      className=\"sf2-icon-user2 action-icon group-top-action-icon\"\n                      title={gettext('Members')} id=\"groupMembers\"\n                      onClick={() => this.toggleGroupMembersPopover('open')}>\n                    </a>\n                    <Popover placement=\"bottom\" isOpen={this.state.showGroupMembersPopover} target=\"groupMembers\"\n                      toggle={this.toggleGroupMembersPopover} hideArrow={true} className=\"sf-popover\">\n                      <div className=\"sf-popover-hd sf-popover-title group-member-list-header\">\n                        <span>{gettext('Members')}</span>\n                        <a href=\"#\" className=\"sf-popover-close js-close sf2-icon-x1 action-icon\"\n                          onClick={this.toggleGroupMembersPopover}></a>\n                      </div>\n                      <div className=\"sf-popover-con\">\n                        <ul className=\"sf-popover-list group-member-list\">\n                          {this.state.groupMembers.map((item, index) => {\n                            return (\n                              <li key={index}>\n                                <a href=\"#\" className=\"sf-popover-item user-item d-flex\">\n                                  <img src={item.avatar_url} alt=\"\" className=\"group-member-avatar avatar\"/>\n                                  <span className=\"txt-item ellipsis d-flex\">\n                                    <span className=\"group-member-name ellipsis\">{item.name}</span>\n                                    <span className=\"group-member-admin\">{this.translateRole(item.role)}</span>\n                                  </span>\n                                </a>\n                              </li>\n                            );\n                          })}\n                        </ul>\n                      </div>\n                    </Popover>\n                    {(!Utils.isDesktop() && this.state.repoList.length > 0) && <span className=\"sf3-font sf3-font-sort action-icon\" onClick={this.toggleSortOptionsDialog}></span>}\n                    {this.state.isSortOptionsDialogOpen &&\n                    <SortOptionsDialog\n                      toggleDialog={this.toggleSortOptionsDialog}\n                      sortBy={this.state.sortBy}\n                      sortOrder={this.state.sortOrder}\n                      sortItems={this.sortItems}\n                    />\n                    }\n                  </div>\n                </Fragment>\n              )}\n            </div>\n            <div className=\"cur-view-content d-block\" onScroll={this.handleScroll}>\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && errMessage) && <div className=\"error text-center mt-2\">{errMessage}</div>}\n              {(!this.state.isLoading && this.state.repoList.length === 0) && emptyTip}\n              {(!this.state.isLoading && this.state.repoList.length > 0) &&\n                <SharedRepoListView\n                  repoList={this.state.repoList}\n                  hasNextPage={this.state.hasNextPage}\n                  currentGroup={this.state.currentGroup}\n                  sortBy={this.state.sortBy}\n                  sortOrder={this.state.sortOrder}\n                  sortItems={this.sortItems}\n                  onItemUnshare={this.onItemUnshare}\n                  onItemDelete={this.onItemDelete}\n                  onItemDetails={this.onItemDetails}\n                  onItemRename={this.onItemRename}\n                />\n              }\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        {this.state.isCreateRepoDialogShow && !this.state.isDepartmentGroup && (\n          <ModalPortal>\n            <CreateRepoDialog\n              libraryType={this.state.libraryType}\n              onCreateToggle={this.onCreateRepoToggle}\n              onCreateRepo={this.onCreateRepo}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isCreateRepoDialogShow && this.state.isDepartmentGroup &&\n          <CreateRepoDialog\n            isAdmin={this.state.isAdmin}\n            onCreateToggle={this.onCreateRepoToggle}\n            onCreateRepo={this.onCreateRepo}\n            libraryType='department'\n          />\n        }\n        {this.state.showRenameGroupDialog &&\n          <RenameGroupDialog\n            showRenameGroupDialog={this.state.showRenameGroupDialog}\n            toggleRenameGroupDialog={this.toggleRenameGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            currentGroupName={currentGroup.name}\n          />\n        }\n        {this.state.showDismissGroupDialog &&\n          <DismissGroupDialog\n            showDismissGroupDialog={this.state.showDismissGroupDialog}\n            toggleDismissGroupDialog={this.toggleDismissGroupDialog}\n            loadGroup={this.loadGroup}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        {this.state.showTransferGroupDialog &&\n          <TransferGroupDialog\n            toggleTransferGroupDialog={this.toggleTransferGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n        { this.state.showImportMembersDialog &&\n          <ImportMembersDialog\n            toggleImportMembersDialog={this.toggleImportMembersDialog}\n            importMembersInBatch={this.importMembersInBatch}\n          />\n        }\n        {this.state.showManageMembersDialog &&\n          <ManageMembersDialog\n            toggleManageMembersDialog={this.toggleManageMembersDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n            isOwner={this.state.isOwner}\n          />\n        }\n        {this.state.isLeaveGroupDialogOpen &&\n          <LeaveGroupDialog\n            toggleLeaveGroupDialog={this.toggleLeaveGroupDialog}\n            groupID={this.props.groupID}\n            onGroupChanged={this.props.onGroupChanged}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nGroupView.propTypes = propTypes;\n\nexport default GroupView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaQuery from 'react-responsive';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext, canAddGroup } from '../../utils/constants';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleAddGroupModal: PropTypes.func.isRequired,\n};\n\nclass GroupsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"></span>\n          {canAddGroup && (\n            <div className=\"operation\">\n              <MediaQuery query=\"(min-width: 768px)\">\n                <Button color=\"btn btn-secondary operation-item\" onClick={this.props.toggleAddGroupModal}>\n                  <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('New Group')}\n                </Button>\n              </MediaQuery>\n              <MediaQuery query=\"(max-width: 767.8px)\">\n                <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('New Group')} onClick={this.props.toggleAddGroupModal}></span>\n              </MediaQuery>\n            </div>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nGroupsToolbar.propTypes = propTypes;\n\nexport default GroupsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport { Utils } from '../../utils/utils';\n\nclass CreateGroupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupName: '',\n      errorMsg: '',\n      isSubmitBtnActive: false,\n    };\n    this.newInput = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  handleGroupChange = (event) => {\n    let name = event.target.value;\n\n    if (!name.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n    this.setState({\n      groupName: name\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleSubmitGroup = () => {\n    let name = this.state.groupName.trim();\n    if (name) {\n      let that = this;\n      seafileAPI.createGroup(name).then((res)=> {\n        that.props.onCreateGroup();\n      }).catch((error) => {\n        let errorMsg = Utils.getErrorMsg(error);\n        this.setState({errorMsg: errorMsg});\n      });\n    } else {\n      this.setState({\n        errorMsg: gettext('Name is required')\n      });\n    }\n    this.setState({\n      groupName: '',\n    });\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      this.handleSubmitGroup();\n      e.preventDefault();\n    }\n  }\n\n  render() {\n    return(\n      <Modal isOpen={this.props.showAddGroupModal} toggle={this.props.toggleAddGroupModal}>\n        <ModalHeader toggle={this.props.toggleAddGroupModal}>{gettext('New Group')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"groupName\">{gettext('Name')}</label>\n          <Input\n            innerRef={input => {this.newInput = input;}}\n            type=\"text\"\n            id=\"groupName\"\n            value={this.state.groupName}\n            onChange={this.handleGroupChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <span className=\"error\">{this.state.errorMsg}</span>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleAddGroupModal}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmitGroup} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nconst CreateGroupDialogPropTypes = {\n  toggleAddGroupModal: PropTypes.func.isRequired,\n  onCreateGroup: PropTypes.func.isRequired,\n  showAddGroupModal: PropTypes.bool.isRequired,\n};\n\nCreateGroupDialog.propTypes = CreateGroupDialogPropTypes;\n\nexport default CreateGroupDialog;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext, siteRoot, canAddGroup } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../../components/loading';\nimport Group from '../../models/group';\nimport Repo from '../../models/repo';\nimport toaster from '../../components/toast';\nimport GroupsToolbar from '../../components/toolbar/groups-toolbar';\nimport SharedRepoListView from '../../components/shared-repo-list-view/shared-repo-list-view';\nimport CreateGroupDialog from '../../components/dialog/create-group-dialog';\nimport LibDetail from '../../components/dirent-detail/lib-details';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/groups.css';\n\nconst propTypes = {\n  group: PropTypes.object.isRequired,\n  onItemDetails: PropTypes.func.isRequired,\n};\n\n\nclass RepoListViewPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repoList: [],\n    };\n  }\n\n  componentDidMount() {\n    let group = this.props.group;\n    let repoList = group.repos.map(item => {\n      let repo = new Repo(item);\n      return repo;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemUnshare = (repo) => {\n    let group = this.props.group;\n    seafileAPI.unshareRepoToGroup(repo.repo_id, group.id).then(() => {\n      let repoList = this.state.repoList.filter(item => {\n        return item.repo_id !== repo.repo_id;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  onItemDelete = (repo) => {\n    let repoList = this.state.repoList.filter(item => {\n      return item.repo_id !== repo.repo_id;\n    });\n    this.setState({repoList: repoList});\n  }\n\n  onItemRename = (repo, newName) => {\n    let group = this.props.group;\n    seafileAPI.renameGroupOwnedLibrary(group.id, repo.repo_id, newName).then(res => {\n      let repoList = this.state.repoList.map(item => {\n        if (item.repo_id === repo.repo_id) {\n          item.repo_name = newName;\n        }\n        return item;\n      });\n      this.setState({repoList: repoList});\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  render() {\n    let group = this.props.group;\n    const emptyTip = <p className=\"group-item-empty-tip\">{gettext('No libraries')}</p>;\n    return (\n      <div className=\"group-list-panel\">\n        <h4 className=\"group-item-heading ellipsis\">\n          <a href={`${siteRoot}group/${group.id}/`} title={group.name}>{group.name}</a>\n        </h4>\n        {this.state.repoList.length === 0 ?\n          emptyTip :\n          <SharedRepoListView\n            isShowTableThread={false}\n            isShowRepoOwner={false}\n            currentGroup={this.props.group}\n            repoList={this.state.repoList}\n            onItemUnshare={this.onItemUnshare}\n            onItemDelete={this.onItemDelete}\n            onItemDetails={this.props.onItemDetails}\n            onItemRename={this.onItemRename}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nRepoListViewPanel.propTypes = propTypes;\n\nclass GroupsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      errorMsg: '',\n      groupList: [],\n      showAddGroupModal: false,\n      isShowDetails: false,\n      currentRepo: null,\n    };\n  }\n\n  listGroups = () => {\n    seafileAPI.listGroups(true).then((res) => {\n      // `{'with_repos': 1}`: list repos of every group\n      // res: {data: [...], status: 200, statusText: \"OK\", headers: {}, config: {},}\n      let groupList = res.data.map(item => {\n        let group = new Group(item);\n        return group;\n      });\n      this.setState({\n        isLoading: false,\n        groupList: groupList.sort((a, b) => {\n          return a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n        })\n      });\n    }).catch((error) => {\n      this.setState({\n        isLoading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  toggleAddGroupModal = () => {\n    this.setState({\n      showAddGroupModal: !this.state.showAddGroupModal\n    });\n  }\n\n  onCreateGroup = () => {\n    this.setState({\n      showAddGroupModal: false,\n      isLoading: true,\n      groupList: [],\n    });\n    this.listGroups();\n  }\n\n  componentDidMount() {\n    this.listGroups();\n  }\n\n  onItemDetails = (repo) => {\n    this.setState({\n      isShowDetails: true,\n      currentRepo: repo,\n    });\n  }\n\n  closeDetails = () => {\n    this.setState({isShowDetails: false});\n  }\n\n  render() {\n    const emptyTip = (\n      <EmptyTip>\n        <h2>{gettext('No groups')}</h2>\n        {canAddGroup ?\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. You can create a group by clicking the \"New Group\" button in the menu bar.')}</p> :\n          <p>{gettext('You are not in any groups. Groups allow multiple people to collaborate on libraries. Groups you join will be listed here.')}</p>\n        }\n      </EmptyTip>\n    );\n\n    return (\n      <Fragment>\n        <GroupsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleAddGroupModal={this.toggleAddGroupModal}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('My Groups')}</h3>\n            </div>\n            <div className=\"cur-view-content cur-view-content-groups\">\n              {this.state.isLoading && <Loading />}\n              {(!this.state.isLoading && this.state.errorMsg) && <div className=\"error text-center mt-2\">{this.state.errorMsg}</div>}\n              {(!this.state.isLoading && !this.state.errorMsg && this.state.groupList.length == 0) && emptyTip}\n              {!this.state.isLoading && this.state.groupList.map((group, index) => {\n                return (\n                  <RepoListViewPanel\n                    key={index}\n                    group={group}\n                    onItemDetails={this.onItemDetails}\n                  />\n                );\n              })}\n            </div>\n          </div>\n          {this.state.isShowDetails && (\n            <div className=\"cur-view-detail\">\n              <LibDetail currentRepo={this.state.currentRepo} closeDetails={this.closeDetails}/>\n            </div>\n          )}\n        </div>\n        { this.state.showAddGroupModal &&\n          <CreateGroupDialog\n            toggleAddGroupModal={this.toggleAddGroupModal}\n            onCreateGroup={this.onCreateGroup}\n            showAddGroupModal={this.state.showAddGroupModal}\n          />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst GroupsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nGroupsView.propTypes = GroupsViewPropTypes;\n\nexport default GroupsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\nimport { Button } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n  toggleInvitePeopleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitationsToolbar extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    let { onShowSidePanel, onSearchedClick, toggleInvitePeopleDialog } = this.props;\n    return (\n      <div className=\"main-panel-north border-left-show\">\n        <div className=\"cur-view-toolbar\">\n          <span title=\"Side Nav Menu\" onClick={onShowSidePanel} className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\">\n          </span>\n          {Utils.isDesktop() ? (\n            <div className=\"operation\">\n              <Button color=\"btn btn-secondary operation-item\" onClick={toggleInvitePeopleDialog}>\n                <i className=\"fas fa-plus-square text-secondary mr-1\"></i>{gettext('Invite Guest')}\n              </Button>\n            </div>\n          ) : (\n            <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Invite Guest')} onClick={toggleInvitePeopleDialog}></span>\n          )}\n        </div>\n        <CommonToolbar searchPlaceholder={this.props.searchPlaceholder} onSearchedClick={onSearchedClick}/>\n      </div>\n    );\n  }\n}\n\nInvitationsToolbar.propTypes = propTypes;\n\nexport default InvitationsToolbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Utils } from '../../utils/utils';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Input, Button } from 'reactstrap';\nimport toaster from '../toast';\nimport Loading from '../loading';\n\nconst InvitePeopleDialogPropTypes = {\n  onInvitePeople: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired,\n};\n\nclass InvitePeopleDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      emails: '',\n      errorMsg: '',\n      isSubmitting: false\n    };\n  }\n\n  handleInputChange = (e) => {\n    let emails = e.target.value;\n    this.setState({\n      emails: emails\n    });\n    if (this.state.errorMsg) {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      this.handleSubmitInvite();\n    }\n  }\n\n  handleSubmitInvite = () => {\n    let emails = this.state.emails.trim();\n    if (!emails) {\n      this.setState({\n        errorMsg: gettext('It is required.')\n      });\n      return false;\n    }\n\n    let emailsArray = [];\n    emails = emails.split(',');\n    for (let i = 0, len = emails.length; i < len; i++) {\n      let email = emails[i].trim();\n      if (email) {\n        emailsArray.push(email);\n      }\n    }\n\n    if (!emailsArray.length) {\n      this.setState({\n        errorMsg: gettext('Email is invalid.')\n      });\n      return false;\n    }\n\n    this.setState({\n      isSubmitting: true\n    });\n    seafileAPI.invitePeople(emailsArray).then((res) => {\n      this.props.toggleDialog();\n      const success = res.data.success;\n      if (success.length) {\n        let successMsg = '';\n        if (success.length == 1) {\n          successMsg = gettext('Successfully invited %(email).')\n            .replace('%(email)', success[0].accepter);\n        } else {\n          successMsg = gettext('Successfully invited %(email) and %(num) other people.')\n            .replace('%(email)', success[0].accepter)\n            .replace('%(num)', success.length - 1);\n        }\n        toaster.success(successMsg);\n        this.props.onInvitePeople(success);\n      }\n      const failed = res.data.failed;\n      if (failed.length) {\n        for (let i = 0, len = failed.length; i < len; i++) {\n          let failedMsg = failed[i].email + ': ' + failed[i].error_msg;\n          toaster.danger(failedMsg);\n        }\n      }\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  }\n\n  render() {\n    const { isSubmitting } = this.state;\n    return (\n      <Modal isOpen={true} toggle={this.props.toggleDialog}>\n        <ModalHeader toggle={this.props.toggleDialog}>{gettext('Invite Guest')}</ModalHeader>\n        <ModalBody>\n          <label htmlFor=\"emails\">{gettext('Emails')}</label>\n          <Input\n            type=\"text\"\n            id=\"emails\"\n            placeholder={gettext('Emails, separated by \\',\\'')}\n            value={this.state.emails}\n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n          <p className=\"error mt-2\">{this.state.errorMsg}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.handleSubmitInvite} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitePeopleDialog.propTypes = InvitePeopleDialogPropTypes;\n\nexport default InvitePeopleDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport Loading from '../loading';\nimport toaster from '../toast';\n\nconst propTypes = {\n  accepter: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  revokeInvitation: PropTypes.func.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass InvitationRevokeDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSubmitting: false\n    };\n  }\n\n  onRevokeInvitation = () => {\n    this.setState({\n      isSubmitting: true,\n    });\n\n    seafileAPI.revokeInvitation(this.props.token).then((res) => {\n      this.props.revokeInvitation();\n      this.props.toggleDialog();\n      const msg = gettext('Successfully revoked access of user {placeholder}.').replace('{placeholder}', this.props.accepter);\n      toaster.success(msg);\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.props.toggleDialog();\n    });\n  };\n\n  render() {\n    const { accepter, toggleDialog } = this.props;\n    const { isSubmitting } = this.state;\n    const email = '<span class=\"op-target\">' + Utils.HTMLescape(this.props.accepter) + '</span>';\n    const content = gettext('Are you sure to revoke access of user {placeholder} ?').replace('{placeholder}', email);\n\n    return (\n      <Modal isOpen={true} toggle={toggleDialog}>\n        <ModalHeader toggle={toggleDialog}>{gettext('Revoke Access')}</ModalHeader>\n        <ModalBody>\n          <p dangerouslySetInnerHTML={{__html: content}}></p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Cancel')}</Button>\n          <Button className=\"submit-btn\" color=\"primary\" onClick={this.onRevokeInvitation} disabled={isSubmitting}>{isSubmitting ? <Loading /> : gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nInvitationRevokeDialog.propTypes = propTypes;\n\nexport default InvitationRevokeDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport InvitationsToolbar from '../../components/toolbar/invitations-toolbar';\nimport InvitePeopleDialog from '../../components/dialog/invite-people-dialog';\nimport InvitationRevokeDialog from '../../components/dialog/invitation-revoke-dialog';\nimport Loading from '../../components/loading';\nimport toaster from '../../components/toast';\nimport EmptyTip from '../../components/empty-tip';\n\nimport '../../css/invitations.css';\n\nclass Item extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpIconShown: false,\n      isOpMenuOpen: false, // for mobile\n      isRevokeDialogOpen: false\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      isOpIconShown: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      isOpIconShown: false\n    });\n  }\n\n  deleteItem = () => {\n    // make the icon avoid being clicked repeatedly\n    this.setState({\n      isOpIconShown: false\n    });\n    const token = this.props.invitation.token;\n    seafileAPI.deleteInvitation(token).then((res) => {\n      this.setState({deleted: true});\n      toaster.success(gettext('Successfully deleted 1 item.'));\n    }).catch((error) => {\n      const errorMsg = Utils.getErrorMsg(error);\n      toaster.danger(errorMsg);\n      this.setState({\n        isOpIconShown: true\n      });\n    });\n  }\n\n  revokeItem = () => {\n    this.setState({deleted: true});\n  }\n\n  toggleRevokeDialog = () => {\n    this.setState({\n      isRevokeDialogOpen: !this.state.isRevokeDialogOpen\n    });\n  }\n\n  render() {\n    const { isOpIconShown, deleted, isRevokeDialogOpen } = this.state;\n\n    if (deleted) {\n      return null;\n    }\n\n    const item = this.props.invitation;\n\n    const desktopItem = (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td>{item.accepter}</td>\n        <td>{moment(item.invite_time).format('YYYY-MM-DD')}</td>\n        <td>{moment(item.expire_time).format('YYYY-MM-DD')}</td>\n        <td>{item.accept_time && <i className=\"sf2-icon-tick invite-accept-icon\"></i>}</td>\n        <td>\n          {isOpIconShown && (\n            item.accept_time ?\n              <i\n                className=\"action-icon sf3-font sf3-font-cancel-invitation\"\n                title={gettext('Revoke Access')}\n                onClick={this.toggleRevokeDialog}>\n              </i> :\n              <i\n                className=\"action-icon sf2-icon-x3\"\n                title={gettext('Delete')}\n                onClick={this.deleteItem}>\n              </i>\n          )}\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr>\n        <td>\n          {item.accepter}<br />\n          <span className=\"item-meta-info\">{moment(item.invite_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Invite Time')})</span></span>\n          <span className=\"item-meta-info\">{moment(item.expire_time).format('YYYY-MM-DD')}<span className=\"small\">({gettext('Expiration')})</span></span>\n          <span className=\"item-meta-info\">{item.accept_time && gettext('Accepted')}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                {item.accept_time ?\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.toggleRevokeDialog}>{gettext('Revoke Access')}</DropdownItem> :\n                  <DropdownItem className=\"mobile-menu-item\" onClick={this.deleteItem}>{gettext('Delete')}</DropdownItem>\n                }\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {this.props.isDesktop ? desktopItem : mobileItem}\n        {isRevokeDialogOpen &&\n        <InvitationRevokeDialog\n          accepter={item.accepter}\n          token={item.token}\n          revokeInvitation={this.revokeItem}\n          toggleDialog={this.toggleRevokeDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst ItemPropTypes = {\n  invitation: PropTypes.object.isRequired,\n};\n\nItem.propTypes = ItemPropTypes;\n\nclass Content extends Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {\n      loading, errorMsg, invitationsList\n    } = this.props.data;\n\n    if (loading) {\n      return <Loading />;\n    }\n\n    if (errorMsg) {\n      return <p className=\"error text-center mt-2\">{errorMsg}</p>;\n    }\n\n    if (!invitationsList.length) {\n      return (\n        <EmptyTip>\n          <h2>{gettext('No guest invitations')}</h2>\n          <p>{gettext('You have not invited any guests yet. A guest can access shared libraries through the web interface allowing more efficient ways to collaborate than through links. You can invite a guest by clicking the \"Invite Guest\" button in the menu bar.')}</p>\n        </EmptyTip>\n      );\n    }\n\n    const isDesktop = Utils.isDesktop();\n    return (\n      <table className={`table-hover${isDesktop ? '': ' table-thead-hidden'}`}>\n        <thead>\n          {isDesktop ?\n            <tr>\n              <th width=\"25%\">{gettext('Email')}</th>\n              <th width=\"20%\">{gettext('Invite Time')}</th>\n              <th width=\"20%\">{gettext('Expiration')}</th>\n              <th width=\"18%\">{gettext('Accepted')}</th>\n              <th width=\"7%\"></th>\n            </tr>\n            :\n            <tr>\n              <th width=\"92%\"></th>\n              <th width=\"8%\"></th>\n            </tr>\n          }\n        </thead>\n        <tbody>\n          {invitationsList.map((invitation, index) => {\n            return (\n              <Item\n                key={index}\n                isDesktop={isDesktop}\n                invitation={invitation}\n              />\n            );\n          })}\n        </tbody>\n      </table>\n    );\n  }\n}\n\nclass InvitationsView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      invitationsList: [],\n      isInvitePeopleDialogOpen: false\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listInvitations().then((res) => {\n      this.setState({\n        invitationsList: res.data,\n        loading: false\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  onInvitePeople = (invitationsArray) => {\n    invitationsArray.push.apply(invitationsArray, this.state.invitationsList);\n    this.setState({\n      invitationsList: invitationsArray,\n    });\n  }\n\n  toggleInvitePeopleDialog = () => {\n    this.setState({\n      isInvitePeopleDialogOpen: !this.state.isInvitePeopleDialogOpen\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <InvitationsToolbar\n          onShowSidePanel={this.props.onShowSidePanel}\n          onSearchedClick={this.props.onSearchedClick}\n          toggleInvitePeopleDialog={this.toggleInvitePeopleDialog}\n        />\n        <div className=\"main-panel-center flex-row\">\n          <div className=\"cur-view-container\">\n            <div className=\"cur-view-path\">\n              <h3 className=\"sf-heading\">{gettext('Invite Guest')}</h3>\n            </div>\n            <div className=\"cur-view-content\">\n              <Content data={this.state} />\n            </div>\n          </div>\n        </div>\n        {this.state.isInvitePeopleDialogOpen &&\n        <InvitePeopleDialog\n          onInvitePeople={this.onInvitePeople}\n          toggleDialog={this.toggleInvitePeopleDialog}\n        />\n        }\n      </Fragment>\n    );\n  }\n}\n\nconst InvitationsViewPropTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nInvitationsView.propTypes = InvitationsViewPropTypes;\n\nexport default InvitationsView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired,\n};\n\nclass NewWikiDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isExist: false,\n      name: '',\n      repoID: '',\n      isSubmitBtnActive: false,\n    };\n    this.newName = React.createRef();\n  }\n\n  componentDidMount() {\n    this.newName.focus();\n    this.newName.setSelectionRange(0, -1);\n  }\n\n  inputNewName = (e) => {\n    if (!event.target.value.trim()) {\n      this.setState({isSubmitBtnActive: false});\n    } else {\n      this.setState({isSubmitBtnActive: true});\n    }\n\n    this.setState({\n      name: e.target.value,\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.handleSubmit();\n    }\n  }\n\n  handleSubmit = () => {\n    let { isExist, name, repoID } = this.state;\n    this.props.addWiki(isExist, name, repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('New Wiki')}</ModalHeader>\n        <ModalBody>\n          <label className=\"form-label\">{gettext('Name')}</label>\n          <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newName = input;}} value={this.state.name} onChange={this.inputNewName}/>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.handleSubmit} disabled={!this.state.isSubmitBtnActive}>{gettext('Submit')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nNewWikiDialog.propTypes = propTypes;\n\nexport default NewWikiDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport moment from 'moment';\nimport Repo from '../../models/repo';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  addWiki: PropTypes.func.isRequired\n};\n\nclass WikiSelectDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repos: [],\n      repoID: '',\n    };\n  }\n\n  componentDidMount() {\n    seafileAPI.listRepos().then(res => {\n      let repoList = res.data.repos\n        .filter(item => {\n          switch (item.type) {\n            case 'mine': // my libraries\n              return !item.encrypted;\n            case 'shared': // libraries shared with me\n              // 'is_admin': the library is shared with 'admin' permission\n              return !item.encrypted && item.is_admin;\n            case 'group':\n            default:\n              return !item.encrypted && !res.data.repos.some(repo => {\n                // just remove the duplicated libraries\n                return repo.type != item.type && repo.repo_id == item.repo_id;\n              });\n          }\n        })\n        .map(item => {\n          let repo = new Repo(item);\n          return repo;\n        });\n      repoList = Utils.sortRepos(repoList, 'name', 'asc');\n      this.setState({repos: repoList});\n    });\n  }\n\n  onChange = (repo) => {\n    this.setState({\n      repoID: repo.repo_id,\n    });\n  }\n\n  handleSubmit = () => {\n    let { repoID } = this.state;\n    this.props.addWiki(repoID);\n    this.props.toggleCancel();\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true}>\n        <ModalHeader toggle={this.toggle}>{gettext('Publish a Library')}</ModalHeader>\n        <ModalBody className=\"dialog-list-container\">\n          <table>\n            <thead>\n              <tr>\n                <th width='6%'>{/* select */}</th>\n                <th width='9%'>{/* icon */}</th>\n                <th width='55%'>{gettext('Name')}</th>\n                <th width='30%'>{gettext('Last Update')}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.repos.map((repo, index) => {\n                return (\n                  <tr key={index}>\n                    <td className=\"text-center\"><input type=\"radio\" className=\"vam\" name=\"repo\" value={repo.repo_id} onChange={this.onChange.bind(this, repo)} /></td>\n                    <td className=\"text-center\"><img src={Utils.getLibIconUrl(repo, false)} width=\"24\" title={Utils.getLibIconTitle(repo)} alt={Utils.getLibIconTitle(repo)} /></td>\n                    <td>{repo.repo_name}</td>\n                    <td>{moment(repo.last_modified).fromNow()}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          {this.state.repoID ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>:\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiSelectDialog.propTypes = propTypes;\n\nexport default WikiSelectDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\n\nconst propTypes = {\n  toggleCancel: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n};\n\nclass WikiDeleteDialog extends React.Component {\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  render() {\n    return (\n      <Modal isOpen={true} toggle={this.toggle}>\n        <ModalHeader toggle={this.toggle}>{gettext('Unpublish Library')}</ModalHeader>\n        <ModalBody>\n          <p>{gettext('Are you sure you want to unpublish this library?')}</p>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          <Button color=\"primary\" onClick={this.props.handleSubmit}>{gettext('Unpublish')}</Button>\n        </ModalFooter>\n      </Modal>\n    );\n  }\n}\n\nWikiDeleteDialog.propTypes = propTypes;\n\nexport default WikiDeleteDialog;\n","import React, { Component, Fragment } from 'react';\nimport { Dropdown, DropdownToggle, DropdownItem } from 'reactstrap';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport { siteRoot, gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\n// import { seafileAPI } from '../../utils/seafile-api';\n// import Toast from '../toast';\nimport ModalPortal from '../modal-portal';\nimport WikiDeleteDialog from '../dialog/wiki-delete-dialog';\n// import Rename from '../rename';\n\nconst propTypes = {\n  wiki: PropTypes.object.isRequired,\n  // renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onFreezedItem: PropTypes.func.isRequired,\n  onUnfreezedItem: PropTypes.func.isRequired,\n};\n\nclass WikiListItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpMenuOpen: false, // for mobile\n      isShowDeleteDialog: false,\n      // isRenameing: false,\n      highlight: false,\n      // permission: this.props.wiki.permission,\n    };\n  }\n\n  toggleOpMenu = () => {\n    this.setState({\n      isOpMenuOpen: !this.state.isOpMenuOpen\n    });\n  }\n\n  // clickMenuToggle = (e) => {\n  //   e.preventDefault();\n  //   this.onMenuToggle(e);\n  // }\n\n  // onMenuToggle = (e) => {\n  //   let targetType = e.target.dataset.toggle;\n  //   if (targetType !== 'item') {\n  //     if (this.props.isItemFreezed) {\n  //       this.setState({\n  //         highlight: false,\n  //         isShowMenuControl: false,\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onUnfreezedItem();\n  //     } else {\n  //       this.setState({\n  //         isShowWikiMenu: !this.state.isShowWikiMenu\n  //       });\n  //       this.props.onFreezedItem();\n  //     }\n  //   }\n  // }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: true });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({ highlight: false });\n    }\n  }\n\n  // changePerm = (permission) => {\n  //   let wiki = this.props.wiki;\n  //   seafileAPI.updateWikiPermission(wiki.slug, permission).then(() => {\n  //     this.setState({permission: permission});\n  //   }).catch((error) => {\n  //     if(error.response) {\n  //       let errorMsg = error.response.data.error_msg;\n  //       Toast.danger(errorMsg);\n  //     }\n  //   });\n  // }\n\n  // onRenameToggle = (e) => {\n  //   this.props.onFreezedItem();\n  //   this.setState({\n  //     isShowWikiMenu: false,\n  //     isShowMenuControl: false,\n  //     isRenameing: true,\n  //   });\n  // }\n\n  // onRenameConfirm = (newName) => {\n  //   this.renameWiki(newName);\n  //   this.onRenameCancel();\n  // }\n\n  // onRenameCancel = () => {\n  //   this.props.onUnfreezedItem();\n  //   this.setState({isRenameing: false});\n  // }\n\n  onDeleteToggle = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  onDeleteCancel = () => {\n    this.props.onUnfreezedItem();\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  // renameWiki = (newName) => {\n  //   let wiki = this.props.wiki;\n  //   this.props.renameWiki(wiki, newName);\n  // }\n\n  deleteWiki = () => {\n    let wiki = this.props.wiki;\n    this.props.deleteWiki(wiki);\n    this.setState({\n      isShowDeleteDialog: !this.state.isShowDeleteDialog,\n    });\n  }\n\n  render() {\n    let wiki = this.props.wiki;\n    let userProfileURL = `${siteRoot}profile/${encodeURIComponent(wiki.owner)}/`;\n    let fileIconUrl = Utils.getDefaultLibIconUrl(false);\n    let deleteIcon = `action-icon sf2-icon-x3 ${this.state.highlight ? '' : 'invisible'}`;\n\n    const desktopItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td className=\"name\">\n          <a href={wiki.link}>{wiki.name}</a>\n          {/*this.state.isRenameing ?\n              <Rename wiki={wiki} name={wiki.name} onRenameConfirm={this.onRenameConfirm} onRenameCancel={this.onRenameCancel}/> :\n              <a href={wiki.link}>{wiki.name}</a>\n            */}\n        </td>\n        <td><a href={userProfileURL} target='_blank'>{wiki.owner_nickname}</a></td>\n        <td>{moment(wiki.updated_at).fromNow()}</td>\n        <td className=\"text-center cursor-pointer\">\n          <span className={deleteIcon} onClick={this.onDeleteToggle}></span>\n        </td>\n      </tr>\n    );\n\n    const mobileItem = (\n      <tr className={this.state.highlight ? 'tr-highlight' : ''} onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><img src={fileIconUrl} width=\"24\" alt=\"\" /></td>\n        <td>\n          <a href={wiki.link}>{wiki.name}</a><br />\n          <a href={userProfileURL} target='_blank' className=\"item-meta-info\">{wiki.owner_nickname}</a>\n          <span className=\"item-meta-info\">{moment(wiki.updated_at).fromNow()}</span>\n        </td>\n        <td>\n          <Dropdown isOpen={this.state.isOpMenuOpen} toggle={this.toggleOpMenu}>\n            <DropdownToggle\n              tag=\"i\"\n              className=\"sf-dropdown-toggle fa fa-ellipsis-v ml-0\"\n              title={gettext('More Operations')}\n              data-toggle=\"dropdown\"\n              aria-expanded={this.state.isOpMenuOpen}\n            />\n            <div className={this.state.isOpMenuOpen ? '' : 'd-none'} onClick={this.toggleOpMenu}>\n              <div className=\"mobile-operation-menu-bg-layer\"></div>\n              <div className=\"mobile-operation-menu\">\n                <DropdownItem className=\"mobile-menu-item\" onClick={this.onDeleteToggle}>{gettext('Unpublish')}</DropdownItem>\n              </div>\n            </div>\n          </Dropdown>\n        </td>\n      </tr>\n    );\n\n    return (\n      <Fragment>\n        {Utils.isDesktop() ? desktopItem : mobileItem}\n        {this.state.isShowDeleteDialog &&\n          <ModalPortal>\n            <WikiDeleteDialog\n              toggleCancel={this.onDeleteCancel}\n              handleSubmit={this.deleteWiki}\n            />\n          </ModalPortal>\n        }\n      </Fragment>\n    );\n  }\n}\n\nWikiListItem.propTypes = propTypes;\n\nexport default WikiListItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport WikiListItem from './wiki-list-item';\nimport LibsMobileThead from '../libs-mobile-thead';\n\nconst propTypes = {\n  data: PropTypes.object.isRequired,\n  renameWiki: PropTypes.func.isRequired,\n  deleteWiki: PropTypes.func.isRequired,\n};\n\nclass WikiListView extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n    };\n  }\n\n  onFreezedItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  onUnfreezedItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  render() {\n    let { loading, errorMsg, wikis } = this.props.data;\n\n    if (loading) {\n      return <span className=\"loading-icon loading-tip\"></span>;\n    } else if (errorMsg) {\n      return <p className=\"error text-center\">{errorMsg}</p>;\n    } else {\n      const isDesktop = Utils.isDesktop();\n      const desktopThead = (\n        <thead>\n          <tr>\n            <th width=\"4%\"></th>\n            <th width=\"36%\">{gettext('Name')}</th>\n            <th width=\"25%\">{gettext('Owner')}</th>\n            <th width=\"25%\">{gettext('Last Update')}</th>\n            <th width=\"10%\">{/* operation */}</th>\n          </tr>\n        </thead>\n      );\n      return (\n        <table className={isDesktop ? '' : 'table-thead-hidden'}>\n          {isDesktop ? desktopThead : <LibsMobileThead />}\n          <tbody>\n            {wikis.map((wiki, index) => {\n              return (\n                <WikiListItem\n                  key={index}\n                  wiki={wiki}\n                  renameWiki={this.props.renameWiki}\n                  deleteWiki={this.props.deleteWiki}\n                  isItemFreezed={this.state.isItemFreezed}\n                  onFreezedItem={this.onFreezedItem}\n                  onUnfreezedItem={this.onUnfreezedItem}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      );\n    }\n  }\n}\n\nWikiListView.propTypes = propTypes;\n\nexport default WikiListView;\n","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button } from 'reactstrap';\nimport MediaQuery from 'react-responsive';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { gettext } from '../../utils/constants';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../../components/toast';\nimport ModalPortal from '../../components/modal-portal';\nimport EmptyTip from '../../components/empty-tip';\nimport CommonToolbar from '../../components/toolbar/common-toolbar';\nimport NewWikiDialog from '../../components/dialog/new-wiki-dialog';\nimport WikiSelectDialog from '../../components/dialog/wiki-select-dialog';\nimport WikiListView from '../../components/wiki-list-view/wiki-list-view';\n\nconst propTypes = {\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass Wikis extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      errorMsg: '',\n      wikis: [],\n      isShowAddWikiMenu: false,\n      isShowSelectDialog: false,\n      isShowCreateDialog: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getWikis();\n  }\n\n  getWikis = () => {\n    seafileAPI.listWikis().then(res => {\n      this.setState({\n        loading: false,\n        wikis: res.data.data\n      });\n    }).catch((error) => {\n      this.setState({\n        loading: false,\n        errorMsg: Utils.getErrorMsg(error, true) // true: show login tip if 403\n      });\n    });\n  }\n\n  clickMenuToggle = (e) => {\n    e.preventDefault();\n    this.onMenuToggle();\n  }\n\n  onMenuToggle = () => {\n    this.setState({isShowAddWikiMenu: !this.state.isShowAddWikiMenu});\n  }\n\n  onSelectToggle = () => {\n    this.setState({isShowSelectDialog: !this.state.isShowSelectDialog});\n  }\n\n  onCreateToggle = () => {\n    this.setState({isShowCreateDialog: !this.state.isShowCreateDialog});\n  }\n\n  addWiki = (repoID) => {\n    seafileAPI.addWiki(repoID).then((res) => {\n      this.state.wikis.push(res.data);\n      this.setState({wikis: this.state.wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  renameWiki = (wiki, newName) => {\n    seafileAPI.renameWiki(wiki.slug, newName).then((res) => {\n      let wikis = this.state.wikis.map((item) => {\n        if (item.name === wiki.name) {\n          item = res.data;\n        }\n        return item;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  deleteWiki = (wiki) => {\n    seafileAPI.deleteWiki(wiki.slug).then(() => {\n      let wikis = this.state.wikis.filter(item => {\n        return item.name !== wiki.name;\n      });\n      this.setState({wikis: wikis});\n    }).catch((error) => {\n      if(error.response) {\n        let errorMsg = error.response.data.error_msg;\n        toaster.danger(errorMsg);\n      }\n    });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div className=\"main-panel-north border-left-show\">\n          <div className=\"cur-view-toolbar\">\n            <span className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\" title=\"Side Nav Menu\" onClick={this.props.onShowSidePanel}></span>\n            <div className=\"operation\">\n              <Fragment>\n                <MediaQuery query=\"(min-width: 768px)\">\n                  <Button className=\"btn btn-secondary operation-item\" onClick={this.onSelectToggle}>{gettext('Publish a Library')}</Button>\n                </MediaQuery>\n                <MediaQuery query=\"(max-width: 767.8px)\">\n                  <span className=\"sf2-icon-plus mobile-toolbar-icon\" title={gettext('Publish a Library')} onClick={this.onSelectToggle}></span>\n                </MediaQuery>\n              </Fragment>\n            </div>\n          </div>\n          <CommonToolbar onSearchedClick={this.props.onSearchedClick} />\n        </div>\n        <div className=\"main-panel-center\">\n          <div className=\"cur-view-container\" id=\"wikis\">\n            <div className=\"cur-view-path\">\n              <div className=\"path-container\">\n                <h3 className=\"sf-heading m-0\">{gettext('Published Libraries')}</h3>\n              </div>\n            </div>\n            <div className=\"cur-view-content\">\n              {(this.state.loading || this.state.wikis.length !== 0) &&\n                <WikiListView\n                  data={this.state}\n                  renameWiki={this.renameWiki}\n                  deleteWiki={this.deleteWiki}\n                />\n              }\n              {(!this.state.loading && this.state.wikis.length === 0) &&\n                <EmptyTip>\n                  <h2>{gettext('No published libraries')}</h2>\n                  <p>{gettext('You have not published any libraries yet. A published library can be accessed by anyone, not only users, via its URL. You can publish a library by clicking the \"Publish a Library\" button in the menu bar.')}</p>\n                </EmptyTip>\n              }\n            </div>\n          </div>\n        </div>\n        {this.state.isShowCreateDialog && (\n          <ModalPortal>\n            <NewWikiDialog\n              toggleCancel={this.onCreateToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n        {this.state.isShowSelectDialog && (\n          <ModalPortal>\n            <WikiSelectDialog\n              toggleCancel={this.onSelectToggle}\n              addWiki={this.addWiki}\n            />\n          </ModalPortal>\n        )}\n      </Fragment>\n    );\n  }\n}\n\nWikis.propTypes = propTypes;\n\nexport default Wikis;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CommonToolbar from './common-toolbar';\n\nconst propTypes = {\n  searchPlaceholder: PropTypes.string,\n  onShowSidePanel: PropTypes.func.isRequired,\n  onSearchedClick: PropTypes.func.isRequired,\n};\n\nclass GeneralToolbar extends React.Component {\n\n  render() {\n    // todo get repoID?\n    let { onShowSidePanel, onSearchedClick } = this.props;\n    return (\n      <div className=\"main-panel-north\">\n        <div className=\"cur-view-toolbar\">\n          <span\n            className=\"sf2-icon-menu side-nav-toggle hidden-md-up d-md-none\"\n            title=\"Side Nav Menu\"\n            onClick={onShowSidePanel}>\n          </span>\n        </div>\n        <CommonToolbar\n          searchPlaceholder={this.props.searchPlaceholder}\n          onSearchedClick={onSearchedClick}\n        />\n      </div>\n    );\n  }\n}\n\nGeneralToolbar.propTypes = propTypes;\n\nexport default GeneralToolbar;\n","import React, { Fragment } from 'react';\nimport GeneralToolBar from './toolbar/general-toolbar';\n\nconst MainContentWrapper = (WrapperedComponent) => {\n  return class Wrapper extends React.Component {\n\n    constructor(props) {\n      super(props);\n    }\n\n    render() {\n      return (\n        <Fragment>\n          <GeneralToolBar {...this.props} />\n          <WrapperedComponent {...this.props} />\n        </Fragment>\n      );\n    }\n  };\n};\n\nexport default MainContentWrapper;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router, navigate } from '@reach/router';\nimport MediaQuery from 'react-responsive';\nimport { Modal } from 'reactstrap';\nimport { siteRoot, canAddRepo, isDocs } from './utils/constants';\nimport { Utils } from './utils/utils';\nimport SystemNotification from './components/system-notification';\nimport SidePanel from './components/side-panel';\nimport MainPanel from './components/main-panel';\nimport DraftsView from './pages/drafts/drafts-view';\nimport DraftContent from './pages/drafts/draft-content';\nimport FilesActivities from './pages/dashboard/files-activities';\nimport Starred from './pages/starred/starred';\nimport LinkedDevices from './pages/linked-devices/linked-devices';\nimport editUtilities from './utils/editor-utilities';\nimport ShareAdminLibraries from './pages/share-admin/libraries';\nimport ShareAdminFolders from './pages/share-admin/folders';\nimport ShareAdminShareLinks from './pages/share-admin/share-links';\nimport ShareAdminUploadLinks from './pages/share-admin/upload-links';\nimport SharedLibraries from './pages/shared-libs/shared-libs';\nimport ShareWithOCM from './pages/share-with-ocm/shared-with-ocm';\nimport OCMRepoDir from './pages/share-with-ocm/remote-dir-view';\nimport MyLibraries from './pages/my-libs/my-libs';\nimport MyLibDeleted from './pages/my-libs/my-libs-deleted';\nimport PublicSharedView from './pages/shared-with-all/public-shared-view';\nimport LibContentView from './pages/lib-content-view/lib-content-view';\nimport Group from './pages/groups/group-view';\nimport Groups from './pages/groups/groups-view';\nimport InvitationsView from './pages/invitations/invitations-view';\nimport Wikis from './pages/wikis/wikis';\nimport MainContentWrapper from './components/main-content-wrapper';\n\nimport './css/layout.css';\nimport './css/toolbar.css';\nimport './css/search.css';\n\nconst FilesActivitiesWrapper = MainContentWrapper(FilesActivities);\nconst DraftsViewWrapper = MainContentWrapper(DraftsView);\nconst StarredWrapper = MainContentWrapper(Starred);\nconst LinkedDevicesWrapper = MainContentWrapper(LinkedDevices);\nconst SharedLibrariesWrapper = MainContentWrapper(SharedLibraries);\nconst SharedWithOCMWrapper = MainContentWrapper(ShareWithOCM);\nconst ShareAdminLibrariesWrapper = MainContentWrapper(ShareAdminLibraries);\nconst ShareAdminFoldersWrapper = MainContentWrapper(ShareAdminFolders);\nconst ShareAdminShareLinksWrapper = MainContentWrapper(ShareAdminShareLinks);\nconst ShareAdminUploadLinksWrapper = MainContentWrapper(ShareAdminUploadLinks);\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      isSidePanelClosed: false,\n      draftCounts: 0,\n      draftList:[],\n      isLoadingDraft: true,\n      currentTab: '/',\n      pathPrefix: [],\n    };\n    this.dirViewPanels = ['my-libs', 'shared-libs', 'org']; // and group\n    window.onpopstate = this.onpopstate;\n  }\n\n  onpopstate = (event) => {\n    if (event.state && event.state.currentTab && event.state.pathPrefix) {\n      let { currentTab, pathPrefix } = event.state;\n      this.setState({currentTab, pathPrefix});\n    }\n  }\n\n  componentWillMount() {\n    if (!Utils.isDesktop()) {\n      this.setState({\n        isSidePanelClosed: true\n      });\n    }\n  }\n\n  navigateClientUrlToLib = () =>{\n    if(window.location.hash && window.location.hash.indexOf('common/lib') != -1){\n      let splitUrlArray = window.location.hash.split('/');\n      let repoID = splitUrlArray[splitUrlArray.length - 2];\n      let url = siteRoot + 'library/' + repoID + '/';\n      navigate(url, {repalce: true});\n    }\n  }\n\n  componentDidMount() {\n    // url from client  e.g. http://127.0.0.1:8000/#common/lib/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    // navigate to library page http://127.0.0.1:8000/library/34e7fb92-e91d-499d-bcde-c30ea8af9828/\n    this.navigateClientUrlToLib();\n\n    // e.g.  from http://127.0.0.1:8000/drafts/reviews/\n    // get reviews\n    // TODO: need refactor later\n    let href = window.location.href.split('/');\n    if (isDocs) {\n      this.getDrafts();\n    }\n    this.setState({currentTab: href[href.length - 2]});\n  }\n\n  getDrafts = () => {\n    editUtilities.listDrafts().then(res => {\n      this.setState({\n        draftCounts: res.data.draft_counts,\n        draftList: res.data.data,\n        isLoadingDraft: false,\n      });\n    });\n  }\n\n  updateDraftsList = (draft_id) => {\n    this.setState({\n      draftCounts: this.state.draftCounts - 1,\n      draftList: this.state.draftList.filter(draft => draft.id != draft_id),\n    });\n  }\n\n  onCloseSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onShowSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  onSearchedClick = (selectedItem) => {\n    if (selectedItem.is_dir === true) {\n      this.setState({currentTab: '', pathPrefix: []});\n      let url = siteRoot + 'library/' + selectedItem.repo_id + '/' + selectedItem.repo_name + selectedItem.path;\n      navigate(url, {repalce: true});\n    } else {\n      let url = siteRoot + 'lib/' + selectedItem.repo_id + '/file' + Utils.encodePath(selectedItem.path);\n      let isWeChat = Utils.isWeChat();\n      if (!isWeChat) {\n        let newWindow = window.open('about:blank');\n        newWindow.location.href = url;\n      } else {\n        location.href = url;\n      }\n    }\n  }\n\n  onGroupChanged = (groupID) => {\n    setTimeout(function(){\n      let url;\n      if (groupID) {\n        url = siteRoot + 'group/' + groupID + '/';\n      }\n      else {\n        url = siteRoot + 'groups/';\n      }\n      window.location = url.toString();\n    }, 1);\n  }\n\n  tabItemClick = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID || this.dirViewPanels.indexOf(tabName) > -1) {\n      pathPrefix = this.generatorPrefix(tabName, groupID);\n    }\n    this.setState({\n      currentTab: tabName,\n      pathPrefix: pathPrefix\n    }, () => {\n      let { currentTab, pathPrefix } = this.state;\n      window.history.replaceState({currentTab: currentTab, pathPrefix: pathPrefix}, null);\n    });\n    if (!Utils.isDesktop() && !this.state.isSidePanelClosed) {\n      this.setState({ isSidePanelClosed: true });\n    }\n  }\n\n  generatorPrefix = (tabName, groupID) => {\n    let pathPrefix = [];\n    if (groupID) {\n      let navTab1 = {\n        url: siteRoot + 'groups/',\n        showName: 'Groups',\n        name: 'groups',\n        id: null,\n      };\n      let navTab2 = {\n        url: siteRoot + 'group/' + groupID + '/',\n        showName: tabName,\n        name: tabName,\n        id: groupID,\n      };\n      pathPrefix.push(navTab1);\n      pathPrefix.push(navTab2);\n    } else {\n      let navTab = {\n        url: siteRoot + tabName + '/',\n        showName: this.getTabShowName(tabName),\n        name: tabName,\n        id: null,\n      };\n      pathPrefix.push(navTab);\n    }\n    return pathPrefix;\n  }\n\n  getTabShowName = (tabName) => {\n    if (tabName === 'my-libs') {\n      return 'Libraries';\n    }\n    if (tabName === 'shared-libs') {\n      return 'Shared with me';\n    }\n    if (tabName === 'org') {\n      return 'Shared with all';\n    }\n  }\n\n  toggleSidePanel = () => {\n    this.setState({\n      isSidePanelClosed: !this.state.isSidePanelClosed\n    });\n  }\n\n  render() {\n    let { currentTab, isSidePanelClosed } = this.state;\n\n    const home = canAddRepo ?\n      <MyLibraries path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} /> :\n      <SharedLibrariesWrapper path={ siteRoot } onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />;\n\n    return (\n      <React.Fragment>\n        <SystemNotification />\n        <div id=\"main\">\n          <SidePanel isSidePanelClosed={this.state.isSidePanelClosed} onCloseSidePanel={this.onCloseSidePanel} currentTab={currentTab} tabItemClick={this.tabItemClick} draftCounts={this.state.draftCounts} />\n          <MainPanel>\n            <Router className=\"reach-router\">\n              {home}\n              <FilesActivitiesWrapper path={siteRoot + 'dashboard'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <DraftsViewWrapper path={siteRoot + 'drafts'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n              >\n                <DraftContent\n                  path='/'\n                  getDrafts={this.getDrafts}\n                  isLoadingDraft={this.state.isLoadingDraft}\n                  draftList={this.state.draftList}\n                  updateDraftsList={this.updateDraftsList}\n                />\n              </DraftsViewWrapper>\n              <StarredWrapper path={siteRoot + 'starred'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <LinkedDevicesWrapper path={siteRoot + 'linked-devices'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminLibrariesWrapper path={siteRoot + 'share-admin-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminFoldersWrapper path={siteRoot + 'share-admin-folders'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminShareLinksWrapper path={siteRoot + 'share-admin-share-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <ShareAdminUploadLinksWrapper path={siteRoot + 'share-admin-upload-links'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedLibrariesWrapper path={siteRoot + 'shared-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <SharedWithOCMWrapper path={siteRoot + 'shared-with-ocm'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibraries path={siteRoot + 'my-libs'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n              <MyLibDeleted path={siteRoot + 'my-libs/deleted/'} onSearchedClick={this.onSearchedClick} />\n              <LibContentView path={siteRoot + 'library/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <OCMRepoDir path={siteRoot + 'remote-library/:providerID/:repoID/*'} pathPrefix={this.state.pathPrefix} onMenuClick={this.onShowSidePanel} onTabNavClick={this.tabItemClick}/>\n              <Groups path={siteRoot + 'groups'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <Group\n                path={siteRoot + 'group/:groupID'}\n                onShowSidePanel={this.onShowSidePanel}\n                onSearchedClick={this.onSearchedClick}\n                onTabNavClick={this.tabItemClick}\n                onGroupChanged={this.onGroupChanged}\n              />\n              <Wikis path={siteRoot + 'published'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick}/>\n              <PublicSharedView path={siteRoot + 'org/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} onTabNavClick={this.tabItemClick}/>\n              <InvitationsView path={siteRoot + 'invitations/'} onShowSidePanel={this.onShowSidePanel} onSearchedClick={this.onSearchedClick} />\n            </Router>\n          </MainPanel>\n          <MediaQuery query=\"(max-width: 767.8px)\">\n            <Modal zIndex=\"1030\" isOpen={!isSidePanelClosed} toggle={this.toggleSidePanel} contentClassName=\"d-none\"></Modal>\n          </MediaQuery>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('wrapper')\n);\n","class RepoTag {\n  constructor(object) {\n    this.id = object.repo_tag_id;\n    this.fileCount = object.files_count;\n    this.name = object.tag_name;\n    this.color = object.tag_color;\n  }\n}\n\nexport default RepoTag;\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { gettext } from '../../utils/constants';\n\nimport Lightbox from '@seafile/react-image-lightbox';\nimport '@seafile/react-image-lightbox/style.css';\n\nconst propTypes = {\n  imageItems: PropTypes.array.isRequired,\n  imageIndex: PropTypes.number.isRequired,\n  closeImagePopup: PropTypes.func.isRequired,\n  moveToPrevImage: PropTypes.func.isRequired,\n  moveToNextImage: PropTypes.func.isRequired\n};\n\nclass ImageDialog extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const imageItems = this.props.imageItems;\n    const imageIndex = this.props.imageIndex;\n    const imageItemsLength = imageItems.length;\n    const imageCaption = imageItemsLength && (\n      <Fragment>\n        <span>{gettext('%curr% of %total%').replace('%curr%', imageIndex + 1).replace('%total%', imageItemsLength)}</span>\n        <br />\n        <a href={imageItems[imageIndex].url} target=\"_blank\">{gettext('Open in New Tab')}</a>\n      </Fragment>\n    );\n\n    return (\n      <Lightbox\n        mainSrc={imageItems[imageIndex].src}\n        imageTitle={imageItems[imageIndex].name}\n        imageCaption={imageCaption}\n        nextSrc={imageItems[(imageIndex + 1) % imageItemsLength].src}\n        prevSrc={imageItems[(imageIndex + imageItemsLength - 1) % imageItemsLength].src}\n        onCloseRequest={this.props.closeImagePopup}\n        onMovePrevRequest={this.props.moveToPrevImage}\n        onMoveNextRequest={this.props.moveToNextImage}\n        imagePadding={70}\n        imageLoadErrorMessage={gettext('The image could not be loaded.')}\n        prevLabel={gettext('Previous (Left arrow key)')}\n        nextLabel={gettext('Next (Right arrow key)')}\n        closeLabel={gettext('Close (Esc)')}\n        zoomInLabel={gettext('Zoom in')}\n        zoomOutLabel={gettext('Zoom out')}\n      />\n    );\n  }\n}\n\nImageDialog.propTypes = propTypes;\n\nexport default ImageDialog;\n","import React ,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Alert } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport FileChooser from '../file-chooser/file-chooser';\nimport '../../css/dirent-detail.css';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n  dirent: PropTypes.object.isRequired,\n  onClose: PropTypes.func,\n};\n\nclass AddRelatedFileDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      repo: null,\n      selectedPath: '',\n      isShowFile: true,\n      errMessage: '',\n    };\n  }\n\n  handleSubmit = () => {\n    this.onAddRelatedFile();\n  }\n\n  onAddRelatedFile = () => {\n    let { repo, selectedPath } = this.state;\n    let oRepoID = this.props.repoID;\n    let rRepoID = repo.repo_id;\n    let oFilePath = this.props.filePath;\n    let rFilePath = selectedPath;\n\n    if (oRepoID === rRepoID && oFilePath === rFilePath) {\n      let message = gettext('Can not select self as a related file.');\n      this.setState({errMessage: message});\n      return;\n    }\n\n    seafileAPI.addRelatedFile(oRepoID, rRepoID, oFilePath, rFilePath).then((res) => {\n      this.props.onRelatedFileChange();\n      this.toggle();\n    }).catch((error) => {\n      let errMessage = Utils.getErrorMsg(error);\n      this.setState({errMessage: errMessage});\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  onDirentItemClick = (repo, selectedPath, dirent) => {\n    if (dirent.type === 'file') {\n      this.setState({\n        repo: repo,\n        selectedPath: selectedPath,\n      });\n    }\n    else {\n      this.setState({\n        repo: null,\n        selectedPath: '',\n      });\n    }\n  }\n\n  onRepoItemClick = (repo) => {\n    this.setState({\n      repo: null,\n      selectedPath: '',\n    });\n  }\n\n  render() {\n    let subtitle = gettext('Select related file for {placeholder}');\n    subtitle = subtitle.replace('{placeholder}', '<span class=\"op-target\">' + Utils.HTMLescape(this.props.dirent.name) + '</span>');\n    return (\n      <div className=\"sf-add-related-file\">\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.toggle} aria-label={gettext('Back')}></span>\n          {gettext('Select File')}\n        </ModalHeader>\n        <ModalBody>\n          <div className=\"related-file-subtitle\" dangerouslySetInnerHTML={{__html: subtitle}}></div>\n          <FileChooser\n            isShowFile={this.state.isShowFile}\n            repoID={this.props.repoID}\n            onDirentItemClick={this.onDirentItemClick}\n            onRepoItemClick={this.onRepoItemClick}\n            mode=\"current_repo_and_other_repos\"\n          />\n          {this.state.errMessage && <Alert color=\"danger\">{this.state.errMessage}</Alert>}\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Cancel')}</Button>\n          { this.state.selectedPath ?\n            <Button color=\"primary\" onClick={this.handleSubmit}>{gettext('Submit')}</Button>\n            :\n            <Button color=\"primary\" disabled>{gettext('Submit')}</Button>\n          }\n        </ModalFooter>\n      </div>\n    );\n  }\n}\n\nAddRelatedFileDialog.propTypes = propTypes;\n\nexport default AddRelatedFileDialog;\n","import React ,{ Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Table } from 'reactstrap';\nimport Dirent from '../../models/dirent';\nimport { gettext, siteRoot } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\nimport toaster from '../toast';\nimport '../../css/list-related-file-dialog.css';\n\nconst propTypes = {\n  relatedFiles: PropTypes.array.isRequired,\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  addRelatedFileToggle: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n};\n\nclass ListRelatedFileDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      direntList: [],\n    });\n  }\n\n  onDeleteRelatedFile = (item) => {\n    let filePath = this.props.filePath;\n    let repoID = this.props.repoID;\n    let relatedID = item.related_id;\n    seafileAPI.deleteRelatedFile(repoID, filePath, relatedID).then((res) => {\n      this.props.onRelatedFileChange();\n    }).catch(error => {\n      let errMessage = Utils.getErrorMsg(error);\n      toaster.danger(errMessage);\n    });\n  }\n\n  toggle = () => {\n    this.props.toggleCancel();\n  }\n\n  getDirentList = (relatedFiles) => {\n    if (relatedFiles.length === 0) {\n      this.setState({\n        direntList: [],\n      });\n      return;\n    }\n    let direntList = [];\n    relatedFiles.map((item) => {\n      seafileAPI.getFileInfo(item.repo_id, item.path).then(res => {\n        let dirent = new Dirent(res.data);\n        dirent['repo_name'] = item.repo_name;\n        dirent['related_id'] = item.related_id;\n        dirent['link'] = siteRoot + 'lib/' + item.repo_id + '/file' + Utils.encodePath(item.path);\n        direntList.push(dirent);\n      });\n    });\n    this.setState({direntList: direntList});\n  }\n\n  componentWillMount() {\n    this.getDirentList(this.props.relatedFiles);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.relatedFiles.length !== this.props.relatedFiles.length) {\n      this.getDirentList(nextProps.relatedFiles);\n    }\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.toggle}>{gettext('Related Files')}</ModalHeader>\n        <ModalBody className={this.state.direntList.length > 0 ? 'list-related-file-body' : ''}>\n          <Table hover size=\"sm\" className=\"list-related-file-table\">\n            <thead>\n              <tr>\n                <th width='40%'>{gettext('Name')}</th>\n                <th width='20%'>{gettext('Library Name')}</th>\n                <th width='13%'>{gettext('Size')}</th>\n                <th width='20%'>{gettext('Last Update')}</th>\n                <th width='5%'></th>\n                <th width='2%'></th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                this.state.direntList.map((relatedFile, index) => {\n                  return (\n                    <React.Fragment key={index}>\n                      <RelatedFile relatedFile={relatedFile} onDeleteRelatedFile={this.onDeleteRelatedFile}/>\n                    </React.Fragment>\n                  );\n                })\n              }\n            </tbody>\n          </Table>\n          <a href=\"#\" className=\"add-related-file-link\" onClick={this.props.addRelatedFileToggle}>{gettext('Add File')}</a>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.toggle}>{gettext('Close')}</Button>\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nListRelatedFileDialog.propTypes = propTypes;\n\nconst RelatedFilePropTypes = {\n  relatedFile: PropTypes.object,\n  onDeleteRelatedFile: PropTypes.func.isRequired,\n};\n\nclass RelatedFile extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = ({\n      active: false,\n    });\n  }\n\n  onMouseEnter = () => {\n    this.setState({\n      active: true\n    });\n  }\n\n  onMouseLeave = () => {\n    this.setState({\n      active: false\n    });\n  }\n\n  render() {\n    let className = this.state.active ? 'action-icon sf2-icon-x3' : 'action-icon vh sf2-icon-x3';\n    const relatedFile = this.props.relatedFile;\n    return (\n      <tr onMouseEnter={this.onMouseEnter} onMouseLeave={this.onMouseLeave}>\n        <td><a href={relatedFile.link} target='_blank'>{relatedFile.name}</a></td>\n        <td>{relatedFile.repo_name}</td>\n        <td>{relatedFile.size}</td>\n        <td>{relatedFile.mtime_relative}</td>\n        <td><i className={className} onClick={this.props.onDeleteRelatedFile.bind(this, relatedFile)}></i></td>\n        <td></td>\n      </tr>\n    );\n  }\n}\n\nRelatedFile.propTypes = RelatedFilePropTypes;\n\nexport default ListRelatedFileDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal } from 'reactstrap';\nimport AddRelatedFileDialog from './add-related-file-dialog';\nimport ListRelatedFileDialog from './list-related-file-dialog';\nimport ModalPortal from '../modal-portal';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  filePath: PropTypes.string.isRequired,\n  toggleCancel: PropTypes.func.isRequired,\n  onRelatedFileChange: PropTypes.func.isRequired,\n  dirent: PropTypes.object.isRequired,\n  relatedFiles: PropTypes.array,\n  viewMode: PropTypes.oneOf(['list_related_file','add_related_file']).isRequired,\n};\n\nclass RelatedFileDialogs extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showListRelatedFileDialog: props.viewMode === 'list_related_file',\n    };\n  }\n\n  onAddRelatedFileToggle = () => {\n    this.setState({\n      showListRelatedFileDialog: false,\n    });\n  }\n\n  onCloseAddRelatedFileDialog = () => {\n    this.setState({\n      showListRelatedFileDialog: true,\n    });\n  }\n\n  render() {\n    return (\n      <ModalPortal>\n        <Modal isOpen={true} toggle={this.props.toggleCancel} size='lg' style={{width:'650px'}}>\n          {this.state.showListRelatedFileDialog &&\n            <ListRelatedFileDialog\n              filePath={this.props.filePath}\n              relatedFiles={this.props.relatedFiles}\n              repoID={this.props.repoID}\n              toggleCancel={this.props.toggleCancel}\n              addRelatedFileToggle={this.onAddRelatedFileToggle}\n              onRelatedFileChange={this.props.onRelatedFileChange}\n            />\n          }\n          {!this.state.showListRelatedFileDialog &&\n            <AddRelatedFileDialog\n              filePath={this.props.filePath}\n              repoID={this.props.repoID}\n              toggleCancel={this.onCloseAddRelatedFileDialog}\n              onRelatedFileChange={this.props.onRelatedFileChange}\n              dirent={this.props.dirent}\n              onClose={this.props.toggleCancel}\n            />\n          }\n        </Modal>\n      </ModalPortal>\n    );\n  }\n}\n\nRelatedFileDialogs.propTypes = propTypes;\n\nexport default RelatedFileDialogs;","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var start = i + 1;\n    while (str.charAt(++i) !== '-' && i != str.length) {}\n    var buf = str.substring(start, i);\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      if (i === str.length) break;\n    }\n    p.nsp = str.substring(start, i);\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    var start = i + 1;\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      if (i === str.length) break;\n    }\n    p.id = Number(str.substring(start, i + 1));\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\nvar globalThis = require('./globalThis');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new globalThis[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","module.exports = (function () {\n  if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof window !== 'undefined') {\n    return window;\n  } else {\n    return Function('return this')(); // eslint-disable-line no-new-func\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.canUseDOM = undefined;\n\nvar _exenv = require(\"exenv\");\n\nvar _exenv2 = _interopRequireDefault(_exenv);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar EE = _exenv2.default;\n\nvar SafeHTMLElement = EE.canUseDOM ? window.HTMLElement : {};\n\nvar canUseDOM = exports.canUseDOM = EE.canUseDOM;\n\nexports.default = SafeHTMLElement;","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, ModalHeader, ModalBody, ModalFooter, Input } from 'reactstrap';\nimport { gettext } from '../../utils/constants';\nimport { seafileAPI } from '../../utils/seafile-api';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoID: PropTypes.string.isRequired,\n  onRepoTagCreated: PropTypes.func,\n  toggleCancel: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\n\nclass CreateTagDialog extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tagName: '',\n      tagColor: '',\n      newTag: {},\n      errorMsg: '',\n      colorList: ['#FFA8A8', '#FFA94D', '#FFD43B', '#A0EC50', '#A9E34B', '#63E6BE', '#4FD2C9', '#72C3FC', '#91A7FF', '#E599F7', '#B197FC', '#F783AC', '#CED4DA'],\n    };\n    this.newInput = React.createRef();\n  }\n\n  inputNewName = (e) => {\n    this.setState({\n      tagName: e.target.value,\n    });\n    if (this.state.errorMsg) {\n      this.setState({errorMsg: ''});\n    }\n  }\n\n  selectTagcolor = (e) => {\n    this.setState({\n      tagColor: e.target.value,\n    });\n  }\n\n  createTag = () => {\n    let name = this.state.tagName;\n    let color = this.state.tagColor;\n    let repoID = this.props.repoID;\n    seafileAPI.createRepoTag(repoID, name, color).then((res) => {\n      let repoTagID = res.data.repo_tag.repo_tag_id;\n      if (this.props.onRepoTagCreated) this.props.onRepoTagCreated(repoTagID);\n      this.props.toggleCancel();\n    }).catch((error) => {\n      let errMessage;\n      if (error.response.status === 500) {\n        errMessage = gettext('Internal Server Error');\n      } else if (error.response.status === 400) {\n        errMessage = gettext('Tag \"{name}\" already exists.');\n        errMessage = errMessage.replace('{name}', Utils.HTMLescape(name));\n      }\n      this.setState({errorMsg: errMessage});\n    });\n  }\n\n  handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.createTag();\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      tagColor: this.state.colorList[0]\n    });\n    this.newInput.focus();\n    this.newInput.setSelectionRange(0, 0);\n  }\n\n  render() {\n    let colorList = this.state.colorList;\n    let canSave = this.state.tagName.trim() ? true : false;\n    return (\n      <Fragment>\n        <ModalHeader toggle={this.props.onClose}>\n          <span className=\"tag-dialog-back fas fa-sm fa-arrow-left\" onClick={this.props.toggleCancel} aria-label={gettext('Back')}></span>\n          {gettext('New Tag')}\n        </ModalHeader>\n        <ModalBody>\n          <div role=\"form\" className=\"tag-create\">\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Name')}</label>\n              <Input onKeyPress={this.handleKeyPress} innerRef={input => {this.newInput = input;}} value={this.state.tagName} onChange={this.inputNewName}/>\n              <div className=\"mt-2\"><span className=\"error\">{this.state.errorMsg}</span></div>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"form-label\">{gettext('Select a color')}</label>\n              <div className=\"row gutters-xs\">\n                {colorList.map((item, index)=>{\n                  return (\n                    <div key={index} className=\"col-auto\" onChange={this.selectTagcolor}>\n                      <label className=\"colorinput\">\n                        {index===0 ?\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" defaultChecked onClick={this.selectTagcolor}></input> :\n                          <input name=\"color\" type=\"radio\" value={item} className=\"colorinput-input\" onClick={this.selectTagcolor}></input>}\n                        <span className=\"colorinput-color\" style={{backgroundColor:item}}></span>\n                      </label>\n                    </div>\n                  );\n                })\n                }\n              </div>\n            </div>\n          </div>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"secondary\" onClick={this.props.toggleCancel}>{gettext('Cancel')}</Button>\n          {canSave ?\n            <Button color=\"primary\" onClick={this.createTag}>{gettext('Save')}</Button> :\n            <Button color=\"primary\" disabled>{gettext('Save')}</Button>\n          }\n        </ModalFooter>\n      </Fragment>\n    );\n  }\n}\n\nCreateTagDialog.propTypes = propTypes;\n\nexport default CreateTagDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\nimport copy from '../copy-to-clipboard';\nimport { gettext } from '../../utils/constants';\nimport toaster from '../../components/toast';\n\nconst propTypes = {\n  link: PropTypes.string.isRequired,\n  toggleDialog: PropTypes.func.isRequired\n};\n\nclass ShareAdminLink extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n copyToClipboard = () => {\n   copy(this.props.link);\n   this.props.toggleDialog();\n   toaster.success(gettext('The link is copied to the clipboard.')), {duration: 2};\n }\n\n render() {\n   const { link, toggleDialog } = this.props;\n   return (\n     <Modal isOpen={true} toggle={toggleDialog}>\n       <ModalHeader toggle={toggleDialog}>{gettext('Link')}</ModalHeader>\n       <ModalBody>\n         <a href={link}>{link}</a>\n       </ModalBody>\n       <ModalFooter>\n         <Button color=\"primary\" onClick={this.copyToClipboard}>{gettext('Copy')}</Button>\n         <Button color=\"secondary\" onClick={toggleDialog}>{gettext('Close')}</Button>\n       </ModalFooter>\n     </Modal>\n   );\n }\n}\n\nShareAdminLink.propTypes = propTypes;\n\nexport default ShareAdminLink;\n","/**\n * Parses an URI\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\n\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nvar parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\n\nmodule.exports = function parseuri(str) {\n    var src = str,\n        b = str.indexOf('['),\n        e = str.indexOf(']');\n\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n\n    var m = re.exec(str || ''),\n        uri = {},\n        i = 14;\n\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n\n    return uri;\n};\n\nfunction pathNames(obj, path) {\n    var regx = /\\/{2,9}/g,\n        names = path.replace(regx, \"/\").split(\"/\");\n\n    if (path.substr(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.substr(path.length - 1, 1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n\n    return names;\n}\n\nfunction queryKey(uri, query) {\n    var data = {};\n\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n\n    return data;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    if (timeout === 0) {\n      openSub.destroy(); // prevents a race condition with the 'open' event\n    }\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState && packet.type === 'open') {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  if (!this.io.reconnecting) this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = findTabbableDescendants;\n/*!\n * Adapted from jQuery UI core\n *\n * http://jqueryui.com\n *\n * Copyright 2014 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n\nvar tabbableNode = /input|select|textarea|button|object/;\n\nfunction hidesContents(element) {\n  var zeroSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;\n\n  // If the node is empty, this is good enough\n  if (zeroSize && !element.innerHTML) return true;\n\n  // Otherwise we need to check some styles\n  var style = window.getComputedStyle(element);\n  return zeroSize ? style.getPropertyValue(\"overflow\") !== \"visible\" ||\n  // if 'overflow: visible' set, check if there is actually any overflow\n  element.scrollWidth <= 0 && element.scrollHeight <= 0 : style.getPropertyValue(\"display\") == \"none\";\n}\n\nfunction visible(element) {\n  var parentElement = element;\n  while (parentElement) {\n    if (parentElement === document.body) break;\n    if (hidesContents(parentElement)) return false;\n    parentElement = parentElement.parentNode;\n  }\n  return true;\n}\n\nfunction focusable(element, isTabIndexNotNaN) {\n  var nodeName = element.nodeName.toLowerCase();\n  var res = tabbableNode.test(nodeName) && !element.disabled || (nodeName === \"a\" ? element.href || isTabIndexNotNaN : isTabIndexNotNaN);\n  return res && visible(element);\n}\n\nfunction tabbable(element) {\n  var tabIndex = element.getAttribute(\"tabindex\");\n  if (tabIndex === null) tabIndex = undefined;\n  var isTabIndexNaN = isNaN(tabIndex);\n  return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);\n}\n\nfunction findTabbableDescendants(element) {\n  return [].slice.call(element.querySelectorAll(\"*\"), 0).filter(tabbable);\n}\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.assertNodeList = assertNodeList;\nexports.setElement = setElement;\nexports.validateElement = validateElement;\nexports.hide = hide;\nexports.show = show;\nexports.documentNotReadyOrSSRTesting = documentNotReadyOrSSRTesting;\nexports.resetForTesting = resetForTesting;\n\nvar _warning = require(\"warning\");\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _safeHTMLElement = require(\"./safeHTMLElement\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar globalElement = null;\n\nfunction assertNodeList(nodeList, selector) {\n  if (!nodeList || !nodeList.length) {\n    throw new Error(\"react-modal: No elements were found for selector \" + selector + \".\");\n  }\n}\n\nfunction setElement(element) {\n  var useElement = element;\n  if (typeof useElement === \"string\" && _safeHTMLElement.canUseDOM) {\n    var el = document.querySelectorAll(useElement);\n    assertNodeList(el, useElement);\n    useElement = \"length\" in el ? el[0] : el;\n  }\n  globalElement = useElement || globalElement;\n  return globalElement;\n}\n\nfunction validateElement(appElement) {\n  if (!appElement && !globalElement) {\n    (0, _warning2.default)(false, [\"react-modal: App element is not defined.\", \"Please use `Modal.setAppElement(el)` or set `appElement={el}`.\", \"This is needed so screen readers don't see main content\", \"when modal is opened. It is not recommended, but you can opt-out\", \"by setting `ariaHideApp={false}`.\"].join(\" \"));\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction hide(appElement) {\n  if (validateElement(appElement)) {\n    (appElement || globalElement).setAttribute(\"aria-hidden\", \"true\");\n  }\n}\n\nfunction show(appElement) {\n  if (validateElement(appElement)) {\n    (appElement || globalElement).removeAttribute(\"aria-hidden\");\n  }\n}\n\nfunction documentNotReadyOrSSRTesting() {\n  globalElement = null;\n}\n\nfunction resetForTesting() {\n  globalElement = null;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Tracks portals that are open and emits events to subscribers\n\nvar PortalOpenInstances = function PortalOpenInstances() {\n  var _this = this;\n\n  _classCallCheck(this, PortalOpenInstances);\n\n  this.register = function (openInstance) {\n    if (_this.openInstances.indexOf(openInstance) !== -1) {\n      if (process.env.NODE_ENV !== \"production\") {\n        // eslint-disable-next-line no-console\n        console.warn(\"React-Modal: Cannot register modal instance that's already open\");\n      }\n      return;\n    }\n    _this.openInstances.push(openInstance);\n    _this.emit(\"register\");\n  };\n\n  this.deregister = function (openInstance) {\n    var index = _this.openInstances.indexOf(openInstance);\n    if (index === -1) {\n      if (process.env.NODE_ENV !== \"production\") {\n        // eslint-disable-next-line no-console\n        console.warn(\"React-Modal: Unable to deregister \" + openInstance + \" as \" + \"it was never registered\");\n      }\n      return;\n    }\n    _this.openInstances.splice(index, 1);\n    _this.emit(\"deregister\");\n  };\n\n  this.subscribe = function (callback) {\n    _this.subscribers.push(callback);\n  };\n\n  this.emit = function (eventType) {\n    _this.subscribers.forEach(function (subscriber) {\n      return subscriber(eventType,\n      // shallow copy to avoid accidental mutation\n      _this.openInstances.slice());\n    });\n  };\n\n  this.openInstances = [];\n  this.subscribers = [];\n};\n\nvar portalOpenInstances = new PortalOpenInstances();\n\nexports.default = portalOpenInstances;\nmodule.exports = exports[\"default\"];","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MarkdownViewer from '@seafile/seafile-editor/dist/viewer/markdown-viewer';\nimport { gettext, repoID, slug, serviceURL, isPublicWiki, siteRoot, sharedToken, mediaUrl } from '../utils/constants';\nimport { Card, CardTitle, CardText } from 'reactstrap';\nimport Loading from './loading';\nimport { seafileAPI } from '../utils/seafile-api';\nimport { Utils } from '../utils/utils';\nimport toaster from './toast';\nimport '../css/related-files-list.css';\n\nconst propTypes = {\n  children: PropTypes.object,\n  isFileLoading: PropTypes.bool.isRequired,\n  markdownContent: PropTypes.string.isRequired,\n  latestContributor: PropTypes.string.isRequired,\n  lastModified: PropTypes.string.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  isWiki: PropTypes.bool,\n  isTOCShow: PropTypes.bool,\n  // for dir-column-file component(import repoID is undefined)\n  repoID: PropTypes.string,\n  path: PropTypes.string,\n};\n\nconst contentClass = 'wiki-page-content';\n\nclass WikiMarkdownViewer extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTitleIndex: 0,\n      relatedFiles: [],\n    };\n    this.markdownContainer = React.createRef();\n    this.links = [];\n    this.titlesInfo = [];\n  }\n\n  componentDidMount() {\n    // Bind event when first loaded\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n    this.listRelatedFiles();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.markdownContent === nextProps.markdownContent) {\n      return;\n    }\n    // Unbound event when updating\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n    this.listRelatedFiles();\n  }\n\n  componentDidUpdate() {\n    // Update completed, rebind event\n    this.links = document.querySelectorAll(`.${contentClass} a`);\n    this.links.forEach(link => {\n      link.addEventListener('click', this.onLinkClick);\n    });\n  }\n\n  componentWillUnmount() {\n    // Unbound events when the component is destroyed\n    this.links.forEach(link => {\n      link.removeEventListener('click', this.onLinkClick);\n    });\n  }\n\n  onContentRendered = (markdownViewer) => {\n    this.titlesInfo = markdownViewer.titlesInfo;\n  }\n\n  listRelatedFiles = () => {\n    // for dir-column-file component(import repoID is undefined)\n    if (this.props.repoID && this.props.path) {\n      seafileAPI.listRelatedFiles(this.props.repoID, this.props.path).then(res => {\n        this.setState({\n          relatedFiles: res.data.related_files\n        });\n      }).catch(error => {\n        let errMessage = Utils.getErrorMsg(error);\n        toaster.danger(errMessage);\n      });\n    }\n  }\n\n  onLinkClick = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    let link = '';\n    if (event.target.tagName !== 'A') {\n      let target = event.target.parentNode;\n      while (target.tagName !== 'A') {\n        target = target.parentNode;\n      }\n      link = target.href;\n    } else {\n      link = event.target.href;\n    }\n    this.props.onLinkClick(link);\n  }\n\n  onScrollHandler = () => {\n    const contentScrollTop = this.markdownContainer.current.scrollTop + 180;\n    let titlesLength = this.titlesInfo.length;\n    let activeTitleIndex;\n    if (contentScrollTop <= this.titlesInfo[0]) {\n      activeTitleIndex = 0;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    if (contentScrollTop > this.titlesInfo[titlesLength - 1]) {\n      activeTitleIndex = this.titlesInfo.length - 1;\n      this.setState({activeTitleIndex: activeTitleIndex});\n      return;\n    }\n    for (let i = 0; i < titlesLength; i++) {\n      if (contentScrollTop > this.titlesInfo[i]) {\n        continue;\n      } else {\n        activeTitleIndex = i - 1;\n        break;\n      }\n    }\n    this.setState({activeTitleIndex: activeTitleIndex});\n  }\n\n  changeInlineNode = (item) => {\n    let url, imagePath;\n\n    if (item.type == 'image' && isPublicWiki) { // change image url\n      url = item.data.src;\n      const re = new RegExp(serviceURL + '/lib/' + repoID +'/file.*raw=1');\n      // different repo\n      if (re.test(url)) {\n        // get image path\n        let index = url.indexOf('/file');\n        let index2 = url.indexOf('?');\n        imagePath = url.substring(index + 5, index2);\n      } else if (/^\\.\\.\\/*/.test(url) || /^\\.\\/*/.test(url)) {\n        const path = this.props.path;\n        const originalPath = path.slice(0, path.lastIndexOf('/')) + '/' + url;\n        imagePath = Utils.pathNormalize(originalPath);\n      } else {\n        return;\n      }\n      item.data.src = serviceURL + '/view-image-via-public-wiki/?slug=' + slug + '&path=' + imagePath;\n    } else if (item.type == 'link') { // change link url\n      url = item.data.href;\n      if (Utils.isInternalFileLink(url, repoID)) { // change file url\n        if (Utils.isInternalMarkdownLink(url, repoID)) {\n          let path = Utils.getPathFromInternalMarkdownLink(url, repoID);\n          // replace url\n          item.data.href = serviceURL + '/published/' + slug + path;\n        } else {\n          item.data.href = url.replace(/(.*)lib\\/([-0-9a-f]{36})\\/file(.*)/g, (match, p1, p2, p3) => {\n            return `${p1}d/${sharedToken}/files/?p=${p3}&dl=1`;\n          });\n        }\n      } else if (Utils.isInternalDirLink(url, repoID)) { // change dir url\n        let path = Utils.getPathFromInternalDirLink(url, repoID);\n        // replace url\n        item.data.href = serviceURL + '/published/' + slug + path;\n      }\n    }\n\n    return item;\n  }\n\n  modifyValueBeforeRender = (value) => {\n    let newNodes = Utils.changeMarkdownNodes(value, this.changeInlineNode);\n    return newNodes;\n  }\n\n  renderMarkdown = () => {\n    let isTOCShow = true;\n    if (this.props.isTOCShow === false) {\n      isTOCShow = false;\n    }\n    if (this.props.isWiki) {\n      return (\n        <MarkdownViewer\n          showTOC={isTOCShow}\n          scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n          markdownContent={this.props.markdownContent}\n          activeTitleIndex={this.state.activeTitleIndex}\n          onContentRendered={this.onContentRendered}\n          modifyValueBeforeRender={this.modifyValueBeforeRender}\n        />\n      );\n    }\n\n    return (\n      <MarkdownViewer\n        showTOC={isTOCShow}\n        scriptSource={mediaUrl + 'js/mathjax/tex-svg.js'}\n        markdownContent={this.props.markdownContent}\n        activeTitleIndex={this.state.activeTitleIndex}\n        onContentRendered={this.onContentRendered}\n      />\n    );\n  }\n\n  renderRelatedFiles = () => {\n    const relatedFiles = this.state.relatedFiles;\n    if (relatedFiles.length > 0) {\n      return (\n        <div className=\"sf-releted-files\" id=\"sf-releted-files\">\n          <div className=\"sf-releted-files-header\">\n            <h4>{gettext('related files')}</h4>\n          </div>\n          {\n            relatedFiles.map((relatedFile, index) => {\n              let href = siteRoot + 'lib/' + relatedFile.repo_id + '/file' + Utils.encodePath(relatedFile.path);\n              return(\n                <div className=\"sf-releted-file\" key={index}>\n                  <a href={href} target=\"_blank\">\n                    <Card body size=\"sm\">\n                      <CardTitle>{relatedFile.name}</CardTitle>\n                      <CardText>{relatedFile.repo_name}</CardText>\n                      <span className=\"sf-releted-file-arrow\"></span>\n                    </Card>\n                  </a>\n                </div>\n              );\n            })\n          }\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n    if (this.props.isFileLoading) {\n      return <Loading />;\n    }\n    // In dir-column-file repoID is one of props, width is 100%; In wiki-viewer repoID is not props, width isn't 100%\n    let contentClassName = `${this.props.repoID ? contentClass + ' w-100' : contentClass}`;\n    return (\n      <div ref={this.markdownContainer} className=\"wiki-page-container\" onScroll={this.onScrollHandler.bind(this)}>\n        <div className={contentClassName}>\n          {this.props.children}\n          {this.renderMarkdown()}\n          {this.props.isWiki && this.renderRelatedFiles()}\n          <p id=\"wiki-page-last-modified\">{gettext('Last modified by')} {this.props.latestContributor}, <span>{this.props.lastModified}</span></p>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst defaultProps = {\n  isWiki: false,\n};\n\nWikiMarkdownViewer.propTypes = propTypes;\nMarkdownViewer.defaultProps = defaultProps;\n\nexport default WikiMarkdownViewer;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'react-modal';\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\n/**\n * Placeholder for future translate functionality\n */\nfunction translate(str) {\n  var replaceStrings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (!str) {\n    return '';\n  }\n\n  var translated = str;\n\n  if (replaceStrings) {\n    Object.keys(replaceStrings).forEach(function (placeholder) {\n      translated = translated.replace(placeholder, replaceStrings[placeholder]);\n    });\n  }\n\n  return translated;\n}\nfunction getWindowWidth() {\n  return typeof global.window !== 'undefined' ? global.window.innerWidth : 0;\n}\nfunction getWindowHeight() {\n  return typeof global.window !== 'undefined' ? global.window.innerHeight : 0;\n} // Get the highest window context that isn't cross-origin\n// (When in an iframe)\n\nfunction getHighestSafeWindowContext() {\n  var self = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : global.window.self;\n  var referrer = self.document.referrer; // If we reached the top level, return self\n\n  if (self === global.window.top || !referrer) {\n    return self;\n  }\n\n  var getOrigin = function getOrigin(href) {\n    return href.match(/(.*\\/\\/.*?)(\\/|$)/)[1];\n  }; // If parent is the same origin, we can move up one context\n  // Reference: https://stackoverflow.com/a/21965342/1601953\n\n\n  if (getOrigin(self.location.href) === getOrigin(referrer)) {\n    return getHighestSafeWindowContext(self.parent);\n  } // If a different origin, we consider the current level\n  // as the top reachable one\n\n\n  return self;\n}\n\n// Min image zoom level\nvar MIN_ZOOM_LEVEL = 0; // Max image zoom level\n\nvar MAX_ZOOM_LEVEL = 300; // Size ratio between previous and next zoom levels\n\nvar ZOOM_RATIO = 1.007; // How much to increase/decrease the zoom level when the zoom buttons are clicked\n\nvar ZOOM_BUTTON_INCREMENT_SIZE = 100; // Used to judge the amount of horizontal scroll needed to initiate a image move\n\nvar WHEEL_MOVE_Y_THRESHOLD = 1;\nvar KEYS = {\n  ESC: 27,\n  LEFT_ARROW: 37,\n  RIGHT_ARROW: 39\n}; // Actions\n\nvar ACTION_NONE = 0;\nvar ACTION_MOVE = 1;\nvar ACTION_SWIPE = 2;\nvar ACTION_PINCH = 3;\n\nvar SOURCE_ANY = 0;\nvar SOURCE_MOUSE = 1;\nvar SOURCE_TOUCH = 2;\nvar SOURCE_POINTER = 3; // Minimal swipe distance\n\nvar MIN_SWIPE_DISTANCE = 200;\n\nvar ReactImageLightbox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ReactImageLightbox, _Component);\n\n  _createClass(ReactImageLightbox, null, [{\n    key: \"isTargetMatchImage\",\n    value: function isTargetMatchImage(target) {\n      return target && /ril-image-current/.test(target.className);\n    }\n  }, {\n    key: \"parseMouseEvent\",\n    value: function parseMouseEvent(mouseEvent) {\n      return {\n        id: 'mouse',\n        source: SOURCE_MOUSE,\n        x: parseInt(mouseEvent.clientX, 10),\n        y: parseInt(mouseEvent.clientY, 10)\n      };\n    }\n  }, {\n    key: \"parseTouchPointer\",\n    value: function parseTouchPointer(touchPointer) {\n      return {\n        id: touchPointer.identifier,\n        source: SOURCE_TOUCH,\n        x: parseInt(touchPointer.clientX, 10),\n        y: parseInt(touchPointer.clientY, 10)\n      };\n    }\n  }, {\n    key: \"parsePointerEvent\",\n    value: function parsePointerEvent(pointerEvent) {\n      return {\n        id: pointerEvent.pointerId,\n        source: SOURCE_POINTER,\n        x: parseInt(pointerEvent.clientX, 10),\n        y: parseInt(pointerEvent.clientY, 10)\n      };\n    } // Request to transition to the previous image\n\n  }, {\n    key: \"getTransform\",\n    value: function getTransform(_ref) {\n      var _ref$x = _ref.x,\n          x = _ref$x === void 0 ? 0 : _ref$x,\n          _ref$y = _ref.y,\n          y = _ref$y === void 0 ? 0 : _ref$y,\n          _ref$zoom = _ref.zoom,\n          zoom = _ref$zoom === void 0 ? 1 : _ref$zoom,\n          width = _ref.width,\n          targetWidth = _ref.targetWidth;\n      var nextX = x;\n      var windowWidth = getWindowWidth();\n\n      if (width > windowWidth) {\n        nextX += (windowWidth - width) / 2;\n      }\n\n      var scaleFactor = zoom * (targetWidth / width);\n      return {\n        transform: \"translate3d(\".concat(nextX, \"px,\").concat(y, \"px,0) scale3d(\").concat(scaleFactor, \",\").concat(scaleFactor, \",1)\")\n      };\n    }\n  }]);\n\n  function ReactImageLightbox(props) {\n    var _this;\n\n    _classCallCheck(this, ReactImageLightbox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReactImageLightbox).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWheel\", function (event) {\n      event.preventDefault();\n    });\n\n    _this.state = {\n      //-----------------------------\n      // Animation\n      //-----------------------------\n      // Lightbox is closing\n      // When Lightbox is mounted, if animation is enabled it will open with the reverse of the closing animation\n      isClosing: !props.animationDisabled,\n      // Component parts should animate (e.g., when images are moving, or image is being zoomed)\n      shouldAnimate: false,\n      //-----------------------------\n      // Zoom settings\n      //-----------------------------\n      // Zoom level of image\n      zoomLevel: MIN_ZOOM_LEVEL,\n      //-----------------------------\n      // Image position settings\n      //-----------------------------\n      // Horizontal offset from center\n      offsetX: 0,\n      // Vertical offset from center\n      offsetY: 0,\n      // image load error for srcType\n      loadErrorStatus: {}\n    }; // Refs\n\n    _this.outerEl = React.createRef();\n    _this.zoomInBtn = React.createRef();\n    _this.zoomOutBtn = React.createRef();\n    _this.caption = React.createRef();\n    _this.closeIfClickInner = _this.closeIfClickInner.bind(_assertThisInitialized(_this));\n    _this.handleImageDoubleClick = _this.handleImageDoubleClick.bind(_assertThisInitialized(_this));\n    _this.handleImageMouseWheel = _this.handleImageMouseWheel.bind(_assertThisInitialized(_this));\n    _this.handleKeyInput = _this.handleKeyInput.bind(_assertThisInitialized(_this));\n    _this.handleMouseUp = _this.handleMouseUp.bind(_assertThisInitialized(_this));\n    _this.handleMouseDown = _this.handleMouseDown.bind(_assertThisInitialized(_this));\n    _this.handleMouseMove = _this.handleMouseMove.bind(_assertThisInitialized(_this));\n    _this.handleOuterMousewheel = _this.handleOuterMousewheel.bind(_assertThisInitialized(_this));\n    _this.handleTouchStart = _this.handleTouchStart.bind(_assertThisInitialized(_this));\n    _this.handleTouchMove = _this.handleTouchMove.bind(_assertThisInitialized(_this));\n    _this.handleTouchEnd = _this.handleTouchEnd.bind(_assertThisInitialized(_this));\n    _this.handlePointerEvent = _this.handlePointerEvent.bind(_assertThisInitialized(_this));\n    _this.handleCaptionMousewheel = _this.handleCaptionMousewheel.bind(_assertThisInitialized(_this));\n    _this.handleWindowResize = _this.handleWindowResize.bind(_assertThisInitialized(_this));\n    _this.handleZoomInButtonClick = _this.handleZoomInButtonClick.bind(_assertThisInitialized(_this));\n    _this.handleZoomOutButtonClick = _this.handleZoomOutButtonClick.bind(_assertThisInitialized(_this));\n    _this.requestClose = _this.requestClose.bind(_assertThisInitialized(_this));\n    _this.requestMoveNext = _this.requestMoveNext.bind(_assertThisInitialized(_this));\n    _this.requestMovePrev = _this.requestMovePrev.bind(_assertThisInitialized(_this));\n    return _this;\n  } // eslint-disable-next-line camelcase\n\n\n  _createClass(ReactImageLightbox, [{\n    key: \"UNSAFE_componentWillMount\",\n    value: function UNSAFE_componentWillMount() {\n      // Timeouts - always clear it before umount\n      this.timeouts = []; // Current action\n\n      this.currentAction = ACTION_NONE; // Events source\n\n      this.eventsSource = SOURCE_ANY; // Empty pointers list\n\n      this.pointerList = []; // Prevent inner close\n\n      this.preventInnerClose = false;\n      this.preventInnerCloseTimeout = null; // Used to disable animation when changing props.mainSrc|nextSrc|prevSrc\n\n      this.keyPressed = false; // Used to store load state / dimensions of images\n\n      this.imageCache = {}; // Time the last keydown event was called (used in keyboard action rate limiting)\n\n      this.lastKeyDownTime = 0; // Used for debouncing window resize event\n\n      this.resizeTimeout = null; // Used to determine when actions are triggered by the scroll wheel\n\n      this.wheelActionTimeout = null;\n      this.resetScrollTimeout = null;\n      this.scrollX = 0;\n      this.scrollY = 0; // Used in panning zoomed images\n\n      this.moveStartX = 0;\n      this.moveStartY = 0;\n      this.moveStartOffsetX = 0;\n      this.moveStartOffsetY = 0; // Used to swipe\n\n      this.swipeStartX = 0;\n      this.swipeStartY = 0;\n      this.swipeEndX = 0;\n      this.swipeEndY = 0; // Used to pinch\n\n      this.pinchTouchList = null;\n      this.pinchDistance = 0; // Used to differentiate between images with identical src\n\n      this.keyCounter = 0; // Used to detect a move when all src's remain unchanged (four or more of the same image in a row)\n\n      this.moveRequested = false;\n\n      if (!this.props.animationDisabled) {\n        // Make opening animation play\n        this.setState({\n          isClosing: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // Prevents cross-origin errors when using a cross-origin iframe\n      this.windowContext = getHighestSafeWindowContext();\n      this.listeners = {\n        resize: this.handleWindowResize,\n        mouseup: this.handleMouseUp,\n        touchend: this.handleTouchEnd,\n        touchcancel: this.handleTouchEnd,\n        pointerdown: this.handlePointerEvent,\n        pointermove: this.handlePointerEvent,\n        pointerup: this.handlePointerEvent,\n        pointercancel: this.handlePointerEvent\n      };\n      Object.keys(this.listeners).forEach(function (type) {\n        _this2.windowContext.addEventListener(type, _this2.listeners[type]);\n      });\n      document.addEventListener('wheel', this.handleWheel, {\n        passive: false\n      });\n      this.loadAllImages();\n    } // eslint-disable-next-line camelcase\n\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      var _this3 = this;\n\n      // Iterate through the source types for prevProps and nextProps to\n      //  determine if any of the sources changed\n      var sourcesChanged = false;\n      var prevSrcDict = {};\n      var nextSrcDict = {};\n      this.getSrcTypes().forEach(function (srcType) {\n        if (_this3.props[srcType.name] !== nextProps[srcType.name]) {\n          sourcesChanged = true;\n          prevSrcDict[_this3.props[srcType.name]] = true;\n          nextSrcDict[nextProps[srcType.name]] = true;\n        }\n      });\n\n      if (sourcesChanged || this.moveRequested) {\n        // Reset the loaded state for images not rendered next\n        Object.keys(prevSrcDict).forEach(function (prevSrc) {\n          if (!(prevSrc in nextSrcDict) && prevSrc in _this3.imageCache) {\n            _this3.imageCache[prevSrc].loaded = false;\n          }\n        });\n        this.moveRequested = false; // Load any new images\n\n        this.loadAllImages(nextProps);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate() {\n      // Wait for move...\n      return !this.moveRequested;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this4 = this;\n\n      this.didUnmount = true;\n      Object.keys(this.listeners).forEach(function (type) {\n        _this4.windowContext.removeEventListener(type, _this4.listeners[type]);\n      });\n      document.removeEventListener('wheel', this.handleWheel, {\n        passive: false\n      });\n      this.timeouts.forEach(function (tid) {\n        return clearTimeout(tid);\n      });\n    }\n  }, {\n    key: \"setTimeout\",\n    value: function (_setTimeout) {\n      function setTimeout(_x, _x2) {\n        return _setTimeout.apply(this, arguments);\n      }\n\n      setTimeout.toString = function () {\n        return _setTimeout.toString();\n      };\n\n      return setTimeout;\n    }(function (func, time) {\n      var _this5 = this;\n\n      var id = setTimeout(function () {\n        _this5.timeouts = _this5.timeouts.filter(function (tid) {\n          return tid !== id;\n        });\n        func();\n      }, time);\n      this.timeouts.push(id);\n      return id;\n    })\n  }, {\n    key: \"setPreventInnerClose\",\n    value: function setPreventInnerClose() {\n      var _this6 = this;\n\n      if (this.preventInnerCloseTimeout) {\n        this.clearTimeout(this.preventInnerCloseTimeout);\n      }\n\n      this.preventInnerClose = true;\n      this.preventInnerCloseTimeout = this.setTimeout(function () {\n        _this6.preventInnerClose = false;\n        _this6.preventInnerCloseTimeout = null;\n      }, 100);\n    } // Get info for the best suited image to display with the given srcType\n\n  }, {\n    key: \"getBestImageForType\",\n    value: function getBestImageForType(srcType) {\n      var imageSrc = this.props[srcType];\n      var fitSizes = {};\n\n      if (this.isImageLoaded(imageSrc)) {\n        // Use full-size image if available\n        fitSizes = this.getFitSizes(this.imageCache[imageSrc].width, this.imageCache[imageSrc].height);\n      } else if (this.isImageLoaded(this.props[\"\".concat(srcType, \"Thumbnail\")])) {\n        // Fall back to using thumbnail if the image has not been loaded\n        imageSrc = this.props[\"\".concat(srcType, \"Thumbnail\")];\n        fitSizes = this.getFitSizes(this.imageCache[imageSrc].width, this.imageCache[imageSrc].height, true);\n      } else {\n        return null;\n      }\n\n      return {\n        src: imageSrc,\n        height: this.imageCache[imageSrc].height,\n        width: this.imageCache[imageSrc].width,\n        targetHeight: fitSizes.height,\n        targetWidth: fitSizes.width\n      };\n    } // Get sizing for when an image is larger than the window\n\n  }, {\n    key: \"getFitSizes\",\n    value: function getFitSizes(width, height, stretch) {\n      var boxSize = this.getLightboxRect();\n      var maxHeight = boxSize.height - this.props.imagePadding * 2;\n      var maxWidth = boxSize.width - this.props.imagePadding * 2;\n\n      if (!stretch) {\n        maxHeight = Math.min(maxHeight, height);\n        maxWidth = Math.min(maxWidth, width);\n      }\n\n      var maxRatio = maxWidth / maxHeight;\n      var srcRatio = width / height;\n\n      if (maxRatio > srcRatio) {\n        // height is the constraining dimension of the photo\n        return {\n          width: width * maxHeight / height,\n          height: maxHeight\n        };\n      }\n\n      return {\n        width: maxWidth,\n        height: height * maxWidth / width\n      };\n    }\n  }, {\n    key: \"getMaxOffsets\",\n    value: function getMaxOffsets() {\n      var zoomLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.zoomLevel;\n      var currentImageInfo = this.getBestImageForType('mainSrc');\n\n      if (currentImageInfo === null) {\n        return {\n          maxX: 0,\n          minX: 0,\n          maxY: 0,\n          minY: 0\n        };\n      }\n\n      var boxSize = this.getLightboxRect();\n      var zoomMultiplier = this.getZoomMultiplier(zoomLevel);\n      var maxX = 0;\n\n      if (zoomMultiplier * currentImageInfo.width - boxSize.width < 0) {\n        // if there is still blank space in the X dimension, don't limit except to the opposite edge\n        maxX = (boxSize.width - zoomMultiplier * currentImageInfo.width) / 2;\n      } else {\n        maxX = (zoomMultiplier * currentImageInfo.width - boxSize.width) / 2;\n      }\n\n      var maxY = 0;\n\n      if (zoomMultiplier * currentImageInfo.height - boxSize.height < 0) {\n        // if there is still blank space in the Y dimension, don't limit except to the opposite edge\n        maxY = (boxSize.height - zoomMultiplier * currentImageInfo.height) / 2;\n      } else {\n        maxY = (zoomMultiplier * currentImageInfo.height - boxSize.height) / 2;\n      }\n\n      return {\n        maxX: maxX,\n        maxY: maxY,\n        minX: -1 * maxX,\n        minY: -1 * maxY\n      };\n    } // Get image src types\n\n  }, {\n    key: \"getSrcTypes\",\n    value: function getSrcTypes() {\n      return [{\n        name: 'mainSrc',\n        keyEnding: \"i\".concat(this.keyCounter)\n      }, {\n        name: 'mainSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter)\n      }, {\n        name: 'nextSrc',\n        keyEnding: \"i\".concat(this.keyCounter + 1)\n      }, {\n        name: 'nextSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter + 1)\n      }, {\n        name: 'prevSrc',\n        keyEnding: \"i\".concat(this.keyCounter - 1)\n      }, {\n        name: 'prevSrcThumbnail',\n        keyEnding: \"t\".concat(this.keyCounter - 1)\n      }];\n    }\n    /**\n     * Get sizing when the image is scaled\n     */\n\n  }, {\n    key: \"getZoomMultiplier\",\n    value: function getZoomMultiplier() {\n      var zoomLevel = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.zoomLevel;\n      return Math.pow(ZOOM_RATIO, zoomLevel);\n    }\n    /**\n     * Get the size of the lightbox in pixels\n     */\n\n  }, {\n    key: \"getLightboxRect\",\n    value: function getLightboxRect() {\n      if (this.outerEl.current) {\n        return this.outerEl.current.getBoundingClientRect();\n      }\n\n      return {\n        width: getWindowWidth(),\n        height: getWindowHeight(),\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n      };\n    }\n  }, {\n    key: \"clearTimeout\",\n    value: function (_clearTimeout) {\n      function clearTimeout(_x3) {\n        return _clearTimeout.apply(this, arguments);\n      }\n\n      clearTimeout.toString = function () {\n        return _clearTimeout.toString();\n      };\n\n      return clearTimeout;\n    }(function (id) {\n      this.timeouts = this.timeouts.filter(function (tid) {\n        return tid !== id;\n      });\n      clearTimeout(id);\n    }) // Change zoom level\n\n  }, {\n    key: \"changeZoom\",\n    value: function changeZoom(zoomLevel, clientX, clientY) {\n      // Ignore if zoom disabled\n      if (!this.props.enableZoom) {\n        return;\n      } // Constrain zoom level to the set bounds\n\n\n      var nextZoomLevel = Math.max(MIN_ZOOM_LEVEL, Math.min(MAX_ZOOM_LEVEL, zoomLevel)); // Ignore requests that don't change the zoom level\n\n      if (nextZoomLevel === this.state.zoomLevel) {\n        return;\n      }\n\n      if (nextZoomLevel === MIN_ZOOM_LEVEL) {\n        // Snap back to center if zoomed all the way out\n        this.setState({\n          zoomLevel: nextZoomLevel,\n          offsetX: 0,\n          offsetY: 0\n        });\n        return;\n      }\n\n      var imageBaseSize = this.getBestImageForType('mainSrc');\n\n      if (imageBaseSize === null) {\n        return;\n      }\n\n      var currentZoomMultiplier = this.getZoomMultiplier();\n      var nextZoomMultiplier = this.getZoomMultiplier(nextZoomLevel); // Default to the center of the image to zoom when no mouse position specified\n\n      var boxRect = this.getLightboxRect();\n      var pointerX = typeof clientX !== 'undefined' ? clientX - boxRect.left : boxRect.width / 2;\n      var pointerY = typeof clientY !== 'undefined' ? clientY - boxRect.top : boxRect.height / 2;\n      var currentImageOffsetX = (boxRect.width - imageBaseSize.width * currentZoomMultiplier) / 2;\n      var currentImageOffsetY = (boxRect.height - imageBaseSize.height * currentZoomMultiplier) / 2;\n      var currentImageRealOffsetX = currentImageOffsetX - this.state.offsetX;\n      var currentImageRealOffsetY = currentImageOffsetY - this.state.offsetY;\n      var currentPointerXRelativeToImage = (pointerX - currentImageRealOffsetX) / currentZoomMultiplier;\n      var currentPointerYRelativeToImage = (pointerY - currentImageRealOffsetY) / currentZoomMultiplier;\n      var nextImageRealOffsetX = pointerX - currentPointerXRelativeToImage * nextZoomMultiplier;\n      var nextImageRealOffsetY = pointerY - currentPointerYRelativeToImage * nextZoomMultiplier;\n      var nextImageOffsetX = (boxRect.width - imageBaseSize.width * nextZoomMultiplier) / 2;\n      var nextImageOffsetY = (boxRect.height - imageBaseSize.height * nextZoomMultiplier) / 2;\n      var nextOffsetX = nextImageOffsetX - nextImageRealOffsetX;\n      var nextOffsetY = nextImageOffsetY - nextImageRealOffsetY; // When zooming out, limit the offset so things don't get left askew\n\n      if (this.currentAction !== ACTION_PINCH) {\n        var maxOffsets = this.getMaxOffsets();\n\n        if (this.state.zoomLevel > nextZoomLevel) {\n          nextOffsetX = Math.max(maxOffsets.minX, Math.min(maxOffsets.maxX, nextOffsetX));\n          nextOffsetY = Math.max(maxOffsets.minY, Math.min(maxOffsets.maxY, nextOffsetY));\n        }\n      }\n\n      this.setState({\n        zoomLevel: nextZoomLevel,\n        offsetX: nextOffsetX,\n        offsetY: nextOffsetY\n      });\n    }\n  }, {\n    key: \"closeIfClickInner\",\n    value: function closeIfClickInner(event) {\n      if (!this.preventInnerClose && event.target.className.search(/\\bril-inner\\b/) > -1) {\n        this.requestClose(event);\n      }\n    }\n    /**\n     * Handle user keyboard actions\n     */\n\n  }, {\n    key: \"handleKeyInput\",\n    value: function handleKeyInput(event) {\n      event.stopPropagation(); // Ignore key input during animations\n\n      if (this.isAnimating()) {\n        return;\n      } // Allow slightly faster navigation through the images when user presses keys repeatedly\n\n\n      if (event.type === 'keyup') {\n        this.lastKeyDownTime -= this.props.keyRepeatKeyupBonus;\n        return;\n      }\n\n      var keyCode = event.which || event.keyCode; // Ignore key presses that happen too close to each other (when rapid fire key pressing or holding down the key)\n      // But allow it if it's a lightbox closing action\n\n      var currentTime = new Date();\n\n      if (currentTime.getTime() - this.lastKeyDownTime < this.props.keyRepeatLimit && keyCode !== KEYS.ESC) {\n        return;\n      }\n\n      this.lastKeyDownTime = currentTime.getTime();\n\n      switch (keyCode) {\n        // ESC key closes the lightbox\n        case KEYS.ESC:\n          event.preventDefault();\n          this.requestClose(event);\n          break;\n        // Left arrow key moves to previous image\n\n        case KEYS.LEFT_ARROW:\n          if (!this.props.prevSrc) {\n            return;\n          }\n\n          event.preventDefault();\n          this.keyPressed = true;\n          this.requestMovePrev(event);\n          break;\n        // Right arrow key moves to next image\n\n        case KEYS.RIGHT_ARROW:\n          if (!this.props.nextSrc) {\n            return;\n          }\n\n          event.preventDefault();\n          this.keyPressed = true;\n          this.requestMoveNext(event);\n          break;\n      }\n    }\n    /**\n     * Handle a mouse wheel event over the lightbox container\n     */\n\n  }, {\n    key: \"handleOuterMousewheel\",\n    value: function handleOuterMousewheel(event) {\n      var _this7 = this;\n\n      // Prevent scrolling of the background\n      event.stopPropagation();\n      this.clearTimeout(this.resetScrollTimeout);\n      this.resetScrollTimeout = this.setTimeout(function () {\n        _this7.scrollX = 0;\n        _this7.scrollY = 0;\n      }, 300);\n    }\n  }, {\n    key: \"handleImageMouseWheel\",\n    value: function handleImageMouseWheel(event) {\n      // when gesture move up/down/left/right, event.deltaY is integer, move image\n      if (parseInt(event.deltaY) === parseFloat(event.deltaY)) {\n        if (Math.abs(event.deltaY) > Math.abs(event.deltaX)) {\n          var newOffsetY = this.state.offsetY + event.deltaY;\n          this.setState({\n            offsetY: newOffsetY\n          });\n        } else {\n          var newOffsetX = this.state.offsetX + event.deltaX;\n          this.setState({\n            offsetX: newOffsetX\n          });\n        }\n\n        return;\n      } // when gesture zoom in or zoom out, event.deltaY is decimal, zoom image\n\n\n      var yThreshold = WHEEL_MOVE_Y_THRESHOLD;\n\n      if (Math.abs(event.deltaY) >= Math.abs(event.deltaX)) {\n        event.stopPropagation(); // If the vertical scroll amount was large enough, perform a zoom\n\n        if (Math.abs(event.deltaY) < yThreshold) {\n          return;\n        }\n\n        this.scrollX = 0;\n        this.scrollY += event.deltaY;\n        this.changeZoom(this.state.zoomLevel - event.deltaY, event.clientX, event.clientY);\n      }\n    }\n    /**\n     * Handle a double click on the current image\n     */\n\n  }, {\n    key: \"handleImageDoubleClick\",\n    value: function handleImageDoubleClick(event) {\n      if (this.state.zoomLevel > MIN_ZOOM_LEVEL) {\n        // A double click when zoomed in zooms all the way out\n        this.changeZoom(MIN_ZOOM_LEVEL, event.clientX, event.clientY);\n      } else {\n        // A double click when zoomed all the way out zooms in\n        this.changeZoom(this.state.zoomLevel + ZOOM_BUTTON_INCREMENT_SIZE, event.clientX, event.clientY);\n      }\n    }\n  }, {\n    key: \"shouldHandleEvent\",\n    value: function shouldHandleEvent(source) {\n      if (this.eventsSource === source) {\n        return true;\n      }\n\n      if (this.eventsSource === SOURCE_ANY) {\n        this.eventsSource = source;\n        return true;\n      }\n\n      switch (source) {\n        case SOURCE_MOUSE:\n          return false;\n\n        case SOURCE_TOUCH:\n          this.eventsSource = SOURCE_TOUCH;\n          this.filterPointersBySource();\n          return true;\n\n        case SOURCE_POINTER:\n          if (this.eventsSource === SOURCE_MOUSE) {\n            this.eventsSource = SOURCE_POINTER;\n            this.filterPointersBySource();\n            return true;\n          }\n\n          return false;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"addPointer\",\n    value: function addPointer(pointer) {\n      this.pointerList.push(pointer);\n    }\n  }, {\n    key: \"removePointer\",\n    value: function removePointer(pointer) {\n      this.pointerList = this.pointerList.filter(function (_ref2) {\n        var id = _ref2.id;\n        return id !== pointer.id;\n      });\n    }\n  }, {\n    key: \"filterPointersBySource\",\n    value: function filterPointersBySource() {\n      var _this8 = this;\n\n      this.pointerList = this.pointerList.filter(function (_ref3) {\n        var source = _ref3.source;\n        return source === _this8.eventsSource;\n      });\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE) && ReactImageLightbox.isTargetMatchImage(event.target)) {\n        this.addPointer(ReactImageLightbox.parseMouseEvent(event));\n        this.multiPointerStart(event);\n      }\n    }\n  }, {\n    key: \"handleMouseMove\",\n    value: function handleMouseMove(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE)) {\n        this.multiPointerMove(event, [ReactImageLightbox.parseMouseEvent(event)]);\n      }\n    }\n  }, {\n    key: \"handleMouseUp\",\n    value: function handleMouseUp(event) {\n      if (this.shouldHandleEvent(SOURCE_MOUSE)) {\n        this.removePointer(ReactImageLightbox.parseMouseEvent(event));\n        this.multiPointerEnd(event);\n      }\n    }\n  }, {\n    key: \"handlePointerEvent\",\n    value: function handlePointerEvent(event) {\n      if (this.shouldHandleEvent(SOURCE_POINTER)) {\n        switch (event.type) {\n          case 'pointerdown':\n            if (ReactImageLightbox.isTargetMatchImage(event.target)) {\n              this.addPointer(ReactImageLightbox.parsePointerEvent(event));\n              this.multiPointerStart(event);\n            }\n\n            break;\n\n          case 'pointermove':\n            this.multiPointerMove(event, [ReactImageLightbox.parsePointerEvent(event)]);\n            break;\n\n          case 'pointerup':\n          case 'pointercancel':\n            this.removePointer(ReactImageLightbox.parsePointerEvent(event));\n            this.multiPointerEnd(event);\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"handleTouchStart\",\n    value: function handleTouchStart(event) {\n      var _this9 = this;\n\n      if (this.shouldHandleEvent(SOURCE_TOUCH) && ReactImageLightbox.isTargetMatchImage(event.target)) {\n        [].forEach.call(event.changedTouches, function (eventTouch) {\n          return _this9.addPointer(ReactImageLightbox.parseTouchPointer(eventTouch));\n        });\n        this.multiPointerStart(event);\n      }\n    }\n  }, {\n    key: \"handleTouchMove\",\n    value: function handleTouchMove(event) {\n      if (this.shouldHandleEvent(SOURCE_TOUCH)) {\n        this.multiPointerMove(event, [].map.call(event.changedTouches, function (eventTouch) {\n          return ReactImageLightbox.parseTouchPointer(eventTouch);\n        }));\n      }\n    }\n  }, {\n    key: \"handleTouchEnd\",\n    value: function handleTouchEnd(event) {\n      var _this10 = this;\n\n      if (this.shouldHandleEvent(SOURCE_TOUCH)) {\n        [].map.call(event.changedTouches, function (touch) {\n          return _this10.removePointer(ReactImageLightbox.parseTouchPointer(touch));\n        });\n        this.multiPointerEnd(event);\n      }\n    }\n  }, {\n    key: \"decideMoveOrSwipe\",\n    value: function decideMoveOrSwipe(pointer) {\n      if (this.state.zoomLevel <= MIN_ZOOM_LEVEL) {\n        this.handleSwipeStart(pointer);\n      } else {\n        this.handleMoveStart(pointer);\n      }\n    }\n  }, {\n    key: \"multiPointerStart\",\n    value: function multiPointerStart(event) {\n      this.handleEnd(null);\n\n      switch (this.pointerList.length) {\n        case 1:\n          {\n            event.preventDefault();\n            this.decideMoveOrSwipe(this.pointerList[0]);\n            break;\n          }\n\n        case 2:\n          {\n            event.preventDefault();\n            this.handlePinchStart(this.pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"multiPointerMove\",\n    value: function multiPointerMove(event, pointerList) {\n      switch (this.currentAction) {\n        case ACTION_MOVE:\n          {\n            event.preventDefault();\n            this.handleMove(pointerList[0]);\n            break;\n          }\n\n        case ACTION_SWIPE:\n          {\n            event.preventDefault();\n            this.handleSwipe(pointerList[0]);\n            break;\n          }\n\n        case ACTION_PINCH:\n          {\n            event.preventDefault();\n            this.handlePinch(pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"multiPointerEnd\",\n    value: function multiPointerEnd(event) {\n      if (this.currentAction !== ACTION_NONE) {\n        this.setPreventInnerClose();\n        this.handleEnd(event);\n      }\n\n      switch (this.pointerList.length) {\n        case 0:\n          {\n            this.eventsSource = SOURCE_ANY;\n            break;\n          }\n\n        case 1:\n          {\n            event.preventDefault();\n            this.decideMoveOrSwipe(this.pointerList[0]);\n            break;\n          }\n\n        case 2:\n          {\n            event.preventDefault();\n            this.handlePinchStart(this.pointerList);\n            break;\n          }\n      }\n    }\n  }, {\n    key: \"handleEnd\",\n    value: function handleEnd(event) {\n      switch (this.currentAction) {\n        case ACTION_MOVE:\n          this.handleMoveEnd(event);\n          break;\n\n        case ACTION_SWIPE:\n          this.handleSwipeEnd(event);\n          break;\n\n        case ACTION_PINCH:\n          this.handlePinchEnd(event);\n          break;\n      }\n    } // Handle move start over the lightbox container\n    // This happens:\n    // - On a mouseDown event\n    // - On a touchstart event\n\n  }, {\n    key: \"handleMoveStart\",\n    value: function handleMoveStart(_ref4) {\n      var clientX = _ref4.x,\n          clientY = _ref4.y;\n\n      if (!this.props.enableZoom) {\n        return;\n      }\n\n      this.currentAction = ACTION_MOVE;\n      this.moveStartX = clientX;\n      this.moveStartY = clientY;\n      this.moveStartOffsetX = this.state.offsetX;\n      this.moveStartOffsetY = this.state.offsetY;\n    } // Handle dragging over the lightbox container\n    // This happens:\n    // - After a mouseDown and before a mouseUp event\n    // - After a touchstart and before a touchend event\n\n  }, {\n    key: \"handleMove\",\n    value: function handleMove(_ref5) {\n      var clientX = _ref5.x,\n          clientY = _ref5.y;\n      var newOffsetX = this.moveStartX - clientX + this.moveStartOffsetX;\n      var newOffsetY = this.moveStartY - clientY + this.moveStartOffsetY;\n\n      if (this.state.offsetX !== newOffsetX || this.state.offsetY !== newOffsetY) {\n        this.setState({\n          offsetX: newOffsetX,\n          offsetY: newOffsetY\n        });\n      }\n    }\n  }, {\n    key: \"handleMoveEnd\",\n    value: function handleMoveEnd() {\n      var _this11 = this;\n\n      this.currentAction = ACTION_NONE;\n      this.moveStartX = 0;\n      this.moveStartY = 0;\n      this.moveStartOffsetX = 0;\n      this.moveStartOffsetY = 0; // Snap image back into frame if outside max offset range\n\n      var maxOffsets = this.getMaxOffsets();\n      var nextOffsetX = Math.max(maxOffsets.minX, Math.min(maxOffsets.maxX, this.state.offsetX));\n      var nextOffsetY = Math.max(maxOffsets.minY, Math.min(maxOffsets.maxY, this.state.offsetY));\n\n      if (nextOffsetX !== this.state.offsetX || nextOffsetY !== this.state.offsetY) {\n        this.setState({\n          offsetX: nextOffsetX,\n          offsetY: nextOffsetY,\n          shouldAnimate: true\n        });\n        this.setTimeout(function () {\n          _this11.setState({\n            shouldAnimate: false\n          });\n        }, this.props.animationDuration);\n      }\n    }\n  }, {\n    key: \"handleSwipeStart\",\n    value: function handleSwipeStart(_ref6) {\n      var clientX = _ref6.x,\n          clientY = _ref6.y;\n      this.currentAction = ACTION_SWIPE;\n      this.swipeStartX = clientX;\n      this.swipeStartY = clientY;\n      this.swipeEndX = clientX;\n      this.swipeEndY = clientY;\n    }\n  }, {\n    key: \"handleSwipe\",\n    value: function handleSwipe(_ref7) {\n      var clientX = _ref7.x,\n          clientY = _ref7.y;\n      this.swipeEndX = clientX;\n      this.swipeEndY = clientY;\n    }\n  }, {\n    key: \"handleSwipeEnd\",\n    value: function handleSwipeEnd(event) {\n      var xDiff = this.swipeEndX - this.swipeStartX;\n      var xDiffAbs = Math.abs(xDiff);\n      var yDiffAbs = Math.abs(this.swipeEndY - this.swipeStartY);\n      this.currentAction = ACTION_NONE;\n      this.swipeStartX = 0;\n      this.swipeStartY = 0;\n      this.swipeEndX = 0;\n      this.swipeEndY = 0;\n\n      if (!event || this.isAnimating() || xDiffAbs < yDiffAbs * 1.5) {\n        return;\n      }\n\n      if (xDiffAbs < MIN_SWIPE_DISTANCE) {\n        var boxRect = this.getLightboxRect();\n\n        if (xDiffAbs < boxRect.width / 4) {\n          return;\n        }\n      }\n\n      if (xDiff > 0 && this.props.prevSrc) {\n        event.preventDefault();\n        this.requestMovePrev();\n      } else if (xDiff < 0 && this.props.nextSrc) {\n        event.preventDefault();\n        this.requestMoveNext();\n      }\n    }\n  }, {\n    key: \"calculatePinchDistance\",\n    value: function calculatePinchDistance() {\n      var _ref8 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pinchTouchList,\n          _ref9 = _slicedToArray(_ref8, 2),\n          a = _ref9[0],\n          b = _ref9[1];\n\n      return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n    }\n  }, {\n    key: \"calculatePinchCenter\",\n    value: function calculatePinchCenter() {\n      var _ref10 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.pinchTouchList,\n          _ref11 = _slicedToArray(_ref10, 2),\n          a = _ref11[0],\n          b = _ref11[1];\n\n      return {\n        x: a.x - (a.x - b.x) / 2,\n        y: a.y - (a.y - b.y) / 2\n      };\n    }\n  }, {\n    key: \"handlePinchStart\",\n    value: function handlePinchStart(pointerList) {\n      if (!this.props.enableZoom) {\n        return;\n      }\n\n      this.currentAction = ACTION_PINCH;\n      this.pinchTouchList = pointerList.map(function (_ref12) {\n        var id = _ref12.id,\n            x = _ref12.x,\n            y = _ref12.y;\n        return {\n          id: id,\n          x: x,\n          y: y\n        };\n      });\n      this.pinchDistance = this.calculatePinchDistance();\n    }\n  }, {\n    key: \"handlePinch\",\n    value: function handlePinch(pointerList) {\n      this.pinchTouchList = this.pinchTouchList.map(function (oldPointer) {\n        for (var i = 0; i < pointerList.length; i += 1) {\n          if (pointerList[i].id === oldPointer.id) {\n            return pointerList[i];\n          }\n        }\n\n        return oldPointer;\n      });\n      var newDistance = this.calculatePinchDistance();\n      var zoomLevel = this.state.zoomLevel + newDistance - this.pinchDistance;\n      this.pinchDistance = newDistance;\n\n      var _this$calculatePinchC = this.calculatePinchCenter(this.pinchTouchList),\n          clientX = _this$calculatePinchC.x,\n          clientY = _this$calculatePinchC.y;\n\n      this.changeZoom(zoomLevel, clientX, clientY);\n    }\n  }, {\n    key: \"handlePinchEnd\",\n    value: function handlePinchEnd() {\n      this.currentAction = ACTION_NONE;\n      this.pinchTouchList = null;\n      this.pinchDistance = 0;\n    } // Handle the window resize event\n\n  }, {\n    key: \"handleWindowResize\",\n    value: function handleWindowResize() {\n      this.clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = this.setTimeout(this.forceUpdate.bind(this), 100);\n    }\n  }, {\n    key: \"handleZoomInButtonClick\",\n    value: function handleZoomInButtonClick() {\n      var nextZoomLevel = this.state.zoomLevel + ZOOM_BUTTON_INCREMENT_SIZE;\n      this.changeZoom(nextZoomLevel);\n\n      if (nextZoomLevel === MAX_ZOOM_LEVEL) {\n        this.zoomOutBtn.current.focus();\n      }\n    }\n  }, {\n    key: \"handleZoomOutButtonClick\",\n    value: function handleZoomOutButtonClick() {\n      var nextZoomLevel = this.state.zoomLevel - ZOOM_BUTTON_INCREMENT_SIZE;\n      this.changeZoom(nextZoomLevel);\n\n      if (nextZoomLevel === MIN_ZOOM_LEVEL) {\n        this.zoomInBtn.current.focus();\n      }\n    }\n  }, {\n    key: \"handleCaptionMousewheel\",\n    value: function handleCaptionMousewheel(event) {\n      event.stopPropagation();\n\n      if (!this.caption.current) {\n        return;\n      }\n\n      var _this$caption$current = this.caption.current.getBoundingClientRect(),\n          height = _this$caption$current.height;\n\n      var _this$caption$current2 = this.caption.current,\n          scrollHeight = _this$caption$current2.scrollHeight,\n          scrollTop = _this$caption$current2.scrollTop;\n\n      if (event.deltaY > 0 && height + scrollTop >= scrollHeight || event.deltaY < 0 && scrollTop <= 0) {\n        event.preventDefault();\n      }\n    } // Detach key and mouse input events\n\n  }, {\n    key: \"isAnimating\",\n    value: function isAnimating() {\n      return this.state.shouldAnimate || this.state.isClosing;\n    } // Check if image is loaded\n\n  }, {\n    key: \"isImageLoaded\",\n    value: function isImageLoaded(imageSrc) {\n      return imageSrc && imageSrc in this.imageCache && this.imageCache[imageSrc].loaded;\n    } // Load image from src and call callback with image width and height on load\n\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(srcType, imageSrc, done) {\n      var _this12 = this;\n\n      // Return the image info if it is already cached\n      if (this.isImageLoaded(imageSrc)) {\n        this.setTimeout(function () {\n          done();\n        }, 1);\n        return;\n      }\n\n      var inMemoryImage = new global.Image();\n\n      if (this.props.imageCrossOrigin) {\n        inMemoryImage.crossOrigin = this.props.imageCrossOrigin;\n      }\n\n      inMemoryImage.onerror = function (errorEvent) {\n        _this12.props.onImageLoadError(imageSrc, srcType, errorEvent); // failed to load so set the state loadErrorStatus\n\n\n        _this12.setState(function (prevState) {\n          return {\n            loadErrorStatus: _objectSpread2({}, prevState.loadErrorStatus, _defineProperty({}, srcType, true))\n          };\n        });\n\n        done(errorEvent);\n      };\n\n      inMemoryImage.onload = function () {\n        _this12.props.onImageLoad(imageSrc, srcType, inMemoryImage);\n\n        _this12.imageCache[imageSrc] = {\n          loaded: true,\n          width: inMemoryImage.width,\n          height: inMemoryImage.height\n        };\n        done();\n      };\n\n      inMemoryImage.src = imageSrc;\n    } // Load all images and their thumbnails\n\n  }, {\n    key: \"loadAllImages\",\n    value: function loadAllImages() {\n      var _this13 = this;\n\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props;\n\n      var generateLoadDoneCallback = function generateLoadDoneCallback(srcType, imageSrc) {\n        return function (err) {\n          // Give up showing image on error\n          if (err) {\n            return;\n          } // Don't rerender if the src is not the same as when the load started\n          // or if the component has unmounted\n\n\n          if (_this13.props[srcType] !== imageSrc || _this13.didUnmount) {\n            return;\n          } // Force rerender with the new image\n\n\n          _this13.forceUpdate();\n        };\n      }; // Load the images\n\n\n      this.getSrcTypes().forEach(function (srcType) {\n        var type = srcType.name; // there is no error when we try to load it initially\n\n        if (props[type] && _this13.state.loadErrorStatus[type]) {\n          _this13.setState(function (prevState) {\n            return {\n              loadErrorStatus: _objectSpread2({}, prevState.loadErrorStatus, _defineProperty({}, type, false))\n            };\n          });\n        } // Load unloaded images\n\n\n        if (props[type] && !_this13.isImageLoaded(props[type])) {\n          _this13.loadImage(type, props[type], generateLoadDoneCallback(type, props[type]));\n        }\n      });\n    } // Request that the lightbox be closed\n\n  }, {\n    key: \"requestClose\",\n    value: function requestClose(event) {\n      var _this14 = this;\n\n      // Call the parent close request\n      var closeLightbox = function closeLightbox() {\n        return _this14.props.onCloseRequest(event);\n      };\n\n      if (this.props.animationDisabled || event.type === 'keydown' && !this.props.animationOnKeyInput) {\n        // No animation\n        closeLightbox();\n        return;\n      } // With animation\n      // Start closing animation\n\n\n      this.setState({\n        isClosing: true\n      }); // Perform the actual closing at the end of the animation\n\n      this.setTimeout(closeLightbox, this.props.animationDuration);\n    }\n  }, {\n    key: \"requestMove\",\n    value: function requestMove(direction, event) {\n      var _this15 = this;\n\n      // Reset the zoom level on image move\n      var nextState = {\n        zoomLevel: MIN_ZOOM_LEVEL,\n        offsetX: 0,\n        offsetY: 0\n      }; // Enable animated states\n\n      if (!this.props.animationDisabled && (!this.keyPressed || this.props.animationOnKeyInput)) {\n        nextState.shouldAnimate = true;\n        this.setTimeout(function () {\n          return _this15.setState({\n            shouldAnimate: false\n          });\n        }, this.props.animationDuration);\n      }\n\n      this.keyPressed = false;\n      this.moveRequested = true;\n\n      if (direction === 'prev') {\n        this.keyCounter -= 1;\n        this.setState(nextState);\n        this.props.onMovePrevRequest(event);\n      } else {\n        this.keyCounter += 1;\n        this.setState(nextState);\n        this.props.onMoveNextRequest(event);\n      }\n    } // Request to transition to the next image\n\n  }, {\n    key: \"requestMoveNext\",\n    value: function requestMoveNext(event) {\n      this.requestMove('next', event);\n    } // Request to transition to the previous image\n\n  }, {\n    key: \"requestMovePrev\",\n    value: function requestMovePrev(event) {\n      this.requestMove('prev', event);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this16 = this;\n\n      var _this$props = this.props,\n          animationDisabled = _this$props.animationDisabled,\n          animationDuration = _this$props.animationDuration,\n          clickOutsideToClose = _this$props.clickOutsideToClose,\n          discourageDownloads = _this$props.discourageDownloads,\n          enableZoom = _this$props.enableZoom,\n          imageTitle = _this$props.imageTitle,\n          nextSrc = _this$props.nextSrc,\n          prevSrc = _this$props.prevSrc,\n          toolbarButtons = _this$props.toolbarButtons,\n          reactModalStyle = _this$props.reactModalStyle,\n          _onAfterOpen = _this$props.onAfterOpen,\n          imageCrossOrigin = _this$props.imageCrossOrigin,\n          reactModalProps = _this$props.reactModalProps;\n      var _this$state = this.state,\n          zoomLevel = _this$state.zoomLevel,\n          offsetX = _this$state.offsetX,\n          offsetY = _this$state.offsetY,\n          isClosing = _this$state.isClosing,\n          loadErrorStatus = _this$state.loadErrorStatus;\n      var boxSize = this.getLightboxRect();\n      var transitionStyle = {}; // Transition settings for sliding animations\n\n      if (!animationDisabled && this.isAnimating()) {\n        transitionStyle = _objectSpread2({}, transitionStyle, {\n          transition: \"transform \".concat(animationDuration, \"ms\")\n        });\n      } // Key endings to differentiate between images with the same src\n\n\n      var keyEndings = {};\n      this.getSrcTypes().forEach(function (_ref13) {\n        var name = _ref13.name,\n            keyEnding = _ref13.keyEnding;\n        keyEndings[name] = keyEnding;\n      }); // Images to be displayed\n\n      var images = [];\n\n      var addImage = function addImage(srcType, imageClass, transforms) {\n        // Ignore types that have no source defined for their full size image\n        if (!_this16.props[srcType]) {\n          return;\n        }\n\n        var bestImageInfo = _this16.getBestImageForType(srcType);\n\n        var imageStyle = _objectSpread2({}, transitionStyle, {}, ReactImageLightbox.getTransform(_objectSpread2({}, transforms, {}, bestImageInfo)));\n\n        if (zoomLevel > MIN_ZOOM_LEVEL) {\n          imageStyle.cursor = 'move';\n        } // support IE 9 and 11\n\n\n        var hasTrueValue = function hasTrueValue(object) {\n          return Object.keys(object).some(function (key) {\n            return object[key];\n          });\n        }; // when error on one of the loads then push custom error stuff\n\n\n        if (bestImageInfo === null && hasTrueValue(loadErrorStatus)) {\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril-errored\"),\n            style: imageStyle,\n            key: _this16.props[srcType] + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril__errorContainer\"\n          }, _this16.props.imageLoadErrorMessage)));\n          return;\n        }\n\n        if (bestImageInfo === null) {\n          var loadingIcon = React.createElement(\"div\", {\n            className: \"ril-loading-circle ril__loadingCircle ril__loadingContainer__icon\"\n          }, _toConsumableArray(new Array(12)).map(function (_, index) {\n            return React.createElement(\"div\", {\n              // eslint-disable-next-line react/no-array-index-key\n              key: index,\n              className: \"ril-loading-circle-point ril__loadingCirclePoint\"\n            });\n          })); // Fall back to loading icon if the thumbnail has not been loaded\n\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril-not-loaded\"),\n            style: imageStyle,\n            key: _this16.props[srcType] + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril__loadingContainer\"\n          }, loadingIcon)));\n          return;\n        }\n\n        var imageSrc = bestImageInfo.src;\n\n        if (discourageDownloads) {\n          imageStyle.backgroundImage = \"url('\".concat(imageSrc, \"')\");\n          images.push(React.createElement(\"div\", {\n            className: \"\".concat(imageClass, \" ril__image ril__imageDiscourager\"),\n            onDoubleClick: _this16.handleImageDoubleClick,\n            onWheel: _this16.handleImageMouseWheel,\n            style: imageStyle,\n            key: imageSrc + keyEndings[srcType]\n          }, React.createElement(\"div\", {\n            className: \"ril-download-blocker ril__downloadBlocker\"\n          })));\n        } else {\n          images.push(React.createElement(\"img\", _extends({}, imageCrossOrigin ? {\n            crossOrigin: imageCrossOrigin\n          } : {}, {\n            className: \"\".concat(imageClass, \" ril__image\"),\n            onDoubleClick: _this16.handleImageDoubleClick,\n            onWheel: _this16.handleImageMouseWheel,\n            onDragStart: function onDragStart(e) {\n              return e.preventDefault();\n            },\n            style: imageStyle,\n            src: imageSrc,\n            key: imageSrc + keyEndings[srcType],\n            alt: typeof imageTitle === 'string' ? imageTitle : translate('Image'),\n            draggable: false\n          })));\n        }\n      };\n\n      var zoomMultiplier = this.getZoomMultiplier(); // Next Image (displayed on the right)\n\n      addImage('nextSrc', 'ril-image-next ril__imageNext', {\n        x: boxSize.width\n      }); // Main Image\n\n      addImage('mainSrc', 'ril-image-current', {\n        x: -1 * offsetX,\n        y: -1 * offsetY,\n        zoom: zoomMultiplier\n      }); // Previous Image (displayed on the left)\n\n      addImage('prevSrc', 'ril-image-prev ril__imagePrev', {\n        x: -1 * boxSize.width\n      });\n      var modalStyle = {\n        overlay: _objectSpread2({\n          zIndex: 1000,\n          backgroundColor: 'transparent'\n        }, reactModalStyle.overlay),\n        content: _objectSpread2({\n          backgroundColor: 'transparent',\n          overflow: 'hidden',\n          // Needed, otherwise keyboard shortcuts scroll the page\n          border: 'none',\n          borderRadius: 0,\n          padding: 0,\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0\n        }, reactModalStyle.content)\n      };\n      return React.createElement(Modal, _extends({\n        isOpen: true,\n        onRequestClose: clickOutsideToClose ? this.requestClose : undefined,\n        onAfterOpen: function onAfterOpen() {\n          // Focus on the div with key handlers\n          if (_this16.outerEl.current) {\n            _this16.outerEl.current.focus();\n          }\n\n          _onAfterOpen();\n        },\n        style: modalStyle,\n        contentLabel: translate('Lightbox'),\n        appElement: typeof global.window !== 'undefined' ? global.window.document.body : undefined\n      }, reactModalProps), React.createElement(\"div\", {\n        // eslint-disable-line jsx-a11y/no-static-element-interactions\n        // Floating modal with closing animations\n        className: \"ril-outer ril__outer ril__outerAnimating \".concat(this.props.wrapperClassName, \" \").concat(isClosing ? 'ril-closing ril__outerClosing' : ''),\n        style: {\n          transition: \"opacity \".concat(animationDuration, \"ms\"),\n          animationDuration: \"\".concat(animationDuration, \"ms\"),\n          animationDirection: isClosing ? 'normal' : 'reverse'\n        },\n        ref: this.outerEl,\n        onWheel: this.handleOuterMousewheel,\n        onMouseMove: this.handleMouseMove,\n        onMouseDown: this.handleMouseDown,\n        onTouchStart: this.handleTouchStart,\n        onTouchMove: this.handleTouchMove,\n        tabIndex: \"-1\" // Enables key handlers on div\n        ,\n        onKeyDown: this.handleKeyInput,\n        onKeyUp: this.handleKeyInput\n      }, React.createElement(\"div\", {\n        // eslint-disable-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events\n        // Image holder\n        className: \"ril-inner ril__inner\",\n        onClick: clickOutsideToClose ? this.closeIfClickInner : undefined\n      }, images), prevSrc && React.createElement(\"button\", {\n        // Move to previous image button\n        type: \"button\",\n        className: \"ril-prev-button ril__navButtons ril__navButtonPrev\",\n        key: \"prev\",\n        \"aria-label\": this.props.prevLabel,\n        onClick: !this.isAnimating() ? this.requestMovePrev : undefined // Ignore clicks during animation\n\n      }), nextSrc && React.createElement(\"button\", {\n        // Move to next image button\n        type: \"button\",\n        className: \"ril-next-button ril__navButtons ril__navButtonNext\",\n        key: \"next\",\n        \"aria-label\": this.props.nextLabel,\n        onClick: !this.isAnimating() ? this.requestMoveNext : undefined // Ignore clicks during animation\n\n      }), React.createElement(\"div\", {\n        // Lightbox toolbar\n        className: \"ril-toolbar ril__toolbar\"\n      }, React.createElement(\"ul\", {\n        className: \"ril-toolbar-left ril__toolbarSide ril__toolbarLeftSide\"\n      }, React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"span\", {\n        className: \"ril-toolbar__item__child ril__toolbarItemChild\"\n      }, imageTitle))), React.createElement(\"ul\", {\n        className: \"ril-toolbar-right ril__toolbarSide ril__toolbarRightSide\"\n      }, toolbarButtons && toolbarButtons.map(function (button, i) {\n        return React.createElement(\"li\", {\n          key: \"button_\".concat(i + 1),\n          className: \"ril-toolbar__item ril__toolbarItem\"\n        }, button);\n      }), enableZoom && React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox zoom in button\n        type: \"button\",\n        key: \"zoom-in\",\n        \"aria-label\": this.props.zoomInLabel,\n        className: ['ril-zoom-in', 'ril__toolbarItemChild', 'ril__builtinButton', 'ril__zoomInButton'].concat(_toConsumableArray(zoomLevel === MAX_ZOOM_LEVEL ? ['ril__builtinButtonDisabled'] : [])).join(' '),\n        ref: this.zoomInBtn,\n        disabled: this.isAnimating() || zoomLevel === MAX_ZOOM_LEVEL,\n        onClick: !this.isAnimating() && zoomLevel !== MAX_ZOOM_LEVEL ? this.handleZoomInButtonClick : undefined\n      })), enableZoom && React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox zoom out button\n        type: \"button\",\n        key: \"zoom-out\",\n        \"aria-label\": this.props.zoomOutLabel,\n        className: ['ril-zoom-out', 'ril__toolbarItemChild', 'ril__builtinButton', 'ril__zoomOutButton'].concat(_toConsumableArray(zoomLevel === MIN_ZOOM_LEVEL ? ['ril__builtinButtonDisabled'] : [])).join(' '),\n        ref: this.zoomOutBtn,\n        disabled: this.isAnimating() || zoomLevel === MIN_ZOOM_LEVEL,\n        onClick: !this.isAnimating() && zoomLevel !== MIN_ZOOM_LEVEL ? this.handleZoomOutButtonClick : undefined\n      })), React.createElement(\"li\", {\n        className: \"ril-toolbar__item ril__toolbarItem\"\n      }, React.createElement(\"button\", {\n        // Lightbox close button\n        type: \"button\",\n        key: \"close\",\n        \"aria-label\": this.props.closeLabel,\n        className: \"ril-close ril-toolbar__item__child ril__toolbarItemChild ril__builtinButton ril__closeButton\",\n        onClick: !this.isAnimating() ? this.requestClose : undefined // Ignore clicks during animation\n\n      })))), this.props.imageCaption && // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n      React.createElement(\"div\", {\n        // Image caption\n        onWheel: this.handleCaptionMousewheel,\n        onMouseDown: function onMouseDown(event) {\n          return event.stopPropagation();\n        },\n        className: \"ril-caption ril__caption\",\n        ref: this.caption\n      }, React.createElement(\"div\", {\n        className: \"ril-caption-content ril__captionContent\"\n      }, this.props.imageCaption))));\n    }\n  }]);\n\n  return ReactImageLightbox;\n}(Component);\n\nReactImageLightbox.propTypes = {\n  //-----------------------------\n  // Image sources\n  //-----------------------------\n  // Main display image url\n  mainSrc: PropTypes.string.isRequired,\n  // eslint-disable-line react/no-unused-prop-types\n  // Previous display image url (displayed to the left)\n  // If left undefined, movePrev actions will not be performed, and the button not displayed\n  prevSrc: PropTypes.string,\n  // Next display image url (displayed to the right)\n  // If left undefined, moveNext actions will not be performed, and the button not displayed\n  nextSrc: PropTypes.string,\n  //-----------------------------\n  // Image thumbnail sources\n  //-----------------------------\n  // Thumbnail image url corresponding to props.mainSrc\n  mainSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  // Thumbnail image url corresponding to props.prevSrc\n  prevSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  // Thumbnail image url corresponding to props.nextSrc\n  nextSrcThumbnail: PropTypes.string,\n  // eslint-disable-line react/no-unused-prop-types\n  //-----------------------------\n  // Event Handlers\n  //-----------------------------\n  // Close window event\n  // Should change the parent state such that the lightbox is not rendered\n  onCloseRequest: PropTypes.func.isRequired,\n  // Move to previous image event\n  // Should change the parent state such that props.prevSrc becomes props.mainSrc,\n  //  props.mainSrc becomes props.nextSrc, etc.\n  onMovePrevRequest: PropTypes.func,\n  // Move to next image event\n  // Should change the parent state such that props.nextSrc becomes props.mainSrc,\n  //  props.mainSrc becomes props.prevSrc, etc.\n  onMoveNextRequest: PropTypes.func,\n  // Called when an image fails to load\n  // (imageSrc: string, srcType: string, errorEvent: object): void\n  onImageLoadError: PropTypes.func,\n  // Called when image successfully loads\n  onImageLoad: PropTypes.func,\n  // Open window event\n  onAfterOpen: PropTypes.func,\n  //-----------------------------\n  // Download discouragement settings\n  //-----------------------------\n  // Enable download discouragement (prevents [right-click -> Save Image As...])\n  discourageDownloads: PropTypes.bool,\n  //-----------------------------\n  // Animation settings\n  //-----------------------------\n  // Disable all animation\n  animationDisabled: PropTypes.bool,\n  // Disable animation on actions performed with keyboard shortcuts\n  animationOnKeyInput: PropTypes.bool,\n  // Animation duration (ms)\n  animationDuration: PropTypes.number,\n  //-----------------------------\n  // Keyboard shortcut settings\n  //-----------------------------\n  // Required interval of time (ms) between key actions\n  // (prevents excessively fast navigation of images)\n  keyRepeatLimit: PropTypes.number,\n  // Amount of time (ms) restored after each keyup\n  // (makes rapid key presses slightly faster than holding down the key to navigate images)\n  keyRepeatKeyupBonus: PropTypes.number,\n  //-----------------------------\n  // Image info\n  //-----------------------------\n  // Image title\n  imageTitle: PropTypes.node,\n  // Image caption\n  imageCaption: PropTypes.node,\n  // Optional crossOrigin attribute\n  imageCrossOrigin: PropTypes.string,\n  //-----------------------------\n  // Lightbox style\n  //-----------------------------\n  // Set z-index style, etc., for the parent react-modal (format: https://github.com/reactjs/react-modal#styles )\n  reactModalStyle: PropTypes.object,\n  // Padding (px) between the edge of the window and the lightbox\n  imagePadding: PropTypes.number,\n  wrapperClassName: PropTypes.string,\n  //-----------------------------\n  // Other\n  //-----------------------------\n  // Array of custom toolbar buttons\n  toolbarButtons: PropTypes.arrayOf(PropTypes.node),\n  // When true, clicks outside of the image close the lightbox\n  clickOutsideToClose: PropTypes.bool,\n  // Set to false to disable zoom functionality and hide zoom buttons\n  enableZoom: PropTypes.bool,\n  // Override props set on react-modal (https://github.com/reactjs/react-modal)\n  reactModalProps: PropTypes.shape({}),\n  // Aria-labels\n  nextLabel: PropTypes.string,\n  prevLabel: PropTypes.string,\n  zoomInLabel: PropTypes.string,\n  zoomOutLabel: PropTypes.string,\n  closeLabel: PropTypes.string,\n  imageLoadErrorMessage: PropTypes.node\n};\nReactImageLightbox.defaultProps = {\n  imageTitle: null,\n  imageCaption: null,\n  toolbarButtons: null,\n  reactModalProps: {},\n  animationDisabled: false,\n  animationDuration: 300,\n  animationOnKeyInput: false,\n  clickOutsideToClose: true,\n  closeLabel: 'Close lightbox',\n  discourageDownloads: false,\n  enableZoom: true,\n  imagePadding: 10,\n  imageCrossOrigin: null,\n  keyRepeatKeyupBonus: 40,\n  keyRepeatLimit: 180,\n  mainSrcThumbnail: null,\n  nextLabel: 'Next image',\n  nextSrc: null,\n  nextSrcThumbnail: null,\n  onAfterOpen: function onAfterOpen() {},\n  onImageLoadError: function onImageLoadError() {},\n  onImageLoad: function onImageLoad() {},\n  onMoveNextRequest: function onMoveNextRequest() {},\n  onMovePrevRequest: function onMovePrevRequest() {},\n  prevLabel: 'Previous image',\n  prevSrc: null,\n  prevSrcThumbnail: null,\n  reactModalStyle: {},\n  wrapperClassName: '',\n  zoomInLabel: 'Zoom in',\n  zoomOutLabel: 'Zoom out',\n  imageLoadErrorMessage: 'This image failed to load'\n};\n\nexport default ReactImageLightbox;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Modal = require(\"./components/Modal\");\n\nvar _Modal2 = _interopRequireDefault(_Modal);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Modal2.default;\nmodule.exports = exports[\"default\"];","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { permission } from '../../utils/constants';\nimport TextTranslation from '../../utils/text-translation';\nimport ItemDropdownMenu from '../dropdown-menu/item-dropdown-menu';\n\nconst propTypes = {\n  repoPermission: PropTypes.bool,\n  node: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  paddingLeft: PropTypes.number.isRequired,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  isItemFreezed: PropTypes.bool.isRequired,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onNodeDragStart: PropTypes.func.isRequired,\n  freezeItem: PropTypes.func.isRequired,\n  unfreezeItem: PropTypes.func.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeDragMove: PropTypes.func,\n  onNodeDrop: PropTypes.func,\n  handleContextClick: PropTypes.func.isRequired,\n  onNodeDragEnter: PropTypes.func.isRequired,\n  onNodeDragLeave:PropTypes.func.isRequired,\n};\n\nclass TreeNodeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isHighlight: false,\n      isShowOperationMenu: false,\n      isNodeDropShow: false,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onMouseEnter = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseOver = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: true,\n        isHighlight: true,\n      });\n    }\n  }\n\n  onMouseLeave = () => {\n    if (!this.props.isItemFreezed) {\n      this.setState({\n        isShowOperationMenu: false,\n        isHighlight: false,\n      });\n    }\n  }\n\n  onNodeClick = () => {\n    this.props.onNodeClick(this.props.node);\n  }\n\n  onLoadToggle = (e) => {\n    e.stopPropagation();\n    let { node } = this.props;\n    if (node.isExpanded) {\n      this.props.onNodeCollapse(node);\n    } else {\n      this.props.onNodeExpanded(node);\n    }\n  }\n\n  onNodeDragStart = (e) => {\n    this.props.onNodeDragStart(e, this.props.node);\n  }\n\n  onNodeDragEnter = (e) => {\n    if (this.props.node.object.type === 'dir') {\n      this.setState({isNodeDropShow: true});\n    }\n    this.props.onNodeDragEnter(e, this.props.node);\n  }\n\n  onNodeDragMove = (e) => {\n    this.props.onNodeDragMove(e);\n  }\n\n  onNodeDragLeave = (e) => {\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDragLeave(e, this.props.node);\n  }\n\n  onNodeDrop = (e) => {\n    e.stopPropagation();\n    this.setState({isNodeDropShow: false});\n    this.props.onNodeDrop(e, this.props.node);\n  }\n\n  unfreezeItem = () => {\n    this.setState({isShowOperationMenu: false});\n    this.props.unfreezeItem();\n  }\n\n  onMenuItemClick = (operation, event, node) => {\n    this.props.onMenuItemClick(operation, node);\n  }\n\n  onItemMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onItemContextMenu = (event) => {\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event) => {\n    this.props.handleContextClick(event, this.props.node);\n    this.setState({isShowOperationMenu: false});\n  }\n\n  getNodeTypeAndIcon = () => {\n    let { node } = this.props;\n    let icon = '';\n    let type = '';\n    if (node.object.type === 'dir') {\n      icon = <i className=\"far fa-folder\"></i>;\n      type = 'dir';\n    } else {\n      let index = node.object.name.lastIndexOf('.');\n      if (index === -1) {\n        icon = <i className=\"far fa-file\"></i>;\n        type = 'file';\n      } else {\n        let suffix = node.object.name.slice(index).toLowerCase();\n        if (suffix === '.png' || suffix === '.jpg' || suffix === '.jpeg' || suffix === '.gif' || suffix === '.bmp') {\n          icon = <i className=\"far fa-image\"></i>;\n          type = 'image';\n        }\n        else if (suffix === '.md' || suffix === '.markdown') {\n          icon = <i className=\"far fa-file-alt\"></i>;\n          type = 'file';\n        }\n        else {\n          icon = <i className=\"far fa-file\"></i>;\n          type = 'file';\n        }\n      }\n    }\n    return {icon, type};\n  }\n\n  caculateMenuList(node) {\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT} =  TextTranslation;\n\n    if (node.object.type === 'dir') {\n      return [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    }\n\n    return [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n  }\n\n  renderChildren = () => {\n    let { node, paddingLeft } = this.props;\n    if (!node.hasChildren()) {\n      return '';\n    }\n    return (\n      <div className=\"children\" style={{paddingLeft: paddingLeft}}>\n        {node.children.map(item => {\n          return (\n            <TreeNodeView\n              key={item.path}\n              node={item}\n              paddingLeft={paddingLeft}\n              repoPermission={this.props.repoPermission}\n              currentPath={this.props.currentPath}\n              isNodeMenuShow={this.props.isNodeMenuShow}\n              isItemFreezed={this.props.isItemFreezed}\n              onNodeClick={this.props.onNodeClick}\n              onNodeCollapse={this.props.onNodeCollapse}\n              onNodeExpanded={this.props.onNodeExpanded}\n              freezeItem={this.props.freezeItem}\n              onMenuItemClick={this.props.onMenuItemClick}\n              unfreezeItem={this.unfreezeItem}\n              onNodeDragStart={this.props.onNodeDragStart}\n              onNodeDragMove={this.props.onNodeDragMove}\n              onNodeDrop={this.props.onNodeDrop}\n              onNodeDragEnter={this.props.onNodeDragEnter}\n              onNodeDragLeave={this.props.onNodeDragLeave}\n              handleContextClick={this.props.handleContextClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    let { currentPath, node, isNodeMenuShow } = this.props;\n    let { type, icon } = this.getNodeTypeAndIcon();\n    let hlClass = this.state.isHighlight ? 'tree-node-inner-hover ' : '';\n    if (node.path === currentPath) {\n      hlClass = 'tree-node-hight-light';\n    }\n    return (\n      <div className=\"tree-node\">\n        <div\n          type={type}\n          className={`tree-node-inner text-nowrap ${hlClass} ${node.path === '/'? 'hide': ''} ${this.state.isNodeDropShow ? 'tree-node-drop' : ''}`}\n          title={node.object.name}\n          onMouseEnter={this.onMouseEnter}\n          onMouseOver={this.onMouseOver}\n          onMouseLeave={this.onMouseLeave}\n          onMouseDown={this.onItemMouseDown}\n          onContextMenu={this.onItemContextMenu}\n          onClick={this.onNodeClick}\n        >\n          <div className=\"tree-node-text\" draggable=\"true\" onDragStart={this.onNodeDragStart} onDragEnter={this.onNodeDragEnter} onDragLeave={this.onNodeDragLeave} onDragOver={this.onNodeDragMove} onDrop={this.onNodeDrop}>{node.object.name}</div>\n          <div className=\"left-icon\">\n            {type === 'dir' && (!node.isLoaded ||  (node.isLoaded && node.hasChildren())) && (\n              <i\n                className={`folder-toggle-icon fa ${node.isExpanded ? 'fa-caret-down' : 'fa-caret-right'}`}\n                onMouseDown={e => e.stopPropagation()}\n                onClick={this.onLoadToggle}\n              ></i>\n            )}\n            <i className=\"tree-node-icon\">{icon}</i>\n          </div>\n          {isNodeMenuShow && (\n            <div className=\"right-icon\">\n              {((this.props.repoPermission || permission) && this.state.isShowOperationMenu) && (\n                <ItemDropdownMenu\n                  item={this.props.node}\n                  toggleClass={'fas fa-ellipsis-v'}\n                  getMenuList={this.caculateMenuList}\n                  onMenuItemClick={this.onMenuItemClick}\n                  freezeItem={this.props.freezeItem}\n                  unfreezeItem={this.unfreezeItem}\n                />\n              )}\n            </div>\n          )}\n        </div>\n        {node.isExpanded && this.renderChildren()}\n      </div>\n    );\n  }\n}\n\nTreeNodeView.propTypes = propTypes;\n\nexport default TreeNodeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextTranslation from '../../utils/text-translation';\nimport TreeNodeView from './tree-node-view';\nimport ContextMenu from '../context-menu/context-menu';\nimport { hideMenu, showMenu } from '../context-menu/actions';\nimport { Utils } from '../../utils/utils';\n\nconst propTypes = {\n  repoPermission: PropTypes.bool,\n  isNodeMenuShow: PropTypes.bool.isRequired,\n  treeData: PropTypes.object.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  onMenuItemClick: PropTypes.func,\n  onNodeClick: PropTypes.func.isRequired,\n  onNodeExpanded: PropTypes.func.isRequired,\n  onNodeCollapse: PropTypes.func.isRequired,\n  onItemMove: PropTypes.func,\n  currentRepoInfo: PropTypes.object,\n  selectedDirentList: PropTypes.array,\n  onItemsMove: PropTypes.func,\n};\n\nconst PADDING_LEFT = 20;\n\nclass TreeView extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isItemFreezed: false,\n      isTreeViewDropTipShow: false,\n    };\n  }\n\n  onItemMove = (repo, dirent, selectedPath, currentPath) => {\n    this.props.onItemMove(repo, dirent, selectedPath, currentPath);\n  }\n\n  onNodeDragStart = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    let dragStartNodeData = {nodeDirent: node.object, nodeParentPath: node.parentNode.path, nodeRootPath: node.path};\n    dragStartNodeData = JSON.stringify(dragStartNodeData);\n\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('applicaiton/drag-item-info', dragStartNodeData);\n  }\n\n  onNodeDragEnter = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    e.persist();\n    if (e.target.className === 'tree-view tree ') {\n      this.setState({\n        isTreeViewDropTipShow: true,\n      });\n    }\n  }\n\n  onNodeDragMove = (e) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  }\n\n  onNodeDragLeave = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    if (e.target.className === 'tree-view tree tree-view-drop') {\n      this.setState({\n        isTreeViewDropTipShow: false,\n      });\n    }\n  }\n\n  onNodeDrop = (e, node) => {\n    if (Utils.isIEBrower()) {\n      return false;\n    }\n    if (e.dataTransfer.files.length) { // uploaded files\n      return;\n    }\n    let dragStartNodeData = e.dataTransfer.getData('applicaiton/drag-item-info');\n    dragStartNodeData = JSON.parse(dragStartNodeData);\n\n    let {nodeDirent, nodeParentPath, nodeRootPath} = dragStartNodeData;\n    let dropNodeData = node;\n\n    if (Array.isArray(dragStartNodeData)) { //move items\n      if (!dropNodeData) { //move items to root\n        if (dragStartNodeData[0].nodeParentPath === '/') {\n          this.setState({isTreeViewDropTipShow: false});\n          return;\n        }\n        this.props.onItemsMove(this.props.currentRepoInfo, '/');\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onMoveItems(dragStartNodeData, dropNodeData, this.props.currentRepoInfo, dropNodeData.path);\n      return;\n    }\n\n    if (!dropNodeData) {\n      if (nodeParentPath === '/') {\n        this.setState({isTreeViewDropTipShow: false});\n        return;\n      }\n      this.onItemMove(this.props.currentRepoInfo, nodeDirent, '/', nodeParentPath);\n      this.setState({isTreeViewDropTipShow: false});\n      return;\n    }\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    if (nodeParentPath === dropNodeData.path) {\n      return;\n    }\n\n    // copy the dirent to itself. eg: A/B -> A/B\n    if (nodeParentPath === dropNodeData.parentNode.path) {\n      if (dropNodeData.object.name === nodeDirent.name) {\n        return;\n      }\n    }\n\n    // copy the dirent to it's child. eg: A/B -> A/B/C\n    if (dropNodeData.object.type === 'dir' && nodeDirent.type === 'dir') {\n      if (dropNodeData.parentNode.path !== nodeParentPath) {\n        let paths = Utils.getPaths(dropNodeData.path);\n        if (paths.includes(nodeRootPath)) {\n          return;\n        }\n      }\n    }\n\n    this.onItemMove(this.props.currentRepoInfo, nodeDirent, dropNodeData.path, nodeParentPath);\n  }\n\n  onMoveItems = (dragStartNodeData, dropNodeData, destRepo, destDirentPath) => {\n    let direntPaths = [];\n    let paths = Utils.getPaths(destDirentPath);\n    dragStartNodeData.forEach(dirent => {\n      let path = dirent.nodeRootPath;\n      direntPaths.push(path);\n    });\n\n    if (dropNodeData.object.type !== 'dir') {\n      return;\n    }\n\n    // move dirents to one of them. eg: A/B, A/C -> A/B\n    if (direntPaths.some(direntPath => { return direntPath === destDirentPath;})) {\n      return;\n    }\n\n    // move dirents to current path\n    if (dragStartNodeData[0].nodeParentPath && dragStartNodeData[0].nodeParentPath === dropNodeData.path ) {\n      return;\n    }\n\n    // move dirents to one of their child. eg: A/B, A/D -> A/B/C\n    let isChildPath = direntPaths.some(direntPath => {\n      return paths.includes(direntPath);\n    });\n    if (isChildPath) {\n      return;\n    }\n\n    this.props.onItemsMove(destRepo, destDirentPath);\n  }\n\n  freezeItem = () => {\n    this.setState({isItemFreezed: true});\n  }\n\n  unfreezeItem = () => {\n    this.setState({isItemFreezed: false});\n  }\n\n  onMenuItemClick = (operation, node) => {\n    this.props.onMenuItemClick(operation, node);\n    hideMenu();\n  }\n\n  onMouseDown = (event) => {\n    event.stopPropagation();\n    if (event.button === 2) {\n      return;\n    }\n  }\n\n  onContextMenu = (event) => {\n    event.preventDefault();\n\n    let currentRepoInfo = this.props.currentRepoInfo;\n    if (currentRepoInfo.permission !== 'admin' && currentRepoInfo.permission !== 'rw') {\n      return '';\n    }\n    this.handleContextClick(event);\n  }\n\n  handleContextClick = (event, node) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    if (!this.props.isNodeMenuShow) {\n      return;\n    }\n\n    let x = event.clientX || (event.touches && event.touches[0].pageX);\n    let y = event.clientY || (event.touches && event.touches[0].pageY);\n\n    if (this.props.posX) {\n      x -= this.props.posX;\n    }\n    if (this.props.posY) {\n      y -= this.props.posY;\n    }\n\n    hideMenu();\n\n    let menuList = this.getMenuList(node);\n\n    let showMenuConfig = {\n      id: 'tree-node-contextmenu',\n      position: { x, y },\n      target: event.target,\n      currentObject: node,\n      menuList: menuList,\n    };\n\n    showMenu(showMenuConfig);\n  }\n\n  getMenuList = (node) => {\n    let menuList = [];\n\n    let { NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE, OPEN_VIA_CLIENT } = TextTranslation;\n\n    if (!node) {\n      return [NEW_FOLDER, NEW_FILE];\n    }\n\n    if (node.object.type === 'dir') {\n      menuList = [NEW_FOLDER, NEW_FILE, COPY, MOVE, RENAME, DELETE];\n    } else {\n      menuList = [RENAME, DELETE, COPY, MOVE, OPEN_VIA_CLIENT];\n    }\n\n    return menuList;\n  }\n\n  onShowMenu = () => {\n    this.freezeItem();\n  }\n\n  onHideMenu = () => {\n    this.unfreezeItem();\n  }\n\n  render() {\n    return (\n      <div\n        className={`tree-view tree ${this.state.isTreeViewDropTipShow ? 'tree-view-drop' : ''}`}\n        onDrop={this.onNodeDrop}\n        onDragEnter={this.onNodeDragEnter}\n        onDragLeave={this.onNodeDragLeave}\n        onMouseDown={this.onMouseDown}\n        onContextMenu={this.onContextMenu}\n      >\n        <TreeNodeView\n          repoPermission={this.props.repoPermission}\n          node={this.props.treeData.root}\n          currentPath={this.props.currentPath}\n          paddingLeft={PADDING_LEFT}\n          isNodeMenuShow={this.props.isNodeMenuShow}\n          isItemFreezed={this.state.isItemFreezed}\n          onNodeClick={this.props.onNodeClick}\n          onMenuItemClick={this.props.onMenuItemClick}\n          onNodeExpanded={this.props.onNodeExpanded}\n          onNodeCollapse={this.props.onNodeCollapse}\n          onNodeDragStart={this.onNodeDragStart}\n          freezeItem={this.freezeItem}\n          unfreezeItem={this.unfreezeItem}\n          onNodeDragMove={this.onNodeDragMove}\n          onNodeDrop={this.onNodeDrop}\n          onNodeDragEnter={this.onNodeDragEnter}\n          onNodeDragLeave={this.onNodeDragLeave}\n          handleContextClick={this.handleContextClick}\n        />\n        <ContextMenu\n          id={'tree-node-contextmenu'}\n          onMenuItemClick={this.onMenuItemClick}\n          onHideMenu={this.onHideMenu}\n          onShowMenu={this.onShowMenu}\n        />\n      </div>\n    );\n  }\n}\n\nTreeView.propTypes = propTypes;\n\nexport default TreeView;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { mediaUrl } from '../utils/constants';\n\nconst propTypes = {\n  forDialog: PropTypes.bool\n};\n\nclass EmptyTip extends React.Component {\n\n  render() {\n    return (\n      <div className={this.props.forDialog ? 'text-center mt-8' : 'empty-tip'}>\n        <img src={`${mediaUrl}img/no-items-tip.png`} alt=\"\" width=\"100\" height=\"100\" className=\"no-items-img-tip\" />\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nEmptyTip.propTypes = propTypes;\n\nexport default EmptyTip;\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.withCredentials = false !== opts.withCredentials;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || undefined;\n  this.key = opts.key || undefined;\n  this.passphrase = opts.passphrase || undefined;\n  this.cert = opts.cert || undefined;\n  this.ca = opts.ca || undefined;\n  this.ciphers = opts.ciphers || undefined;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    withCredentials: options.withCredentials || this.withCredentials,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n  opts.withCredentials = this.withCredentials;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.withCredentials = opts.withCredentials;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(typeof xhr.status === 'number' ? xhr.status : 0);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream' || contentType === 'application/octet-stream; charset=UTF-8') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in globalThis ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, its not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(chars){\n  \"use strict\";\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = chars.indexOf(base64[i]);\n      encoded2 = chars.indexOf(base64[i+1]);\n      encoded3 = chars.indexOf(base64[i+2]);\n      encoded4 = chars.indexOf(base64[i+3]);\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\nvar globalThis = require('../globalThis');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    callbacks = globalThis.___eio = (globalThis.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n}\n\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n\n  var opts = {};\n\n  if (!this.isReactNative) {\n    opts.agent = this.agent;\n    opts.perMessageDeflate = this.perMessageDeflate;\n\n    // SSL options for Node.js client\n    opts.pfx = this.pfx;\n    opts.key = this.key;\n    opts.passphrase = this.passphrase;\n    opts.cert = this.cert;\n    opts.ca = this.ca;\n    opts.ciphers = this.ciphers;\n    opts.rejectUnauthorized = this.rejectUnauthorized;\n  }\n\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.bodyOpenClassName = exports.portalClassName = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require(\"react-dom\");\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _ModalPortal = require(\"./ModalPortal\");\n\nvar _ModalPortal2 = _interopRequireDefault(_ModalPortal);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _reactLifecyclesCompat = require(\"react-lifecycles-compat\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar portalClassName = exports.portalClassName = \"ReactModalPortal\";\nvar bodyOpenClassName = exports.bodyOpenClassName = \"ReactModal__Body--open\";\n\nvar isReact16 = _safeHTMLElement.canUseDOM && _reactDom2.default.createPortal !== undefined;\n\nvar getCreatePortal = function getCreatePortal() {\n  return isReact16 ? _reactDom2.default.createPortal : _reactDom2.default.unstable_renderSubtreeIntoContainer;\n};\n\nfunction getParentElement(parentSelector) {\n  return parentSelector();\n}\n\nvar Modal = function (_Component) {\n  _inherits(Modal, _Component);\n\n  function Modal() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, Modal);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Modal.__proto__ || Object.getPrototypeOf(Modal)).call.apply(_ref, [this].concat(args))), _this), _this.removePortal = function () {\n      !isReact16 && _reactDom2.default.unmountComponentAtNode(_this.node);\n      var parent = getParentElement(_this.props.parentSelector);\n      if (parent && parent.contains(_this.node)) {\n        parent.removeChild(_this.node);\n      } else {\n        // eslint-disable-next-line no-console\n        console.warn('React-Modal: \"parentSelector\" prop did not returned any DOM ' + \"element. Make sure that the parent element is unmounted to \" + \"avoid any memory leaks.\");\n      }\n    }, _this.portalRef = function (ref) {\n      _this.portal = ref;\n    }, _this.renderPortal = function (props) {\n      var createPortal = getCreatePortal();\n      var portal = createPortal(_this, _react2.default.createElement(_ModalPortal2.default, _extends({ defaultStyles: Modal.defaultStyles }, props)), _this.node);\n      _this.portalRef(portal);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  _createClass(Modal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!_safeHTMLElement.canUseDOM) return;\n\n      if (!isReact16) {\n        this.node = document.createElement(\"div\");\n      }\n      this.node.className = this.props.portalClassName;\n\n      var parent = getParentElement(this.props.parentSelector);\n      parent.appendChild(this.node);\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"getSnapshotBeforeUpdate\",\n    value: function getSnapshotBeforeUpdate(prevProps) {\n      var prevParent = getParentElement(prevProps.parentSelector);\n      var nextParent = getParentElement(this.props.parentSelector);\n      return { prevParent: prevParent, nextParent: nextParent };\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, _, snapshot) {\n      if (!_safeHTMLElement.canUseDOM) return;\n      var _props = this.props,\n          isOpen = _props.isOpen,\n          portalClassName = _props.portalClassName;\n\n\n      if (prevProps.portalClassName !== portalClassName) {\n        this.node.className = portalClassName;\n      }\n\n      var prevParent = snapshot.prevParent,\n          nextParent = snapshot.nextParent;\n\n      if (nextParent !== prevParent) {\n        prevParent.removeChild(this.node);\n        nextParent.appendChild(this.node);\n      }\n\n      // Stop unnecessary renders if modal is remaining closed\n      if (!prevProps.isOpen && !isOpen) return;\n\n      !isReact16 && this.renderPortal(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (!_safeHTMLElement.canUseDOM || !this.node || !this.portal) return;\n\n      var state = this.portal.state;\n      var now = Date.now();\n      var closesAt = state.isOpen && this.props.closeTimeoutMS && (state.closesAt || now + this.props.closeTimeoutMS);\n\n      if (closesAt) {\n        if (!state.beforeClose) {\n          this.portal.closeWithTimeout();\n        }\n\n        setTimeout(this.removePortal, closesAt - now);\n      } else {\n        this.removePortal();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!_safeHTMLElement.canUseDOM || !isReact16) {\n        return null;\n      }\n\n      if (!this.node && isReact16) {\n        this.node = document.createElement(\"div\");\n      }\n\n      var createPortal = getCreatePortal();\n      return createPortal(_react2.default.createElement(_ModalPortal2.default, _extends({\n        ref: this.portalRef,\n        defaultStyles: Modal.defaultStyles\n      }, this.props)), this.node);\n    }\n  }], [{\n    key: \"setAppElement\",\n    value: function setAppElement(element) {\n      ariaAppHider.setElement(element);\n    }\n\n    /* eslint-disable react/no-unused-prop-types */\n\n    /* eslint-enable react/no-unused-prop-types */\n\n  }]);\n\n  return Modal;\n}(_react.Component);\n\nModal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  portalClassName: _propTypes2.default.string,\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.shape({\n    base: _propTypes2.default.string.isRequired,\n    afterOpen: _propTypes2.default.string.isRequired,\n    beforeClose: _propTypes2.default.string.isRequired\n  })]),\n  appElement: _propTypes2.default.instanceOf(_safeHTMLElement2.default),\n  onAfterOpen: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  ariaHideApp: _propTypes2.default.bool,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  parentSelector: _propTypes2.default.func,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  id: _propTypes2.default.string,\n  overlayElement: _propTypes2.default.func,\n  contentElement: _propTypes2.default.func\n};\nModal.defaultProps = {\n  isOpen: false,\n  portalClassName: portalClassName,\n  bodyOpenClassName: bodyOpenClassName,\n  role: \"dialog\",\n  ariaHideApp: true,\n  closeTimeoutMS: 0,\n  shouldFocusAfterRender: true,\n  shouldCloseOnEsc: true,\n  shouldCloseOnOverlayClick: true,\n  shouldReturnFocusAfterClose: true,\n  preventScroll: false,\n  parentSelector: function parentSelector() {\n    return document.body;\n  },\n  overlayElement: function overlayElement(props, contentEl) {\n    return _react2.default.createElement(\n      \"div\",\n      props,\n      contentEl\n    );\n  },\n  contentElement: function contentElement(props, children) {\n    return _react2.default.createElement(\n      \"div\",\n      props,\n      children\n    );\n  }\n};\nModal.defaultStyles = {\n  overlay: {\n    position: \"fixed\",\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: \"rgba(255, 255, 255, 0.75)\"\n  },\n  content: {\n    position: \"absolute\",\n    top: \"40px\",\n    left: \"40px\",\n    right: \"40px\",\n    bottom: \"40px\",\n    border: \"1px solid #ccc\",\n    background: \"#fff\",\n    overflow: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    borderRadius: \"4px\",\n    outline: \"none\",\n    padding: \"20px\"\n  }\n};\n\n\n(0, _reactLifecyclesCompat.polyfill)(Modal);\n\nexports.default = Modal;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _focusManager = require(\"../helpers/focusManager\");\n\nvar focusManager = _interopRequireWildcard(_focusManager);\n\nvar _scopeTab = require(\"../helpers/scopeTab\");\n\nvar _scopeTab2 = _interopRequireDefault(_scopeTab);\n\nvar _ariaAppHider = require(\"../helpers/ariaAppHider\");\n\nvar ariaAppHider = _interopRequireWildcard(_ariaAppHider);\n\nvar _classList = require(\"../helpers/classList\");\n\nvar classList = _interopRequireWildcard(_classList);\n\nvar _safeHTMLElement = require(\"../helpers/safeHTMLElement\");\n\nvar _safeHTMLElement2 = _interopRequireDefault(_safeHTMLElement);\n\nvar _portalOpenInstances = require(\"../helpers/portalOpenInstances\");\n\nvar _portalOpenInstances2 = _interopRequireDefault(_portalOpenInstances);\n\nrequire(\"../helpers/bodyTrap\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// so that our CSS is statically analyzable\nvar CLASS_NAMES = {\n  overlay: \"ReactModal__Overlay\",\n  content: \"ReactModal__Content\"\n};\n\nvar TAB_KEY = 9;\nvar ESC_KEY = 27;\n\nvar ariaHiddenInstances = 0;\n\nvar ModalPortal = function (_Component) {\n  _inherits(ModalPortal, _Component);\n\n  function ModalPortal(props) {\n    _classCallCheck(this, ModalPortal);\n\n    var _this = _possibleConstructorReturn(this, (ModalPortal.__proto__ || Object.getPrototypeOf(ModalPortal)).call(this, props));\n\n    _this.setOverlayRef = function (overlay) {\n      _this.overlay = overlay;\n      _this.props.overlayRef && _this.props.overlayRef(overlay);\n    };\n\n    _this.setContentRef = function (content) {\n      _this.content = content;\n      _this.props.contentRef && _this.props.contentRef(content);\n    };\n\n    _this.afterClose = function () {\n      var _this$props = _this.props,\n          appElement = _this$props.appElement,\n          ariaHideApp = _this$props.ariaHideApp,\n          htmlOpenClassName = _this$props.htmlOpenClassName,\n          bodyOpenClassName = _this$props.bodyOpenClassName;\n\n      // Remove classes.\n\n      bodyOpenClassName && classList.remove(document.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.remove(document.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      // Reset aria-hidden attribute if all modals have been removed\n      if (ariaHideApp && ariaHiddenInstances > 0) {\n        ariaHiddenInstances -= 1;\n\n        if (ariaHiddenInstances === 0) {\n          ariaAppHider.show(appElement);\n        }\n      }\n\n      if (_this.props.shouldFocusAfterRender) {\n        if (_this.props.shouldReturnFocusAfterClose) {\n          focusManager.returnFocus(_this.props.preventScroll);\n          focusManager.teardownScopedFocus();\n        } else {\n          focusManager.popWithoutFocus();\n        }\n      }\n\n      if (_this.props.onAfterClose) {\n        _this.props.onAfterClose();\n      }\n\n      _portalOpenInstances2.default.deregister(_this);\n    };\n\n    _this.open = function () {\n      _this.beforeOpen();\n      if (_this.state.afterOpen && _this.state.beforeClose) {\n        clearTimeout(_this.closeTimer);\n        _this.setState({ beforeClose: false });\n      } else {\n        if (_this.props.shouldFocusAfterRender) {\n          focusManager.setupScopedFocus(_this.node);\n          focusManager.markForFocusLater();\n        }\n\n        _this.setState({ isOpen: true }, function () {\n          _this.setState({ afterOpen: true });\n\n          if (_this.props.isOpen && _this.props.onAfterOpen) {\n            _this.props.onAfterOpen({\n              overlayEl: _this.overlay,\n              contentEl: _this.content\n            });\n          }\n        });\n      }\n    };\n\n    _this.close = function () {\n      if (_this.props.closeTimeoutMS > 0) {\n        _this.closeWithTimeout();\n      } else {\n        _this.closeWithoutTimeout();\n      }\n    };\n\n    _this.focusContent = function () {\n      return _this.content && !_this.contentHasFocus() && _this.content.focus({ preventScroll: true });\n    };\n\n    _this.closeWithTimeout = function () {\n      var closesAt = Date.now() + _this.props.closeTimeoutMS;\n      _this.setState({ beforeClose: true, closesAt: closesAt }, function () {\n        _this.closeTimer = setTimeout(_this.closeWithoutTimeout, _this.state.closesAt - Date.now());\n      });\n    };\n\n    _this.closeWithoutTimeout = function () {\n      _this.setState({\n        beforeClose: false,\n        isOpen: false,\n        afterOpen: false,\n        closesAt: null\n      }, _this.afterClose);\n    };\n\n    _this.handleKeyDown = function (event) {\n      if (event.keyCode === TAB_KEY) {\n        (0, _scopeTab2.default)(_this.content, event);\n      }\n\n      if (_this.props.shouldCloseOnEsc && event.keyCode === ESC_KEY) {\n        event.stopPropagation();\n        _this.requestClose(event);\n      }\n    };\n\n    _this.handleOverlayOnClick = function (event) {\n      if (_this.shouldClose === null) {\n        _this.shouldClose = true;\n      }\n\n      if (_this.shouldClose && _this.props.shouldCloseOnOverlayClick) {\n        if (_this.ownerHandlesClose()) {\n          _this.requestClose(event);\n        } else {\n          _this.focusContent();\n        }\n      }\n      _this.shouldClose = null;\n    };\n\n    _this.handleContentOnMouseUp = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleOverlayOnMouseDown = function (event) {\n      if (!_this.props.shouldCloseOnOverlayClick && event.target == _this.overlay) {\n        event.preventDefault();\n      }\n    };\n\n    _this.handleContentOnClick = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.handleContentOnMouseDown = function () {\n      _this.shouldClose = false;\n    };\n\n    _this.requestClose = function (event) {\n      return _this.ownerHandlesClose() && _this.props.onRequestClose(event);\n    };\n\n    _this.ownerHandlesClose = function () {\n      return _this.props.onRequestClose;\n    };\n\n    _this.shouldBeClosed = function () {\n      return !_this.state.isOpen && !_this.state.beforeClose;\n    };\n\n    _this.contentHasFocus = function () {\n      return document.activeElement === _this.content || _this.content.contains(document.activeElement);\n    };\n\n    _this.buildClassName = function (which, additional) {\n      var classNames = (typeof additional === \"undefined\" ? \"undefined\" : _typeof(additional)) === \"object\" ? additional : {\n        base: CLASS_NAMES[which],\n        afterOpen: CLASS_NAMES[which] + \"--after-open\",\n        beforeClose: CLASS_NAMES[which] + \"--before-close\"\n      };\n      var className = classNames.base;\n      if (_this.state.afterOpen) {\n        className = className + \" \" + classNames.afterOpen;\n      }\n      if (_this.state.beforeClose) {\n        className = className + \" \" + classNames.beforeClose;\n      }\n      return typeof additional === \"string\" && additional ? className + \" \" + additional : className;\n    };\n\n    _this.attributesFromObject = function (prefix, items) {\n      return Object.keys(items).reduce(function (acc, name) {\n        acc[prefix + \"-\" + name] = items[name];\n        return acc;\n      }, {});\n    };\n\n    _this.state = {\n      afterOpen: false,\n      beforeClose: false\n    };\n\n    _this.shouldClose = null;\n    _this.moveFromContentToOverlay = null;\n    return _this;\n  }\n\n  _createClass(ModalPortal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.isOpen) {\n        this.open();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== \"production\") {\n        if (prevProps.bodyOpenClassName !== this.props.bodyOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"bodyOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n        if (prevProps.htmlOpenClassName !== this.props.htmlOpenClassName) {\n          // eslint-disable-next-line no-console\n          console.warn('React-Modal: \"htmlOpenClassName\" prop has been modified. ' + \"This may cause unexpected behavior when multiple modals are open.\");\n        }\n      }\n\n      if (this.props.isOpen && !prevProps.isOpen) {\n        this.open();\n      } else if (!this.props.isOpen && prevProps.isOpen) {\n        this.close();\n      }\n\n      // Focus only needs to be set once when the modal is being opened\n      if (this.props.shouldFocusAfterRender && this.state.isOpen && !prevState.isOpen) {\n        this.focusContent();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.state.isOpen) {\n        this.afterClose();\n      }\n      clearTimeout(this.closeTimer);\n    }\n  }, {\n    key: \"beforeOpen\",\n    value: function beforeOpen() {\n      var _props = this.props,\n          appElement = _props.appElement,\n          ariaHideApp = _props.ariaHideApp,\n          htmlOpenClassName = _props.htmlOpenClassName,\n          bodyOpenClassName = _props.bodyOpenClassName;\n\n      // Add classes.\n\n      bodyOpenClassName && classList.add(document.body, bodyOpenClassName);\n\n      htmlOpenClassName && classList.add(document.getElementsByTagName(\"html\")[0], htmlOpenClassName);\n\n      if (ariaHideApp) {\n        ariaHiddenInstances += 1;\n        ariaAppHider.hide(appElement);\n      }\n\n      _portalOpenInstances2.default.register(this);\n    }\n\n    // Don't steal focus from inner elements\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props2 = this.props,\n          id = _props2.id,\n          className = _props2.className,\n          overlayClassName = _props2.overlayClassName,\n          defaultStyles = _props2.defaultStyles,\n          children = _props2.children;\n\n      var contentStyles = className ? {} : defaultStyles.content;\n      var overlayStyles = overlayClassName ? {} : defaultStyles.overlay;\n\n      if (this.shouldBeClosed()) {\n        return null;\n      }\n\n      var overlayProps = {\n        ref: this.setOverlayRef,\n        className: this.buildClassName(\"overlay\", overlayClassName),\n        style: _extends({}, overlayStyles, this.props.style.overlay),\n        onClick: this.handleOverlayOnClick,\n        onMouseDown: this.handleOverlayOnMouseDown\n      };\n\n      var contentProps = _extends({\n        id: id,\n        ref: this.setContentRef,\n        style: _extends({}, contentStyles, this.props.style.content),\n        className: this.buildClassName(\"content\", className),\n        tabIndex: \"-1\",\n        onKeyDown: this.handleKeyDown,\n        onMouseDown: this.handleContentOnMouseDown,\n        onMouseUp: this.handleContentOnMouseUp,\n        onClick: this.handleContentOnClick,\n        role: this.props.role,\n        \"aria-label\": this.props.contentLabel\n      }, this.attributesFromObject(\"aria\", _extends({ modal: true }, this.props.aria)), this.attributesFromObject(\"data\", this.props.data || {}), {\n        \"data-testid\": this.props.testId\n      });\n\n      var contentElement = this.props.contentElement(contentProps, children);\n      return this.props.overlayElement(overlayProps, contentElement);\n    }\n  }]);\n\n  return ModalPortal;\n}(_react.Component);\n\nModalPortal.defaultProps = {\n  style: {\n    overlay: {},\n    content: {}\n  },\n  defaultStyles: {}\n};\nModalPortal.propTypes = {\n  isOpen: _propTypes2.default.bool.isRequired,\n  defaultStyles: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  style: _propTypes2.default.shape({\n    content: _propTypes2.default.object,\n    overlay: _propTypes2.default.object\n  }),\n  className: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  overlayClassName: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  bodyOpenClassName: _propTypes2.default.string,\n  htmlOpenClassName: _propTypes2.default.string,\n  ariaHideApp: _propTypes2.default.bool,\n  appElement: _propTypes2.default.instanceOf(_safeHTMLElement2.default),\n  onAfterOpen: _propTypes2.default.func,\n  onAfterClose: _propTypes2.default.func,\n  onRequestClose: _propTypes2.default.func,\n  closeTimeoutMS: _propTypes2.default.number,\n  shouldFocusAfterRender: _propTypes2.default.bool,\n  shouldCloseOnOverlayClick: _propTypes2.default.bool,\n  shouldReturnFocusAfterClose: _propTypes2.default.bool,\n  preventScroll: _propTypes2.default.bool,\n  role: _propTypes2.default.string,\n  contentLabel: _propTypes2.default.string,\n  aria: _propTypes2.default.object,\n  data: _propTypes2.default.object,\n  children: _propTypes2.default.node,\n  shouldCloseOnEsc: _propTypes2.default.bool,\n  overlayRef: _propTypes2.default.func,\n  contentRef: _propTypes2.default.func,\n  id: _propTypes2.default.string,\n  overlayElement: _propTypes2.default.func,\n  contentElement: _propTypes2.default.func,\n  testId: _propTypes2.default.string\n};\nexports.default = ModalPortal;\nmodule.exports = exports[\"default\"];","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleBlur = handleBlur;\nexports.handleFocus = handleFocus;\nexports.markForFocusLater = markForFocusLater;\nexports.returnFocus = returnFocus;\nexports.popWithoutFocus = popWithoutFocus;\nexports.setupScopedFocus = setupScopedFocus;\nexports.teardownScopedFocus = teardownScopedFocus;\n\nvar _tabbable = require(\"../helpers/tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar focusLaterElements = [];\nvar modalElement = null;\nvar needToFocus = false;\n\nfunction handleBlur() {\n  needToFocus = true;\n}\n\nfunction handleFocus() {\n  if (needToFocus) {\n    needToFocus = false;\n    if (!modalElement) {\n      return;\n    }\n    // need to see how jQuery shims document.on('focusin') so we don't need the\n    // setTimeout, firefox doesn't support focusin, if it did, we could focus\n    // the element outside of a setTimeout. Side-effect of this implementation\n    // is that the document.body gets focus, and then we focus our element right\n    // after, seems fine.\n    setTimeout(function () {\n      if (modalElement.contains(document.activeElement)) {\n        return;\n      }\n      var el = (0, _tabbable2.default)(modalElement)[0] || modalElement;\n      el.focus();\n    }, 0);\n  }\n}\n\nfunction markForFocusLater() {\n  focusLaterElements.push(document.activeElement);\n}\n\n/* eslint-disable no-console */\nfunction returnFocus() {\n  var preventScroll = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  var toFocus = null;\n  try {\n    if (focusLaterElements.length !== 0) {\n      toFocus = focusLaterElements.pop();\n      toFocus.focus({ preventScroll: preventScroll });\n    }\n    return;\n  } catch (e) {\n    console.warn([\"You tried to return focus to\", toFocus, \"but it is not in the DOM anymore\"].join(\" \"));\n  }\n}\n/* eslint-enable no-console */\n\nfunction popWithoutFocus() {\n  focusLaterElements.length > 0 && focusLaterElements.pop();\n}\n\nfunction setupScopedFocus(element) {\n  modalElement = element;\n\n  if (window.addEventListener) {\n    window.addEventListener(\"blur\", handleBlur, false);\n    document.addEventListener(\"focus\", handleFocus, true);\n  } else {\n    window.attachEvent(\"onBlur\", handleBlur);\n    document.attachEvent(\"onFocus\", handleFocus);\n  }\n}\n\nfunction teardownScopedFocus() {\n  modalElement = null;\n\n  if (window.addEventListener) {\n    window.removeEventListener(\"blur\", handleBlur);\n    document.removeEventListener(\"focus\", handleFocus);\n  } else {\n    window.detachEvent(\"onBlur\", handleBlur);\n    document.detachEvent(\"onFocus\", handleFocus);\n  }\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = scopeTab;\n\nvar _tabbable = require(\"./tabbable\");\n\nvar _tabbable2 = _interopRequireDefault(_tabbable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction scopeTab(node, event) {\n  var tabbable = (0, _tabbable2.default)(node);\n\n  if (!tabbable.length) {\n    // Do nothing, since there are no elements that can receive focus.\n    event.preventDefault();\n    return;\n  }\n\n  var target = void 0;\n\n  var shiftKey = event.shiftKey;\n  var head = tabbable[0];\n  var tail = tabbable[tabbable.length - 1];\n\n  // proceed with default browser behavior on tab.\n  // Focus on last element on shift + tab.\n  if (node === document.activeElement) {\n    if (!shiftKey) return;\n    target = tail;\n  }\n\n  if (tail === document.activeElement && !shiftKey) {\n    target = head;\n  }\n\n  if (head === document.activeElement && shiftKey) {\n    target = tail;\n  }\n\n  if (target) {\n    event.preventDefault();\n    target.focus();\n    return;\n  }\n\n  // Safari radio issue.\n  //\n  // Safari does not move the focus to the radio button,\n  // so we need to force it to really walk through all elements.\n  //\n  // This is very error prone, since we are trying to guess\n  // if it is a safari browser from the first occurence between\n  // chrome or safari.\n  //\n  // The chrome user agent contains the first ocurrence\n  // as the 'chrome/version' and later the 'safari/version'.\n  var checkSafari = /(\\bChrome\\b|\\bSafari\\b)\\//.exec(navigator.userAgent);\n  var isSafariDesktop = checkSafari != null && checkSafari[1] != \"Chrome\" && /\\biPod\\b|\\biPad\\b/g.exec(navigator.userAgent) == null;\n\n  // If we are not in safari desktop, let the browser control\n  // the focus\n  if (!isSafariDesktop) return;\n\n  var x = tabbable.indexOf(document.activeElement);\n\n  if (x > -1) {\n    x += shiftKey ? -1 : 1;\n  }\n\n  target = tabbable[x];\n\n  // If the tabbable element does not exist,\n  // focus head/tail based on shiftKey\n  if (typeof target === \"undefined\") {\n    event.preventDefault();\n    target = shiftKey ? tail : head;\n    target.focus();\n    return;\n  }\n\n  event.preventDefault();\n\n  target.focus();\n}\nmodule.exports = exports[\"default\"];","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  var printWarning = function printWarning(format, args) {\n    var len = arguments.length;\n    args = new Array(len > 1 ? len - 1 : 0);\n    for (var key = 1; key < len; key++) {\n      args[key - 1] = arguments[key];\n    }\n    var argIndex = 0;\n    var message = 'Warning: ' +\n      format.replace(/%s/g, function() {\n        return args[argIndex++];\n      });\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  }\n\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n          '`warning(condition, format, ...args)` requires a warning ' +\n          'message argument'\n      );\n    }\n    if (!condition) {\n      printWarning.apply(null, [format].concat(args));\n    }\n  };\n}\n\nmodule.exports = warning;\n","/*!\n  Copyright (c) 2015 Jed Watson.\n  Based on code that is Copyright 2013-2015, Facebook, Inc.\n  All rights reserved.\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar canUseDOM = !!(\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.document &&\n\t\twindow.document.createElement\n\t);\n\n\tvar ExecutionEnvironment = {\n\n\t\tcanUseDOM: canUseDOM,\n\n\t\tcanUseWorkers: typeof Worker !== 'undefined',\n\n\t\tcanUseEventListeners:\n\t\t\tcanUseDOM && !!(window.addEventListener || window.attachEvent),\n\n\t\tcanUseViewport: canUseDOM && !!window.screen\n\n\t};\n\n\tif (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\tdefine(function () {\n\t\t\treturn ExecutionEnvironment;\n\t\t});\n\t} else if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = ExecutionEnvironment;\n\t} else {\n\t\twindow.ExecutionEnvironment = ExecutionEnvironment;\n\t}\n\n}());\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dumpClassLists = dumpClassLists;\nvar htmlClassList = {};\nvar docBodyClassList = {};\n\nfunction dumpClassLists() {\n  if (process.env.NODE_ENV !== \"production\") {\n    var classes = document.getElementsByTagName(\"html\")[0].className;\n    var buffer = \"Show tracked classes:\\n\\n\";\n\n    buffer += \"<html /> (\" + classes + \"):\\n\";\n    for (var x in htmlClassList) {\n      buffer += \"  \" + x + \" \" + htmlClassList[x] + \"\\n\";\n    }\n\n    classes = document.body.className;\n\n    // eslint-disable-next-line max-len\n    buffer += \"\\n\\ndoc.body (\" + classes + \"):\\n\";\n    for (var _x in docBodyClassList) {\n      buffer += \"  \" + _x + \" \" + docBodyClassList[_x] + \"\\n\";\n    }\n\n    buffer += \"\\n\";\n\n    // eslint-disable-next-line no-console\n    console.log(buffer);\n  }\n}\n\n/**\n * Track the number of reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar incrementReference = function incrementReference(poll, className) {\n  if (!poll[className]) {\n    poll[className] = 0;\n  }\n  poll[className] += 1;\n  return className;\n};\n\n/**\n * Drop the reference of a class.\n * @param {object} poll The poll to receive the reference.\n * @param {string} className The class name.\n * @return {string}\n */\nvar decrementReference = function decrementReference(poll, className) {\n  if (poll[className]) {\n    poll[className] -= 1;\n  }\n  return className;\n};\n\n/**\n * Track a class and add to the given class list.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be tracked.\n */\nvar trackClass = function trackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    incrementReference(poll, className);\n    classListRef.add(className);\n  });\n};\n\n/**\n * Untrack a class and remove from the given class list if the reference\n * reaches 0.\n * @param {Object} classListRef A class list of an element.\n * @param {Object} poll         The poll to be used.\n * @param {Array}  classes      The list of classes to be untracked.\n */\nvar untrackClass = function untrackClass(classListRef, poll, classes) {\n  classes.forEach(function (className) {\n    decrementReference(poll, className);\n    poll[className] === 0 && classListRef.remove(className);\n  });\n};\n\n/**\n * Public inferface to add classes to the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar add = exports.add = function add(element, classString) {\n  return trackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};\n\n/**\n * Public inferface to remove classes from the document.body.\n * @param {string} bodyClass The class string to be added.\n *                           It may contain more then one class\n *                           with ' ' as separator.\n */\nvar remove = exports.remove = function remove(element, classString) {\n  return untrackClass(element.classList, element.nodeName.toLowerCase() == \"html\" ? htmlClassList : docBodyClassList, classString.split(\" \"));\n};","\"use strict\";\n\nvar _portalOpenInstances = require(\"./portalOpenInstances\");\n\nvar _portalOpenInstances2 = _interopRequireDefault(_portalOpenInstances);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Body focus trap see Issue #742\n\nvar before = void 0,\n    after = void 0,\n    instances = [];\n\nfunction focusContent() {\n  if (instances.length === 0) {\n    if (process.env.NODE_ENV !== \"production\") {\n      // eslint-disable-next-line no-console\n      console.warn(\"React-Modal: Open instances > 0 expected\");\n    }\n    return;\n  }\n  instances[instances.length - 1].focusContent();\n}\n\nfunction bodyTrap(eventType, openInstances) {\n  if (!before || !after) {\n    before = document.createElement(\"div\");\n    before.setAttribute(\"data-react-modal-body-trap\", \"\");\n    before.style.position = \"absolute\";\n    before.style.opacity = \"0\";\n    before.setAttribute(\"tabindex\", \"0\");\n    before.addEventListener(\"focus\", focusContent);\n    after = before.cloneNode();\n    after.addEventListener(\"focus\", focusContent);\n  }\n\n  instances = openInstances;\n\n  if (instances.length > 0) {\n    // Add focus trap\n    if (document.body.firstChild !== before) {\n      document.body.insertBefore(before, document.body.firstChild);\n    }\n    if (document.body.lastChild !== after) {\n      document.body.appendChild(after);\n    }\n  } else {\n    // Remove focus trap\n    if (before.parentElement) {\n      before.parentElement.removeChild(before);\n    }\n    if (after.parentElement) {\n      after.parentElement.removeChild(after);\n    }\n  }\n}\n\n_portalOpenInstances2.default.subscribe(bodyTrap);","module.exports = require(\"regenerator-runtime\");\n","import assign from 'object-assign';\n\nimport { store } from './helpers';\n\nexport const MENU_SHOW = 'REACT_CONTEXTMENU_SHOW';\nexport const MENU_HIDE = 'REACT_CONTEXTMENU_HIDE';\n\n\nexport function dispatchGlobalEvent(eventName, opts, target = window) {\n  // Compatibale with IE\n  // @see http://stackoverflow.com/questions/26596123/internet-explorer-9-10-11-event-constructor-doesnt-work\n  let event;\n\n  if (typeof window.CustomEvent === 'function') {\n    event = new window.CustomEvent(eventName, { detail: opts });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(eventName, false, true, opts);\n  }\n\n  if (target) {\n    target.dispatchEvent(event);\n    assign(store, opts);\n  }\n}\n\nexport function showMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_SHOW, assign({}, opts, { type: MENU_SHOW }), target);\n}\n\nexport function hideMenu(opts = {}, target) {\n  dispatchGlobalEvent(MENU_HIDE, assign({}, opts, { type: MENU_HIDE }), target);\n}\n","export function callIfExists(func, ...args) {\n  return (typeof func === 'function') && func(...args);\n}\n\nexport function hasOwnProp(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport function uniqueId() {\n  return Math.random().toString(36).substring(7);\n}\n\nexport const store = {};\n\nexport const canUseDOM = Boolean(\n  typeof window !== 'undefined' && window.document && window.document.createElement\n);\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n\r\n  // Remove event specific arrays for event types that no\r\n  // one is subscribed for to avoid memory leak.\r\n  if (callbacks.length === 0) {\r\n    delete this._callbacks['$' + event];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  var args = new Array(arguments.length - 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    args[i - 1] = arguments[i];\r\n  }\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n"],"sourceRoot":""}